ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"sockets.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.get_socket,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv5-sp-d16
  24              	get_socket:
  25              	.LFB143:
  26              		.file 1 "Middlewares/Third_Party/LwIP/src/api/sockets.c"
   1:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
   2:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @file
   3:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Sockets BSD-Like API module
   4:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
   5:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @defgroup socket Socket API
   6:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @ingroup sequential_api
   7:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * BSD-style socket API.\n
   8:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Thread-safe, to be called from non-TCPIP threads only.\n
   9:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Can be activated by defining @ref LWIP_SOCKET to 1.\n
  10:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Header is in posix/sys/socket.h\b
  11:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
  12:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
  13:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /*
  14:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Copyright (c) 2001-2004 Swedish Institute of Computer Science.
  15:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * All rights reserved.
  16:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
  17:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Redistribution and use in source and binary forms, with or without modification,
  18:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * are permitted provided that the following conditions are met:
  19:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
  20:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * 1. Redistributions of source code must retain the above copyright notice,
  21:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *    this list of conditions and the following disclaimer.
  22:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  23:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *    this list of conditions and the following disclaimer in the documentation
  24:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *    and/or other materials provided with the distribution.
  25:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * 3. The name of the author may not be used to endorse or promote products
  26:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *    derived from this software without specific prior written permission.
  27:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
  28:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR IMPLIED
  29:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
  31:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  32:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 2


  33:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  34:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  35:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
  36:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY
  37:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * OF SUCH DAMAGE.
  38:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
  39:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * This file is part of the lwIP TCP/IP stack.
  40:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
  41:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Author: Adam Dunkels <adam@sics.se>
  42:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
  43:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Improved by Marc Boucher <marc@mbsi.ca> and David Haas <dhaas@alum.rpi.edu>
  44:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
  45:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
  46:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
  47:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/opt.h"
  48:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
  49:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SOCKET /* don't build if not configured for use in lwipopts.h */
  50:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
  51:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/sockets.h"
  52:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/api.h"
  53:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/sys.h"
  54:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/igmp.h"
  55:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/inet.h"
  56:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/tcp.h"
  57:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/raw.h"
  58:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/udp.h"
  59:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/memp.h"
  60:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/pbuf.h"
  61:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/priv/tcpip_priv.h"
  62:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_CHECKSUM_ON_COPY
  63:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/inet_chksum.h"
  64:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
  65:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include <string.h>
  66:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
  67:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* If the netconn API is not required publicly, then we include the necessary
  68:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    files here to get the implementation */
  69:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_NETCONN
  70:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #undef LWIP_NETCONN
  71:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_NETCONN 1
  72:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "api_msg.c"
  73:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "api_lib.c"
  74:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "netbuf.c"
  75:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #undef LWIP_NETCONN
  76:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_NETCONN 0
  77:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
  78:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
  79:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4
  80:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IP4ADDR_PORT_TO_SOCKADDR(sin, ipaddr, port) do { \
  81:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       (sin)->sin_len = sizeof(struct sockaddr_in); \
  82:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       (sin)->sin_family = AF_INET; \
  83:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       (sin)->sin_port = lwip_htons((port)); \
  84:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       inet_addr_from_ipaddr(&(sin)->sin_addr, ipaddr); \
  85:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       memset((sin)->sin_zero, 0, SIN_ZERO_LEN); }while(0)
  86:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCKADDR4_TO_IP4ADDR_PORT(sin, ipaddr, port) do { \
  87:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     inet_addr_to_ipaddr(ip_2_ip4(ipaddr), &((sin)->sin_addr)); \
  88:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     (port) = lwip_ntohs((sin)->sin_port); }while(0)
  89:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 3


  90:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
  91:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV6
  92:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IP6ADDR_PORT_TO_SOCKADDR(sin6, ipaddr, port) do { \
  93:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       (sin6)->sin6_len = sizeof(struct sockaddr_in6); \
  94:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       (sin6)->sin6_family = AF_INET6; \
  95:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       (sin6)->sin6_port = lwip_htons((port)); \
  96:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       (sin6)->sin6_flowinfo = 0; \
  97:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       inet6_addr_from_ip6addr(&(sin6)->sin6_addr, ipaddr); \
  98:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       (sin6)->sin6_scope_id = 0; }while(0)
  99:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCKADDR6_TO_IP6ADDR_PORT(sin6, ipaddr, port) do { \
 100:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     inet6_addr_to_ip6addr(ip_2_ip6(ipaddr), &((sin6)->sin6_addr)); \
 101:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     (port) = lwip_ntohs((sin6)->sin6_port); }while(0)
 102:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV6 */
 103:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 104:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4 && LWIP_IPV6
 105:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void sockaddr_to_ipaddr_port(const struct sockaddr* sockaddr, ip_addr_t* ipaddr, u16_t* port
 106:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 107:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IS_SOCK_ADDR_LEN_VALID(namelen)  (((namelen) == sizeof(struct sockaddr_in)) || \
 108:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                          ((namelen) == sizeof(struct sockaddr_in6)))
 109:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IS_SOCK_ADDR_TYPE_VALID(name)    (((name)->sa_family == AF_INET) || \
 110:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                          ((name)->sa_family == AF_INET6))
 111:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCK_ADDR_TYPE_MATCH(name, sock) \
 112:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        ((((name)->sa_family == AF_INET) && !(NETCONNTYPE_ISIPV6((sock)->conn->type))) || \
 113:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        (((name)->sa_family == AF_INET6) && (NETCONNTYPE_ISIPV6((sock)->conn->type))))
 114:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IPADDR_PORT_TO_SOCKADDR(sockaddr, ipaddr, port) do { \
 115:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (IP_IS_V6(ipaddr)) { \
 116:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       IP6ADDR_PORT_TO_SOCKADDR((struct sockaddr_in6*)(void*)(sockaddr), ip_2_ip6(ipaddr), port); \
 117:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else { \
 118:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       IP4ADDR_PORT_TO_SOCKADDR((struct sockaddr_in*)(void*)(sockaddr), ip_2_ip4(ipaddr), port); \
 119:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } } while(0)
 120:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCKADDR_TO_IPADDR_PORT(sockaddr, ipaddr, port) sockaddr_to_ipaddr_port(sockaddr, ipaddr, &
 121:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define DOMAIN_TO_NETCONN_TYPE(domain, type) (((domain) == AF_INET) ? \
 122:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   (type) : (enum netconn_type)((type) | NETCONN_TYPE_IPV6))
 123:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #elif LWIP_IPV6 /* LWIP_IPV4 && LWIP_IPV6 */
 124:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IS_SOCK_ADDR_LEN_VALID(namelen)  ((namelen) == sizeof(struct sockaddr_in6))
 125:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IS_SOCK_ADDR_TYPE_VALID(name)    ((name)->sa_family == AF_INET6)
 126:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCK_ADDR_TYPE_MATCH(name, sock) 1
 127:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IPADDR_PORT_TO_SOCKADDR(sockaddr, ipaddr, port) \
 128:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         IP6ADDR_PORT_TO_SOCKADDR((struct sockaddr_in6*)(void*)(sockaddr), ip_2_ip6(ipaddr), port)
 129:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCKADDR_TO_IPADDR_PORT(sockaddr, ipaddr, port) \
 130:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         SOCKADDR6_TO_IP6ADDR_PORT((const struct sockaddr_in6*)(const void*)(sockaddr), ipaddr, port
 131:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define DOMAIN_TO_NETCONN_TYPE(domain, netconn_type) (netconn_type)
 132:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /*-> LWIP_IPV4: LWIP_IPV4 && LWIP_IPV6 */
 133:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IS_SOCK_ADDR_LEN_VALID(namelen)  ((namelen) == sizeof(struct sockaddr_in))
 134:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IS_SOCK_ADDR_TYPE_VALID(name)    ((name)->sa_family == AF_INET)
 135:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCK_ADDR_TYPE_MATCH(name, sock) 1
 136:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IPADDR_PORT_TO_SOCKADDR(sockaddr, ipaddr, port) \
 137:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         IP4ADDR_PORT_TO_SOCKADDR((struct sockaddr_in*)(void*)(sockaddr), ip_2_ip4(ipaddr), port)
 138:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCKADDR_TO_IPADDR_PORT(sockaddr, ipaddr, port) \
 139:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         SOCKADDR4_TO_IP4ADDR_PORT((const struct sockaddr_in*)(const void*)(sockaddr), ipaddr, port)
 140:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define DOMAIN_TO_NETCONN_TYPE(domain, netconn_type) (netconn_type)
 141:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV6 */
 142:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 143:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IS_SOCK_ADDR_TYPE_VALID_OR_UNSPEC(name)    (((name)->sa_family == AF_UNSPEC) || \
 144:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                                     IS_SOCK_ADDR_TYPE_VALID(name))
 145:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCK_ADDR_TYPE_MATCH_OR_UNSPEC(name, sock) (((name)->sa_family == AF_UNSPEC) || \
 146:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                                     SOCK_ADDR_TYPE_MATCH(name, sock))
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 4


 147:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IS_SOCK_ADDR_ALIGNED(name)      ((((mem_ptr_t)(name)) % 4) == 0)
 148:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 149:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 150:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SOCKOPT_CHECK_OPTLEN(optlen, opttype) do { if ((optlen) < sizeof(opttype)) { return EI
 151:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, optlen, opttype) do { \
 152:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SOCKOPT_CHECK_OPTLEN(optlen, opttype); \
 153:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if ((sock)->conn == NULL) { return EINVAL; } }while(0)
 154:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, optlen, opttype) do { \
 155:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SOCKOPT_CHECK_OPTLEN(optlen, opttype); \
 156:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (((sock)->conn == NULL) || ((sock)->conn->pcb.tcp == NULL)) { return EINVAL; } }while(0)
 157:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, opttype, netconntype) do { \
 158:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, optlen, opttype); \
 159:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (NETCONNTYPE_GROUP(netconn_type((sock)->conn)) != netconntype) { return ENOPROTOOPT; } }while(
 160:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 161:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 162:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SETGETSOCKOPT_DATA_VAR_REF(name)     API_VAR_REF(name)
 163:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SETGETSOCKOPT_DATA_VAR_DECLARE(name) API_VAR_DECLARE(struct lwip_setgetsockopt_data, n
 164:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SETGETSOCKOPT_DATA_VAR_FREE(name)    API_VAR_FREE(MEMP_SOCKET_SETGETSOCKOPT_DATA, name
 165:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MPU_COMPATIBLE
 166:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SETGETSOCKOPT_DATA_VAR_ALLOC(name, sock) do { \
 167:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   name = (struct lwip_setgetsockopt_data *)memp_malloc(MEMP_SOCKET_SETGETSOCKOPT_DATA); \
 168:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (name == NULL) { \
 169:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, ENOMEM); \
 170:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1; \
 171:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } }while(0)
 172:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_MPU_COMPATIBLE */
 173:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SETGETSOCKOPT_DATA_VAR_ALLOC(name, sock)
 174:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MPU_COMPATIBLE */
 175:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 176:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_SNDRCVTIMEO_NONSTANDARD
 177:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SO_SNDRCVTIMEO_OPTTYPE int
 178:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SO_SNDRCVTIMEO_SET(optval, val) (*(int *)(optval) = (val))
 179:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SO_SNDRCVTIMEO_GET_MS(optval)   ((s32_t)*(const int*)(optval))
 180:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else
 181:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SO_SNDRCVTIMEO_OPTTYPE struct timeval
 182:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SO_SNDRCVTIMEO_SET(optval, val)  do { \
 183:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   s32_t loc = (val); \
 184:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ((struct timeval *)(optval))->tv_sec = (loc) / 1000U; \
 185:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ((struct timeval *)(optval))->tv_usec = ((loc) % 1000U) * 1000U; }while(0)
 186:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SO_SNDRCVTIMEO_GET_MS(optval) ((((const struct timeval *)(optval))->tv_sec * 1000U) + 
 187:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
 188:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 189:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define NUM_SOCKETS MEMP_NUM_NETCONN
 190:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 191:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** This is overridable for the rare case where more than 255 threads
 192:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * select on the same socket...
 193:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 194:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #ifndef SELWAIT_T
 195:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SELWAIT_T u8_t
 196:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
 197:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 198:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** Contains all internal pointers and states used for a socket */
 199:Middlewares/Third_Party/LwIP/src/api/sockets.c **** struct lwip_sock {
 200:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** sockets currently are built on netconns, each socket has one netconn */
 201:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct netconn *conn;
 202:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** data that was left from the previous read */
 203:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   void *lastdata;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 5


 204:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** offset in the data that was left from the previous read */
 205:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t lastoffset;
 206:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** number of times data was received, set by event_callback(),
 207:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       tested by the receive and select functions */
 208:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   s16_t rcvevent;
 209:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** number of times data was ACKed (free send buffer), set by event_callback(),
 210:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       tested by select */
 211:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t sendevent;
 212:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** error happened for this socket, set by event_callback(), tested by select */
 213:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t errevent;
 214:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** last error that occurred on this socket (in fact, all our errnos fit into an u8_t) */
 215:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t err;
 216:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** counter of how many threads are waiting for this socket using select */
 217:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SELWAIT_T select_waiting;
 218:Middlewares/Third_Party/LwIP/src/api/sockets.c **** };
 219:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 220:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
 221:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SELECT_SEM_T        sys_sem_t*
 222:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SELECT_SEM_PTR(sem) (sem)
 223:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_NETCONN_SEM_PER_THREAD */
 224:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SELECT_SEM_T        sys_sem_t
 225:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SELECT_SEM_PTR(sem) (&(sem))
 226:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETCONN_SEM_PER_THREAD */
 227:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 228:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** Description for a task waiting in select */
 229:Middlewares/Third_Party/LwIP/src/api/sockets.c **** struct lwip_select_cb {
 230:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** Pointer to the next waiting task */
 231:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_select_cb *next;
 232:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** Pointer to the previous waiting task */
 233:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_select_cb *prev;
 234:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** readset passed to select */
 235:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   fd_set *readset;
 236:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** writeset passed to select */
 237:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   fd_set *writeset;
 238:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** unimplemented: exceptset passed to select */
 239:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   fd_set *exceptset;
 240:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** don't signal the same semaphore twice: set to 1 when signalled */
 241:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int sem_signalled;
 242:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** semaphore to wake up a task waiting for select */
 243:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SELECT_SEM_T sem;
 244:Middlewares/Third_Party/LwIP/src/api/sockets.c **** };
 245:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 246:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** A struct sockaddr replacement that has the same alignment as sockaddr_in/
 247:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *  sockaddr_in6 if instantiated.
 248:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 249:Middlewares/Third_Party/LwIP/src/api/sockets.c **** union sockaddr_aligned {
 250:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    struct sockaddr sa;
 251:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV6
 252:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    struct sockaddr_in6 sin6;
 253:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV6 */
 254:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4
 255:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    struct sockaddr_in sin;
 256:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 */
 257:Middlewares/Third_Party/LwIP/src/api/sockets.c **** };
 258:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 259:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IGMP
 260:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Define the number of IPv4 multicast memberships, default is one per socket */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 6


 261:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #ifndef LWIP_SOCKET_MAX_MEMBERSHIPS
 262:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SOCKET_MAX_MEMBERSHIPS NUM_SOCKETS
 263:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
 264:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 265:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* This is to keep track of IP_ADD_MEMBERSHIP calls to drop the membership when
 266:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    a socket is closed */
 267:Middlewares/Third_Party/LwIP/src/api/sockets.c **** struct lwip_socket_multicast_pair {
 268:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** the socket */
 269:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock* sock;
 270:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** the interface address */
 271:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip4_addr_t if_addr;
 272:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** the group address */
 273:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip4_addr_t multi_addr;
 274:Middlewares/Third_Party/LwIP/src/api/sockets.c **** };
 275:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 276:Middlewares/Third_Party/LwIP/src/api/sockets.c **** struct lwip_socket_multicast_pair socket_ipv4_multicast_memberships[LWIP_SOCKET_MAX_MEMBERSHIPS];
 277:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 278:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static int  lwip_socket_register_membership(int s, const ip4_addr_t *if_addr, const ip4_addr_t *mul
 279:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void lwip_socket_unregister_membership(int s, const ip4_addr_t *if_addr, const ip4_addr_t *m
 280:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void lwip_socket_drop_registered_memberships(int s);
 281:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IGMP */
 282:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 283:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** The global array of available sockets */
 284:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static struct lwip_sock sockets[NUM_SOCKETS];
 285:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** The global list of tasks waiting for select */
 286:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static struct lwip_select_cb *select_cb_list;
 287:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** This counter is increased from lwip_select when the list is changed
 288:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     and checked in event_callback to see if it has changed. */
 289:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static volatile int select_cb_ctr;
 290:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 291:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SOCKET_SET_ERRNO
 292:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #ifndef set_errno
 293:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define set_errno(err) do { if (err) { errno = (err); } } while(0)
 294:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
 295:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_SOCKET_SET_ERRNO */
 296:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define set_errno(err)
 297:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SOCKET_SET_ERRNO */
 298:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 299:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define sock_set_errno(sk, e) do { \
 300:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   const int sockerr = (e); \
 301:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sk->err = (u8_t)sockerr; \
 302:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   set_errno(sockerr); \
 303:Middlewares/Third_Party/LwIP/src/api/sockets.c **** } while (0)
 304:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 305:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Forward declaration of some functions */
 306:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void event_callback(struct netconn *conn, enum netconn_evt evt, u16_t len);
 307:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_TCPIP_CORE_LOCKING
 308:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void lwip_getsockopt_callback(void *arg);
 309:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void lwip_setsockopt_callback(void *arg);
 310:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
 311:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static u8_t lwip_getsockopt_impl(int s, int level, int optname, void *optval, socklen_t *optlen);
 312:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static u8_t lwip_setsockopt_impl(int s, int level, int optname, const void *optval, socklen_t optle
 313:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 314:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4 && LWIP_IPV6
 315:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void
 316:Middlewares/Third_Party/LwIP/src/api/sockets.c **** sockaddr_to_ipaddr_port(const struct sockaddr* sockaddr, ip_addr_t* ipaddr, u16_t* port)
 317:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 7


 318:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if ((sockaddr->sa_family) == AF_INET6) {
 319:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SOCKADDR6_TO_IP6ADDR_PORT((const struct sockaddr_in6*)(const void*)(sockaddr), ipaddr, *port);
 320:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ipaddr->type = IPADDR_TYPE_V6;
 321:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
 322:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SOCKADDR4_TO_IP4ADDR_PORT((const struct sockaddr_in*)(const void*)(sockaddr), ipaddr, *port);
 323:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ipaddr->type = IPADDR_TYPE_V4;
 324:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 325:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 326:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 && LWIP_IPV6 */
 327:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 328:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** LWIP_NETCONN_SEM_PER_THREAD==1: initialize thread-local semaphore */
 329:Middlewares/Third_Party/LwIP/src/api/sockets.c **** void
 330:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_socket_thread_init(void)
 331:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 332:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    netconn_thread_init();
 333:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 334:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 335:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** LWIP_NETCONN_SEM_PER_THREAD==1: destroy thread-local semaphore */
 336:Middlewares/Third_Party/LwIP/src/api/sockets.c **** void
 337:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_socket_thread_cleanup(void)
 338:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 339:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    netconn_thread_cleanup();
 340:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 341:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 342:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
 343:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Map a externally used socket index to the internal socket representation.
 344:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
 345:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param s externally used socket index
 346:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @return struct lwip_sock for the socket or NULL if not found
 347:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 348:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static struct lwip_sock *
 349:Middlewares/Third_Party/LwIP/src/api/sockets.c **** get_socket(int s)
 350:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
  27              		.loc 1 350 0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
  32              	.LVL0:
 351:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 352:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 353:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   s -= LWIP_SOCKET_OFFSET;
 354:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 355:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if ((s < 0) || (s >= NUM_SOCKETS)) {
  33              		.loc 1 355 0
  34 0000 0328     		cmp	r0, #3
  35 0002 0CD8     		bhi	.L7
 350:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
  36              		.loc 1 350 0
  37 0004 10B4     		push	{r4}
  38              	.LCFI0:
  39              		.cfi_def_cfa_offset 4
  40              		.cfi_offset 4, -4
 356:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("get_socket(%d): invalid\n", s + LWIP_SOCKET_OFFSET));
 357:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     set_errno(EBADF);
 358:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return NULL;
 359:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 8


 360:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 361:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = &sockets[s];
  41              		.loc 1 361 0
  42 0006 0B4C     		ldr	r4, .L9
  43 0008 8300     		lsls	r3, r0, #2
  44 000a 1918     		adds	r1, r3, r0
  45 000c 8A00     		lsls	r2, r1, #2
  46 000e 1146     		mov	r1, r2
  47 0010 2244     		add	r2, r2, r4
  48              	.LVL1:
 362:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 363:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock->conn) {
  49              		.loc 1 363 0
  50 0012 6358     		ldr	r3, [r4, r1]
  51 0014 4BB1     		cbz	r3, .L8
  52              	.LVL2:
  53              	.L1:
 364:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("get_socket(%d): not active\n", s + LWIP_SOCKET_OFFSET));
 365:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     set_errno(EBADF);
 366:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return NULL;
 367:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 368:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 369:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return sock;
 370:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
  54              		.loc 1 370 0
  55 0016 1046     		mov	r0, r2
  56              	.LVL3:
  57 0018 5DF8044B 		ldr	r4, [sp], #4
  58              	.LCFI1:
  59              		.cfi_restore 4
  60              		.cfi_def_cfa_offset 0
  61              	.LVL4:
  62 001c 7047     		bx	lr
  63              	.LVL5:
  64              	.L7:
 357:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return NULL;
  65              		.loc 1 357 0 discriminator 1
  66 001e 0922     		movs	r2, #9
  67 0020 054B     		ldr	r3, .L9+4
  68 0022 1A60     		str	r2, [r3]
 358:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
  69              		.loc 1 358 0 discriminator 1
  70 0024 0022     		movs	r2, #0
  71              		.loc 1 370 0 discriminator 1
  72 0026 1046     		mov	r0, r2
  73              	.LVL6:
  74 0028 7047     		bx	lr
  75              	.LVL7:
  76              	.L8:
  77              	.LCFI2:
  78              		.cfi_def_cfa_offset 4
  79              		.cfi_offset 4, -4
 365:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return NULL;
  80              		.loc 1 365 0 discriminator 1
  81 002a 0922     		movs	r2, #9
  82              	.LVL8:
  83 002c 024B     		ldr	r3, .L9+4
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 9


  84 002e 1A60     		str	r2, [r3]
 366:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
  85              		.loc 1 366 0 discriminator 1
  86 0030 0022     		movs	r2, #0
  87 0032 F0E7     		b	.L1
  88              	.L10:
  89              		.align	2
  90              	.L9:
  91 0034 00000000 		.word	.LANCHOR0
  92 0038 00000000 		.word	errno
  93              		.cfi_endproc
  94              	.LFE143:
  96              		.section	.text.tryget_socket,"ax",%progbits
  97              		.align	1
  98              		.syntax unified
  99              		.thumb
 100              		.thumb_func
 101              		.fpu fpv5-sp-d16
 103              	tryget_socket:
 104              	.LFB144:
 371:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 372:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
 373:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Same as get_socket but doesn't set errno
 374:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
 375:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param s externally used socket index
 376:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @return struct lwip_sock for the socket or NULL if not found
 377:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 378:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static struct lwip_sock *
 379:Middlewares/Third_Party/LwIP/src/api/sockets.c **** tryget_socket(int s)
 380:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 105              		.loc 1 380 0
 106              		.cfi_startproc
 107              		@ args = 0, pretend = 0, frame = 0
 108              		@ frame_needed = 0, uses_anonymous_args = 0
 109              		@ link register save eliminated.
 110              	.LVL9:
 381:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   s -= LWIP_SOCKET_OFFSET;
 382:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if ((s < 0) || (s >= NUM_SOCKETS)) {
 111              		.loc 1 382 0
 112 0000 0328     		cmp	r0, #3
 113 0002 0BD8     		bhi	.L13
 383:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return NULL;
 384:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 385:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sockets[s].conn) {
 114              		.loc 1 385 0
 115 0004 00EB8002 		add	r2, r0, r0, lsl #2
 116 0008 9300     		lsls	r3, r2, #2
 117 000a 064A     		ldr	r2, .L15
 118 000c D358     		ldr	r3, [r2, r3]
 119 000e 3BB1     		cbz	r3, .L14
 386:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return NULL;
 387:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 388:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return &sockets[s];
 120              		.loc 1 388 0
 121 0010 00EB8000 		add	r0, r0, r0, lsl #2
 122              	.LVL10:
 123 0014 8300     		lsls	r3, r0, #2
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 10


 124 0016 1046     		mov	r0, r2
 125 0018 1844     		add	r0, r0, r3
 126 001a 7047     		bx	lr
 127              	.LVL11:
 128              	.L13:
 383:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return NULL;
 129              		.loc 1 383 0
 130 001c 0020     		movs	r0, #0
 131              	.LVL12:
 132 001e 7047     		bx	lr
 133              	.LVL13:
 134              	.L14:
 386:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return NULL;
 135              		.loc 1 386 0
 136 0020 0020     		movs	r0, #0
 137              	.LVL14:
 389:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 138              		.loc 1 389 0
 139 0022 7047     		bx	lr
 140              	.L16:
 141              		.align	2
 142              	.L15:
 143 0024 00000000 		.word	.LANCHOR0
 144              		.cfi_endproc
 145              	.LFE144:
 147              		.section	.text.lwip_setsockopt_impl,"ax",%progbits
 148              		.align	1
 149              		.syntax unified
 150              		.thumb
 151              		.thumb_func
 152              		.fpu fpv5-sp-d16
 154              	lwip_setsockopt_impl:
 155              	.LFB171:
 390:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 391:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
 392:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Allocate a new socket for a given netconn.
 393:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
 394:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param newconn the netconn for which to allocate a socket
 395:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param accepted 1 if socket has been created by accept(),
 396:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *                 0 if socket has been created by socket()
 397:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @return the index of the new socket; -1 on error
 398:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 399:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static int
 400:Middlewares/Third_Party/LwIP/src/api/sockets.c **** alloc_socket(struct netconn *newconn, int accepted)
 401:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 402:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int i;
 403:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_DECL_PROTECT(lev);
 404:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 405:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* allocate a new socket identifier */
 406:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   for (i = 0; i < NUM_SOCKETS; ++i) {
 407:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Protect socket array */
 408:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_PROTECT(lev);
 409:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!sockets[i].conn) {
 410:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].conn       = newconn;
 411:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* The socket is not yet known to anyone, so no need to protect
 412:Middlewares/Third_Party/LwIP/src/api/sockets.c ****          after having marked it as used. */
 413:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       SYS_ARCH_UNPROTECT(lev);
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 11


 414:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].lastdata   = NULL;
 415:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].lastoffset = 0;
 416:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].rcvevent   = 0;
 417:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* TCP sendbuf is empty, but the socket is not yet writable until connected
 418:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        * (unless it has been created by accept()). */
 419:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].sendevent  = (NETCONNTYPE_GROUP(newconn->type) == NETCONN_TCP ? (accepted != 0) : 
 420:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].errevent   = 0;
 421:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].err        = 0;
 422:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].select_waiting = 0;
 423:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return i + LWIP_SOCKET_OFFSET;
 424:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 425:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_UNPROTECT(lev);
 426:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 427:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return -1;
 428:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 429:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 430:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** Free a socket. The socket's netconn must have been
 431:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * delete before!
 432:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
 433:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param sock the socket to free
 434:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param is_tcp != 0 for TCP sockets, used to free lastdata
 435:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 436:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void
 437:Middlewares/Third_Party/LwIP/src/api/sockets.c **** free_socket(struct lwip_sock *sock, int is_tcp)
 438:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 439:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   void *lastdata;
 440:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 441:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   lastdata         = sock->lastdata;
 442:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock->lastdata   = NULL;
 443:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock->lastoffset = 0;
 444:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock->err        = 0;
 445:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 446:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Protect socket array */
 447:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_SET(sock->conn, NULL);
 448:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* don't use 'sock' after this line, as another task might have allocated it */
 449:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 450:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (lastdata != NULL) {
 451:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (is_tcp) {
 452:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       pbuf_free((struct pbuf *)lastdata);
 453:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 454:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       netbuf_delete((struct netbuf *)lastdata);
 455:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 456:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 457:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 458:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 459:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Below this, the well-known socket functions are implemented.
 460:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Use google.com or opengroup.org to get a good description :-)
 461:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
 462:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Exceptions are documented!
 463:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 464:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 465:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 466:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_accept(int s, struct sockaddr *addr, socklen_t *addrlen)
 467:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 468:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock, *nsock;
 469:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct netconn *newconn;
 470:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip_addr_t naddr;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 12


 471:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t port = 0;
 472:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int newsock;
 473:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
 474:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_DECL_PROTECT(lev);
 475:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 476:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d)...\n", s));
 477:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 478:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 479:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 480:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 481:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 482:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (netconn_is_nonblocking(sock->conn) && (sock->rcvevent <= 0)) {
 483:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d): returning EWOULDBLOCK\n", s));
 484:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, EWOULDBLOCK);
 485:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 486:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 487:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 488:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* wait for a new connection */
 489:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netconn_accept(sock->conn, &newconn);
 490:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
 491:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d): netconn_acept failed, err=%d\n", s, err));
 492:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_TCP) {
 493:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, EOPNOTSUPP);
 494:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else if (err == ERR_CLSD) {
 495:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, EINVAL);
 496:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 497:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, err_to_errno(err));
 498:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 499:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 500:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 501:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("newconn != NULL", newconn != NULL);
 502:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 503:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   newsock = alloc_socket(newconn, 1);
 504:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (newsock == -1) {
 505:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     netconn_delete(newconn);
 506:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, ENFILE);
 507:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 508:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 509:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("invalid socket index", (newsock >= LWIP_SOCKET_OFFSET) && (newsock < NUM_SOCKETS + L
 510:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("newconn->callback == event_callback", newconn->callback == event_callback);
 511:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   nsock = &sockets[newsock - LWIP_SOCKET_OFFSET];
 512:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 513:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* See event_callback: If data comes in right away after an accept, even
 514:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    * though the server task might not have created a new socket yet.
 515:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    * In that case, newconn->socket is counted down (newconn->socket--),
 516:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    * so nsock->rcvevent is >= 1 here!
 517:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    */
 518:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_PROTECT(lev);
 519:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   nsock->rcvevent += (s16_t)(-1 - newconn->socket);
 520:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   newconn->socket = newsock;
 521:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_UNPROTECT(lev);
 522:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 523:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Note that POSIX only requires us to check addr is non-NULL. addrlen must
 524:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    * not be NULL if addr is valid.
 525:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    */
 526:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (addr != NULL) {
 527:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     union sockaddr_aligned tempaddr;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 13


 528:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* get the IP address and port of the remote host */
 529:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = netconn_peer(newconn, &naddr, &port);
 530:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (err != ERR_OK) {
 531:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d): netconn_peer failed, err=%d\n", s, err));
 532:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       netconn_delete(newconn);
 533:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       free_socket(nsock, 1);
 534:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, err_to_errno(err));
 535:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 536:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 537:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_ASSERT("addr valid but addrlen NULL", addrlen != NULL);
 538:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 539:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     IPADDR_PORT_TO_SOCKADDR(&tempaddr, &naddr, port);
 540:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (*addrlen > tempaddr.sa.sa_len) {
 541:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *addrlen = tempaddr.sa.sa_len;
 542:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 543:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     MEMCPY(addr, &tempaddr, *addrlen);
 544:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 545:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d) returning new sock=%d addr=", s, newsock));
 546:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ip_addr_debug_print_val(SOCKETS_DEBUG, naddr);
 547:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, (" port=%"U16_F"\n", port));
 548:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
 549:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d) returning new sock=%d", s, newsock));
 550:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 551:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 552:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, 0);
 553:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return newsock;
 554:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 555:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 556:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 557:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_bind(int s, const struct sockaddr *name, socklen_t namelen)
 558:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 559:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 560:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip_addr_t local_addr;
 561:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t local_port;
 562:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
 563:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 564:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 565:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 566:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 567:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 568:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 569:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!SOCK_ADDR_TYPE_MATCH(name, sock)) {
 570:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* sockaddr does not match socket type (IPv4/IPv6) */
 571:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(ERR_VAL));
 572:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 573:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 574:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 575:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* check size, family and alignment of 'name' */
 576:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ERROR("lwip_bind: invalid address", (IS_SOCK_ADDR_LEN_VALID(namelen) &&
 577:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              IS_SOCK_ADDR_TYPE_VALID(name) && IS_SOCK_ADDR_ALIGNED(name)),
 578:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 579:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(namelen);
 580:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 581:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SOCKADDR_TO_IPADDR_PORT(name, &local_addr, local_port);
 582:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_bind(%d, addr=", s));
 583:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip_addr_debug_print_val(SOCKETS_DEBUG, local_addr);
 584:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, (" port=%"U16_F")\n", local_port));
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 14


 585:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 586:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netconn_bind(sock->conn, &local_addr, local_port);
 587:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 588:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
 589:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_bind(%d) failed, err=%d\n", s, err));
 590:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
 591:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 592:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 593:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 594:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_bind(%d) succeeded\n", s));
 595:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, 0);
 596:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
 597:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 598:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 599:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 600:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_close(int s)
 601:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 602:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 603:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int is_tcp = 0;
 604:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
 605:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 606:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_close(%d)\n", s));
 607:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 608:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 609:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 610:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 611:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 612:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 613:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (sock->conn != NULL) {
 614:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     is_tcp = NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP;
 615:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
 616:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_ASSERT("sock->lastdata == NULL", sock->lastdata == NULL);
 617:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 618:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 619:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IGMP
 620:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* drop all possibly joined IGMP memberships */
 621:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   lwip_socket_drop_registered_memberships(s);
 622:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IGMP */
 623:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 624:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netconn_delete(sock->conn);
 625:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
 626:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
 627:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 628:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 629:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 630:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   free_socket(sock, is_tcp);
 631:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   set_errno(0);
 632:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
 633:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 634:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 635:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 636:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_connect(int s, const struct sockaddr *name, socklen_t namelen)
 637:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 638:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 639:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
 640:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 641:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 15


 642:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 643:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 644:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 645:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 646:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!SOCK_ADDR_TYPE_MATCH_OR_UNSPEC(name, sock)) {
 647:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* sockaddr does not match socket type (IPv4/IPv6) */
 648:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(ERR_VAL));
 649:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 650:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 651:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 652:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(namelen);
 653:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (name->sa_family == AF_UNSPEC) {
 654:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_connect(%d, AF_UNSPEC)\n", s));
 655:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = netconn_disconnect(sock->conn);
 656:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
 657:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ip_addr_t remote_addr;
 658:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     u16_t remote_port;
 659:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 660:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* check size, family and alignment of 'name' */
 661:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_ERROR("lwip_connect: invalid address", IS_SOCK_ADDR_LEN_VALID(namelen) &&
 662:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_TYPE_VALID_OR_UNSPEC(name) && IS_SOCK_ADDR_ALIGNED(name),
 663:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 664:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 665:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SOCKADDR_TO_IPADDR_PORT(name, &remote_addr, remote_port);
 666:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_connect(%d, addr=", s));
 667:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ip_addr_debug_print_val(SOCKETS_DEBUG, remote_addr);
 668:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, (" port=%"U16_F")\n", remote_port));
 669:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 670:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = netconn_connect(sock->conn, &remote_addr, remote_port);
 671:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 672:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 673:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
 674:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_connect(%d) failed, err=%d\n", s, err));
 675:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
 676:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 677:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 678:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 679:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_connect(%d) succeeded\n", s));
 680:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, 0);
 681:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
 682:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 683:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 684:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
 685:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Set a socket into listen mode.
 686:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * The socket may not have been used for another connection previously.
 687:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
 688:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param s the socket to set to listening mode
 689:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param backlog (ATTENTION: needs TCP_LISTEN_BACKLOG=1)
 690:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @return 0 on success, non-zero on failure
 691:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 692:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 693:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_listen(int s, int backlog)
 694:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 695:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 696:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
 697:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 698:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_listen(%d, backlog=%d)\n", s, backlog));
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 16


 699:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 700:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 701:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 702:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 703:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 704:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 705:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* limit the "backlog" parameter to fit in an u8_t */
 706:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   backlog = LWIP_MIN(LWIP_MAX(backlog, 0), 0xff);
 707:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 708:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netconn_listen_with_backlog(sock->conn, (u8_t)backlog);
 709:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 710:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
 711:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_listen(%d) failed, err=%d\n", s, err));
 712:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_TCP) {
 713:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, EOPNOTSUPP);
 714:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 715:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 716:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
 717:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 718:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 719:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 720:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, 0);
 721:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
 722:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 723:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 724:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 725:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_recvfrom(int s, void *mem, size_t len, int flags,
 726:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               struct sockaddr *from, socklen_t *fromlen)
 727:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 728:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 729:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   void             *buf = NULL;
 730:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct pbuf      *p;
 731:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t            buflen, copylen;
 732:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int              off = 0;
 733:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t             done = 0;
 734:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t            err;
 735:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 736:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom(%d, %p, %"SZT_F", 0x%x, ..)\n", s, mem, len, flags));
 737:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 738:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 739:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 740:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 741:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 742:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   do {
 743:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom: top while sock->lastdata=%p\n", sock->lastdata));
 744:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Check if there is data left from the last recv operation. */
 745:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->lastdata) {
 746:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       buf = sock->lastdata;
 747:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 748:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* If this is non-blocking call, then check first */
 749:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (((flags & MSG_DONTWAIT) || netconn_is_nonblocking(sock->conn)) &&
 750:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (sock->rcvevent <= 0)) {
 751:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (off > 0) {
 752:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* already received data, return that */
 753:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           sock_set_errno(sock, 0);
 754:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           return off;
 755:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 17


 756:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom(%d): returning EWOULDBLOCK\n", s));
 757:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock_set_errno(sock, EWOULDBLOCK);
 758:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return -1;
 759:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 760:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 761:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* No data was left from the previous operation, so we try to get
 762:Middlewares/Third_Party/LwIP/src/api/sockets.c ****          some from the network. */
 763:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP) {
 764:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         err = netconn_recv_tcp_pbuf(sock->conn, (struct pbuf **)&buf);
 765:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
 766:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         err = netconn_recv(sock->conn, (struct netbuf **)&buf);
 767:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 768:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom: netconn_recv err=%d, netbuf=%p\n",
 769:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         err, buf));
 770:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 771:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (err != ERR_OK) {
 772:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (off > 0) {
 773:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (err == ERR_CLSD) {
 774:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             /* closed but already received data, ensure select gets the FIN, too */
 775:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             event_callback(sock->conn, NETCONN_EVT_RCVPLUS, 0);
 776:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
 777:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* already received data, return that */
 778:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           sock_set_errno(sock, 0);
 779:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           return off;
 780:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 781:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* We should really do some error checking here. */
 782:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom(%d): buf == NULL, error is \"%s\"!\n",
 783:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           s, lwip_strerr(err)));
 784:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock_set_errno(sock, err_to_errno(err));
 785:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (err == ERR_CLSD) {
 786:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           return 0;
 787:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
 788:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           return -1;
 789:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 790:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 791:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_ASSERT("buf != NULL", buf != NULL);
 792:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->lastdata = buf;
 793:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 794:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 795:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP) {
 796:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       p = (struct pbuf *)buf;
 797:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 798:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       p = ((struct netbuf *)buf)->p;
 799:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 800:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     buflen = p->tot_len;
 801:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom: buflen=%"U16_F" len=%"SZT_F" off=%d sock->lastoffse
 802:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       buflen, len, off, sock->lastoffset));
 803:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 804:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     buflen -= sock->lastoffset;
 805:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 806:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (len > buflen) {
 807:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       copylen = buflen;
 808:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 809:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       copylen = (u16_t)len;
 810:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 811:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 812:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* copy the contents of the received buffer into
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 18


 813:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     the supplied memory pointer mem */
 814:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     pbuf_copy_partial(p, (u8_t*)mem + off, copylen, sock->lastoffset);
 815:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 816:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     off += copylen;
 817:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 818:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP) {
 819:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_ASSERT("invalid copylen, len would underflow", len >= copylen);
 820:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       len -= copylen;
 821:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((len <= 0) ||
 822:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (p->flags & PBUF_FLAG_PUSH) ||
 823:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (sock->rcvevent <= 0) ||
 824:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           ((flags & MSG_PEEK) != 0)) {
 825:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         done = 1;
 826:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 827:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 828:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       done = 1;
 829:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 830:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 831:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Check to see from where the data was.*/
 832:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (done) {
 833:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !SOCKETS_DEBUG
 834:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (from && fromlen)
 835:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* !SOCKETS_DEBUG */
 836:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       {
 837:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         u16_t port;
 838:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ip_addr_t tmpaddr;
 839:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ip_addr_t *fromaddr;
 840:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         union sockaddr_aligned saddr;
 841:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom(%d): addr=", s));
 842:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP) {
 843:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           fromaddr = &tmpaddr;
 844:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           netconn_getaddr(sock->conn, fromaddr, &port, 0);
 845:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
 846:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           port = netbuf_fromport((struct netbuf *)buf);
 847:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           fromaddr = netbuf_fromaddr((struct netbuf *)buf);
 848:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 849:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         IPADDR_PORT_TO_SOCKADDR(&saddr, fromaddr, port);
 850:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ip_addr_debug_print(SOCKETS_DEBUG, fromaddr);
 851:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, (" port=%"U16_F" len=%d\n", port, off));
 852:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if SOCKETS_DEBUG
 853:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (from && fromlen)
 854:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* SOCKETS_DEBUG */
 855:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         {
 856:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (*fromlen > saddr.sa.sa_len) {
 857:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             *fromlen = saddr.sa.sa_len;
 858:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
 859:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           MEMCPY(from, &saddr, *fromlen);
 860:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 861:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 862:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 863:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 864:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* If we don't peek the incoming message... */
 865:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if ((flags & MSG_PEEK) == 0) {
 866:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* If this is a TCP socket, check if there is data left in the
 867:Middlewares/Third_Party/LwIP/src/api/sockets.c ****          buffer. If so, it should be saved in the sock structure for next
 868:Middlewares/Third_Party/LwIP/src/api/sockets.c ****          time around. */
 869:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP) && (buflen - copylen > 0)) {
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 19


 870:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->lastdata = buf;
 871:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->lastoffset += copylen;
 872:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom: lastdata now netbuf=%p\n", buf));
 873:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
 874:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->lastdata = NULL;
 875:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->lastoffset = 0;
 876:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom: deleting netbuf=%p\n", buf));
 877:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP) {
 878:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           pbuf_free((struct pbuf *)buf);
 879:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
 880:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           netbuf_delete((struct netbuf *)buf);
 881:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 882:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         buf = NULL;
 883:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 884:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 885:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } while (!done);
 886:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 887:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, 0);
 888:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return off;
 889:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 890:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 891:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 892:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_read(int s, void *mem, size_t len)
 893:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 894:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_recvfrom(s, mem, len, 0, NULL, NULL);
 895:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 896:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 897:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 898:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_recv(int s, void *mem, size_t len, int flags)
 899:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 900:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_recvfrom(s, mem, len, flags, NULL, NULL);
 901:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 902:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 903:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 904:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_send(int s, const void *data, size_t size, int flags)
 905:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 906:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 907:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
 908:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t write_flags;
 909:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   size_t written;
 910:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 911:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_send(%d, data=%p, size=%"SZT_F", flags=0x%x)\n",
 912:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                               s, data, size, flags));
 913:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 914:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 915:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 916:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 917:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 918:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 919:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_TCP) {
 920:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if (LWIP_UDP || LWIP_RAW)
 921:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return lwip_sendto(s, data, size, flags, NULL, 0);
 922:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* (LWIP_UDP || LWIP_RAW) */
 923:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(ERR_ARG));
 924:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 925:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* (LWIP_UDP || LWIP_RAW) */
 926:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 20


 927:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 928:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   write_flags = NETCONN_COPY |
 929:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_MORE)     ? NETCONN_MORE      : 0) |
 930:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_DONTWAIT) ? NETCONN_DONTBLOCK : 0);
 931:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   written = 0;
 932:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netconn_write_partly(sock->conn, data, size, write_flags, &written);
 933:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 934:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_send(%d) err=%d written=%"SZT_F"\n", s, err, written));
 935:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, err_to_errno(err));
 936:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return (err == ERR_OK ? (int)written : -1);
 937:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 938:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 939:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 940:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_sendmsg(int s, const struct msghdr *msg, int flags)
 941:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 942:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 943:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int i;
 944:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
 945:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t write_flags;
 946:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   size_t written;
 947:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
 948:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int size = 0;
 949:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err = ERR_OK;
 950:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 951:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 952:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 953:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 954:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 955:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 956:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ERROR("lwip_sendmsg: invalid msghdr", msg != NULL,
 957:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 958:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 959:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(msg->msg_control);
 960:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(msg->msg_controllen);
 961:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(msg->msg_flags);
 962:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ERROR("lwip_sendmsg: invalid msghdr iov", (msg->msg_iov != NULL && msg->msg_iovlen != 0),
 963:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 964:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 965:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP) {
 966:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
 967:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     write_flags = NETCONN_COPY |
 968:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_MORE)     ? NETCONN_MORE      : 0) |
 969:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_DONTWAIT) ? NETCONN_DONTBLOCK : 0);
 970:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 971:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     for (i = 0; i < msg->msg_iovlen; i++) {
 972:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       written = 0;
 973:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = netconn_write_partly(sock->conn, msg->msg_iov[i].iov_base, msg->msg_iov[i].iov_len, wri
 974:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (err == ERR_OK) {
 975:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         size += written;
 976:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* check that the entire IO vector was accepected, if not return a partial write */
 977:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (written != msg->msg_iov[i].iov_len)
 978:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
 979:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 980:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* none of this IO vector was accepted, but previous was, return partial write and conceal ER
 981:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       else if (err == ERR_WOULDBLOCK && size > 0) {
 982:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         err = ERR_OK;
 983:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* let ERR_WOULDBLOCK persist on the netconn since we are returning ERR_OK */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 21


 984:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
 985:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
 986:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         size = -1;
 987:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
 988:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 989:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 990:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
 991:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return size;
 992:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_TCP */
 993:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(ERR_ARG));
 994:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 995:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCP */
 996:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 997:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* else, UDP and RAW NETCONNs */
 998:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDP || LWIP_RAW
 999:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   {
1000:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     struct netbuf *chain_buf;
1001:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1002:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_UNUSED_ARG(flags);
1003:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_ERROR("lwip_sendmsg: invalid msghdr name", (((msg->msg_name == NULL) && (msg->msg_namelen 
1004:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_LEN_VALID(msg->msg_namelen)) ,
1005:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
1006:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1007:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* initialize chain buffer with destination */
1008:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     chain_buf = netbuf_new();
1009:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!chain_buf) {
1010:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, err_to_errno(ERR_MEM));
1011:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
1012:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1013:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (msg->msg_name) {
1014:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u16_t remote_port;
1015:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       SOCKADDR_TO_IPADDR_PORT((const struct sockaddr *)msg->msg_name, &chain_buf->addr, remote_port
1016:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       netbuf_fromport(chain_buf) = remote_port;
1017:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1018:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETIF_TX_SINGLE_PBUF
1019:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     for (i = 0; i < msg->msg_iovlen; i++) {
1020:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       size += msg->msg_iov[i].iov_len;
1021:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1022:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Allocate a new netbuf and copy the data into it. */
1023:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (netbuf_alloc(chain_buf, (u16_t)size) == NULL) {
1024:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        err = ERR_MEM;
1025:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
1026:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* flatten the IO vectors */
1027:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       size_t offset = 0;
1028:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       for (i = 0; i < msg->msg_iovlen; i++) {
1029:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         MEMCPY(&((u8_t*)chain_buf->p->payload)[offset], msg->msg_iov[i].iov_base, msg->msg_iov[i].i
1030:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         offset += msg->msg_iov[i].iov_len;
1031:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1032:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_CHECKSUM_ON_COPY
1033:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       {
1034:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* This can be improved by using LWIP_CHKSUM_COPY() and aggregating the checksum for each I
1035:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         u16_t chksum = ~inet_chksum_pbuf(chain_buf->p);
1036:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         netbuf_set_chksum(chain_buf, chksum);
1037:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1038:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_CHECKSUM_ON_COPY */
1039:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ERR_OK;
1040:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 22


1041:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_NETIF_TX_SINGLE_PBUF */
1042:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* create a chained netbuf from the IO vectors. NOTE: we assemble a pbuf chain
1043:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        manually to avoid having to allocate, chain, and delete a netbuf for each iov */
1044:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     for (i = 0; i < msg->msg_iovlen; i++) {
1045:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       struct pbuf *p = pbuf_alloc(PBUF_TRANSPORT, 0, PBUF_REF);
1046:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (p == NULL) {
1047:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         err = ERR_MEM; /* let netbuf_delete() cleanup chain_buf */
1048:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
1049:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1050:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       p->payload = msg->msg_iov[i].iov_base;
1051:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_ASSERT("iov_len < u16_t", msg->msg_iov[i].iov_len <= 0xFFFF);
1052:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       p->len = p->tot_len = (u16_t)msg->msg_iov[i].iov_len;
1053:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* netbuf empty, add new pbuf */
1054:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (chain_buf->p == NULL) {
1055:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         chain_buf->p = chain_buf->ptr = p;
1056:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* add pbuf to existing pbuf chain */
1057:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
1058:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         pbuf_cat(chain_buf->p, p);
1059:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1060:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1061:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* save size of total chain */
1062:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (err == ERR_OK) {
1063:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       size = netbuf_len(chain_buf);
1064:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1065:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETIF_TX_SINGLE_PBUF */
1066:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1067:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (err == ERR_OK) {
1068:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* send the data */
1069:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = netconn_send(sock->conn, chain_buf);
1070:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1071:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1072:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* deallocated the buffer */
1073:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     netbuf_delete(chain_buf);
1074:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1075:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
1076:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return (err == ERR_OK ? size : -1);
1077:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1078:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_UDP || LWIP_RAW */
1079:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, err_to_errno(ERR_ARG));
1080:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return -1;
1081:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_UDP || LWIP_RAW */
1082:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1083:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1084:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
1085:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_sendto(int s, const void *data, size_t size, int flags,
1086:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        const struct sockaddr *to, socklen_t tolen)
1087:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1088:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
1089:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
1090:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t short_size;
1091:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t remote_port;
1092:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct netbuf buf;
1093:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1094:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
1095:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
1096:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1097:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 23


1098:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1099:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP) {
1100:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
1101:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return lwip_send(s, data, size, flags);
1102:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_TCP */
1103:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_UNUSED_ARG(flags);
1104:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(ERR_ARG));
1105:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1106:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCP */
1107:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1108:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1109:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if ((to != NULL) && !SOCK_ADDR_TYPE_MATCH(to, sock)) {
1110:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* sockaddr does not match socket type (IPv4/IPv6) */
1111:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(ERR_VAL));
1112:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1113:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1114:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1115:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* @todo: split into multiple sendto's? */
1116:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("lwip_sendto: size must fit in u16_t", size <= 0xffff);
1117:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   short_size = (u16_t)size;
1118:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ERROR("lwip_sendto: invalid address", (((to == NULL) && (tolen == 0)) ||
1119:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              (IS_SOCK_ADDR_LEN_VALID(tolen) &&
1120:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              IS_SOCK_ADDR_TYPE_VALID(to) && IS_SOCK_ADDR_ALIGNED(to))),
1121:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
1122:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(tolen);
1123:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1124:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* initialize a buffer */
1125:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   buf.p = buf.ptr = NULL;
1126:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_CHECKSUM_ON_COPY
1127:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   buf.flags = 0;
1128:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_CHECKSUM_ON_COPY */
1129:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (to) {
1130:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SOCKADDR_TO_IPADDR_PORT(to, &buf.addr, remote_port);
1131:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
1132:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     remote_port = 0;
1133:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ip_addr_set_any(NETCONNTYPE_ISIPV6(netconn_type(sock->conn)), &buf.addr);
1134:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1135:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   netbuf_fromport(&buf) = remote_port;
1136:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1137:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1138:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_sendto(%d, data=%p, short_size=%"U16_F", flags=0x%x to=",
1139:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               s, data, short_size, flags));
1140:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip_addr_debug_print(SOCKETS_DEBUG, &buf.addr);
1141:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, (" port=%"U16_F"\n", remote_port));
1142:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1143:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* make the buffer point to the data that should be sent */
1144:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETIF_TX_SINGLE_PBUF
1145:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Allocate a new netbuf and copy the data into it. */
1146:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (netbuf_alloc(&buf, short_size) == NULL) {
1147:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = ERR_MEM;
1148:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
1149:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_CHECKSUM_ON_COPY
1150:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_RAW) {
1151:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u16_t chksum = LWIP_CHKSUM_COPY(buf.p->payload, data, short_size);
1152:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       netbuf_set_chksum(&buf, chksum);
1153:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else
1154:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_CHECKSUM_ON_COPY */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 24


1155:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     {
1156:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       MEMCPY(buf.p->payload, data, short_size);
1157:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1158:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = ERR_OK;
1159:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1160:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_NETIF_TX_SINGLE_PBUF */
1161:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netbuf_ref(&buf, data, short_size);
1162:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETIF_TX_SINGLE_PBUF */
1163:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err == ERR_OK) {
1164:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* send the data */
1165:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = netconn_send(sock->conn, &buf);
1166:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1167:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1168:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* deallocated the buffer */
1169:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   netbuf_free(&buf);
1170:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1171:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, err_to_errno(err));
1172:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return (err == ERR_OK ? short_size : -1);
1173:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1174:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1175:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
1176:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_socket(int domain, int type, int protocol)
1177:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1178:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct netconn *conn;
1179:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int i;
1180:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1181:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_IPV6
1182:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(domain); /* @todo: check this */
1183:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV6 */
1184:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1185:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* create a netconn */
1186:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   switch (type) {
1187:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case SOCK_RAW:
1188:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     conn = netconn_new_with_proto_and_callback(DOMAIN_TO_NETCONN_TYPE(domain, NETCONN_RAW),
1189:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                                (u8_t)protocol, event_callback);
1190:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_socket(%s, SOCK_RAW, %d) = ",
1191:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                  domain == PF_INET ? "PF_INET" : "UNKNOWN", protocol));
1192:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
1193:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case SOCK_DGRAM:
1194:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     conn = netconn_new_with_callback(DOMAIN_TO_NETCONN_TYPE(domain,
1195:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                  ((protocol == IPPROTO_UDPLITE) ? NETCONN_UDPLITE : NETCONN_UDP)) ,
1196:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                  event_callback);
1197:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_socket(%s, SOCK_DGRAM, %d) = ",
1198:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                  domain == PF_INET ? "PF_INET" : "UNKNOWN", protocol));
1199:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
1200:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case SOCK_STREAM:
1201:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     conn = netconn_new_with_callback(DOMAIN_TO_NETCONN_TYPE(domain, NETCONN_TCP), event_callback);
1202:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_socket(%s, SOCK_STREAM, %d) = ",
1203:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                  domain == PF_INET ? "PF_INET" : "UNKNOWN", protocol));
1204:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
1205:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   default:
1206:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_socket(%d, %d/UNKNOWN, %d) = -1\n",
1207:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                  domain, type, protocol));
1208:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     set_errno(EINVAL);
1209:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1210:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1211:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 25


1212:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!conn) {
1213:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("-1 / ENOBUFS (could not create netconn)\n"));
1214:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     set_errno(ENOBUFS);
1215:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1216:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1217:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1218:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   i = alloc_socket(conn, 0);
1219:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1220:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (i == -1) {
1221:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     netconn_delete(conn);
1222:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     set_errno(ENFILE);
1223:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1224:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1225:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   conn->socket = i;
1226:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("%d\n", i));
1227:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   set_errno(0);
1228:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return i;
1229:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1230:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1231:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
1232:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_write(int s, const void *data, size_t size)
1233:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1234:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_send(s, data, size, 0);
1235:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1236:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1237:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
1238:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_writev(int s, const struct iovec *iov, int iovcnt)
1239:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1240:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct msghdr msg;
1241:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1242:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_name = NULL;
1243:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_namelen = 0;
1244:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Hack: we have to cast via number to cast from 'const' pointer to non-const.
1245:Middlewares/Third_Party/LwIP/src/api/sockets.c ****      Blame the opengroup standard for this inconsistency. */
1246:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_iov = (struct iovec *)(size_t)iov;
1247:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_iovlen = iovcnt;
1248:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_control = NULL;
1249:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_controllen = 0;
1250:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_flags = 0;
1251:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_sendmsg(s, &msg, 0);
1252:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1253:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1254:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
1255:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Go through the readset and writeset lists and see which socket of the sockets
1256:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * set in the sets has events. On return, readset, writeset and exceptset have
1257:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * the sockets enabled that had events.
1258:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
1259:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param maxfdp1 the highest socket index in the sets
1260:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param readset_in    set of sockets to check for read events
1261:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param writeset_in   set of sockets to check for write events
1262:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param exceptset_in  set of sockets to check for error events
1263:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param readset_out   set of sockets that had read events
1264:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param writeset_out  set of sockets that had write events
1265:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param exceptset_out set os sockets that had error events
1266:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @return number of sockets that had events (read/write/exception) (>= 0)
1267:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
1268:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static int
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 26


1269:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_selscan(int maxfdp1, fd_set *readset_in, fd_set *writeset_in, fd_set *exceptset_in,
1270:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              fd_set *readset_out, fd_set *writeset_out, fd_set *exceptset_out)
1271:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1272:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int i, nready = 0;
1273:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   fd_set lreadset, lwriteset, lexceptset;
1274:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
1275:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_DECL_PROTECT(lev);
1276:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1277:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   FD_ZERO(&lreadset);
1278:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   FD_ZERO(&lwriteset);
1279:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   FD_ZERO(&lexceptset);
1280:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1281:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Go through each socket in each list to count number of sockets which
1282:Middlewares/Third_Party/LwIP/src/api/sockets.c ****      currently match */
1283:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   for (i = LWIP_SOCKET_OFFSET; i < maxfdp1; i++) {
1284:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* if this FD is not in the set, continue */
1285:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!(readset_in && FD_ISSET(i, readset_in)) &&
1286:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         !(writeset_in && FD_ISSET(i, writeset_in)) &&
1287:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         !(exceptset_in && FD_ISSET(i, exceptset_in))) {
1288:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       continue;
1289:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1290:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* First get the socket's status (protected)... */
1291:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_PROTECT(lev);
1292:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock = tryget_socket(i);
1293:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock != NULL) {
1294:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       void* lastdata = sock->lastdata;
1295:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       s16_t rcvevent = sock->rcvevent;
1296:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u16_t sendevent = sock->sendevent;
1297:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u16_t errevent = sock->errevent;
1298:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       SYS_ARCH_UNPROTECT(lev);
1299:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1300:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* ... then examine it: */
1301:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* See if netconn of this socket is ready for read */
1302:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (readset_in && FD_ISSET(i, readset_in) && ((lastdata != NULL) || (rcvevent > 0))) {
1303:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lreadset);
1304:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_selscan: fd=%d ready for reading\n", i));
1305:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         nready++;
1306:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1307:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* See if netconn of this socket is ready for write */
1308:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (writeset_in && FD_ISSET(i, writeset_in) && (sendevent != 0)) {
1309:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lwriteset);
1310:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_selscan: fd=%d ready for writing\n", i));
1311:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         nready++;
1312:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1313:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* See if netconn of this socket had an error */
1314:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (exceptset_in && FD_ISSET(i, exceptset_in) && (errevent != 0)) {
1315:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lexceptset);
1316:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_selscan: fd=%d ready for exception\n", i));
1317:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         nready++;
1318:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1319:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
1320:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       SYS_ARCH_UNPROTECT(lev);
1321:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* continue on to next FD in list */
1322:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1323:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1324:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* copy local sets to the ones provided as arguments */
1325:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   *readset_out = lreadset;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 27


1326:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   *writeset_out = lwriteset;
1327:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   *exceptset_out = lexceptset;
1328:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1329:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("nready >= 0", nready >= 0);
1330:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return nready;
1331:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1332:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1333:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
1334:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_select(int maxfdp1, fd_set *readset, fd_set *writeset, fd_set *exceptset,
1335:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             struct timeval *timeout)
1336:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1337:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u32_t waitres = 0;
1338:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int nready;
1339:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   fd_set lreadset, lwriteset, lexceptset;
1340:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u32_t msectimeout;
1341:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_select_cb select_cb;
1342:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int i;
1343:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int maxfdp2;
1344:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
1345:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int waited = 0;
1346:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
1347:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_DECL_PROTECT(lev);
1348:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1349:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_select(%d, %p, %p, %p, tvsec=%"S32_F" tvusec=%"S32_F")\n",
1350:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   maxfdp1, (void *)readset, (void *) writeset, (void *) exceptset,
1351:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   timeout ? (s32_t)timeout->tv_sec : (s32_t)-1,
1352:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   timeout ? (s32_t)timeout->tv_usec : (s32_t)-1));
1353:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1354:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Go through each socket in each list to count number of sockets which
1355:Middlewares/Third_Party/LwIP/src/api/sockets.c ****      currently match */
1356:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   nready = lwip_selscan(maxfdp1, readset, writeset, exceptset, &lreadset, &lwriteset, &lexceptset);
1357:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1358:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* If we don't have any current events, then suspend if we are supposed to */
1359:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!nready) {
1360:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (timeout && timeout->tv_sec == 0 && timeout->tv_usec == 0) {
1361:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_select: no timeout, returning 0\n"));
1362:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* This is OK as the local fdsets are empty and nready is zero,
1363:Middlewares/Third_Party/LwIP/src/api/sockets.c ****          or we would have returned earlier. */
1364:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       goto return_copy_fdsets;
1365:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1366:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1367:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* None ready: add our semaphore to list:
1368:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        We don't actually need any dynamic memory. Our entry on the
1369:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        list is only valid while we are in this function, so it's ok
1370:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        to use local variables. */
1371:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1372:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.next = NULL;
1373:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.prev = NULL;
1374:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.readset = readset;
1375:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.writeset = writeset;
1376:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.exceptset = exceptset;
1377:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.sem_signalled = 0;
1378:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
1379:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.sem = LWIP_NETCONN_THREAD_SEM_GET();
1380:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_NETCONN_SEM_PER_THREAD */
1381:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sys_sem_new(&select_cb.sem, 0) != ERR_OK) {
1382:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* failed to create semaphore */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 28


1383:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       set_errno(ENOMEM);
1384:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
1385:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1386:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETCONN_SEM_PER_THREAD */
1387:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1388:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Protect the select_cb_list */
1389:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_PROTECT(lev);
1390:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1391:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Put this select_cb on top of list */
1392:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.next = select_cb_list;
1393:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (select_cb_list != NULL) {
1394:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       select_cb_list->prev = &select_cb;
1395:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1396:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb_list = &select_cb;
1397:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Increasing this counter tells event_callback that the list has changed. */
1398:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb_ctr++;
1399:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1400:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Now we can safely unprotect */
1401:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_UNPROTECT(lev);
1402:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1403:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Increase select_waiting for each socket we are interested in */
1404:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     maxfdp2 = maxfdp1;
1405:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     for (i = LWIP_SOCKET_OFFSET; i < maxfdp1; i++) {
1406:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((readset && FD_ISSET(i, readset)) ||
1407:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (writeset && FD_ISSET(i, writeset)) ||
1408:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (exceptset && FD_ISSET(i, exceptset))) {
1409:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         struct lwip_sock *sock;
1410:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         SYS_ARCH_PROTECT(lev);
1411:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock = tryget_socket(i);
1412:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (sock != NULL) {
1413:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           sock->select_waiting++;
1414:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_ASSERT("sock->select_waiting > 0", sock->select_waiting > 0);
1415:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
1416:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* Not a valid socket */
1417:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           nready = -1;
1418:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           maxfdp2 = i;
1419:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           SYS_ARCH_UNPROTECT(lev);
1420:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
1421:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
1422:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         SYS_ARCH_UNPROTECT(lev);
1423:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1424:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1425:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1426:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (nready >= 0) {
1427:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Call lwip_selscan again: there could have been events between
1428:Middlewares/Third_Party/LwIP/src/api/sockets.c ****          the last scan (without us on the list) and putting us on the list! */
1429:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       nready = lwip_selscan(maxfdp1, readset, writeset, exceptset, &lreadset, &lwriteset, &lexcepts
1430:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (!nready) {
1431:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* Still none ready, just wait to be woken */
1432:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (timeout == 0) {
1433:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* Wait forever */
1434:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           msectimeout = 0;
1435:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
1436:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           msectimeout =  ((timeout->tv_sec * 1000) + ((timeout->tv_usec + 500)/1000));
1437:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (msectimeout == 0) {
1438:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             /* Wait 1ms at least (0 means wait forever) */
1439:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             msectimeout = 1;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 29


1440:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
1441:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
1442:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1443:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         waitres = sys_arch_sem_wait(SELECT_SEM_PTR(select_cb.sem), msectimeout);
1444:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
1445:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         waited = 1;
1446:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
1447:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1448:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1449:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1450:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Decrease select_waiting for each socket we are interested in */
1451:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     for (i = LWIP_SOCKET_OFFSET; i < maxfdp2; i++) {
1452:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((readset && FD_ISSET(i, readset)) ||
1453:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (writeset && FD_ISSET(i, writeset)) ||
1454:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (exceptset && FD_ISSET(i, exceptset))) {
1455:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         struct lwip_sock *sock;
1456:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         SYS_ARCH_PROTECT(lev);
1457:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock = tryget_socket(i);
1458:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (sock != NULL) {
1459:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* @todo: what if this is a new socket (reallocated?) in this case,
1460:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              select_waiting-- would be wrong (a global 'sockalloc' counter,
1461:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              stored per socket could help) */
1462:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_ASSERT("sock->select_waiting > 0", sock->select_waiting > 0);
1463:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (sock->select_waiting > 0) {
1464:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             sock->select_waiting--;
1465:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
1466:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
1467:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* Not a valid socket */
1468:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           nready = -1;
1469:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
1470:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         SYS_ARCH_UNPROTECT(lev);
1471:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1472:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1473:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Take us off the list */
1474:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_PROTECT(lev);
1475:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (select_cb.next != NULL) {
1476:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       select_cb.next->prev = select_cb.prev;
1477:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1478:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (select_cb_list == &select_cb) {
1479:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_ASSERT("select_cb.prev == NULL", select_cb.prev == NULL);
1480:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       select_cb_list = select_cb.next;
1481:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
1482:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_ASSERT("select_cb.prev != NULL", select_cb.prev != NULL);
1483:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       select_cb.prev->next = select_cb.next;
1484:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1485:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Increasing this counter tells event_callback that the list has changed. */
1486:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb_ctr++;
1487:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_UNPROTECT(lev);
1488:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1489:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
1490:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (select_cb.sem_signalled && (!waited || (waitres == SYS_ARCH_TIMEOUT))) {
1491:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* don't leave the thread-local semaphore signalled */
1492:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sys_arch_sem_wait(select_cb.sem, 1);
1493:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1494:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_NETCONN_SEM_PER_THREAD */
1495:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sys_sem_free(&select_cb.sem);
1496:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETCONN_SEM_PER_THREAD */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 30


1497:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1498:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (nready < 0) {
1499:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* This happens when a socket got closed while waiting */
1500:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       set_errno(EBADF);
1501:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
1502:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1503:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1504:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (waitres == SYS_ARCH_TIMEOUT) {
1505:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Timeout */
1506:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_select: timeout expired\n"));
1507:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* This is OK as the local fdsets are empty and nready is zero,
1508:Middlewares/Third_Party/LwIP/src/api/sockets.c ****          or we would have returned earlier. */
1509:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       goto return_copy_fdsets;
1510:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1511:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1512:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* See what's set */
1513:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     nready = lwip_selscan(maxfdp1, readset, writeset, exceptset, &lreadset, &lwriteset, &lexceptset
1514:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1515:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1516:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_select: nready=%d\n", nready));
1517:Middlewares/Third_Party/LwIP/src/api/sockets.c **** return_copy_fdsets:
1518:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   set_errno(0);
1519:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (readset) {
1520:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *readset = lreadset;
1521:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1522:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (writeset) {
1523:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *writeset = lwriteset;
1524:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1525:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (exceptset) {
1526:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *exceptset = lexceptset;
1527:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1528:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return nready;
1529:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1530:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1531:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
1532:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Callback registered in the netconn layer for each socket-netconn.
1533:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Processes recvevent (data available) and wakes up tasks waiting for select.
1534:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
1535:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void
1536:Middlewares/Third_Party/LwIP/src/api/sockets.c **** event_callback(struct netconn *conn, enum netconn_evt evt, u16_t len)
1537:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1538:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int s;
1539:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
1540:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_select_cb *scb;
1541:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int last_select_cb_ctr;
1542:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_DECL_PROTECT(lev);
1543:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1544:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(len);
1545:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1546:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Get socket */
1547:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (conn) {
1548:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     s = conn->socket;
1549:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (s < 0) {
1550:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Data comes in right away after an accept, even though
1551:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        * the server task might not have created a new socket yet.
1552:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        * Just count down (or up) if that's the case and we
1553:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        * will use the data later. Note that only receive events
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 31


1554:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        * can happen before the new socket is set up. */
1555:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       SYS_ARCH_PROTECT(lev);
1556:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (conn->socket < 0) {
1557:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (evt == NETCONN_EVT_RCVPLUS) {
1558:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           conn->socket--;
1559:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
1560:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         SYS_ARCH_UNPROTECT(lev);
1561:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return;
1562:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1563:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       s = conn->socket;
1564:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       SYS_ARCH_UNPROTECT(lev);
1565:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1566:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1567:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock = get_socket(s);
1568:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!sock) {
1569:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return;
1570:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1571:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
1572:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return;
1573:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1574:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1575:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_PROTECT(lev);
1576:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Set event as required */
1577:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   switch (evt) {
1578:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_RCVPLUS:
1579:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->rcvevent++;
1580:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1581:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_RCVMINUS:
1582:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->rcvevent--;
1583:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1584:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_SENDPLUS:
1585:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->sendevent = 1;
1586:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1587:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_SENDMINUS:
1588:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->sendevent = 0;
1589:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1590:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_ERROR:
1591:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->errevent = 1;
1592:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1593:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
1594:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_ASSERT("unknown event", 0);
1595:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1596:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1597:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1598:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (sock->select_waiting == 0) {
1599:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* noone is waiting for this socket, no need to check select_cb_list */
1600:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_UNPROTECT(lev);
1601:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return;
1602:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1603:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1604:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Now decide if anyone is waiting for this socket */
1605:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* NOTE: This code goes through the select_cb_list list multiple times
1606:Middlewares/Third_Party/LwIP/src/api/sockets.c ****      ONLY IF a select was actually waiting. We go through the list the number
1607:Middlewares/Third_Party/LwIP/src/api/sockets.c ****      of waiting select calls + 1. This list is expected to be small. */
1608:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1609:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* At this point, SYS_ARCH is still protected! */
1610:Middlewares/Third_Party/LwIP/src/api/sockets.c **** again:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 32


1611:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   for (scb = select_cb_list; scb != NULL; scb = scb->next) {
1612:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* remember the state of select_cb_list to detect changes */
1613:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     last_select_cb_ctr = select_cb_ctr;
1614:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (scb->sem_signalled == 0) {
1615:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* semaphore not signalled yet */
1616:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       int do_signal = 0;
1617:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Test this select call for our socket */
1618:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (sock->rcvevent > 0) {
1619:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (scb->readset && FD_ISSET(s, scb->readset)) {
1620:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
1621:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
1622:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1623:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (sock->sendevent != 0) {
1624:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (!do_signal && scb->writeset && FD_ISSET(s, scb->writeset)) {
1625:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
1626:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
1627:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1628:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (sock->errevent != 0) {
1629:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (!do_signal && scb->exceptset && FD_ISSET(s, scb->exceptset)) {
1630:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
1631:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
1632:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1633:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (do_signal) {
1634:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         scb->sem_signalled = 1;
1635:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* Don't call SYS_ARCH_UNPROTECT() before signaling the semaphore, as this might
1636:Middlewares/Third_Party/LwIP/src/api/sockets.c ****            lead to the select thread taking itself off the list, invalidating the semaphore. */
1637:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sys_sem_signal(SELECT_SEM_PTR(scb->sem));
1638:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1639:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1640:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* unlock interrupts with each step */
1641:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_UNPROTECT(lev);
1642:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* this makes sure interrupt protection time is short */
1643:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_PROTECT(lev);
1644:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (last_select_cb_ctr != select_cb_ctr) {
1645:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* someone has changed select_cb_list, restart at the beginning */
1646:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       goto again;
1647:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1648:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1649:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_UNPROTECT(lev);
1650:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1651:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1652:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
1653:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Unimplemented: Close one end of a full-duplex connection.
1654:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Currently, the full connection is closed.
1655:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
1656:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
1657:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_shutdown(int s, int how)
1658:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1659:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
1660:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
1661:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t shut_rx = 0, shut_tx = 0;
1662:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1663:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_shutdown(%d, how=%d)\n", s, how));
1664:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1665:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
1666:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
1667:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 33


1668:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1669:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1670:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (sock->conn != NULL) {
1671:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_TCP) {
1672:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, EOPNOTSUPP);
1673:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
1674:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1675:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
1676:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, ENOTCONN);
1677:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1678:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1679:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1680:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (how == SHUT_RD) {
1681:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     shut_rx = 1;
1682:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else if (how == SHUT_WR) {
1683:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     shut_tx = 1;
1684:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else if (how == SHUT_RDWR) {
1685:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     shut_rx = 1;
1686:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     shut_tx = 1;
1687:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
1688:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, EINVAL);
1689:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1690:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1691:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netconn_shutdown(sock->conn, shut_rx, shut_tx);
1692:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1693:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, err_to_errno(err));
1694:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return (err == ERR_OK ? 0 : -1);
1695:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1696:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1697:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static int
1698:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_getaddrname(int s, struct sockaddr *name, socklen_t *namelen, u8_t local)
1699:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1700:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
1701:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   union sockaddr_aligned saddr;
1702:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip_addr_t naddr;
1703:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t port;
1704:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
1705:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1706:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
1707:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
1708:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1709:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1710:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1711:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* get the IP address and port */
1712:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* @todo: this does not work for IPv6, yet */
1713:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netconn_getaddr(sock->conn, &naddr, &port, local);
1714:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
1715:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
1716:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1717:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1718:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   IPADDR_PORT_TO_SOCKADDR(&saddr, &naddr, port);
1719:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1720:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getaddrname(%d, addr=", s));
1721:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip_addr_debug_print_val(SOCKETS_DEBUG, naddr);
1722:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, (" port=%"U16_F")\n", port));
1723:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1724:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (*namelen > saddr.sa.sa_len) {
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 34


1725:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *namelen = saddr.sa.sa_len;
1726:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1727:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   MEMCPY(name, &saddr, *namelen);
1728:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1729:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, 0);
1730:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
1731:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1732:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1733:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
1734:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_getpeername(int s, struct sockaddr *name, socklen_t *namelen)
1735:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1736:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_getaddrname(s, name, namelen, 0);
1737:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1738:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1739:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
1740:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_getsockname(int s, struct sockaddr *name, socklen_t *namelen)
1741:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1742:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_getaddrname(s, name, namelen, 1);
1743:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1744:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1745:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
1746:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_getsockopt(int s, int level, int optname, void *optval, socklen_t *optlen)
1747:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1748:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t err;
1749:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = get_socket(s);
1750:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_TCPIP_CORE_LOCKING
1751:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_DECLARE(data);
1752:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* !LWIP_TCPIP_CORE_LOCKING */
1753:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1754:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
1755:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1756:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1757:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1758:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if ((NULL == optval) || (NULL == optlen)) {
1759:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, EFAULT);
1760:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1761:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1762:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1763:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCPIP_CORE_LOCKING
1764:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* core-locking can just call the -impl function */
1765:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LOCK_TCPIP_CORE();
1766:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = lwip_getsockopt_impl(s, level, optname, optval, optlen);
1767:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   UNLOCK_TCPIP_CORE();
1768:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1769:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
1770:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1771:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MPU_COMPATIBLE
1772:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* MPU_COMPATIBLE copies the optval data, so check for max size here */
1773:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (*optlen > LWIP_SETGETSOCKOPT_MAXOPTLEN) {
1774:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, ENOBUFS);
1775:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1776:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1777:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MPU_COMPATIBLE */
1778:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1779:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_ALLOC(data, sock);
1780:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).s = s;
1781:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).level = level;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 35


1782:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optname = optname;
1783:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optlen = *optlen;
1784:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_MPU_COMPATIBLE
1785:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optval.p = optval;
1786:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* !LWIP_MPU_COMPATIBLE */
1787:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).err = 0;
1788:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
1789:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).completed_sem = LWIP_NETCONN_THREAD_SEM_GET();
1790:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else
1791:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).completed_sem = &sock->conn->op_completed;
1792:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
1793:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = tcpip_callback(lwip_getsockopt_callback, &LWIP_SETGETSOCKOPT_DATA_VAR_REF(data));
1794:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
1795:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_SETGETSOCKOPT_DATA_VAR_FREE(data);
1796:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
1797:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1798:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1799:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sys_arch_sem_wait((sys_sem_t*)(LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).completed_sem), 0);
1800:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1801:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* write back optlen and optval */
1802:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   *optlen = LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optlen;
1803:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MPU_COMPATIBLE
1804:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   MEMCPY(optval, LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optval,
1805:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optlen);
1806:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MPU_COMPATIBLE */
1807:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1808:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* maybe lwip_getsockopt_internal has changed err */
1809:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).err;
1810:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_FREE(data);
1811:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
1812:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1813:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, err);
1814:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return err ? -1 : 0;
1815:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1816:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1817:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_TCPIP_CORE_LOCKING
1818:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** lwip_getsockopt_callback: only used without CORE_LOCKING
1819:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * to get into the tcpip_thread
1820:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
1821:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void
1822:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_getsockopt_callback(void *arg)
1823:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1824:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_setgetsockopt_data *data;
1825:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("arg != NULL", arg != NULL);
1826:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   data = (struct lwip_setgetsockopt_data*)arg;
1827:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1828:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   data->err = lwip_getsockopt_impl(data->s, data->level, data->optname,
1829:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MPU_COMPATIBLE
1830:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     data->optval,
1831:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_MPU_COMPATIBLE */
1832:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     data->optval.p,
1833:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MPU_COMPATIBLE */
1834:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     &data->optlen);
1835:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1836:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sys_sem_signal((sys_sem_t*)(data->completed_sem));
1837:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1838:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif  /* LWIP_TCPIP_CORE_LOCKING */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 36


1839:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1840:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** lwip_getsockopt_impl: the actual implementation of getsockopt:
1841:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * same argument as lwip_getsockopt, either called directly or through callback
1842:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
1843:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static u8_t
1844:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_getsockopt_impl(int s, int level, int optname, void *optval, socklen_t *optlen)
1845:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1846:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t err = 0;
1847:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
1848:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
1849:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return EBADF;
1850:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1851:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1852:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   switch (level) {
1853:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1854:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Level: SOL_SOCKET */
1855:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case SOL_SOCKET:
1856:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
1857:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1858:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
1859:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_ACCEPTCONN:
1860:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, *optlen, int);
1861:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (NETCONNTYPE_GROUP(sock->conn->type) != NETCONN_TCP) {
1862:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return ENOPROTOOPT;
1863:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1864:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((sock->conn->pcb.tcp != NULL) && (sock->conn->pcb.tcp->state == LISTEN)) {
1865:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(int*)optval = 1;
1866:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
1867:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(int*)optval = 0;
1868:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1869:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1870:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCP */
1871:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1872:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* The option flags */
1873:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_BROADCAST:
1874:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_KEEPALIVE:
1875:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if SO_REUSE
1876:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_REUSEADDR:
1877:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* SO_REUSE */
1878:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, *optlen, int);
1879:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = ip_get_option(sock->conn->pcb.ip, optname);
1880:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, SOL_SOCKET, optname=0x%x, ..) = %s\n",
1881:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                   s, optname, (*(int*)optval?"on":"off")));
1882:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1883:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1884:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_TYPE:
1885:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, *optlen, int);
1886:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       switch (NETCONNTYPE_GROUP(netconn_type(sock->conn))) {
1887:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       case NETCONN_RAW:
1888:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(int*)optval = SOCK_RAW;
1889:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
1890:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       case NETCONN_TCP:
1891:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(int*)optval = SOCK_STREAM;
1892:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
1893:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       case NETCONN_UDP:
1894:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(int*)optval = SOCK_DGRAM;
1895:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 37


1896:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       default: /* unrecognized socket type */
1897:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(int*)optval = netconn_type(sock->conn);
1898:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG,
1899:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                     ("lwip_getsockopt(%d, SOL_SOCKET, SO_TYPE): unrecognized socket type %d\n",
1900:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                     s, *(int *)optval));
1901:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }  /* switch (netconn_type(sock->conn)) */
1902:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, SOL_SOCKET, SO_TYPE) = %d\n",
1903:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
1904:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1905:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1906:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_ERROR:
1907:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN(*optlen, int);
1908:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* only overwrite ERR_OK or temporary errors */
1909:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (((sock->err == 0) || (sock->err == EINPROGRESS)) && (sock->conn != NULL)) {
1910:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock_set_errno(sock, err_to_errno(sock->conn->last_err));
1911:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1912:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int *)optval = (sock->err == 0xFF ? (int)-1 : (int)sock->err);
1913:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->err = 0;
1914:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, SOL_SOCKET, SO_ERROR) = %d\n",
1915:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
1916:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1917:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1918:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_SNDTIMEO
1919:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_SNDTIMEO:
1920:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, *optlen, LWIP_SO_SNDRCVTIMEO_OPTTYPE);
1921:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SO_SNDRCVTIMEO_SET(optval, netconn_get_sendtimeout(sock->conn));
1922:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1923:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_SNDTIMEO */
1924:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_RCVTIMEO
1925:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_RCVTIMEO:
1926:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, *optlen, LWIP_SO_SNDRCVTIMEO_OPTTYPE);
1927:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SO_SNDRCVTIMEO_SET(optval, netconn_get_recvtimeout(sock->conn));
1928:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1929:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_RCVTIMEO */
1930:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_RCVBUF
1931:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_RCVBUF:
1932:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, *optlen, int);
1933:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int *)optval = netconn_get_recvbufsize(sock->conn);
1934:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1935:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_RCVBUF */
1936:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_LINGER
1937:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_LINGER:
1938:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       {
1939:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         s16_t conn_linger;
1940:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         struct linger* linger = (struct linger*)optval;
1941:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, *optlen, struct linger);
1942:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         conn_linger = sock->conn->linger;
1943:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (conn_linger >= 0) {
1944:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           linger->l_onoff = 1;
1945:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           linger->l_linger = (int)conn_linger;
1946:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
1947:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           linger->l_onoff = 0;
1948:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           linger->l_linger = 0;
1949:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
1950:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1951:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1952:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_LINGER */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 38


1953:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDP
1954:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_NO_CHECK:
1955:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, *optlen, int, NETCONN_UDP);
1956:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
1957:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((udp_flags(sock->conn->pcb.udp) & UDP_FLAGS_UDPLITE) != 0) {
1958:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* this flag is only available for UDP, not for UDP lite */
1959:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return EAFNOSUPPORT;
1960:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1961:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_UDPLITE */
1962:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = (udp_flags(sock->conn->pcb.udp) & UDP_FLAGS_NOCHKSUM) ? 1 : 0;
1963:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1964:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_UDP*/
1965:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
1966:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, SOL_SOCKET, UNIMPL: optname=0x%x, ..)\n",
1967:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
1968:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
1969:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1970:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
1971:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
1972:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1973:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Level: IPPROTO_IP */
1974:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case IPPROTO_IP:
1975:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
1976:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_TTL:
1977:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, *optlen, int);
1978:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.ip->ttl;
1979:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IP, IP_TTL) = %d\n",
1980:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
1981:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1982:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_TOS:
1983:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, *optlen, int);
1984:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.ip->tos;
1985:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IP, IP_TOS) = %d\n",
1986:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
1987:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1988:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MULTICAST_TX_OPTIONS
1989:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_MULTICAST_TTL:
1990:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, *optlen, u8_t);
1991:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_UDP) {
1992:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return ENOPROTOOPT;
1993:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1994:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(u8_t*)optval = udp_get_multicast_ttl(sock->conn->pcb.udp);
1995:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IP, IP_MULTICAST_TTL) = %d\n",
1996:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
1997:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
1998:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_MULTICAST_IF:
1999:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, *optlen, struct in_addr);
2000:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_UDP) {
2001:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return ENOPROTOOPT;
2002:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2003:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       inet_addr_from_ipaddr((struct in_addr*)optval, udp_get_multicast_netif_addr(sock->conn->pcb.u
2004:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IP, IP_MULTICAST_IF) = 0x%"X32_F"\n"
2005:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(u32_t *)optval));
2006:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2007:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_MULTICAST_LOOP:
2008:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, *optlen, u8_t);
2009:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((sock->conn->pcb.udp->flags & UDP_FLAGS_MULTICAST_LOOP) != 0) {
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 39


2010:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(u8_t*)optval = 1;
2011:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2012:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(u8_t*)optval = 0;
2013:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2014:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IP, IP_MULTICAST_LOOP) = %d\n",
2015:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
2016:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2017:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MULTICAST_TX_OPTIONS */
2018:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2019:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IP, UNIMPL: optname=0x%x, ..)\n",
2020:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
2021:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
2022:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2023:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2024:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2025:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2026:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
2027:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Level: IPPROTO_TCP */
2028:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case IPPROTO_TCP:
2029:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Special case: all IPPROTO_TCP option take an int */
2030:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, *optlen, int, NETCONN_TCP);
2031:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
2032:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_NODELAY:
2033:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = tcp_nagle_disabled(sock->conn->pcb.tcp);
2034:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_TCP, TCP_NODELAY) = %s\n",
2035:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, (*(int*)optval)?"on":"off") );
2036:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2037:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_KEEPALIVE:
2038:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = (int)sock->conn->pcb.tcp->keep_idle;
2039:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_TCP, TCP_KEEPALIVE) = %d\n",
2040:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
2041:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2042:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2043:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP_KEEPALIVE
2044:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_KEEPIDLE:
2045:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = (int)(sock->conn->pcb.tcp->keep_idle/1000);
2046:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_TCP, TCP_KEEPIDLE) = %d\n",
2047:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
2048:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2049:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_KEEPINTVL:
2050:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = (int)(sock->conn->pcb.tcp->keep_intvl/1000);
2051:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_TCP, TCP_KEEPINTVL) = %d\n",
2052:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
2053:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2054:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_KEEPCNT:
2055:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = (int)sock->conn->pcb.tcp->keep_cnt;
2056:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_TCP, TCP_KEEPCNT) = %d\n",
2057:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
2058:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2059:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCP_KEEPALIVE */
2060:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2061:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_TCP, UNIMPL: optname=0x%x, ..)\n",
2062:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
2063:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
2064:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2065:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2066:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 40


2067:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCP */
2068:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2069:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV6
2070:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Level: IPPROTO_IPV6 */
2071:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case IPPROTO_IPV6:
2072:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
2073:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IPV6_V6ONLY:
2074:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, *optlen, int);
2075:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* @todo: this does not work for datagram sockets, yet */
2076:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_TCP) {
2077:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return ENOPROTOOPT;
2078:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2079:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = (netconn_get_ipv6only(sock->conn) ? 1 : 0);
2080:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IPV6, IPV6_V6ONLY) = %d\n",
2081:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, *(int *)optval));
2082:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2083:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2084:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IPV6, UNIMPL: optname=0x%x, ..)\n",
2085:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
2086:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
2087:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2088:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2089:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2090:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV6 */
2091:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2092:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDP && LWIP_UDPLITE
2093:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Level: IPPROTO_UDPLITE */
2094:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case IPPROTO_UDPLITE:
2095:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Special case: all IPPROTO_UDPLITE option take an int */
2096:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, *optlen, int);
2097:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* If this is no UDP lite socket, ignore any options. */
2098:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!NETCONNTYPE_ISUDPLITE(netconn_type(sock->conn))) {
2099:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return ENOPROTOOPT;
2100:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2101:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
2102:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case UDPLITE_SEND_CSCOV:
2103:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.udp->chksum_len_tx;
2104:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_UDPLITE, UDPLITE_SEND_CSCOV) = %d\n"
2105:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, (*(int*)optval)) );
2106:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2107:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case UDPLITE_RECV_CSCOV:
2108:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.udp->chksum_len_rx;
2109:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_UDPLITE, UDPLITE_RECV_CSCOV) = %d\n"
2110:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, (*(int*)optval)) );
2111:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2112:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2113:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_UDPLITE, UNIMPL: optname=0x%x, ..)\n
2114:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
2115:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
2116:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2117:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2118:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2119:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_UDP */
2120:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Level: IPPROTO_RAW */
2121:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case IPPROTO_RAW:
2122:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
2123:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV6 && LWIP_RAW
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 41


2124:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IPV6_CHECKSUM:
2125:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, *optlen, int, NETCONN_RAW);
2126:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (sock->conn->pcb.raw->chksum_reqd == 0) {
2127:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(int *)optval = -1;
2128:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2129:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(int *)optval = sock->conn->pcb.raw->chksum_offset;
2130:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2131:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_RAW, IPV6_CHECKSUM) = %d\n",
2132:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, (*(int*)optval)) );
2133:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2134:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV6 && LWIP_RAW */
2135:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2136:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_RAW, UNIMPL: optname=0x%x, ..)\n",
2137:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
2138:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
2139:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2140:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2141:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2142:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   default:
2143:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, level=0x%x, UNIMPL: optname=0x%x, ..)\n",
2144:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                 s, level, optname));
2145:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = ENOPROTOOPT;
2146:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2147:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } /* switch (level) */
2148:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2149:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return err;
2150:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
2151:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2152:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
2153:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_setsockopt(int s, int level, int optname, const void *optval, socklen_t optlen)
2154:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
2155:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t err = 0;
2156:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = get_socket(s);
2157:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_TCPIP_CORE_LOCKING
2158:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_DECLARE(data);
2159:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* !LWIP_TCPIP_CORE_LOCKING */
2160:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2161:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
2162:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
2163:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2164:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2165:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (NULL == optval) {
2166:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, EFAULT);
2167:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
2168:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2169:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2170:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCPIP_CORE_LOCKING
2171:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* core-locking can just call the -impl function */
2172:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LOCK_TCPIP_CORE();
2173:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = lwip_setsockopt_impl(s, level, optname, optval, optlen);
2174:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   UNLOCK_TCPIP_CORE();
2175:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2176:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
2177:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2178:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MPU_COMPATIBLE
2179:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* MPU_COMPATIBLE copies the optval data, so check for max size here */
2180:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (optlen > LWIP_SETGETSOCKOPT_MAXOPTLEN) {
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 42


2181:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, ENOBUFS);
2182:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
2183:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2184:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MPU_COMPATIBLE */
2185:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2186:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_ALLOC(data, sock);
2187:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).s = s;
2188:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).level = level;
2189:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optname = optname;
2190:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optlen = optlen;
2191:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MPU_COMPATIBLE
2192:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   MEMCPY(LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optval, optval, optlen);
2193:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_MPU_COMPATIBLE */
2194:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optval.pc = (const void*)optval;
2195:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MPU_COMPATIBLE */
2196:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).err = 0;
2197:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
2198:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).completed_sem = LWIP_NETCONN_THREAD_SEM_GET();
2199:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else
2200:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).completed_sem = &sock->conn->op_completed;
2201:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
2202:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = tcpip_callback(lwip_setsockopt_callback, &LWIP_SETGETSOCKOPT_DATA_VAR_REF(data));
2203:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
2204:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_SETGETSOCKOPT_DATA_VAR_FREE(data);
2205:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
2206:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
2207:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2208:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sys_arch_sem_wait((sys_sem_t*)(LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).completed_sem), 0);
2209:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2210:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* maybe lwip_getsockopt_internal has changed err */
2211:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).err;
2212:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_FREE(data);
2213:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif  /* LWIP_TCPIP_CORE_LOCKING */
2214:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2215:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, err);
2216:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return err ? -1 : 0;
2217:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
2218:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2219:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_TCPIP_CORE_LOCKING
2220:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** lwip_setsockopt_callback: only used without CORE_LOCKING
2221:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * to get into the tcpip_thread
2222:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
2223:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void
2224:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_setsockopt_callback(void *arg)
2225:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
2226:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_setgetsockopt_data *data;
2227:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("arg != NULL", arg != NULL);
2228:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   data = (struct lwip_setgetsockopt_data*)arg;
2229:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2230:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   data->err = lwip_setsockopt_impl(data->s, data->level, data->optname,
2231:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MPU_COMPATIBLE
2232:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     data->optval,
2233:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_MPU_COMPATIBLE */
2234:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     data->optval.pc,
2235:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MPU_COMPATIBLE */
2236:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     data->optlen);
2237:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 43


2238:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sys_sem_signal((sys_sem_t*)(data->completed_sem));
2239:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
2240:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif  /* LWIP_TCPIP_CORE_LOCKING */
2241:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2242:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** lwip_setsockopt_impl: the actual implementation of setsockopt:
2243:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * same argument as lwip_setsockopt, either called directly or through callback
2244:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
2245:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static u8_t
2246:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_setsockopt_impl(int s, int level, int optname, const void *optval, socklen_t optlen)
2247:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 156              		.loc 1 2247 0
 157              		.cfi_startproc
 158              		@ args = 4, pretend = 0, frame = 0
 159              		@ frame_needed = 0, uses_anonymous_args = 0
 160              	.LVL15:
 161 0000 70B5     		push	{r4, r5, r6, lr}
 162              	.LCFI3:
 163              		.cfi_def_cfa_offset 16
 164              		.cfi_offset 4, -16
 165              		.cfi_offset 5, -12
 166              		.cfi_offset 6, -8
 167              		.cfi_offset 14, -4
 168 0002 0C46     		mov	r4, r1
 169 0004 1546     		mov	r5, r2
 170 0006 1E46     		mov	r6, r3
 171              	.LVL16:
2248:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t err = 0;
2249:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 172              		.loc 1 2249 0
 173 0008 FFF7FEFF 		bl	tryget_socket
 174              	.LVL17:
2250:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 175              		.loc 1 2250 0
 176 000c 0028     		cmp	r0, #0
 177 000e 00F09A80 		beq	.L31
 178 0012 0346     		mov	r3, r0
2251:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return EBADF;
2252:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2253:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2254:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   switch (level) {
 179              		.loc 1 2254 0
 180 0014 062C     		cmp	r4, #6
 181 0016 6BD0     		beq	.L19
 182 0018 40F6FF72 		movw	r2, #4095
 183 001c 9442     		cmp	r4, r2
 184 001e 03D0     		beq	.L20
 185 0020 002C     		cmp	r4, #0
 186 0022 43D0     		beq	.L58
2255:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2256:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Level: SOL_SOCKET */
2257:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case SOL_SOCKET:
2258:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
2259:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2260:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* SO_ACCEPTCONN is get-only */
2261:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2262:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* The option flags */
2263:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_BROADCAST:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 44


2264:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_KEEPALIVE:
2265:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if SO_REUSE
2266:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_REUSEADDR:
2267:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* SO_REUSE */
2268:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, optlen, int);
2269:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (*(const int*)optval) {
2270:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ip_set_option(sock->conn->pcb.ip, optname);
2271:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2272:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ip_reset_option(sock->conn->pcb.ip, optname);
2273:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2274:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, SOL_SOCKET, optname=0x%x, ..) -> %s\n",
2275:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname, (*(const int*)optval?"on":"off")));
2276:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2277:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2278:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* SO_TYPE is get-only */
2279:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* SO_ERROR is get-only */
2280:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2281:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_SNDTIMEO
2282:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_SNDTIMEO:
2283:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, optlen, LWIP_SO_SNDRCVTIMEO_OPTTYPE);
2284:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       netconn_set_sendtimeout(sock->conn, LWIP_SO_SNDRCVTIMEO_GET_MS(optval));
2285:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2286:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_SNDTIMEO */
2287:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_RCVTIMEO
2288:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_RCVTIMEO:
2289:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, optlen, LWIP_SO_SNDRCVTIMEO_OPTTYPE);
2290:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       netconn_set_recvtimeout(sock->conn, (int)LWIP_SO_SNDRCVTIMEO_GET_MS(optval));
2291:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2292:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_RCVTIMEO */
2293:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_RCVBUF
2294:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_RCVBUF:
2295:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, optlen, int);
2296:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       netconn_set_recvbufsize(sock->conn, *(const int*)optval);
2297:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2298:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_RCVBUF */
2299:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_LINGER
2300:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_LINGER:
2301:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       {
2302:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         const struct linger* linger = (const struct linger*)optval;
2303:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, optlen, struct linger);
2304:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (linger->l_onoff) {
2305:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           int lingersec = linger->l_linger;
2306:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (lingersec < 0) {
2307:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             return EINVAL;
2308:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
2309:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (lingersec > 0xFFFF) {
2310:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             lingersec = 0xFFFF;
2311:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
2312:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           sock->conn->linger = (s16_t)lingersec;
2313:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
2314:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           sock->conn->linger = -1;
2315:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
2316:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2317:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2318:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_LINGER */
2319:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDP
2320:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SO_NO_CHECK:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 45


2321:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, int, NETCONN_UDP);
2322:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
2323:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((udp_flags(sock->conn->pcb.udp) & UDP_FLAGS_UDPLITE) != 0) {
2324:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* this flag is only available for UDP, not for UDP lite */
2325:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return EAFNOSUPPORT;
2326:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2327:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_UDPLITE */
2328:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (*(const int*)optval) {
2329:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         udp_setflags(sock->conn->pcb.udp, udp_flags(sock->conn->pcb.udp) | UDP_FLAGS_NOCHKSUM);
2330:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2331:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         udp_setflags(sock->conn->pcb.udp, udp_flags(sock->conn->pcb.udp) & ~UDP_FLAGS_NOCHKSUM);
2332:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2333:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2334:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_UDP */
2335:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2336:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, SOL_SOCKET, UNIMPL: optname=0x%x, ..)\n",
2337:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
2338:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
2339:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2340:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2341:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2342:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2343:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Level: IPPROTO_IP */
2344:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case IPPROTO_IP:
2345:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
2346:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_TTL:
2347:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, optlen, int);
2348:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.ip->ttl = (u8_t)(*(const int*)optval);
2349:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_IP, IP_TTL, ..) -> %d\n",
2350:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, sock->conn->pcb.ip->ttl));
2351:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2352:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_TOS:
2353:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, optlen, int);
2354:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.ip->tos = (u8_t)(*(const int*)optval);
2355:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_IP, IP_TOS, ..)-> %d\n",
2356:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, sock->conn->pcb.ip->tos));
2357:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2358:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MULTICAST_TX_OPTIONS
2359:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_MULTICAST_TTL:
2360:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, u8_t, NETCONN_UDP);
2361:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       udp_set_multicast_ttl(sock->conn->pcb.udp, (u8_t)(*(const u8_t*)optval));
2362:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2363:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_MULTICAST_IF:
2364:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       {
2365:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ip4_addr_t if_addr;
2366:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, struct in_addr, NETCONN_UDP);
2367:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         inet_addr_to_ipaddr(&if_addr, (const struct in_addr*)optval);
2368:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         udp_set_multicast_netif_addr(sock->conn->pcb.udp, &if_addr);
2369:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2370:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2371:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_MULTICAST_LOOP:
2372:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, u8_t, NETCONN_UDP);
2373:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (*(const u8_t*)optval) {
2374:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         udp_setflags(sock->conn->pcb.udp, udp_flags(sock->conn->pcb.udp) | UDP_FLAGS_MULTICAST_LOOP
2375:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2376:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         udp_setflags(sock->conn->pcb.udp, udp_flags(sock->conn->pcb.udp) & ~UDP_FLAGS_MULTICAST_LOO
2377:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 46


2378:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2379:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MULTICAST_TX_OPTIONS */
2380:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IGMP
2381:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_ADD_MEMBERSHIP:
2382:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_DROP_MEMBERSHIP:
2383:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       {
2384:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* If this is a TCP or a RAW socket, ignore these options. */
2385:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* @todo: assign membership to this socket so that it is dropped when closing the socket */
2386:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         err_t igmp_err;
2387:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         const struct ip_mreq *imr = (const struct ip_mreq *)optval;
2388:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ip4_addr_t if_addr;
2389:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ip4_addr_t multi_addr;
2390:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, struct ip_mreq, NETCONN_UDP);
2391:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         inet_addr_to_ipaddr(&if_addr, &imr->imr_interface);
2392:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         inet_addr_to_ipaddr(&multi_addr, &imr->imr_multiaddr);
2393:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (optname == IP_ADD_MEMBERSHIP) {
2394:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (!lwip_socket_register_membership(s, &if_addr, &multi_addr)) {
2395:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             /* cannot track membership (out of memory) */
2396:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             err = ENOMEM;
2397:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             igmp_err = ERR_OK;
2398:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           } else {
2399:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             igmp_err = igmp_joingroup(&if_addr, &multi_addr);
2400:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
2401:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
2402:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           igmp_err = igmp_leavegroup(&if_addr, &multi_addr);
2403:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           lwip_socket_unregister_membership(s, &if_addr, &multi_addr);
2404:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
2405:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (igmp_err != ERR_OK) {
2406:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           err = EADDRNOTAVAIL;
2407:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
2408:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2409:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2410:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IGMP */
2411:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2412:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_IP, UNIMPL: optname=0x%x, ..)\n",
2413:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
2414:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
2415:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2416:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2417:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2418:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2419:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
2420:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Level: IPPROTO_TCP */
2421:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case IPPROTO_TCP:
2422:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Special case: all IPPROTO_TCP option take an int */
2423:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, int, NETCONN_TCP);
2424:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
2425:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_NODELAY:
2426:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (*(const int*)optval) {
2427:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         tcp_nagle_disable(sock->conn->pcb.tcp);
2428:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2429:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         tcp_nagle_enable(sock->conn->pcb.tcp);
2430:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2431:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_TCP, TCP_NODELAY) -> %s\n",
2432:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, (*(const int *)optval)?"on":"off") );
2433:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2434:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_KEEPALIVE:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 47


2435:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.tcp->keep_idle = (u32_t)(*(const int*)optval);
2436:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_TCP, TCP_KEEPALIVE) -> %"U32_F"\n",
2437:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, sock->conn->pcb.tcp->keep_idle));
2438:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2439:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2440:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP_KEEPALIVE
2441:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_KEEPIDLE:
2442:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.tcp->keep_idle = 1000*(u32_t)(*(const int*)optval);
2443:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_TCP, TCP_KEEPIDLE) -> %"U32_F"\n",
2444:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, sock->conn->pcb.tcp->keep_idle));
2445:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2446:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_KEEPINTVL:
2447:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.tcp->keep_intvl = 1000*(u32_t)(*(const int*)optval);
2448:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_TCP, TCP_KEEPINTVL) -> %"U32_F"\n",
2449:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, sock->conn->pcb.tcp->keep_intvl));
2450:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2451:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_KEEPCNT:
2452:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.tcp->keep_cnt = (u32_t)(*(const int*)optval);
2453:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_TCP, TCP_KEEPCNT) -> %"U32_F"\n",
2454:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, sock->conn->pcb.tcp->keep_cnt));
2455:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2456:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCP_KEEPALIVE */
2457:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2458:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_TCP, UNIMPL: optname=0x%x, ..)\n",
2459:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
2460:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
2461:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2462:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2463:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2464:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCP*/
2465:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2466:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV6
2467:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Level: IPPROTO_IPV6 */
2468:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case IPPROTO_IPV6:
2469:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
2470:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IPV6_V6ONLY:
2471:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* @todo: this does not work for datagram sockets, yet */
2472:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, int, NETCONN_TCP);
2473:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (*(const int*)optval) {
2474:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         netconn_set_ipv6only(sock->conn, 1);
2475:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2476:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         netconn_set_ipv6only(sock->conn, 0);
2477:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2478:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_IPV6, IPV6_V6ONLY, ..) -> %d\n",
2479:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, (netconn_get_ipv6only(sock->conn) ? 1 : 0)));
2480:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2481:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2482:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_IPV6, UNIMPL: optname=0x%x, ..)\n",
2483:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
2484:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
2485:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2486:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2487:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2488:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV6 */
2489:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2490:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDP && LWIP_UDPLITE
2491:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Level: IPPROTO_UDPLITE */
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 48


2492:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case IPPROTO_UDPLITE:
2493:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Special case: all IPPROTO_UDPLITE option take an int */
2494:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, optlen, int);
2495:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* If this is no UDP lite socket, ignore any options. */
2496:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!NETCONNTYPE_ISUDPLITE(netconn_type(sock->conn))) {
2497:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return ENOPROTOOPT;
2498:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2499:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
2500:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case UDPLITE_SEND_CSCOV:
2501:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((*(const int*)optval != 0) && ((*(const int*)optval < 8) || (*(const int*)optval > 0xffff
2502:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* don't allow illegal values! */
2503:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->conn->pcb.udp->chksum_len_tx = 8;
2504:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2505:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->conn->pcb.udp->chksum_len_tx = (u16_t)*(const int*)optval;
2506:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2507:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_UDPLITE, UDPLITE_SEND_CSCOV) -> %d\n
2508:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, (*(const int*)optval)) );
2509:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2510:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case UDPLITE_RECV_CSCOV:
2511:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((*(const int*)optval != 0) && ((*(const int*)optval < 8) || (*(const int*)optval > 0xffff
2512:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* don't allow illegal values! */
2513:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->conn->pcb.udp->chksum_len_rx = 8;
2514:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2515:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->conn->pcb.udp->chksum_len_rx = (u16_t)*(const int*)optval;
2516:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2517:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_UDPLITE, UDPLITE_RECV_CSCOV) -> %d\n
2518:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, (*(const int*)optval)) );
2519:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2520:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2521:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_UDPLITE, UNIMPL: optname=0x%x, ..)\n
2522:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, optname));
2523:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
2524:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2525:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2526:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2527:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_UDP */
2528:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Level: IPPROTO_RAW */
2529:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case IPPROTO_RAW:
2530:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
2531:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV6 && LWIP_RAW
2532:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IPV6_CHECKSUM:
2533:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, int, NETCONN_RAW);
2534:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (*(const int *)optval < 0) {
2535:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->conn->pcb.raw->chksum_reqd = 0;
2536:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else if (*(const int *)optval & 1) {
2537:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* Per RFC3542, odd offsets are not allowed */
2538:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return EINVAL;
2539:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2540:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->conn->pcb.raw->chksum_reqd = 1;
2541:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->conn->pcb.raw->chksum_offset = (u16_t)*(const int *)optval;
2542:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2543:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_RAW, IPV6_CHECKSUM, ..) -> %d\n",
2544:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   s, sock->conn->pcb.raw->chksum_reqd));
2545:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2546:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV6 && LWIP_RAW */
2547:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2548:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_RAW, UNIMPL: optname=0x%x, ..)\n",
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 49


2549:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                   s, optname));
2550:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
 187              		.loc 1 2550 0
 188 0024 5C20     		movs	r0, #92
 189              	.LVL18:
 190 0026 70BD     		pop	{r4, r5, r6, pc}
 191              	.LVL19:
 192              	.L20:
2258:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 193              		.loc 1 2258 0
 194 0028 202D     		cmp	r5, #32
 195 002a 07D0     		beq	.L22
 196 002c 41F20A02 		movw	r2, #4106
 197 0030 9542     		cmp	r5, r2
 198 0032 1BD0     		beq	.L23
 199 0034 082D     		cmp	r5, #8
 200 0036 01D0     		beq	.L22
2338:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 201              		.loc 1 2338 0
 202 0038 5C20     		movs	r0, #92
 203              	.LVL20:
 204 003a 70BD     		pop	{r4, r5, r6, pc}
 205              	.LVL21:
 206              	.L22:
2268:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (*(const int*)optval) {
 207              		.loc 1 2268 0
 208 003c 049A     		ldr	r2, [sp, #16]
 209 003e 032A     		cmp	r2, #3
 210 0040 01D8     		bhi	.L59
 211 0042 1620     		movs	r0, #22
 212              	.LVL22:
 213 0044 70BD     		pop	{r4, r5, r6, pc}
 214              	.LVL23:
 215              	.L59:
2268:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (*(const int*)optval) {
 216              		.loc 1 2268 0 is_stmt 0 discriminator 2
 217 0046 1B68     		ldr	r3, [r3]
 218 0048 002B     		cmp	r3, #0
 219 004a 7ED0     		beq	.L35
2268:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (*(const int*)optval) {
 220              		.loc 1 2268 0 discriminator 4
 221 004c 5B68     		ldr	r3, [r3, #4]
 222 004e 002B     		cmp	r3, #0
 223 0050 7DD0     		beq	.L36
2269:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ip_set_option(sock->conn->pcb.ip, optname);
 224              		.loc 1 2269 0 is_stmt 1
 225 0052 3268     		ldr	r2, [r6]
 226 0054 22B1     		cbz	r2, .L24
2270:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
 227              		.loc 1 2270 0
 228 0056 1A7A     		ldrb	r2, [r3, #8]	@ zero_extendqisi2
 229 0058 1543     		orrs	r5, r5, r2
 230              	.LVL24:
 231 005a 1D72     		strb	r5, [r3, #8]
2248:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 232              		.loc 1 2248 0
 233 005c 0020     		movs	r0, #0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 50


 234              	.LVL25:
 235 005e 70BD     		pop	{r4, r5, r6, pc}
 236              	.LVL26:
 237              	.L24:
2272:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 238              		.loc 1 2272 0
 239 0060 1A7A     		ldrb	r2, [r3, #8]	@ zero_extendqisi2
 240 0062 22EA0505 		bic	r5, r2, r5
 241              	.LVL27:
 242 0066 1D72     		strb	r5, [r3, #8]
2248:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 243              		.loc 1 2248 0
 244 0068 0020     		movs	r0, #0
 245              	.LVL28:
 246 006a 70BD     		pop	{r4, r5, r6, pc}
 247              	.LVL29:
 248              	.L23:
2321:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
 249              		.loc 1 2321 0
 250 006c 049A     		ldr	r2, [sp, #16]
 251 006e 032A     		cmp	r2, #3
 252 0070 01D8     		bhi	.L60
 253 0072 1620     		movs	r0, #22
 254              	.LVL30:
 255 0074 70BD     		pop	{r4, r5, r6, pc}
 256              	.LVL31:
 257              	.L60:
2321:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
 258              		.loc 1 2321 0 is_stmt 0 discriminator 2
 259 0076 0368     		ldr	r3, [r0]
 260 0078 002B     		cmp	r3, #0
 261 007a 6AD0     		beq	.L38
2321:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
 262              		.loc 1 2321 0 discriminator 4
 263 007c 5A68     		ldr	r2, [r3, #4]
 264 007e 002A     		cmp	r2, #0
 265 0080 69D0     		beq	.L39
2321:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
 266              		.loc 1 2321 0 discriminator 6
 267 0082 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 268 0084 03F0F003 		and	r3, r3, #240
 269 0088 202B     		cmp	r3, #32
 270 008a 01D0     		beq	.L61
2321:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
 271              		.loc 1 2321 0
 272 008c 5C20     		movs	r0, #92
 273              	.LVL32:
 274 008e 70BD     		pop	{r4, r5, r6, pc}
 275              	.LVL33:
 276              	.L61:
2328:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         udp_setflags(sock->conn->pcb.udp, udp_flags(sock->conn->pcb.udp) | UDP_FLAGS_NOCHKSUM);
 277              		.loc 1 2328 0 is_stmt 1
 278 0090 3368     		ldr	r3, [r6]
 279 0092 2BB1     		cbz	r3, .L25
2329:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
 280              		.loc 1 2329 0
 281 0094 137C     		ldrb	r3, [r2, #16]	@ zero_extendqisi2
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 51


 282 0096 43F00103 		orr	r3, r3, #1
 283 009a 1374     		strb	r3, [r2, #16]
2248:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 284              		.loc 1 2248 0
 285 009c 0020     		movs	r0, #0
 286              	.LVL34:
 287 009e 70BD     		pop	{r4, r5, r6, pc}
 288              	.LVL35:
 289              	.L25:
2331:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 290              		.loc 1 2331 0
 291 00a0 137C     		ldrb	r3, [r2, #16]	@ zero_extendqisi2
 292 00a2 03F0FE03 		and	r3, r3, #254
 293 00a6 1374     		strb	r3, [r2, #16]
2248:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 294              		.loc 1 2248 0
 295 00a8 0020     		movs	r0, #0
 296              	.LVL36:
 297 00aa 70BD     		pop	{r4, r5, r6, pc}
 298              	.LVL37:
 299              	.L58:
2345:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_TTL:
 300              		.loc 1 2345 0
 301 00ac 012D     		cmp	r5, #1
 302 00ae 10D0     		beq	.L26
 303 00b0 022D     		cmp	r5, #2
 304 00b2 52D1     		bne	.L55
2347:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.ip->ttl = (u8_t)(*(const int*)optval);
 305              		.loc 1 2347 0
 306 00b4 049A     		ldr	r2, [sp, #16]
 307 00b6 032A     		cmp	r2, #3
 308 00b8 01D8     		bhi	.L62
 309 00ba 1620     		movs	r0, #22
 310              	.LVL38:
 311 00bc 70BD     		pop	{r4, r5, r6, pc}
 312              	.LVL39:
 313              	.L62:
2347:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.ip->ttl = (u8_t)(*(const int*)optval);
 314              		.loc 1 2347 0 is_stmt 0 discriminator 2
 315 00be 0368     		ldr	r3, [r0]
 316 00c0 002B     		cmp	r3, #0
 317 00c2 4CD0     		beq	.L43
2347:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.ip->ttl = (u8_t)(*(const int*)optval);
 318              		.loc 1 2347 0 discriminator 4
 319 00c4 5B68     		ldr	r3, [r3, #4]
 320 00c6 002B     		cmp	r3, #0
 321 00c8 4BD0     		beq	.L44
2348:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_IP, IP_TTL, ..) -> %d\n",
 322              		.loc 1 2348 0 is_stmt 1
 323 00ca 3278     		ldrb	r2, [r6]	@ zero_extendqisi2
 324 00cc 9A72     		strb	r2, [r3, #10]
2248:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 325              		.loc 1 2248 0
 326 00ce 0020     		movs	r0, #0
 327              	.LVL40:
2351:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_TOS:
 328              		.loc 1 2351 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 52


 329 00d0 70BD     		pop	{r4, r5, r6, pc}
 330              	.LVL41:
 331              	.L26:
2353:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.ip->tos = (u8_t)(*(const int*)optval);
 332              		.loc 1 2353 0
 333 00d2 049A     		ldr	r2, [sp, #16]
 334 00d4 032A     		cmp	r2, #3
 335 00d6 01D8     		bhi	.L63
 336 00d8 1620     		movs	r0, #22
 337              	.LVL42:
 338 00da 70BD     		pop	{r4, r5, r6, pc}
 339              	.LVL43:
 340              	.L63:
2353:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.ip->tos = (u8_t)(*(const int*)optval);
 341              		.loc 1 2353 0 is_stmt 0 discriminator 2
 342 00dc 0368     		ldr	r3, [r0]
 343 00de 002B     		cmp	r3, #0
 344 00e0 41D0     		beq	.L46
2353:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.ip->tos = (u8_t)(*(const int*)optval);
 345              		.loc 1 2353 0 discriminator 4
 346 00e2 5B68     		ldr	r3, [r3, #4]
 347 00e4 002B     		cmp	r3, #0
 348 00e6 40D0     		beq	.L47
2354:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_IP, IP_TOS, ..)-> %d\n",
 349              		.loc 1 2354 0 is_stmt 1
 350 00e8 3278     		ldrb	r2, [r6]	@ zero_extendqisi2
 351 00ea 5A72     		strb	r2, [r3, #9]
2248:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 352              		.loc 1 2248 0
 353 00ec 0020     		movs	r0, #0
 354              	.LVL44:
2357:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MULTICAST_TX_OPTIONS
 355              		.loc 1 2357 0
 356 00ee 70BD     		pop	{r4, r5, r6, pc}
 357              	.LVL45:
 358              	.L19:
2423:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
 359              		.loc 1 2423 0
 360 00f0 049A     		ldr	r2, [sp, #16]
 361 00f2 032A     		cmp	r2, #3
 362 00f4 01D8     		bhi	.L64
 363 00f6 1620     		movs	r0, #22
 364              	.LVL46:
 365 00f8 70BD     		pop	{r4, r5, r6, pc}
 366              	.LVL47:
 367              	.L64:
2423:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
 368              		.loc 1 2423 0 is_stmt 0 discriminator 2
 369 00fa 0368     		ldr	r3, [r0]
 370 00fc 002B     		cmp	r3, #0
 371 00fe 36D0     		beq	.L49
2423:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
 372              		.loc 1 2423 0 discriminator 4
 373 0100 5A68     		ldr	r2, [r3, #4]
 374 0102 002A     		cmp	r2, #0
 375 0104 35D0     		beq	.L50
2423:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 53


 376              		.loc 1 2423 0 discriminator 6
 377 0106 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 378 0108 03F0F003 		and	r3, r3, #240
 379 010c 102B     		cmp	r3, #16
 380 010e 01D0     		beq	.L65
2423:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
 381              		.loc 1 2423 0
 382 0110 5C20     		movs	r0, #92
 383              	.LVL48:
 384 0112 70BD     		pop	{r4, r5, r6, pc}
 385              	.LVL49:
 386              	.L65:
2424:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_NODELAY:
 387              		.loc 1 2424 0 is_stmt 1
 388 0114 012D     		cmp	r5, #1
 389 0116 03D0     		beq	.L28
 390 0118 022D     		cmp	r5, #2
 391 011a 0FD0     		beq	.L29
2460:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 392              		.loc 1 2460 0
 393 011c 5C20     		movs	r0, #92
 394              	.LVL50:
2551:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
2552:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }  /* switch (optname) */
2553:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2554:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   default:
2555:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, level=0x%x, UNIMPL: optname=0x%x, ..)\n",
2556:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                 s, level, optname));
2557:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = ENOPROTOOPT;
2558:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2559:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }  /* switch (level) */
2560:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2561:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return err;
2562:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 395              		.loc 1 2562 0
 396 011e 70BD     		pop	{r4, r5, r6, pc}
 397              	.LVL51:
 398              	.L28:
2426:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         tcp_nagle_disable(sock->conn->pcb.tcp);
 399              		.loc 1 2426 0
 400 0120 3368     		ldr	r3, [r6]
 401 0122 2BB1     		cbz	r3, .L30
2427:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
 402              		.loc 1 2427 0
 403 0124 937E     		ldrb	r3, [r2, #26]	@ zero_extendqisi2
 404 0126 43F04003 		orr	r3, r3, #64
 405 012a 9376     		strb	r3, [r2, #26]
2248:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 406              		.loc 1 2248 0
 407 012c 0020     		movs	r0, #0
 408              	.LVL52:
 409 012e 70BD     		pop	{r4, r5, r6, pc}
 410              	.LVL53:
 411              	.L30:
2429:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 412              		.loc 1 2429 0
 413 0130 937E     		ldrb	r3, [r2, #26]	@ zero_extendqisi2
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 54


 414 0132 03F0BF03 		and	r3, r3, #191
 415 0136 9376     		strb	r3, [r2, #26]
2248:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 416              		.loc 1 2248 0
 417 0138 0020     		movs	r0, #0
 418              	.LVL54:
 419 013a 70BD     		pop	{r4, r5, r6, pc}
 420              	.LVL55:
 421              	.L29:
2435:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_TCP, TCP_KEEPALIVE) -> %"U32_F"\n",
 422              		.loc 1 2435 0
 423 013c 3368     		ldr	r3, [r6]
 424 013e C2F89030 		str	r3, [r2, #144]
2248:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 425              		.loc 1 2248 0
 426 0142 0020     		movs	r0, #0
 427              	.LVL56:
2438:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 428              		.loc 1 2438 0
 429 0144 70BD     		pop	{r4, r5, r6, pc}
 430              	.LVL57:
 431              	.L31:
2251:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 432              		.loc 1 2251 0
 433 0146 0920     		movs	r0, #9
 434              	.LVL58:
 435 0148 70BD     		pop	{r4, r5, r6, pc}
 436              	.LVL59:
 437              	.L35:
2268:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (*(const int*)optval) {
 438              		.loc 1 2268 0
 439 014a 1620     		movs	r0, #22
 440              	.LVL60:
 441 014c 70BD     		pop	{r4, r5, r6, pc}
 442              	.LVL61:
 443              	.L36:
 444 014e 1620     		movs	r0, #22
 445              	.LVL62:
 446 0150 70BD     		pop	{r4, r5, r6, pc}
 447              	.LVL63:
 448              	.L38:
2321:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
 449              		.loc 1 2321 0
 450 0152 1620     		movs	r0, #22
 451              	.LVL64:
 452 0154 70BD     		pop	{r4, r5, r6, pc}
 453              	.LVL65:
 454              	.L39:
 455 0156 1620     		movs	r0, #22
 456              	.LVL66:
 457 0158 70BD     		pop	{r4, r5, r6, pc}
 458              	.LVL67:
 459              	.L55:
2414:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 460              		.loc 1 2414 0
 461 015a 5C20     		movs	r0, #92
 462              	.LVL68:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 55


 463 015c 70BD     		pop	{r4, r5, r6, pc}
 464              	.LVL69:
 465              	.L43:
2347:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.ip->ttl = (u8_t)(*(const int*)optval);
 466              		.loc 1 2347 0
 467 015e 1620     		movs	r0, #22
 468              	.LVL70:
 469 0160 70BD     		pop	{r4, r5, r6, pc}
 470              	.LVL71:
 471              	.L44:
 472 0162 1620     		movs	r0, #22
 473              	.LVL72:
 474 0164 70BD     		pop	{r4, r5, r6, pc}
 475              	.LVL73:
 476              	.L46:
2353:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->conn->pcb.ip->tos = (u8_t)(*(const int*)optval);
 477              		.loc 1 2353 0
 478 0166 1620     		movs	r0, #22
 479              	.LVL74:
 480 0168 70BD     		pop	{r4, r5, r6, pc}
 481              	.LVL75:
 482              	.L47:
 483 016a 1620     		movs	r0, #22
 484              	.LVL76:
 485 016c 70BD     		pop	{r4, r5, r6, pc}
 486              	.LVL77:
 487              	.L49:
2423:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
 488              		.loc 1 2423 0
 489 016e 1620     		movs	r0, #22
 490              	.LVL78:
 491 0170 70BD     		pop	{r4, r5, r6, pc}
 492              	.LVL79:
 493              	.L50:
 494 0172 1620     		movs	r0, #22
 495              	.LVL80:
 496 0174 70BD     		pop	{r4, r5, r6, pc}
 497              		.cfi_endproc
 498              	.LFE171:
 500              		.section	.text.lwip_getsockopt_impl,"ax",%progbits
 501              		.align	1
 502              		.syntax unified
 503              		.thumb
 504              		.thumb_func
 505              		.fpu fpv5-sp-d16
 507              	lwip_getsockopt_impl:
 508              	.LFB169:
1845:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t err = 0;
 509              		.loc 1 1845 0
 510              		.cfi_startproc
 511              		@ args = 4, pretend = 0, frame = 0
 512              		@ frame_needed = 0, uses_anonymous_args = 0
 513              	.LVL81:
 514 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 515              	.LCFI4:
 516              		.cfi_def_cfa_offset 24
 517              		.cfi_offset 3, -24
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 56


 518              		.cfi_offset 4, -20
 519              		.cfi_offset 5, -16
 520              		.cfi_offset 6, -12
 521              		.cfi_offset 7, -8
 522              		.cfi_offset 14, -4
 523 0002 0C46     		mov	r4, r1
 524 0004 1546     		mov	r5, r2
 525 0006 1F46     		mov	r7, r3
 526              	.LVL82:
1847:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 527              		.loc 1 1847 0
 528 0008 FFF7FEFF 		bl	tryget_socket
 529              	.LVL83:
1848:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return EBADF;
 530              		.loc 1 1848 0
 531 000c 0028     		cmp	r0, #0
 532 000e 00F0F580 		beq	.L88
 533 0012 0646     		mov	r6, r0
1852:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 534              		.loc 1 1852 0
 535 0014 062C     		cmp	r4, #6
 536 0016 00F0CD80 		beq	.L68
 537 001a 40F6FF73 		movw	r3, #4095
 538 001e 9C42     		cmp	r4, r3
 539 0020 04D0     		beq	.L69
 540 0022 002C     		cmp	r4, #0
 541 0024 00F0A280 		beq	.L123
2138:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 542              		.loc 1 2138 0
 543 0028 5C20     		movs	r0, #92
 544              	.LVL84:
 545 002a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 546              	.LVL85:
 547              	.L69:
1856:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 548              		.loc 1 1856 0
 549 002c 202D     		cmp	r5, #32
 550 002e 12D0     		beq	.L71
 551 0030 0DDD     		ble	.L124
 552 0032 41F20803 		movw	r3, #4104
 553 0036 9D42     		cmp	r5, r3
 554 0038 3ED0     		beq	.L74
 555 003a 41F20A03 		movw	r3, #4106
 556 003e 9D42     		cmp	r5, r3
 557 0040 7BD0     		beq	.L75
 558 0042 41F20703 		movw	r3, #4103
 559 0046 9D42     		cmp	r5, r3
 560 0048 58D0     		beq	.L125
 561              	.L90:
1968:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 562              		.loc 1 1968 0
 563 004a 5C20     		movs	r0, #92
 564              	.LVL86:
 565 004c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 566              	.LVL87:
 567              	.L124:
1856:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 57


 568              		.loc 1 1856 0
 569 004e 022D     		cmp	r5, #2
 570 0050 07D0     		beq	.L73
 571 0052 082D     		cmp	r5, #8
 572 0054 F9D1     		bne	.L90
 573              	.L71:
1878:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = ip_get_option(sock->conn->pcb.ip, optname);
 574              		.loc 1 1878 0
 575 0056 069B     		ldr	r3, [sp, #24]
 576 0058 1B68     		ldr	r3, [r3]
 577 005a 032B     		cmp	r3, #3
 578 005c 1FD8     		bhi	.L126
 579 005e 1620     		movs	r0, #22
 580              	.LVL88:
 581 0060 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 582              	.LVL89:
 583              	.L73:
1860:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (NETCONNTYPE_GROUP(sock->conn->type) != NETCONN_TCP) {
 584              		.loc 1 1860 0
 585 0062 069B     		ldr	r3, [sp, #24]
 586 0064 1B68     		ldr	r3, [r3]
 587 0066 032B     		cmp	r3, #3
 588 0068 01D8     		bhi	.L127
 589 006a 1620     		movs	r0, #22
 590              	.LVL90:
 591 006c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 592              	.LVL91:
 593              	.L127:
1860:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (NETCONNTYPE_GROUP(sock->conn->type) != NETCONN_TCP) {
 594              		.loc 1 1860 0 is_stmt 0 discriminator 2
 595 006e 0368     		ldr	r3, [r0]
 596 0070 002B     		cmp	r3, #0
 597 0072 00F0C580 		beq	.L92
1860:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (NETCONNTYPE_GROUP(sock->conn->type) != NETCONN_TCP) {
 598              		.loc 1 1860 0 discriminator 4
 599 0076 5A68     		ldr	r2, [r3, #4]
 600 0078 002A     		cmp	r2, #0
 601 007a 00F0C380 		beq	.L93
1861:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return ENOPROTOOPT;
 602              		.loc 1 1861 0 is_stmt 1
 603 007e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 604 0080 03F0F003 		and	r3, r3, #240
 605 0084 102B     		cmp	r3, #16
 606 0086 01D0     		beq	.L128
1862:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 607              		.loc 1 1862 0
 608 0088 5C20     		movs	r0, #92
 609              	.LVL92:
 610 008a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 611              	.LVL93:
 612              	.L128:
1864:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *(int*)optval = 1;
 613              		.loc 1 1864 0 discriminator 1
 614 008c 137D     		ldrb	r3, [r2, #20]	@ zero_extendqisi2
 615 008e 012B     		cmp	r3, #1
 616 0090 02D0     		beq	.L129
1867:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 58


 617              		.loc 1 1867 0
 618 0092 0020     		movs	r0, #0
 619              	.LVL94:
 620 0094 3860     		str	r0, [r7]
 621 0096 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 622              	.LVL95:
 623              	.L129:
1865:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
 624              		.loc 1 1865 0
 625 0098 3B60     		str	r3, [r7]
1846:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 626              		.loc 1 1846 0
 627 009a 0020     		movs	r0, #0
 628              	.LVL96:
1865:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
 629              		.loc 1 1865 0
 630 009c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 631              	.LVL97:
 632              	.L126:
1878:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = ip_get_option(sock->conn->pcb.ip, optname);
 633              		.loc 1 1878 0 discriminator 2
 634 009e 3368     		ldr	r3, [r6]
 635 00a0 002B     		cmp	r3, #0
 636 00a2 00F0B180 		beq	.L96
1878:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = ip_get_option(sock->conn->pcb.ip, optname);
 637              		.loc 1 1878 0 is_stmt 0 discriminator 4
 638 00a6 5B68     		ldr	r3, [r3, #4]
 639 00a8 002B     		cmp	r3, #0
 640 00aa 00F0AF80 		beq	.L97
1879:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, SOL_SOCKET, optname=0x%x, ..) = %s\n",
 641              		.loc 1 1879 0 is_stmt 1
 642 00ae 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
 643 00b0 1D40     		ands	r5, r5, r3
 644              	.LVL98:
 645 00b2 3D60     		str	r5, [r7]
1846:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 646              		.loc 1 1846 0
 647 00b4 0020     		movs	r0, #0
 648              	.LVL99:
1882:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 649              		.loc 1 1882 0
 650 00b6 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 651              	.LVL100:
 652              	.L74:
1885:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       switch (NETCONNTYPE_GROUP(netconn_type(sock->conn))) {
 653              		.loc 1 1885 0
 654 00b8 069B     		ldr	r3, [sp, #24]
 655 00ba 1B68     		ldr	r3, [r3]
 656 00bc 032B     		cmp	r3, #3
 657 00be 01D8     		bhi	.L130
 658 00c0 1620     		movs	r0, #22
 659              	.LVL101:
 660 00c2 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 661              	.LVL102:
 662              	.L130:
1885:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       switch (NETCONNTYPE_GROUP(netconn_type(sock->conn))) {
 663              		.loc 1 1885 0 is_stmt 0 discriminator 2
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 59


 664 00c4 0368     		ldr	r3, [r0]
 665 00c6 002B     		cmp	r3, #0
 666 00c8 00F0A280 		beq	.L99
1886:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       case NETCONN_RAW:
 667              		.loc 1 1886 0 is_stmt 1
 668 00cc 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 669 00ce 02F0F003 		and	r3, r2, #240
 670 00d2 202B     		cmp	r3, #32
 671 00d4 0ED0     		beq	.L79
 672 00d6 402B     		cmp	r3, #64
 673 00d8 04D0     		beq	.L80
 674 00da 102B     		cmp	r3, #16
 675 00dc 06D0     		beq	.L131
1897:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG,
 676              		.loc 1 1897 0
 677 00de 3A60     		str	r2, [r7]
1846:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 678              		.loc 1 1846 0
 679 00e0 0020     		movs	r0, #0
 680              	.LVL103:
 681 00e2 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 682              	.LVL104:
 683              	.L80:
1888:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
 684              		.loc 1 1888 0
 685 00e4 0323     		movs	r3, #3
 686 00e6 3B60     		str	r3, [r7]
1846:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 687              		.loc 1 1846 0
 688 00e8 0020     		movs	r0, #0
 689              	.LVL105:
1889:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       case NETCONN_TCP:
 690              		.loc 1 1889 0
 691 00ea F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 692              	.LVL106:
 693              	.L131:
1891:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
 694              		.loc 1 1891 0
 695 00ec 0123     		movs	r3, #1
 696 00ee 3B60     		str	r3, [r7]
1846:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 697              		.loc 1 1846 0
 698 00f0 0020     		movs	r0, #0
 699              	.LVL107:
1892:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       case NETCONN_UDP:
 700              		.loc 1 1892 0
 701 00f2 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 702              	.LVL108:
 703              	.L79:
1894:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
 704              		.loc 1 1894 0
 705 00f4 0223     		movs	r3, #2
 706 00f6 3B60     		str	r3, [r7]
1846:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 707              		.loc 1 1846 0
 708 00f8 0020     		movs	r0, #0
 709              	.LVL109:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 60


1895:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       default: /* unrecognized socket type */
 710              		.loc 1 1895 0
 711 00fa F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 712              	.LVL110:
 713              	.L125:
1907:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* only overwrite ERR_OK or temporary errors */
 714              		.loc 1 1907 0
 715 00fc 069B     		ldr	r3, [sp, #24]
 716 00fe 1B68     		ldr	r3, [r3]
 717 0100 032B     		cmp	r3, #3
 718 0102 01D8     		bhi	.L132
 719 0104 1620     		movs	r0, #22
 720              	.LVL111:
 721 0106 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 722              	.LVL112:
 723              	.L132:
1909:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock_set_errno(sock, err_to_errno(sock->conn->last_err));
 724              		.loc 1 1909 0
 725 0108 037C     		ldrb	r3, [r0, #16]	@ zero_extendqisi2
 726 010a 732B     		cmp	r3, #115
 727 010c 18BF     		it	ne
 728 010e 002B     		cmpne	r3, #0
 729 0110 09D1     		bne	.L82
1909:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock_set_errno(sock, err_to_errno(sock->conn->last_err));
 730              		.loc 1 1909 0 is_stmt 0 discriminator 1
 731 0112 0368     		ldr	r3, [r0]
 732 0114 3BB1     		cbz	r3, .L82
 733              	.LBB2:
1910:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 734              		.loc 1 1910 0 is_stmt 1
 735 0116 93F90800 		ldrsb	r0, [r3, #8]
 736              	.LVL113:
 737 011a FFF7FEFF 		bl	err_to_errno
 738              	.LVL114:
 739 011e 3074     		strb	r0, [r6, #16]
 740 0120 08B1     		cbz	r0, .L82
1910:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 741              		.loc 1 1910 0 is_stmt 0 discriminator 1
 742 0122 454B     		ldr	r3, .L140
 743 0124 1860     		str	r0, [r3]
 744              	.LVL115:
 745              	.L82:
 746              	.LBE2:
1912:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->err = 0;
 747              		.loc 1 1912 0 is_stmt 1
 748 0126 337C     		ldrb	r3, [r6, #16]	@ zero_extendqisi2
 749 0128 FF2B     		cmp	r3, #255
 750 012a 03D0     		beq	.L133
 751              	.L83:
1912:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->err = 0;
 752              		.loc 1 1912 0 is_stmt 0 discriminator 4
 753 012c 3B60     		str	r3, [r7]
1913:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, SOL_SOCKET, SO_ERROR) = %d\n",
 754              		.loc 1 1913 0 is_stmt 1 discriminator 4
 755 012e 0020     		movs	r0, #0
 756 0130 3074     		strb	r0, [r6, #16]
1916:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 61


 757              		.loc 1 1916 0 discriminator 4
 758 0132 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 759              	.LVL116:
 760              	.L133:
1912:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->err = 0;
 761              		.loc 1 1912 0
 762 0134 4FF0FF33 		mov	r3, #-1
 763 0138 F8E7     		b	.L83
 764              	.LVL117:
 765              	.L75:
1955:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
 766              		.loc 1 1955 0
 767 013a 069B     		ldr	r3, [sp, #24]
 768 013c 1B68     		ldr	r3, [r3]
 769 013e 032B     		cmp	r3, #3
 770 0140 01D8     		bhi	.L134
 771 0142 1620     		movs	r0, #22
 772              	.LVL118:
 773 0144 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 774              	.LVL119:
 775              	.L134:
1955:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
 776              		.loc 1 1955 0 is_stmt 0 discriminator 2
 777 0146 0368     		ldr	r3, [r0]
 778 0148 002B     		cmp	r3, #0
 779 014a 63D0     		beq	.L103
1955:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
 780              		.loc 1 1955 0 discriminator 4
 781 014c 5A68     		ldr	r2, [r3, #4]
 782 014e 002A     		cmp	r2, #0
 783 0150 62D0     		beq	.L104
1955:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
 784              		.loc 1 1955 0 discriminator 6
 785 0152 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 786 0154 03F0F003 		and	r3, r3, #240
 787 0158 202B     		cmp	r3, #32
 788 015a 01D0     		beq	.L135
1955:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
 789              		.loc 1 1955 0
 790 015c 5C20     		movs	r0, #92
 791              	.LVL120:
 792 015e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 793              	.LVL121:
 794              	.L135:
1962:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 795              		.loc 1 1962 0 is_stmt 1
 796 0160 137C     		ldrb	r3, [r2, #16]	@ zero_extendqisi2
 797 0162 03F00103 		and	r3, r3, #1
 798 0166 3B60     		str	r3, [r7]
1846:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 799              		.loc 1 1846 0
 800 0168 0020     		movs	r0, #0
 801              	.LVL122:
1963:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_UDP*/
 802              		.loc 1 1963 0
 803 016a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 804              	.LVL123:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 62


 805              	.L123:
1975:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_TTL:
 806              		.loc 1 1975 0
 807 016c 012D     		cmp	r5, #1
 808 016e 11D0     		beq	.L84
 809 0170 022D     		cmp	r5, #2
 810 0172 53D1     		bne	.L120
1977:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.ip->ttl;
 811              		.loc 1 1977 0
 812 0174 069B     		ldr	r3, [sp, #24]
 813 0176 1B68     		ldr	r3, [r3]
 814 0178 032B     		cmp	r3, #3
 815 017a 01D8     		bhi	.L136
 816 017c 1620     		movs	r0, #22
 817              	.LVL124:
 818 017e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 819              	.LVL125:
 820              	.L136:
1977:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.ip->ttl;
 821              		.loc 1 1977 0 is_stmt 0 discriminator 2
 822 0180 0368     		ldr	r3, [r0]
 823 0182 002B     		cmp	r3, #0
 824 0184 4CD0     		beq	.L108
1977:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.ip->ttl;
 825              		.loc 1 1977 0 discriminator 4
 826 0186 5B68     		ldr	r3, [r3, #4]
 827 0188 002B     		cmp	r3, #0
 828 018a 4BD0     		beq	.L109
1978:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IP, IP_TTL) = %d\n",
 829              		.loc 1 1978 0 is_stmt 1
 830 018c 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 831 018e 3B60     		str	r3, [r7]
1846:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 832              		.loc 1 1846 0
 833 0190 0020     		movs	r0, #0
 834              	.LVL126:
1981:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IP_TOS:
 835              		.loc 1 1981 0
 836 0192 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 837              	.LVL127:
 838              	.L84:
1983:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.ip->tos;
 839              		.loc 1 1983 0
 840 0194 069B     		ldr	r3, [sp, #24]
 841 0196 1B68     		ldr	r3, [r3]
 842 0198 032B     		cmp	r3, #3
 843 019a 01D8     		bhi	.L137
 844 019c 1620     		movs	r0, #22
 845              	.LVL128:
 846 019e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 847              	.LVL129:
 848              	.L137:
1983:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.ip->tos;
 849              		.loc 1 1983 0 is_stmt 0 discriminator 2
 850 01a0 0368     		ldr	r3, [r0]
 851 01a2 002B     		cmp	r3, #0
 852 01a4 40D0     		beq	.L111
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 63


1983:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.ip->tos;
 853              		.loc 1 1983 0 discriminator 4
 854 01a6 5B68     		ldr	r3, [r3, #4]
 855 01a8 002B     		cmp	r3, #0
 856 01aa 3FD0     		beq	.L112
1984:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IP, IP_TOS) = %d\n",
 857              		.loc 1 1984 0 is_stmt 1
 858 01ac 5B7A     		ldrb	r3, [r3, #9]	@ zero_extendqisi2
 859 01ae 3B60     		str	r3, [r7]
1846:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 860              		.loc 1 1846 0
 861 01b0 0020     		movs	r0, #0
 862              	.LVL130:
1987:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MULTICAST_TX_OPTIONS
 863              		.loc 1 1987 0
 864 01b2 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 865              	.LVL131:
 866              	.L68:
2030:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
 867              		.loc 1 2030 0
 868 01b4 069B     		ldr	r3, [sp, #24]
 869 01b6 1B68     		ldr	r3, [r3]
 870 01b8 032B     		cmp	r3, #3
 871 01ba 01D8     		bhi	.L138
 872 01bc 1620     		movs	r0, #22
 873              	.LVL132:
 874 01be F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 875              	.LVL133:
 876              	.L138:
2030:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
 877              		.loc 1 2030 0 is_stmt 0 discriminator 2
 878 01c0 0368     		ldr	r3, [r0]
 879 01c2 002B     		cmp	r3, #0
 880 01c4 34D0     		beq	.L114
2030:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
 881              		.loc 1 2030 0 discriminator 4
 882 01c6 5A68     		ldr	r2, [r3, #4]
 883 01c8 002A     		cmp	r2, #0
 884 01ca 33D0     		beq	.L115
2030:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
 885              		.loc 1 2030 0 discriminator 6
 886 01cc 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 887 01ce 03F0F003 		and	r3, r3, #240
 888 01d2 102B     		cmp	r3, #16
 889 01d4 01D0     		beq	.L139
2030:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
 890              		.loc 1 2030 0
 891 01d6 5C20     		movs	r0, #92
 892              	.LVL134:
 893 01d8 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 894              	.LVL135:
 895              	.L139:
2031:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_NODELAY:
 896              		.loc 1 2031 0 is_stmt 1
 897 01da 012D     		cmp	r5, #1
 898 01dc 03D0     		beq	.L86
 899 01de 022D     		cmp	r5, #2
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 64


 900 01e0 07D0     		beq	.L87
2063:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 901              		.loc 1 2063 0
 902 01e2 5C20     		movs	r0, #92
 903              	.LVL136:
2150:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 904              		.loc 1 2150 0
 905 01e4 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 906              	.LVL137:
 907              	.L86:
2033:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_TCP, TCP_NODELAY) = %s\n",
 908              		.loc 1 2033 0
 909 01e6 937E     		ldrb	r3, [r2, #26]	@ zero_extendqisi2
 910 01e8 C3F38013 		ubfx	r3, r3, #6, #1
 911 01ec 3B60     		str	r3, [r7]
1846:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 912              		.loc 1 1846 0
 913 01ee 0020     		movs	r0, #0
 914              	.LVL138:
2036:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case TCP_KEEPALIVE:
 915              		.loc 1 2036 0
 916 01f0 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 917              	.LVL139:
 918              	.L87:
2038:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_TCP, TCP_KEEPALIVE) = %d\n",
 919              		.loc 1 2038 0
 920 01f2 D2F89030 		ldr	r3, [r2, #144]
 921 01f6 3B60     		str	r3, [r7]
1846:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 922              		.loc 1 1846 0
 923 01f8 0020     		movs	r0, #0
 924              	.LVL140:
2041:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 925              		.loc 1 2041 0
 926 01fa F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 927              	.LVL141:
 928              	.L88:
1849:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 929              		.loc 1 1849 0
 930 01fc 0920     		movs	r0, #9
 931              	.LVL142:
 932 01fe F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 933              	.LVL143:
 934              	.L92:
1860:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (NETCONNTYPE_GROUP(sock->conn->type) != NETCONN_TCP) {
 935              		.loc 1 1860 0
 936 0200 1620     		movs	r0, #22
 937              	.LVL144:
 938 0202 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 939              	.LVL145:
 940              	.L93:
 941 0204 1620     		movs	r0, #22
 942              	.LVL146:
 943 0206 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 944              	.LVL147:
 945              	.L96:
1878:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = ip_get_option(sock->conn->pcb.ip, optname);
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 65


 946              		.loc 1 1878 0
 947 0208 1620     		movs	r0, #22
 948              	.LVL148:
 949 020a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 950              	.LVL149:
 951              	.L97:
 952 020c 1620     		movs	r0, #22
 953              	.LVL150:
 954 020e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 955              	.LVL151:
 956              	.L99:
1885:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       switch (NETCONNTYPE_GROUP(netconn_type(sock->conn))) {
 957              		.loc 1 1885 0
 958 0210 1620     		movs	r0, #22
 959              	.LVL152:
 960 0212 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 961              	.LVL153:
 962              	.L103:
1955:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
 963              		.loc 1 1955 0
 964 0214 1620     		movs	r0, #22
 965              	.LVL154:
 966 0216 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 967              	.LVL155:
 968              	.L104:
 969 0218 1620     		movs	r0, #22
 970              	.LVL156:
 971 021a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 972              	.LVL157:
 973              	.L120:
2021:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 974              		.loc 1 2021 0
 975 021c 5C20     		movs	r0, #92
 976              	.LVL158:
 977 021e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 978              	.LVL159:
 979              	.L108:
1977:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.ip->ttl;
 980              		.loc 1 1977 0
 981 0220 1620     		movs	r0, #22
 982              	.LVL160:
 983 0222 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 984              	.LVL161:
 985              	.L109:
 986 0224 1620     		movs	r0, #22
 987              	.LVL162:
 988 0226 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 989              	.LVL163:
 990              	.L111:
1983:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *(int*)optval = sock->conn->pcb.ip->tos;
 991              		.loc 1 1983 0
 992 0228 1620     		movs	r0, #22
 993              	.LVL164:
 994 022a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 995              	.LVL165:
 996              	.L112:
 997 022c 1620     		movs	r0, #22
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 66


 998              	.LVL166:
 999 022e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1000              	.LVL167:
 1001              	.L114:
2030:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     switch (optname) {
 1002              		.loc 1 2030 0
 1003 0230 1620     		movs	r0, #22
 1004              	.LVL168:
 1005 0232 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1006              	.LVL169:
 1007              	.L115:
 1008 0234 1620     		movs	r0, #22
 1009              	.LVL170:
 1010 0236 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1011              	.LVL171:
 1012              	.L141:
 1013              		.align	2
 1014              	.L140:
 1015 0238 00000000 		.word	errno
 1016              		.cfi_endproc
 1017              	.LFE169:
 1019              		.section	.text.alloc_socket,"ax",%progbits
 1020              		.align	1
 1021              		.syntax unified
 1022              		.thumb
 1023              		.thumb_func
 1024              		.fpu fpv5-sp-d16
 1026              	alloc_socket:
 1027              	.LFB145:
 401:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int i;
 1028              		.loc 1 401 0
 1029              		.cfi_startproc
 1030              		@ args = 0, pretend = 0, frame = 0
 1031              		@ frame_needed = 0, uses_anonymous_args = 0
 1032              	.LVL172:
 1033 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1034              	.LCFI5:
 1035              		.cfi_def_cfa_offset 24
 1036              		.cfi_offset 3, -24
 1037              		.cfi_offset 4, -20
 1038              		.cfi_offset 5, -16
 1039              		.cfi_offset 6, -12
 1040              		.cfi_offset 7, -8
 1041              		.cfi_offset 14, -4
 1042 0002 0646     		mov	r6, r0
 1043 0004 0D46     		mov	r5, r1
 1044              	.LVL173:
 406:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Protect socket array */
 1045              		.loc 1 406 0
 1046 0006 0024     		movs	r4, #0
 1047              	.LVL174:
 1048              	.L143:
 406:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Protect socket array */
 1049              		.loc 1 406 0 is_stmt 0 discriminator 1
 1050 0008 032C     		cmp	r4, #3
 1051 000a 2CDC     		bgt	.L150
 408:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!sockets[i].conn) {
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 67


 1052              		.loc 1 408 0 is_stmt 1
 1053 000c FFF7FEFF 		bl	sys_arch_protect
 1054              	.LVL175:
 409:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].conn       = newconn;
 1055              		.loc 1 409 0
 1056 0010 04EB8402 		add	r2, r4, r4, lsl #2
 1057 0014 9300     		lsls	r3, r2, #2
 1058 0016 164A     		ldr	r2, .L153
 1059 0018 D358     		ldr	r3, [r2, r3]
 1060 001a 1BB1     		cbz	r3, .L151
 425:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 1061              		.loc 1 425 0 discriminator 2
 1062 001c FFF7FEFF 		bl	sys_arch_unprotect
 1063              	.LVL176:
 406:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Protect socket array */
 1064              		.loc 1 406 0 discriminator 2
 1065 0020 0134     		adds	r4, r4, #1
 1066              	.LVL177:
 1067 0022 F1E7     		b	.L143
 1068              	.LVL178:
 1069              	.L151:
 410:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* The socket is not yet known to anyone, so no need to protect
 1070              		.loc 1 410 0
 1071 0024 1146     		mov	r1, r2
 1072 0026 A300     		lsls	r3, r4, #2
 1073 0028 2344     		add	r3, r3, r4
 1074 002a 9A00     		lsls	r2, r3, #2
 1075 002c 8F18     		adds	r7, r1, r2
 1076 002e 8E50     		str	r6, [r1, r2]
 413:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].lastdata   = NULL;
 1077              		.loc 1 413 0
 1078 0030 FFF7FEFF 		bl	sys_arch_unprotect
 1079              	.LVL179:
 414:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].lastoffset = 0;
 1080              		.loc 1 414 0
 1081 0034 0023     		movs	r3, #0
 1082 0036 7B60     		str	r3, [r7, #4]
 415:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].rcvevent   = 0;
 1083              		.loc 1 415 0
 1084 0038 3B81     		strh	r3, [r7, #8]	@ movhi
 416:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* TCP sendbuf is empty, but the socket is not yet writable until connected
 1085              		.loc 1 416 0
 1086 003a 7B81     		strh	r3, [r7, #10]	@ movhi
 419:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].errevent   = 0;
 1087              		.loc 1 419 0
 1088 003c 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 1089 003e 03F0F003 		and	r3, r3, #240
 1090 0042 102B     		cmp	r3, #16
 1091 0044 0BD0     		beq	.L152
 1092 0046 0125     		movs	r5, #1
 1093              	.LVL180:
 1094              	.L145:
 419:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].errevent   = 0;
 1095              		.loc 1 419 0 is_stmt 0 discriminator 6
 1096 0048 A200     		lsls	r2, r4, #2
 1097 004a 2244     		add	r2, r2, r4
 1098 004c 9100     		lsls	r1, r2, #2
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 68


 1099 004e 084B     		ldr	r3, .L153
 1100 0050 0B44     		add	r3, r3, r1
 1101 0052 9D81     		strh	r5, [r3, #12]	@ movhi
 420:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].err        = 0;
 1102              		.loc 1 420 0 is_stmt 1 discriminator 6
 1103 0054 0022     		movs	r2, #0
 1104 0056 DA81     		strh	r2, [r3, #14]	@ movhi
 421:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].select_waiting = 0;
 1105              		.loc 1 421 0 discriminator 6
 1106 0058 1A74     		strb	r2, [r3, #16]
 422:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return i + LWIP_SOCKET_OFFSET;
 1107              		.loc 1 422 0 discriminator 6
 1108 005a 5A74     		strb	r2, [r3, #17]
 423:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 1109              		.loc 1 423 0 discriminator 6
 1110 005c 05E0     		b	.L142
 1111              	.LVL181:
 1112              	.L152:
 419:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].errevent   = 0;
 1113              		.loc 1 419 0 discriminator 2
 1114 005e 002D     		cmp	r5, #0
 1115 0060 F2D0     		beq	.L145
 419:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].errevent   = 0;
 1116              		.loc 1 419 0 is_stmt 0
 1117 0062 0125     		movs	r5, #1
 1118              	.LVL182:
 1119 0064 F0E7     		b	.L145
 1120              	.LVL183:
 1121              	.L150:
 427:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 1122              		.loc 1 427 0 is_stmt 1
 1123 0066 4FF0FF34 		mov	r4, #-1
 1124              	.LVL184:
 1125              	.L142:
 428:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1126              		.loc 1 428 0
 1127 006a 2046     		mov	r0, r4
 1128 006c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1129              	.LVL185:
 1130              	.L154:
 1131 006e 00BF     		.align	2
 1132              	.L153:
 1133 0070 00000000 		.word	.LANCHOR0
 1134              		.cfi_endproc
 1135              	.LFE145:
 1137              		.section	.text.lwip_selscan,"ax",%progbits
 1138              		.align	1
 1139              		.syntax unified
 1140              		.thumb
 1141              		.thumb_func
 1142              		.fpu fpv5-sp-d16
 1144              	lwip_selscan:
 1145              	.LFB161:
1271:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int i, nready = 0;
 1146              		.loc 1 1271 0
 1147              		.cfi_startproc
 1148              		@ args = 12, pretend = 0, frame = 40
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 69


 1149              		@ frame_needed = 0, uses_anonymous_args = 0
 1150              	.LVL186:
 1151 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1152              	.LCFI6:
 1153              		.cfi_def_cfa_offset 36
 1154              		.cfi_offset 4, -36
 1155              		.cfi_offset 5, -32
 1156              		.cfi_offset 6, -28
 1157              		.cfi_offset 7, -24
 1158              		.cfi_offset 8, -20
 1159              		.cfi_offset 9, -16
 1160              		.cfi_offset 10, -12
 1161              		.cfi_offset 11, -8
 1162              		.cfi_offset 14, -4
 1163 0004 8BB0     		sub	sp, sp, #44
 1164              	.LCFI7:
 1165              		.cfi_def_cfa_offset 80
 1166 0006 8346     		mov	fp, r0
 1167 0008 0D46     		mov	r5, r1
 1168 000a 1646     		mov	r6, r2
 1169 000c 1F46     		mov	r7, r3
 1170              	.LVL187:
 1171              	.LBB3:
1277:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   FD_ZERO(&lwriteset);
 1172              		.loc 1 1277 0
 1173 000e 08AA     		add	r2, sp, #32
 1174              	.LVL188:
 1175 0010 0023     		movs	r3, #0
 1176              	.LVL189:
 1177 0012 03E0     		b	.L156
 1178              	.LVL190:
 1179              	.L157:
1277:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   FD_ZERO(&lwriteset);
 1180              		.loc 1 1277 0 is_stmt 0 discriminator 3
 1181 0014 0021     		movs	r1, #0
 1182 0016 1170     		strb	r1, [r2]
 1183 0018 0133     		adds	r3, r3, #1
 1184              	.LVL191:
 1185 001a 0132     		adds	r2, r2, #1
 1186              	.LVL192:
 1187              	.L156:
1277:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   FD_ZERO(&lwriteset);
 1188              		.loc 1 1277 0 discriminator 1
 1189 001c 072B     		cmp	r3, #7
 1190 001e F9D9     		bls	.L157
 1191 0020 06AA     		add	r2, sp, #24
 1192              	.LVL193:
 1193 0022 0023     		movs	r3, #0
 1194              	.LVL194:
 1195 0024 03E0     		b	.L158
 1196              	.LVL195:
 1197              	.L159:
 1198              	.LBE3:
 1199              	.LBB4:
1278:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   FD_ZERO(&lexceptset);
 1200              		.loc 1 1278 0 is_stmt 1 discriminator 3
 1201 0026 0021     		movs	r1, #0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 70


 1202 0028 1170     		strb	r1, [r2]
 1203 002a 0133     		adds	r3, r3, #1
 1204              	.LVL196:
 1205 002c 0132     		adds	r2, r2, #1
 1206              	.LVL197:
 1207              	.L158:
1278:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   FD_ZERO(&lexceptset);
 1208              		.loc 1 1278 0 is_stmt 0 discriminator 1
 1209 002e 072B     		cmp	r3, #7
 1210 0030 F9D9     		bls	.L159
 1211 0032 04AA     		add	r2, sp, #16
 1212              	.LVL198:
 1213 0034 0023     		movs	r3, #0
 1214              	.LVL199:
 1215 0036 03E0     		b	.L160
 1216              	.LVL200:
 1217              	.L161:
 1218              	.LBE4:
 1219              	.LBB5:
1279:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1220              		.loc 1 1279 0 is_stmt 1 discriminator 3
 1221 0038 0021     		movs	r1, #0
 1222 003a 1170     		strb	r1, [r2]
 1223 003c 0133     		adds	r3, r3, #1
 1224              	.LVL201:
 1225 003e 0132     		adds	r2, r2, #1
 1226              	.LVL202:
 1227              	.L160:
1279:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1228              		.loc 1 1279 0 is_stmt 0 discriminator 1
 1229 0040 072B     		cmp	r3, #7
 1230 0042 F9D9     		bls	.L161
 1231 0044 0023     		movs	r3, #0
 1232              	.LVL203:
 1233 0046 0293     		str	r3, [sp, #8]
 1234 0048 1C46     		mov	r4, r3
 1235 004a 5EE0     		b	.L162
 1236              	.LVL204:
 1237              	.L164:
 1238              	.LBE5:
1291:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock = tryget_socket(i);
 1239              		.loc 1 1291 0 is_stmt 1
 1240 004c FFF7FEFF 		bl	sys_arch_protect
 1241              	.LVL205:
 1242 0050 0190     		str	r0, [sp, #4]
 1243              	.LVL206:
1292:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock != NULL) {
 1244              		.loc 1 1292 0
 1245 0052 2046     		mov	r0, r4
 1246              	.LVL207:
 1247 0054 FFF7FEFF 		bl	tryget_socket
 1248              	.LVL208:
1293:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       void* lastdata = sock->lastdata;
 1249              		.loc 1 1293 0
 1250 0058 0028     		cmp	r0, #0
 1251 005a 78D0     		beq	.L167
 1252              	.LBB6:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 71


1294:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       s16_t rcvevent = sock->rcvevent;
 1253              		.loc 1 1294 0
 1254 005c 4268     		ldr	r2, [r0, #4]
 1255 005e 0392     		str	r2, [sp, #12]
 1256              	.LVL209:
1295:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u16_t sendevent = sock->sendevent;
 1257              		.loc 1 1295 0
 1258 0060 B0F90A90 		ldrsh	r9, [r0, #10]
 1259              	.LVL210:
1296:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u16_t errevent = sock->errevent;
 1260              		.loc 1 1296 0
 1261 0064 B0F80CA0 		ldrh	r10, [r0, #12]
 1262              	.LVL211:
1297:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       SYS_ARCH_UNPROTECT(lev);
 1263              		.loc 1 1297 0
 1264 0068 B0F80E80 		ldrh	r8, [r0, #14]
 1265              	.LVL212:
1298:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1266              		.loc 1 1298 0
 1267 006c 0198     		ldr	r0, [sp, #4]
 1268              	.LVL213:
 1269 006e FFF7FEFF 		bl	sys_arch_unprotect
 1270              	.LVL214:
1302:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lreadset);
 1271              		.loc 1 1302 0
 1272 0072 CDB1     		cbz	r5, .L168
1302:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lreadset);
 1273              		.loc 1 1302 0 is_stmt 0 discriminator 1
 1274 0074 6209     		lsrs	r2, r4, #5
 1275 0076 55F82210 		ldr	r1, [r5, r2, lsl #2]
 1276 007a 04F01F00 		and	r0, r4, #31
 1277 007e 0123     		movs	r3, #1
 1278 0080 8340     		lsls	r3, r3, r0
 1279 0082 1942     		tst	r1, r3
 1280 0084 10D0     		beq	.L168
1302:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lreadset);
 1281              		.loc 1 1302 0 discriminator 2
 1282 0086 0399     		ldr	r1, [sp, #12]
 1283 0088 B9F1000F 		cmp	r9, #0
 1284 008c D8BF     		it	le
 1285 008e 0029     		cmple	r1, #0
 1286 0090 0AD0     		beq	.L168
1303:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_selscan: fd=%d ready for reading\n", i));
 1287              		.loc 1 1303 0 is_stmt 1
 1288 0092 0AA9     		add	r1, sp, #40
 1289 0094 01EB8202 		add	r2, r1, r2, lsl #2
 1290 0098 52F8081C 		ldr	r1, [r2, #-8]
 1291 009c 0B43     		orrs	r3, r3, r1
 1292 009e 42F8083C 		str	r3, [r2, #-8]
1305:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 1293              		.loc 1 1305 0
 1294 00a2 029B     		ldr	r3, [sp, #8]
 1295 00a4 0133     		adds	r3, r3, #1
 1296 00a6 0293     		str	r3, [sp, #8]
 1297              	.LVL215:
 1298              	.L168:
1308:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lwriteset);
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 72


 1299              		.loc 1 1308 0
 1300 00a8 B6B1     		cbz	r6, .L169
1308:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lwriteset);
 1301              		.loc 1 1308 0 is_stmt 0 discriminator 1
 1302 00aa 6209     		lsrs	r2, r4, #5
 1303 00ac 56F82210 		ldr	r1, [r6, r2, lsl #2]
 1304 00b0 04F01F00 		and	r0, r4, #31
 1305 00b4 0123     		movs	r3, #1
 1306 00b6 8340     		lsls	r3, r3, r0
 1307 00b8 1942     		tst	r1, r3
 1308 00ba 0DD0     		beq	.L169
1308:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lwriteset);
 1309              		.loc 1 1308 0 discriminator 2
 1310 00bc BAF1000F 		cmp	r10, #0
 1311 00c0 0AD0     		beq	.L169
1309:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_selscan: fd=%d ready for writing\n", i));
 1312              		.loc 1 1309 0 is_stmt 1
 1313 00c2 0AA9     		add	r1, sp, #40
 1314 00c4 01EB8202 		add	r2, r1, r2, lsl #2
 1315 00c8 52F8101C 		ldr	r1, [r2, #-16]
 1316 00cc 0B43     		orrs	r3, r3, r1
 1317 00ce 42F8103C 		str	r3, [r2, #-16]
1311:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 1318              		.loc 1 1311 0
 1319 00d2 029B     		ldr	r3, [sp, #8]
 1320 00d4 0133     		adds	r3, r3, #1
 1321 00d6 0293     		str	r3, [sp, #8]
 1322              	.LVL216:
 1323              	.L169:
1314:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lexceptset);
 1324              		.loc 1 1314 0
 1325 00d8 B7B1     		cbz	r7, .L166
1314:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lexceptset);
 1326              		.loc 1 1314 0 is_stmt 0 discriminator 1
 1327 00da 6209     		lsrs	r2, r4, #5
 1328 00dc 57F82210 		ldr	r1, [r7, r2, lsl #2]
 1329 00e0 04F01F00 		and	r0, r4, #31
 1330 00e4 0123     		movs	r3, #1
 1331 00e6 8340     		lsls	r3, r3, r0
 1332 00e8 1942     		tst	r1, r3
 1333 00ea 0DD0     		beq	.L166
1314:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lexceptset);
 1334              		.loc 1 1314 0 discriminator 2
 1335 00ec B8F1000F 		cmp	r8, #0
 1336 00f0 0AD0     		beq	.L166
1315:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_selscan: fd=%d ready for exception\n", i));
 1337              		.loc 1 1315 0 is_stmt 1
 1338 00f2 0AA9     		add	r1, sp, #40
 1339 00f4 01EB8202 		add	r2, r1, r2, lsl #2
 1340 00f8 52F8181C 		ldr	r1, [r2, #-24]
 1341 00fc 0B43     		orrs	r3, r3, r1
 1342 00fe 42F8183C 		str	r3, [r2, #-24]
1317:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 1343              		.loc 1 1317 0
 1344 0102 029B     		ldr	r3, [sp, #8]
 1345 0104 0133     		adds	r3, r3, #1
 1346 0106 0293     		str	r3, [sp, #8]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 73


 1347              	.LVL217:
 1348              	.L166:
 1349              	.LBE6:
1283:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* if this FD is not in the set, continue */
 1350              		.loc 1 1283 0 discriminator 2
 1351 0108 0134     		adds	r4, r4, #1
 1352              	.LVL218:
 1353              	.L162:
1283:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* if this FD is not in the set, continue */
 1354              		.loc 1 1283 0 is_stmt 0 discriminator 1
 1355 010a 5C45     		cmp	r4, fp
 1356 010c 23DA     		bge	.L172
1285:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         !(writeset_in && FD_ISSET(i, writeset_in)) &&
 1357              		.loc 1 1285 0 is_stmt 1
 1358 010e 45B1     		cbz	r5, .L163
1285:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         !(writeset_in && FD_ISSET(i, writeset_in)) &&
 1359              		.loc 1 1285 0 is_stmt 0 discriminator 2
 1360 0110 6309     		lsrs	r3, r4, #5
 1361 0112 55F82320 		ldr	r2, [r5, r3, lsl #2]
 1362 0116 04F01F01 		and	r1, r4, #31
 1363 011a 0123     		movs	r3, #1
 1364 011c 8B40     		lsls	r3, r3, r1
 1365 011e 1A42     		tst	r2, r3
 1366 0120 94D1     		bne	.L164
 1367              	.L163:
1285:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         !(writeset_in && FD_ISSET(i, writeset_in)) &&
 1368              		.loc 1 1285 0 discriminator 3
 1369 0122 46B1     		cbz	r6, .L165
1286:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         !(exceptset_in && FD_ISSET(i, exceptset_in))) {
 1370              		.loc 1 1286 0 is_stmt 1
 1371 0124 6309     		lsrs	r3, r4, #5
 1372 0126 56F82320 		ldr	r2, [r6, r3, lsl #2]
 1373 012a 04F01F01 		and	r1, r4, #31
 1374 012e 0123     		movs	r3, #1
 1375 0130 8B40     		lsls	r3, r3, r1
 1376 0132 1A42     		tst	r2, r3
 1377 0134 8AD1     		bne	.L164
 1378              	.L165:
1286:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         !(exceptset_in && FD_ISSET(i, exceptset_in))) {
 1379              		.loc 1 1286 0 is_stmt 0 discriminator 1
 1380 0136 002F     		cmp	r7, #0
 1381 0138 E6D0     		beq	.L166
1287:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       continue;
 1382              		.loc 1 1287 0 is_stmt 1
 1383 013a 6309     		lsrs	r3, r4, #5
 1384 013c 57F82320 		ldr	r2, [r7, r3, lsl #2]
 1385 0140 04F01F01 		and	r1, r4, #31
 1386 0144 0123     		movs	r3, #1
 1387 0146 8B40     		lsls	r3, r3, r1
 1388 0148 1A42     		tst	r2, r3
 1389 014a DDD0     		beq	.L166
 1390 014c 7EE7     		b	.L164
 1391              	.LVL219:
 1392              	.L167:
1320:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* continue on to next FD in list */
 1393              		.loc 1 1320 0
 1394 014e 0198     		ldr	r0, [sp, #4]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 74


 1395              	.LVL220:
 1396 0150 FFF7FEFF 		bl	sys_arch_unprotect
 1397              	.LVL221:
 1398 0154 D8E7     		b	.L166
 1399              	.LVL222:
 1400              	.L172:
1325:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   *writeset_out = lwriteset;
 1401              		.loc 1 1325 0
 1402 0156 0AAB     		add	r3, sp, #40
 1403 0158 13E90300 		ldmdb	r3, {r0, r1}
 1404 015c 149B     		ldr	r3, [sp, #80]
 1405 015e 83E80300 		stm	r3, {r0, r1}
1326:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   *exceptset_out = lexceptset;
 1406              		.loc 1 1326 0
 1407 0162 06AB     		add	r3, sp, #24
 1408 0164 93E80300 		ldm	r3, {r0, r1}
 1409 0168 159B     		ldr	r3, [sp, #84]
 1410 016a 83E80300 		stm	r3, {r0, r1}
1327:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1411              		.loc 1 1327 0
 1412 016e 04AB     		add	r3, sp, #16
 1413 0170 93E80300 		ldm	r3, {r0, r1}
 1414 0174 169B     		ldr	r3, [sp, #88]
 1415 0176 83E80300 		stm	r3, {r0, r1}
1331:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1416              		.loc 1 1331 0
 1417 017a 0298     		ldr	r0, [sp, #8]
 1418 017c 0BB0     		add	sp, sp, #44
 1419              	.LCFI8:
 1420              		.cfi_def_cfa_offset 36
 1421              		@ sp needed
 1422 017e BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1423              		.cfi_endproc
 1424              	.LFE161:
 1426              		.section	.text.lwip_getaddrname,"ax",%progbits
 1427              		.align	1
 1428              		.syntax unified
 1429              		.thumb
 1430              		.thumb_func
 1431              		.fpu fpv5-sp-d16
 1433              	lwip_getaddrname:
 1434              	.LFB165:
1699:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 1435              		.loc 1 1699 0
 1436              		.cfi_startproc
 1437              		@ args = 0, pretend = 0, frame = 24
 1438              		@ frame_needed = 0, uses_anonymous_args = 0
 1439              	.LVL223:
 1440 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1441              	.LCFI9:
 1442              		.cfi_def_cfa_offset 20
 1443              		.cfi_offset 4, -20
 1444              		.cfi_offset 5, -16
 1445              		.cfi_offset 6, -12
 1446              		.cfi_offset 7, -8
 1447              		.cfi_offset 14, -4
 1448 0002 87B0     		sub	sp, sp, #28
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 75


 1449              	.LCFI10:
 1450              		.cfi_def_cfa_offset 48
 1451 0004 0F46     		mov	r7, r1
 1452 0006 1546     		mov	r5, r2
 1453 0008 1E46     		mov	r6, r3
1706:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 1454              		.loc 1 1706 0
 1455 000a FFF7FEFF 		bl	get_socket
 1456              	.LVL224:
1707:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 1457              		.loc 1 1707 0
 1458 000e 88B3     		cbz	r0, .L177
 1459 0010 0446     		mov	r4, r0
1713:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
 1460              		.loc 1 1713 0
 1461 0012 3346     		mov	r3, r6
 1462 0014 0DF10202 		add	r2, sp, #2
 1463 0018 01A9     		add	r1, sp, #4
 1464 001a 0068     		ldr	r0, [r0]
 1465              	.LVL225:
 1466 001c FFF7FEFF 		bl	netconn_getaddr
 1467              	.LVL226:
1714:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
 1468              		.loc 1 1714 0
 1469 0020 40B1     		cbz	r0, .L175
 1470              	.LBB7:
1715:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 1471              		.loc 1 1715 0
 1472 0022 FFF7FEFF 		bl	err_to_errno
 1473              	.LVL227:
 1474 0026 2074     		strb	r0, [r4, #16]
 1475 0028 38B3     		cbz	r0, .L178
1715:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 1476              		.loc 1 1715 0 is_stmt 0 discriminator 1
 1477 002a 154B     		ldr	r3, .L180
 1478 002c 1860     		str	r0, [r3]
 1479              	.LBE7:
1716:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 1480              		.loc 1 1716 0 is_stmt 1 discriminator 1
 1481 002e 4FF0FF30 		mov	r0, #-1
 1482              	.LVL228:
 1483 0032 1DE0     		b	.L173
 1484              	.LVL229:
 1485              	.L175:
1718:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1486              		.loc 1 1718 0
 1487 0034 1023     		movs	r3, #16
 1488 0036 8DF80830 		strb	r3, [sp, #8]
 1489 003a 0223     		movs	r3, #2
 1490 003c 8DF80930 		strb	r3, [sp, #9]
 1491 0040 BDF80200 		ldrh	r0, [sp, #2]
 1492              	.LVL230:
 1493 0044 FFF7FEFF 		bl	lwip_htons
 1494              	.LVL231:
 1495 0048 ADF80A00 		strh	r0, [sp, #10]	@ movhi
 1496 004c 019B     		ldr	r3, [sp, #4]
 1497 004e 0393     		str	r3, [sp, #12]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 76


 1498 0050 0023     		movs	r3, #0
 1499 0052 0493     		str	r3, [sp, #16]
 1500 0054 0593     		str	r3, [sp, #20]
1724:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *namelen = saddr.sa.sa_len;
 1501              		.loc 1 1724 0
 1502 0056 2A68     		ldr	r2, [r5]
 1503 0058 9DF80830 		ldrb	r3, [sp, #8]	@ zero_extendqisi2
 1504 005c 9A42     		cmp	r2, r3
 1505 005e 00D9     		bls	.L176
1725:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 1506              		.loc 1 1725 0
 1507 0060 2B60     		str	r3, [r5]
 1508              	.L176:
1727:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1509              		.loc 1 1727 0
 1510 0062 2A68     		ldr	r2, [r5]
 1511 0064 02A9     		add	r1, sp, #8
 1512 0066 3846     		mov	r0, r7
 1513 0068 FFF7FEFF 		bl	memcpy
 1514              	.LVL232:
 1515              	.LBB8:
1729:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
 1516              		.loc 1 1729 0
 1517 006c 0020     		movs	r0, #0
 1518 006e 2074     		strb	r0, [r4, #16]
 1519              	.LVL233:
 1520              	.L173:
 1521              	.LBE8:
1731:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1522              		.loc 1 1731 0
 1523 0070 07B0     		add	sp, sp, #28
 1524              	.LCFI11:
 1525              		.cfi_remember_state
 1526              		.cfi_def_cfa_offset 20
 1527              		@ sp needed
 1528 0072 F0BD     		pop	{r4, r5, r6, r7, pc}
 1529              	.LVL234:
 1530              	.L177:
 1531              	.LCFI12:
 1532              		.cfi_restore_state
1708:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 1533              		.loc 1 1708 0
 1534 0074 4FF0FF30 		mov	r0, #-1
 1535              	.LVL235:
 1536 0078 FAE7     		b	.L173
 1537              	.LVL236:
 1538              	.L178:
1716:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 1539              		.loc 1 1716 0
 1540 007a 4FF0FF30 		mov	r0, #-1
 1541              	.LVL237:
 1542 007e F7E7     		b	.L173
 1543              	.L181:
 1544              		.align	2
 1545              	.L180:
 1546 0080 00000000 		.word	errno
 1547              		.cfi_endproc
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 77


 1548              	.LFE165:
 1550              		.section	.text.free_socket,"ax",%progbits
 1551              		.align	1
 1552              		.syntax unified
 1553              		.thumb
 1554              		.thumb_func
 1555              		.fpu fpv5-sp-d16
 1557              	free_socket:
 1558              	.LFB146:
 438:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   void *lastdata;
 1559              		.loc 1 438 0
 1560              		.cfi_startproc
 1561              		@ args = 0, pretend = 0, frame = 0
 1562              		@ frame_needed = 0, uses_anonymous_args = 0
 1563              	.LVL238:
 1564 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1565              	.LCFI13:
 1566              		.cfi_def_cfa_offset 24
 1567              		.cfi_offset 3, -24
 1568              		.cfi_offset 4, -20
 1569              		.cfi_offset 5, -16
 1570              		.cfi_offset 6, -12
 1571              		.cfi_offset 7, -8
 1572              		.cfi_offset 14, -4
 1573 0002 0446     		mov	r4, r0
 1574 0004 0F46     		mov	r7, r1
 441:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock->lastdata   = NULL;
 1575              		.loc 1 441 0
 1576 0006 4668     		ldr	r6, [r0, #4]
 1577              	.LVL239:
 442:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock->lastoffset = 0;
 1578              		.loc 1 442 0
 1579 0008 0025     		movs	r5, #0
 1580 000a 4560     		str	r5, [r0, #4]
 443:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock->err        = 0;
 1581              		.loc 1 443 0
 1582 000c 0581     		strh	r5, [r0, #8]	@ movhi
 444:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 1583              		.loc 1 444 0
 1584 000e 0574     		strb	r5, [r0, #16]
 1585              	.LBB9:
 447:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* don't use 'sock' after this line, as another task might have allocated it */
 1586              		.loc 1 447 0
 1587 0010 FFF7FEFF 		bl	sys_arch_protect
 1588              	.LVL240:
 1589 0014 2560     		str	r5, [r4]
 1590 0016 FFF7FEFF 		bl	sys_arch_unprotect
 1591              	.LVL241:
 1592              	.LBE9:
 450:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (is_tcp) {
 1593              		.loc 1 450 0
 1594 001a 1EB1     		cbz	r6, .L182
 451:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       pbuf_free((struct pbuf *)lastdata);
 1595              		.loc 1 451 0
 1596 001c 1FB9     		cbnz	r7, .L186
 454:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 1597              		.loc 1 454 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 78


 1598 001e 3046     		mov	r0, r6
 1599 0020 FFF7FEFF 		bl	netbuf_delete
 1600              	.LVL242:
 1601              	.L182:
 1602 0024 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1603              	.LVL243:
 1604              	.L186:
 452:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 1605              		.loc 1 452 0
 1606 0026 3046     		mov	r0, r6
 1607 0028 FFF7FEFF 		bl	pbuf_free
 1608              	.LVL244:
 1609 002c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1610              		.cfi_endproc
 1611              	.LFE146:
 1613              		.section	.text.event_callback,"ax",%progbits
 1614              		.align	1
 1615              		.syntax unified
 1616              		.thumb
 1617              		.thumb_func
 1618              		.fpu fpv5-sp-d16
 1620              	event_callback:
 1621              	.LFB163:
1537:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int s;
 1622              		.loc 1 1537 0
 1623              		.cfi_startproc
 1624              		@ args = 0, pretend = 0, frame = 0
 1625              		@ frame_needed = 0, uses_anonymous_args = 0
 1626              	.LVL245:
1547:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     s = conn->socket;
 1627              		.loc 1 1547 0
 1628 0000 0028     		cmp	r0, #0
 1629 0002 00F09D80 		beq	.L210
1537:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int s;
 1630              		.loc 1 1537 0
 1631 0006 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1632              	.LCFI14:
 1633              		.cfi_def_cfa_offset 24
 1634              		.cfi_offset 4, -24
 1635              		.cfi_offset 5, -20
 1636              		.cfi_offset 6, -16
 1637              		.cfi_offset 7, -12
 1638              		.cfi_offset 8, -8
 1639              		.cfi_offset 14, -4
 1640 000a 0546     		mov	r5, r0
 1641 000c 0C46     		mov	r4, r1
1548:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (s < 0) {
 1642              		.loc 1 1548 0
 1643 000e D0F81880 		ldr	r8, [r0, #24]
 1644              	.LVL246:
1549:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Data comes in right away after an accept, even though
 1645              		.loc 1 1549 0
 1646 0012 B8F1000F 		cmp	r8, #0
 1647 0016 10DB     		blt	.L213
 1648              	.LVL247:
 1649              	.L189:
1567:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!sock) {
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 79


 1650              		.loc 1 1567 0
 1651 0018 4046     		mov	r0, r8
 1652 001a FFF7FEFF 		bl	get_socket
 1653              	.LVL248:
1568:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return;
 1654              		.loc 1 1568 0
 1655 001e 0746     		mov	r7, r0
 1656 0020 0028     		cmp	r0, #0
 1657 0022 00F08B80 		beq	.L187
1575:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Set event as required */
 1658              		.loc 1 1575 0
 1659 0026 FFF7FEFF 		bl	sys_arch_protect
 1660              	.LVL249:
 1661 002a 0546     		mov	r5, r0
 1662              	.LVL250:
1577:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_RCVPLUS:
 1663              		.loc 1 1577 0
 1664 002c 042C     		cmp	r4, #4
 1665 002e 1AD8     		bhi	.L192
 1666 0030 DFE804F0 		tbb	[pc, r4]
 1667              	.L194:
 1668 0034 15       		.byte	(.L193-.L194)/2
 1669 0035 1E       		.byte	(.L195-.L194)/2
 1670 0036 23       		.byte	(.L196-.L194)/2
 1671 0037 26       		.byte	(.L197-.L194)/2
 1672 0038 29       		.byte	(.L198-.L194)/2
 1673              	.LVL251:
 1674 0039 00       		.p2align 1
 1675              	.L213:
1555:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (conn->socket < 0) {
 1676              		.loc 1 1555 0
 1677 003a FFF7FEFF 		bl	sys_arch_protect
 1678              	.LVL252:
1556:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (evt == NETCONN_EVT_RCVPLUS) {
 1679              		.loc 1 1556 0
 1680 003e D5F81880 		ldr	r8, [r5, #24]
 1681              	.LVL253:
 1682 0042 B8F1000F 		cmp	r8, #0
 1683 0046 02DB     		blt	.L214
 1684              	.LVL254:
1564:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 1685              		.loc 1 1564 0
 1686 0048 FFF7FEFF 		bl	sys_arch_unprotect
 1687              	.LVL255:
 1688 004c E4E7     		b	.L189
 1689              	.LVL256:
 1690              	.L214:
1557:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           conn->socket--;
 1691              		.loc 1 1557 0
 1692 004e 14B9     		cbnz	r4, .L191
1558:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 1693              		.loc 1 1558 0
 1694 0050 08F1FF33 		add	r3, r8, #-1
 1695 0054 AB61     		str	r3, [r5, #24]
 1696              	.L191:
1560:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return;
 1697              		.loc 1 1560 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 80


 1698 0056 FFF7FEFF 		bl	sys_arch_unprotect
 1699              	.LVL257:
1561:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 1700              		.loc 1 1561 0
 1701 005a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1702              	.LVL258:
 1703              	.L193:
1579:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 1704              		.loc 1 1579 0
 1705 005e B7F90A30 		ldrsh	r3, [r7, #10]
 1706 0062 0133     		adds	r3, r3, #1
 1707 0064 7B81     		strh	r3, [r7, #10]	@ movhi
 1708              	.L192:
1598:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* noone is waiting for this socket, no need to check select_cb_list */
 1709              		.loc 1 1598 0
 1710 0066 7B7C     		ldrb	r3, [r7, #17]	@ zero_extendqisi2
 1711 0068 83B1     		cbz	r3, .L215
 1712              	.L199:
1611:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* remember the state of select_cb_list to detect changes */
 1713              		.loc 1 1611 0
 1714 006a 364B     		ldr	r3, .L218
 1715 006c 1C68     		ldr	r4, [r3]
 1716              	.LVL259:
 1717 006e 1FE0     		b	.L200
 1718              	.LVL260:
 1719              	.L195:
1582:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 1720              		.loc 1 1582 0
 1721 0070 B7F90A30 		ldrsh	r3, [r7, #10]
 1722 0074 013B     		subs	r3, r3, #1
 1723 0076 7B81     		strh	r3, [r7, #10]	@ movhi
1583:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_SENDPLUS:
 1724              		.loc 1 1583 0
 1725 0078 F5E7     		b	.L192
 1726              	.L196:
1585:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 1727              		.loc 1 1585 0
 1728 007a 0123     		movs	r3, #1
 1729 007c BB81     		strh	r3, [r7, #12]	@ movhi
1586:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_SENDMINUS:
 1730              		.loc 1 1586 0
 1731 007e F2E7     		b	.L192
 1732              	.L197:
1588:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 1733              		.loc 1 1588 0
 1734 0080 0023     		movs	r3, #0
 1735 0082 BB81     		strh	r3, [r7, #12]	@ movhi
1589:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_ERROR:
 1736              		.loc 1 1589 0
 1737 0084 EFE7     		b	.L192
 1738              	.L198:
1591:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 1739              		.loc 1 1591 0
 1740 0086 0123     		movs	r3, #1
 1741 0088 FB81     		strh	r3, [r7, #14]	@ movhi
1592:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
 1742              		.loc 1 1592 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 81


 1743 008a ECE7     		b	.L192
 1744              	.L215:
1600:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return;
 1745              		.loc 1 1600 0
 1746 008c 2846     		mov	r0, r5
 1747              	.LVL261:
 1748 008e FFF7FEFF 		bl	sys_arch_unprotect
 1749              	.LVL262:
1601:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 1750              		.loc 1 1601 0
 1751 0092 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1752              	.LVL263:
 1753              	.L204:
 1754              	.LBB10:
1633:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         scb->sem_signalled = 1;
 1755              		.loc 1 1633 0
 1756 0096 002B     		cmp	r3, #0
 1757 0098 46D1     		bne	.L216
 1758              	.LVL264:
 1759              	.L201:
 1760              	.LBE10:
1641:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* this makes sure interrupt protection time is short */
 1761              		.loc 1 1641 0
 1762 009a 2846     		mov	r0, r5
 1763 009c FFF7FEFF 		bl	sys_arch_unprotect
 1764              	.LVL265:
1643:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (last_select_cb_ctr != select_cb_ctr) {
 1765              		.loc 1 1643 0
 1766 00a0 FFF7FEFF 		bl	sys_arch_protect
 1767              	.LVL266:
 1768 00a4 0546     		mov	r5, r0
 1769              	.LVL267:
1644:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* someone has changed select_cb_list, restart at the beginning */
 1770              		.loc 1 1644 0
 1771 00a6 284B     		ldr	r3, .L218+4
 1772 00a8 1B68     		ldr	r3, [r3]
 1773 00aa 9E42     		cmp	r6, r3
 1774 00ac DDD1     		bne	.L199
1611:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* remember the state of select_cb_list to detect changes */
 1775              		.loc 1 1611 0 discriminator 2
 1776 00ae 2468     		ldr	r4, [r4]
 1777              	.LVL268:
 1778              	.L200:
1611:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* remember the state of select_cb_list to detect changes */
 1779              		.loc 1 1611 0 is_stmt 0 discriminator 1
 1780 00b0 002C     		cmp	r4, #0
 1781 00b2 40D0     		beq	.L217
1613:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (scb->sem_signalled == 0) {
 1782              		.loc 1 1613 0 is_stmt 1
 1783 00b4 244B     		ldr	r3, .L218+4
 1784 00b6 1E68     		ldr	r6, [r3]
 1785              	.LVL269:
1614:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* semaphore not signalled yet */
 1786              		.loc 1 1614 0
 1787 00b8 6369     		ldr	r3, [r4, #20]
 1788 00ba 002B     		cmp	r3, #0
 1789 00bc EDD1     		bne	.L201
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 82


 1790              	.LVL270:
 1791              	.LBB11:
1618:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (scb->readset && FD_ISSET(s, scb->readset)) {
 1792              		.loc 1 1618 0
 1793 00be B7F90A20 		ldrsh	r2, [r7, #10]
 1794 00c2 002A     		cmp	r2, #0
 1795 00c4 0CDD     		ble	.L202
1619:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
 1796              		.loc 1 1619 0
 1797 00c6 A268     		ldr	r2, [r4, #8]
 1798 00c8 52B1     		cbz	r2, .L202
1619:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
 1799              		.loc 1 1619 0 is_stmt 0 discriminator 1
 1800 00ca 4FEA5811 		lsr	r1, r8, #5
 1801 00ce 52F82110 		ldr	r1, [r2, r1, lsl #2]
 1802 00d2 08F01F00 		and	r0, r8, #31
 1803              	.LVL271:
 1804 00d6 0122     		movs	r2, #1
 1805 00d8 8240     		lsls	r2, r2, r0
 1806 00da 1142     		tst	r1, r2
 1807 00dc 00D0     		beq	.L202
1620:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 1808              		.loc 1 1620 0 is_stmt 1
 1809 00de 0123     		movs	r3, #1
 1810              	.L202:
 1811              	.LVL272:
1623:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (!do_signal && scb->writeset && FD_ISSET(s, scb->writeset)) {
 1812              		.loc 1 1623 0
 1813 00e0 BA89     		ldrh	r2, [r7, #12]
 1814 00e2 6AB1     		cbz	r2, .L203
1624:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
 1815              		.loc 1 1624 0
 1816 00e4 63B9     		cbnz	r3, .L203
1624:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
 1817              		.loc 1 1624 0 is_stmt 0 discriminator 1
 1818 00e6 E268     		ldr	r2, [r4, #12]
 1819 00e8 52B1     		cbz	r2, .L203
1624:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
 1820              		.loc 1 1624 0 discriminator 2
 1821 00ea 4FEA5811 		lsr	r1, r8, #5
 1822 00ee 52F82110 		ldr	r1, [r2, r1, lsl #2]
 1823 00f2 08F01F00 		and	r0, r8, #31
 1824 00f6 0122     		movs	r2, #1
 1825 00f8 8240     		lsls	r2, r2, r0
 1826 00fa 1142     		tst	r1, r2
 1827 00fc 00D0     		beq	.L203
1625:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 1828              		.loc 1 1625 0 is_stmt 1
 1829 00fe 0123     		movs	r3, #1
 1830              	.LVL273:
 1831              	.L203:
1628:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (!do_signal && scb->exceptset && FD_ISSET(s, scb->exceptset)) {
 1832              		.loc 1 1628 0
 1833 0100 FA89     		ldrh	r2, [r7, #14]
 1834 0102 002A     		cmp	r2, #0
 1835 0104 C7D0     		beq	.L204
1629:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 83


 1836              		.loc 1 1629 0
 1837 0106 002B     		cmp	r3, #0
 1838 0108 C5D1     		bne	.L204
1629:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
 1839              		.loc 1 1629 0 is_stmt 0 discriminator 1
 1840 010a 2269     		ldr	r2, [r4, #16]
 1841 010c 002A     		cmp	r2, #0
 1842 010e C2D0     		beq	.L204
1629:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           do_signal = 1;
 1843              		.loc 1 1629 0 discriminator 2
 1844 0110 4FEA5811 		lsr	r1, r8, #5
 1845 0114 52F82110 		ldr	r1, [r2, r1, lsl #2]
 1846 0118 08F01F00 		and	r0, r8, #31
 1847 011c 0122     		movs	r2, #1
 1848 011e 8240     		lsls	r2, r2, r0
 1849 0120 1142     		tst	r1, r2
 1850 0122 B8D0     		beq	.L204
1630:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 1851              		.loc 1 1630 0 is_stmt 1
 1852 0124 0123     		movs	r3, #1
 1853              	.LVL274:
 1854 0126 B6E7     		b	.L204
 1855              	.LVL275:
 1856              	.L216:
1634:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* Don't call SYS_ARCH_UNPROTECT() before signaling the semaphore, as this might
 1857              		.loc 1 1634 0
 1858 0128 0123     		movs	r3, #1
 1859              	.LVL276:
 1860 012a 6361     		str	r3, [r4, #20]
1637:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 1861              		.loc 1 1637 0
 1862 012c 04F11800 		add	r0, r4, #24
 1863 0130 FFF7FEFF 		bl	sys_sem_signal
 1864              	.LVL277:
 1865 0134 B1E7     		b	.L201
 1866              	.LVL278:
 1867              	.L217:
 1868              	.LBE11:
1649:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 1869              		.loc 1 1649 0
 1870 0136 2846     		mov	r0, r5
 1871              	.LVL279:
 1872 0138 FFF7FEFF 		bl	sys_arch_unprotect
 1873              	.LVL280:
 1874              	.L187:
 1875 013c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1876              	.LVL281:
 1877              	.L210:
 1878              	.LCFI15:
 1879              		.cfi_def_cfa_offset 0
 1880              		.cfi_restore 4
 1881              		.cfi_restore 5
 1882              		.cfi_restore 6
 1883              		.cfi_restore 7
 1884              		.cfi_restore 8
 1885              		.cfi_restore 14
 1886 0140 7047     		bx	lr
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 84


 1887              	.L219:
 1888 0142 00BF     		.align	2
 1889              	.L218:
 1890 0144 00000000 		.word	.LANCHOR1
 1891 0148 00000000 		.word	.LANCHOR2
 1892              		.cfi_endproc
 1893              	.LFE163:
 1895              		.section	.text.lwip_socket_thread_init,"ax",%progbits
 1896              		.align	1
 1897              		.global	lwip_socket_thread_init
 1898              		.syntax unified
 1899              		.thumb
 1900              		.thumb_func
 1901              		.fpu fpv5-sp-d16
 1903              	lwip_socket_thread_init:
 1904              	.LFB141:
 331:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    netconn_thread_init();
 1905              		.loc 1 331 0
 1906              		.cfi_startproc
 1907              		@ args = 0, pretend = 0, frame = 0
 1908              		@ frame_needed = 0, uses_anonymous_args = 0
 1909              		@ link register save eliminated.
 1910 0000 7047     		bx	lr
 1911              		.cfi_endproc
 1912              	.LFE141:
 1914              		.section	.text.lwip_socket_thread_cleanup,"ax",%progbits
 1915              		.align	1
 1916              		.global	lwip_socket_thread_cleanup
 1917              		.syntax unified
 1918              		.thumb
 1919              		.thumb_func
 1920              		.fpu fpv5-sp-d16
 1922              	lwip_socket_thread_cleanup:
 1923              	.LFB142:
 338:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    netconn_thread_cleanup();
 1924              		.loc 1 338 0
 1925              		.cfi_startproc
 1926              		@ args = 0, pretend = 0, frame = 0
 1927              		@ frame_needed = 0, uses_anonymous_args = 0
 1928              		@ link register save eliminated.
 1929 0000 7047     		bx	lr
 1930              		.cfi_endproc
 1931              	.LFE142:
 1933              		.section	.text.lwip_accept,"ax",%progbits
 1934              		.align	1
 1935              		.global	lwip_accept
 1936              		.syntax unified
 1937              		.thumb
 1938              		.thumb_func
 1939              		.fpu fpv5-sp-d16
 1941              	lwip_accept:
 1942              	.LFB147:
 467:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock, *nsock;
 1943              		.loc 1 467 0
 1944              		.cfi_startproc
 1945              		@ args = 0, pretend = 0, frame = 32
 1946              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 85


 1947              	.LVL282:
 467:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock, *nsock;
 1948              		.loc 1 467 0
 1949 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 1950              	.LCFI16:
 1951              		.cfi_def_cfa_offset 28
 1952              		.cfi_offset 4, -28
 1953              		.cfi_offset 5, -24
 1954              		.cfi_offset 6, -20
 1955              		.cfi_offset 7, -16
 1956              		.cfi_offset 8, -12
 1957              		.cfi_offset 9, -8
 1958              		.cfi_offset 14, -4
 1959 0004 89B0     		sub	sp, sp, #36
 1960              	.LCFI17:
 1961              		.cfi_def_cfa_offset 64
 1962 0006 0E46     		mov	r6, r1
 1963 0008 1746     		mov	r7, r2
 471:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int newsock;
 1964              		.loc 1 471 0
 1965 000a 0023     		movs	r3, #0
 1966 000c ADF81630 		strh	r3, [sp, #22]	@ movhi
 477:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 1967              		.loc 1 477 0
 1968 0010 FFF7FEFF 		bl	get_socket
 1969              	.LVL283:
 478:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 1970              		.loc 1 478 0
 1971 0014 0028     		cmp	r0, #0
 1972 0016 00F09380 		beq	.L233
 1973 001a 0446     		mov	r4, r0
 482:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d): returning EWOULDBLOCK\n", s));
 1974              		.loc 1 482 0
 1975 001c 0068     		ldr	r0, [r0]
 1976              	.LVL284:
 1977 001e 037F     		ldrb	r3, [r0, #28]	@ zero_extendqisi2
 1978 0020 13F0020F 		tst	r3, #2
 1979 0024 03D0     		beq	.L224
 482:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d): returning EWOULDBLOCK\n", s));
 1980              		.loc 1 482 0 is_stmt 0 discriminator 1
 1981 0026 B4F90A30 		ldrsh	r3, [r4, #10]
 1982 002a 002B     		cmp	r3, #0
 1983 002c 16DD     		ble	.L236
 1984              	.L224:
 489:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
 1985              		.loc 1 489 0 is_stmt 1
 1986 002e 07A9     		add	r1, sp, #28
 1987 0030 FFF7FEFF 		bl	netconn_accept
 1988              	.LVL285:
 490:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d): netconn_acept failed, err=%d\n", s, err));
 1989              		.loc 1 490 0
 1990 0034 38B3     		cbz	r0, .L225
 492:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, EOPNOTSUPP);
 1991              		.loc 1 492 0
 1992 0036 2368     		ldr	r3, [r4]
 1993 0038 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1994 003a 03F0F003 		and	r3, r3, #240
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 86


 1995 003e 102B     		cmp	r3, #16
 1996 0040 13D1     		bne	.L237
 494:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, EINVAL);
 1997              		.loc 1 494 0
 1998 0042 10F10F0F 		cmn	r0, #15
 1999 0046 17D0     		beq	.L238
 2000              	.LBB12:
 497:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 2001              		.loc 1 497 0
 2002 0048 FFF7FEFF 		bl	err_to_errno
 2003              	.LVL286:
 2004 004c 2074     		strb	r0, [r4, #16]
 2005 004e 0028     		cmp	r0, #0
 2006 0050 79D0     		beq	.L234
 497:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 2007              		.loc 1 497 0 is_stmt 0 discriminator 1
 2008 0052 404B     		ldr	r3, .L241
 2009 0054 1860     		str	r0, [r3]
 2010              	.LBE12:
 499:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2011              		.loc 1 499 0 is_stmt 1 discriminator 1
 2012 0056 4FF0FF35 		mov	r5, #-1
 2013 005a 76E0     		b	.L222
 2014              	.LVL287:
 2015              	.L236:
 2016              	.LBB13:
 484:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2017              		.loc 1 484 0
 2018 005c 0B23     		movs	r3, #11
 2019 005e 2374     		strb	r3, [r4, #16]
 2020 0060 3C4A     		ldr	r2, .L241
 2021 0062 1360     		str	r3, [r2]
 2022              	.LBE13:
 485:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2023              		.loc 1 485 0
 2024 0064 4FF0FF35 		mov	r5, #-1
 2025 0068 6FE0     		b	.L222
 2026              	.LVL288:
 2027              	.L237:
 2028              	.LBB14:
 493:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else if (err == ERR_CLSD) {
 2029              		.loc 1 493 0
 2030 006a 5F23     		movs	r3, #95
 2031 006c 2374     		strb	r3, [r4, #16]
 2032 006e 394A     		ldr	r2, .L241
 2033 0070 1360     		str	r3, [r2]
 2034              	.LBE14:
 499:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2035              		.loc 1 499 0
 2036 0072 4FF0FF35 		mov	r5, #-1
 2037 0076 68E0     		b	.L222
 2038              	.LVL289:
 2039              	.L238:
 2040              	.LBB15:
 495:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 2041              		.loc 1 495 0
 2042 0078 1623     		movs	r3, #22
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 87


 2043 007a 2374     		strb	r3, [r4, #16]
 2044 007c 354A     		ldr	r2, .L241
 2045 007e 1360     		str	r3, [r2]
 2046              	.LBE15:
 499:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2047              		.loc 1 499 0
 2048 0080 4FF0FF35 		mov	r5, #-1
 2049 0084 61E0     		b	.L222
 2050              	.LVL290:
 2051              	.L225:
 503:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (newsock == -1) {
 2052              		.loc 1 503 0
 2053 0086 0121     		movs	r1, #1
 2054 0088 0798     		ldr	r0, [sp, #28]
 2055              	.LVL291:
 2056 008a FFF7FEFF 		bl	alloc_socket
 2057              	.LVL292:
 2058 008e 0546     		mov	r5, r0
 2059              	.LVL293:
 504:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     netconn_delete(newconn);
 2060              		.loc 1 504 0
 2061 0090 B0F1FF3F 		cmp	r0, #-1
 2062 0094 3BD0     		beq	.L239
 511:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2063              		.loc 1 511 0
 2064 0096 8300     		lsls	r3, r0, #2
 2065 0098 0344     		add	r3, r3, r0
 2066 009a 9A00     		lsls	r2, r3, #2
 2067 009c 2E4B     		ldr	r3, .L241+4
 2068 009e 03EB0208 		add	r8, r3, r2
 2069              	.LVL294:
 518:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   nsock->rcvevent += (s16_t)(-1 - newconn->socket);
 2070              		.loc 1 518 0
 2071 00a2 FFF7FEFF 		bl	sys_arch_protect
 2072              	.LVL295:
 519:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   newconn->socket = newsock;
 2073              		.loc 1 519 0
 2074 00a6 079A     		ldr	r2, [sp, #28]
 2075 00a8 118B     		ldrh	r1, [r2, #24]
 2076 00aa B8F80A30 		ldrh	r3, [r8, #10]
 2077 00ae 5B1A     		subs	r3, r3, r1
 2078 00b0 013B     		subs	r3, r3, #1
 2079 00b2 A8F80A30 		strh	r3, [r8, #10]	@ movhi
 520:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_UNPROTECT(lev);
 2080              		.loc 1 520 0
 2081 00b6 9561     		str	r5, [r2, #24]
 521:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2082              		.loc 1 521 0
 2083 00b8 FFF7FEFF 		bl	sys_arch_unprotect
 2084              	.LVL296:
 526:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     union sockaddr_aligned tempaddr;
 2085              		.loc 1 526 0
 2086 00bc 26B3     		cbz	r6, .L229
 2087              	.LBB16:
 529:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (err != ERR_OK) {
 2088              		.loc 1 529 0
 2089 00be 0023     		movs	r3, #0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 88


 2090 00c0 0DF11602 		add	r2, sp, #22
 2091 00c4 06A9     		add	r1, sp, #24
 2092 00c6 0798     		ldr	r0, [sp, #28]
 2093 00c8 FFF7FEFF 		bl	netconn_getaddr
 2094              	.LVL297:
 530:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d): netconn_peer failed, err=%d\n", s, err));
 2095              		.loc 1 530 0
 2096 00cc 8146     		mov	r9, r0
 2097 00ce 30BB     		cbnz	r0, .L240
 539:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (*addrlen > tempaddr.sa.sa_len) {
 2098              		.loc 1 539 0
 2099 00d0 1023     		movs	r3, #16
 2100 00d2 8DF80430 		strb	r3, [sp, #4]
 2101 00d6 0223     		movs	r3, #2
 2102 00d8 8DF80530 		strb	r3, [sp, #5]
 2103 00dc BDF81600 		ldrh	r0, [sp, #22]
 2104              	.LVL298:
 2105 00e0 FFF7FEFF 		bl	lwip_htons
 2106              	.LVL299:
 2107 00e4 ADF80600 		strh	r0, [sp, #6]	@ movhi
 2108 00e8 069B     		ldr	r3, [sp, #24]
 2109 00ea 0293     		str	r3, [sp, #8]
 2110 00ec 0023     		movs	r3, #0
 2111 00ee 0393     		str	r3, [sp, #12]
 2112 00f0 0493     		str	r3, [sp, #16]
 540:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *addrlen = tempaddr.sa.sa_len;
 2113              		.loc 1 540 0
 2114 00f2 3A68     		ldr	r2, [r7]
 2115 00f4 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 2116 00f8 9A42     		cmp	r2, r3
 2117 00fa 00D9     		bls	.L232
 541:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 2118              		.loc 1 541 0
 2119 00fc 3B60     		str	r3, [r7]
 2120              	.L232:
 543:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2121              		.loc 1 543 0
 2122 00fe 3A68     		ldr	r2, [r7]
 2123 0100 01A9     		add	r1, sp, #4
 2124 0102 3046     		mov	r0, r6
 2125 0104 FFF7FEFF 		bl	memcpy
 2126              	.LVL300:
 2127              	.L229:
 2128              	.LBE16:
 2129              	.LBB18:
 552:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return newsock;
 2130              		.loc 1 552 0
 2131 0108 0023     		movs	r3, #0
 2132 010a 2374     		strb	r3, [r4, #16]
 2133              	.LBE18:
 553:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 2134              		.loc 1 553 0
 2135 010c 1DE0     		b	.L222
 2136              	.LVL301:
 2137              	.L239:
 505:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, ENFILE);
 2138              		.loc 1 505 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 89


 2139 010e 0798     		ldr	r0, [sp, #28]
 2140              	.LVL302:
 2141 0110 FFF7FEFF 		bl	netconn_delete
 2142              	.LVL303:
 2143              	.LBB19:
 506:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2144              		.loc 1 506 0
 2145 0114 1723     		movs	r3, #23
 2146 0116 2374     		strb	r3, [r4, #16]
 2147 0118 0E4A     		ldr	r2, .L241
 2148 011a 1360     		str	r3, [r2]
 2149              	.LBE19:
 507:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2150              		.loc 1 507 0
 2151 011c 15E0     		b	.L222
 2152              	.LVL304:
 2153              	.L240:
 2154              	.LBB20:
 532:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       free_socket(nsock, 1);
 2155              		.loc 1 532 0
 2156 011e 0798     		ldr	r0, [sp, #28]
 2157              	.LVL305:
 2158 0120 FFF7FEFF 		bl	netconn_delete
 2159              	.LVL306:
 533:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, err_to_errno(err));
 2160              		.loc 1 533 0
 2161 0124 0121     		movs	r1, #1
 2162 0126 4046     		mov	r0, r8
 2163 0128 FFF7FEFF 		bl	free_socket
 2164              	.LVL307:
 2165              	.LBB17:
 534:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 2166              		.loc 1 534 0
 2167 012c 4846     		mov	r0, r9
 2168 012e FFF7FEFF 		bl	err_to_errno
 2169              	.LVL308:
 2170 0132 2074     		strb	r0, [r4, #16]
 2171 0134 08B1     		cbz	r0, .L231
 534:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 2172              		.loc 1 534 0 is_stmt 0 discriminator 1
 2173 0136 074B     		ldr	r3, .L241
 2174 0138 1860     		str	r0, [r3]
 2175              	.L231:
 2176              	.LBE17:
 535:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 2177              		.loc 1 535 0 is_stmt 1
 2178 013a 4FF0FF35 		mov	r5, #-1
 2179              	.LVL309:
 2180 013e 04E0     		b	.L222
 2181              	.LVL310:
 2182              	.L233:
 2183              	.LBE20:
 479:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2184              		.loc 1 479 0
 2185 0140 4FF0FF35 		mov	r5, #-1
 2186 0144 01E0     		b	.L222
 2187              	.LVL311:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 90


 2188              	.L234:
 499:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2189              		.loc 1 499 0
 2190 0146 4FF0FF35 		mov	r5, #-1
 2191              	.LVL312:
 2192              	.L222:
 554:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2193              		.loc 1 554 0
 2194 014a 2846     		mov	r0, r5
 2195 014c 09B0     		add	sp, sp, #36
 2196              	.LCFI18:
 2197              		.cfi_def_cfa_offset 28
 2198              		@ sp needed
 2199 014e BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 2200              	.LVL313:
 2201              	.L242:
 2202 0152 00BF     		.align	2
 2203              	.L241:
 2204 0154 00000000 		.word	errno
 2205 0158 00000000 		.word	.LANCHOR0
 2206              		.cfi_endproc
 2207              	.LFE147:
 2209              		.section	.text.lwip_bind,"ax",%progbits
 2210              		.align	1
 2211              		.global	lwip_bind
 2212              		.syntax unified
 2213              		.thumb
 2214              		.thumb_func
 2215              		.fpu fpv5-sp-d16
 2217              	lwip_bind:
 2218              	.LFB148:
 558:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 2219              		.loc 1 558 0
 2220              		.cfi_startproc
 2221              		@ args = 0, pretend = 0, frame = 8
 2222              		@ frame_needed = 0, uses_anonymous_args = 0
 2223              	.LVL314:
 2224 0000 70B5     		push	{r4, r5, r6, lr}
 2225              	.LCFI19:
 2226              		.cfi_def_cfa_offset 16
 2227              		.cfi_offset 4, -16
 2228              		.cfi_offset 5, -12
 2229              		.cfi_offset 6, -8
 2230              		.cfi_offset 14, -4
 2231 0002 82B0     		sub	sp, sp, #8
 2232              	.LCFI20:
 2233              		.cfi_def_cfa_offset 24
 2234 0004 0E46     		mov	r6, r1
 2235 0006 1546     		mov	r5, r2
 564:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 2236              		.loc 1 564 0
 2237 0008 FFF7FEFF 		bl	get_socket
 2238              	.LVL315:
 565:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2239              		.loc 1 565 0
 2240 000c 68B3     		cbz	r0, .L248
 2241 000e 0446     		mov	r4, r0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 91


 576:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              IS_SOCK_ADDR_TYPE_VALID(name) && IS_SOCK_ADDR_ALIGNED(name)),
 2242              		.loc 1 576 0
 2243 0010 102D     		cmp	r5, #16
 2244 0012 0BD0     		beq	.L252
 2245              	.L245:
 2246              	.LBB21:
 576:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              IS_SOCK_ADDR_TYPE_VALID(name) && IS_SOCK_ADDR_ALIGNED(name)),
 2247              		.loc 1 576 0 is_stmt 0 discriminator 5
 2248 0014 6FF00F00 		mvn	r0, #15
 2249              	.LVL316:
 2250 0018 FFF7FEFF 		bl	err_to_errno
 2251              	.LVL317:
 2252 001c 2074     		strb	r0, [r4, #16]
 2253 001e 38B3     		cbz	r0, .L249
 576:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              IS_SOCK_ADDR_TYPE_VALID(name) && IS_SOCK_ADDR_ALIGNED(name)),
 2254              		.loc 1 576 0 discriminator 6
 2255 0020 164B     		ldr	r3, .L254
 2256 0022 1860     		str	r0, [r3]
 2257              	.LBE21:
 2258 0024 4FF0FF30 		mov	r0, #-1
 2259              	.LVL318:
 2260              	.L243:
 597:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2261              		.loc 1 597 0 is_stmt 1
 2262 0028 02B0     		add	sp, sp, #8
 2263              	.LCFI21:
 2264              		.cfi_remember_state
 2265              		.cfi_def_cfa_offset 16
 2266              		@ sp needed
 2267 002a 70BD     		pop	{r4, r5, r6, pc}
 2268              	.LVL319:
 2269              	.L252:
 2270              	.LCFI22:
 2271              		.cfi_restore_state
 576:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              IS_SOCK_ADDR_TYPE_VALID(name) && IS_SOCK_ADDR_ALIGNED(name)),
 2272              		.loc 1 576 0 discriminator 2
 2273 002c 7378     		ldrb	r3, [r6, #1]	@ zero_extendqisi2
 2274 002e 022B     		cmp	r3, #2
 2275 0030 F0D1     		bne	.L245
 576:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              IS_SOCK_ADDR_TYPE_VALID(name) && IS_SOCK_ADDR_ALIGNED(name)),
 2276              		.loc 1 576 0 is_stmt 0 discriminator 4
 2277 0032 16F0030F 		tst	r6, #3
 2278 0036 EDD1     		bne	.L245
 581:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_bind(%d, addr=", s));
 2279              		.loc 1 581 0 is_stmt 1
 2280 0038 7368     		ldr	r3, [r6, #4]
 2281 003a 02AD     		add	r5, sp, #8
 2282              	.LVL320:
 2283 003c 45F8043D 		str	r3, [r5, #-4]!
 2284 0040 7088     		ldrh	r0, [r6, #2]
 2285              	.LVL321:
 2286 0042 FFF7FEFF 		bl	lwip_htons
 2287              	.LVL322:
 586:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2288              		.loc 1 586 0
 2289 0046 0246     		mov	r2, r0
 2290 0048 2946     		mov	r1, r5
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 92


 2291 004a 2068     		ldr	r0, [r4]
 2292              	.LVL323:
 2293 004c FFF7FEFF 		bl	netconn_bind
 2294              	.LVL324:
 588:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_bind(%d) failed, err=%d\n", s, err));
 2295              		.loc 1 588 0
 2296 0050 10B9     		cbnz	r0, .L253
 2297              	.LVL325:
 2298              	.LBB22:
 595:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
 2299              		.loc 1 595 0
 2300 0052 0020     		movs	r0, #0
 2301              	.LVL326:
 2302 0054 2074     		strb	r0, [r4, #16]
 2303              	.LBE22:
 596:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 2304              		.loc 1 596 0
 2305 0056 E7E7     		b	.L243
 2306              	.LVL327:
 2307              	.L253:
 2308              	.LBB23:
 590:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2309              		.loc 1 590 0
 2310 0058 FFF7FEFF 		bl	err_to_errno
 2311              	.LVL328:
 2312 005c 2074     		strb	r0, [r4, #16]
 2313 005e 50B1     		cbz	r0, .L250
 590:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2314              		.loc 1 590 0 is_stmt 0 discriminator 1
 2315 0060 064B     		ldr	r3, .L254
 2316 0062 1860     		str	r0, [r3]
 2317              	.LBE23:
 591:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2318              		.loc 1 591 0 is_stmt 1 discriminator 1
 2319 0064 4FF0FF30 		mov	r0, #-1
 2320              	.LVL329:
 2321 0068 DEE7     		b	.L243
 2322              	.LVL330:
 2323              	.L248:
 566:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2324              		.loc 1 566 0
 2325 006a 4FF0FF30 		mov	r0, #-1
 2326              	.LVL331:
 2327 006e DBE7     		b	.L243
 2328              	.LVL332:
 2329              	.L249:
 576:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              IS_SOCK_ADDR_TYPE_VALID(name) && IS_SOCK_ADDR_ALIGNED(name)),
 2330              		.loc 1 576 0
 2331 0070 4FF0FF30 		mov	r0, #-1
 2332              	.LVL333:
 2333 0074 D8E7     		b	.L243
 2334              	.LVL334:
 2335              	.L250:
 591:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2336              		.loc 1 591 0
 2337 0076 4FF0FF30 		mov	r0, #-1
 2338              	.LVL335:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 93


 2339 007a D5E7     		b	.L243
 2340              	.L255:
 2341              		.align	2
 2342              	.L254:
 2343 007c 00000000 		.word	errno
 2344              		.cfi_endproc
 2345              	.LFE148:
 2347              		.section	.text.lwip_close,"ax",%progbits
 2348              		.align	1
 2349              		.global	lwip_close
 2350              		.syntax unified
 2351              		.thumb
 2352              		.thumb_func
 2353              		.fpu fpv5-sp-d16
 2355              	lwip_close:
 2356              	.LFB149:
 601:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 2357              		.loc 1 601 0
 2358              		.cfi_startproc
 2359              		@ args = 0, pretend = 0, frame = 0
 2360              		@ frame_needed = 0, uses_anonymous_args = 0
 2361              	.LVL336:
 2362 0000 38B5     		push	{r3, r4, r5, lr}
 2363              	.LCFI23:
 2364              		.cfi_def_cfa_offset 16
 2365              		.cfi_offset 3, -16
 2366              		.cfi_offset 4, -12
 2367              		.cfi_offset 5, -8
 2368              		.cfi_offset 14, -4
 2369              	.LVL337:
 608:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 2370              		.loc 1 608 0
 2371 0002 FFF7FEFF 		bl	get_socket
 2372              	.LVL338:
 609:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2373              		.loc 1 609 0
 2374 0006 E8B1     		cbz	r0, .L260
 2375 0008 0546     		mov	r5, r0
 613:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     is_tcp = NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP;
 2376              		.loc 1 613 0
 2377 000a 0068     		ldr	r0, [r0]
 2378              	.LVL339:
 2379 000c 90B1     		cbz	r0, .L261
 614:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
 2380              		.loc 1 614 0
 2381 000e 0178     		ldrb	r1, [r0]	@ zero_extendqisi2
 2382 0010 01F0F001 		and	r1, r1, #240
 2383 0014 1029     		cmp	r1, #16
 2384 0016 14BF     		ite	ne
 2385 0018 0024     		movne	r4, #0
 2386 001a 0124     		moveq	r4, #1
 2387              	.LVL340:
 2388              	.L258:
 624:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
 2389              		.loc 1 624 0
 2390 001c FFF7FEFF 		bl	netconn_delete
 2391              	.LVL341:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 94


 625:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
 2392              		.loc 1 625 0
 2393 0020 50B1     		cbz	r0, .L259
 2394              	.LBB24:
 626:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2395              		.loc 1 626 0
 2396 0022 FFF7FEFF 		bl	err_to_errno
 2397              	.LVL342:
 2398 0026 2874     		strb	r0, [r5, #16]
 2399 0028 78B1     		cbz	r0, .L262
 626:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2400              		.loc 1 626 0 is_stmt 0 discriminator 1
 2401 002a 094B     		ldr	r3, .L264
 2402 002c 1860     		str	r0, [r3]
 2403              	.LBE24:
 627:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2404              		.loc 1 627 0 is_stmt 1 discriminator 1
 2405 002e 4FF0FF30 		mov	r0, #-1
 2406              	.LVL343:
 2407 0032 38BD     		pop	{r3, r4, r5, pc}
 2408              	.LVL344:
 2409              	.L261:
 603:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
 2410              		.loc 1 603 0
 2411 0034 0024     		movs	r4, #0
 2412 0036 F1E7     		b	.L258
 2413              	.LVL345:
 2414              	.L259:
 630:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   set_errno(0);
 2415              		.loc 1 630 0
 2416 0038 2146     		mov	r1, r4
 2417 003a 2846     		mov	r0, r5
 2418              	.LVL346:
 2419 003c FFF7FEFF 		bl	free_socket
 2420              	.LVL347:
 632:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 2421              		.loc 1 632 0
 2422 0040 0020     		movs	r0, #0
 2423 0042 38BD     		pop	{r3, r4, r5, pc}
 2424              	.LVL348:
 2425              	.L260:
 610:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2426              		.loc 1 610 0
 2427 0044 4FF0FF30 		mov	r0, #-1
 2428              	.LVL349:
 2429 0048 38BD     		pop	{r3, r4, r5, pc}
 2430              	.LVL350:
 2431              	.L262:
 627:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2432              		.loc 1 627 0
 2433 004a 4FF0FF30 		mov	r0, #-1
 2434              	.LVL351:
 633:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2435              		.loc 1 633 0
 2436 004e 38BD     		pop	{r3, r4, r5, pc}
 2437              	.LVL352:
 2438              	.L265:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 95


 2439              		.align	2
 2440              	.L264:
 2441 0050 00000000 		.word	errno
 2442              		.cfi_endproc
 2443              	.LFE149:
 2445              		.section	.text.lwip_connect,"ax",%progbits
 2446              		.align	1
 2447              		.global	lwip_connect
 2448              		.syntax unified
 2449              		.thumb
 2450              		.thumb_func
 2451              		.fpu fpv5-sp-d16
 2453              	lwip_connect:
 2454              	.LFB150:
 637:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 2455              		.loc 1 637 0
 2456              		.cfi_startproc
 2457              		@ args = 0, pretend = 0, frame = 8
 2458              		@ frame_needed = 0, uses_anonymous_args = 0
 2459              	.LVL353:
 2460 0000 70B5     		push	{r4, r5, r6, lr}
 2461              	.LCFI24:
 2462              		.cfi_def_cfa_offset 16
 2463              		.cfi_offset 4, -16
 2464              		.cfi_offset 5, -12
 2465              		.cfi_offset 6, -8
 2466              		.cfi_offset 14, -4
 2467 0002 82B0     		sub	sp, sp, #8
 2468              	.LCFI25:
 2469              		.cfi_def_cfa_offset 24
 2470 0004 0C46     		mov	r4, r1
 2471 0006 1646     		mov	r6, r2
 641:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 2472              		.loc 1 641 0
 2473 0008 FFF7FEFF 		bl	get_socket
 2474              	.LVL354:
 642:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2475              		.loc 1 642 0
 2476 000c 90B3     		cbz	r0, .L274
 2477 000e 0546     		mov	r5, r0
 653:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_connect(%d, AF_UNSPEC)\n", s));
 2478              		.loc 1 653 0
 2479 0010 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 2480 0012 BBB1     		cbz	r3, .L277
 2481              	.LBB25:
 661:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_TYPE_VALID_OR_UNSPEC(name) && IS_SOCK_ADDR_ALIGNED(name),
 2482              		.loc 1 661 0
 2483 0014 102E     		cmp	r6, #16
 2484 0016 19D1     		bne	.L270
 661:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_TYPE_VALID_OR_UNSPEC(name) && IS_SOCK_ADDR_ALIGNED(name),
 2485              		.loc 1 661 0 is_stmt 0 discriminator 2
 2486 0018 022B     		cmp	r3, #2
 2487 001a 17D1     		bne	.L270
 661:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_TYPE_VALID_OR_UNSPEC(name) && IS_SOCK_ADDR_ALIGNED(name),
 2488              		.loc 1 661 0 discriminator 4
 2489 001c 14F0030F 		tst	r4, #3
 2490 0020 14D1     		bne	.L270
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 96


 665:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_connect(%d, addr=", s));
 2491              		.loc 1 665 0 is_stmt 1
 2492 0022 6368     		ldr	r3, [r4, #4]
 2493 0024 02AE     		add	r6, sp, #8
 2494              	.LVL355:
 2495 0026 46F8043D 		str	r3, [r6, #-4]!
 2496 002a 6088     		ldrh	r0, [r4, #2]
 2497              	.LVL356:
 2498 002c FFF7FEFF 		bl	lwip_htons
 2499              	.LVL357:
 670:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2500              		.loc 1 670 0
 2501 0030 0246     		mov	r2, r0
 2502 0032 3146     		mov	r1, r6
 2503 0034 2868     		ldr	r0, [r5]
 2504              	.LVL358:
 2505 0036 FFF7FEFF 		bl	netconn_connect
 2506              	.LVL359:
 2507              	.L269:
 2508              	.LBE25:
 673:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_connect(%d) failed, err=%d\n", s, err));
 2509              		.loc 1 673 0
 2510 003a 90B9     		cbnz	r0, .L278
 2511              	.LVL360:
 2512              	.LBB27:
 680:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
 2513              		.loc 1 680 0
 2514 003c 0020     		movs	r0, #0
 2515              	.LVL361:
 2516 003e 2874     		strb	r0, [r5, #16]
 2517              	.LVL362:
 2518              	.L266:
 2519              	.LBE27:
 682:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2520              		.loc 1 682 0
 2521 0040 02B0     		add	sp, sp, #8
 2522              	.LCFI26:
 2523              		.cfi_remember_state
 2524              		.cfi_def_cfa_offset 16
 2525              		@ sp needed
 2526 0042 70BD     		pop	{r4, r5, r6, pc}
 2527              	.LVL363:
 2528              	.L277:
 2529              	.LCFI27:
 2530              		.cfi_restore_state
 655:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
 2531              		.loc 1 655 0
 2532 0044 0068     		ldr	r0, [r0]
 2533              	.LVL364:
 2534 0046 FFF7FEFF 		bl	netconn_disconnect
 2535              	.LVL365:
 2536 004a F6E7     		b	.L269
 2537              	.LVL366:
 2538              	.L270:
 2539              	.LBB28:
 2540              	.LBB26:
 661:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_TYPE_VALID_OR_UNSPEC(name) && IS_SOCK_ADDR_ALIGNED(name),
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 97


 2541              		.loc 1 661 0 discriminator 5
 2542 004c 6FF00F00 		mvn	r0, #15
 2543              	.LVL367:
 2544 0050 FFF7FEFF 		bl	err_to_errno
 2545              	.LVL368:
 2546 0054 2874     		strb	r0, [r5, #16]
 2547 0056 08B1     		cbz	r0, .L272
 661:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_TYPE_VALID_OR_UNSPEC(name) && IS_SOCK_ADDR_ALIGNED(name),
 2548              		.loc 1 661 0 is_stmt 0 discriminator 6
 2549 0058 094B     		ldr	r3, .L279
 2550 005a 1860     		str	r0, [r3]
 2551              	.L272:
 2552              	.LBE26:
 661:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_TYPE_VALID_OR_UNSPEC(name) && IS_SOCK_ADDR_ALIGNED(name),
 2553              		.loc 1 661 0 discriminator 8
 2554 005c 4FF0FF30 		mov	r0, #-1
 2555              	.LVL369:
 2556 0060 EEE7     		b	.L266
 2557              	.LVL370:
 2558              	.L278:
 2559              	.LBE28:
 2560              	.LBB29:
 675:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2561              		.loc 1 675 0 is_stmt 1
 2562 0062 FFF7FEFF 		bl	err_to_errno
 2563              	.LVL371:
 2564 0066 2874     		strb	r0, [r5, #16]
 2565 0068 38B1     		cbz	r0, .L275
 675:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2566              		.loc 1 675 0 is_stmt 0 discriminator 1
 2567 006a 054B     		ldr	r3, .L279
 2568 006c 1860     		str	r0, [r3]
 2569              	.LBE29:
 676:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2570              		.loc 1 676 0 is_stmt 1 discriminator 1
 2571 006e 4FF0FF30 		mov	r0, #-1
 2572              	.LVL372:
 2573 0072 E5E7     		b	.L266
 2574              	.LVL373:
 2575              	.L274:
 643:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2576              		.loc 1 643 0
 2577 0074 4FF0FF30 		mov	r0, #-1
 2578              	.LVL374:
 2579 0078 E2E7     		b	.L266
 2580              	.LVL375:
 2581              	.L275:
 676:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2582              		.loc 1 676 0
 2583 007a 4FF0FF30 		mov	r0, #-1
 2584              	.LVL376:
 2585 007e DFE7     		b	.L266
 2586              	.L280:
 2587              		.align	2
 2588              	.L279:
 2589 0080 00000000 		.word	errno
 2590              		.cfi_endproc
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 98


 2591              	.LFE150:
 2593              		.section	.text.lwip_listen,"ax",%progbits
 2594              		.align	1
 2595              		.global	lwip_listen
 2596              		.syntax unified
 2597              		.thumb
 2598              		.thumb_func
 2599              		.fpu fpv5-sp-d16
 2601              	lwip_listen:
 2602              	.LFB151:
 694:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 2603              		.loc 1 694 0
 2604              		.cfi_startproc
 2605              		@ args = 0, pretend = 0, frame = 0
 2606              		@ frame_needed = 0, uses_anonymous_args = 0
 2607              	.LVL377:
 2608 0000 38B5     		push	{r3, r4, r5, lr}
 2609              	.LCFI28:
 2610              		.cfi_def_cfa_offset 16
 2611              		.cfi_offset 3, -16
 2612              		.cfi_offset 4, -12
 2613              		.cfi_offset 5, -8
 2614              		.cfi_offset 14, -4
 2615 0002 0C46     		mov	r4, r1
 700:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 2616              		.loc 1 700 0
 2617 0004 FFF7FEFF 		bl	get_socket
 2618              	.LVL378:
 701:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2619              		.loc 1 701 0
 2620 0008 20B3     		cbz	r0, .L286
 2621 000a 0546     		mov	r5, r0
 706:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2622              		.loc 1 706 0
 2623 000c FE2C     		cmp	r4, #254
 2624 000e 15DC     		bgt	.L287
 706:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2625              		.loc 1 706 0 is_stmt 0 discriminator 1
 2626 0010 24EAE471 		bic	r1, r4, r4, asr #31
 2627              	.L283:
 2628              	.LVL379:
 708:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2629              		.loc 1 708 0 is_stmt 1 discriminator 4
 2630 0014 C9B2     		uxtb	r1, r1
 2631              	.LVL380:
 2632 0016 2868     		ldr	r0, [r5]
 2633              	.LVL381:
 2634 0018 FFF7FEFF 		bl	netconn_listen_with_backlog
 2635              	.LVL382:
 710:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_listen(%d) failed, err=%d\n", s, err));
 2636              		.loc 1 710 0 discriminator 4
 2637 001c B8B1     		cbz	r0, .L284
 712:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, EOPNOTSUPP);
 2638              		.loc 1 712 0
 2639 001e 2B68     		ldr	r3, [r5]
 2640 0020 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2641 0022 03F0F003 		and	r3, r3, #240
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 99


 2642 0026 102B     		cmp	r3, #16
 2643 0028 0AD1     		bne	.L290
 2644              	.LBB30:
 716:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2645              		.loc 1 716 0
 2646 002a FFF7FEFF 		bl	err_to_errno
 2647              	.LVL383:
 2648 002e 2874     		strb	r0, [r5, #16]
 2649 0030 98B1     		cbz	r0, .L288
 716:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2650              		.loc 1 716 0 is_stmt 0 discriminator 1
 2651 0032 0B4B     		ldr	r3, .L291
 2652 0034 1860     		str	r0, [r3]
 2653              	.LBE30:
 717:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2654              		.loc 1 717 0 is_stmt 1 discriminator 1
 2655 0036 4FF0FF30 		mov	r0, #-1
 2656              	.LVL384:
 2657 003a 38BD     		pop	{r3, r4, r5, pc}
 2658              	.LVL385:
 2659              	.L287:
 706:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2660              		.loc 1 706 0
 2661 003c FF21     		movs	r1, #255
 2662 003e E9E7     		b	.L283
 2663              	.LVL386:
 2664              	.L290:
 2665              	.LBB31:
 713:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 2666              		.loc 1 713 0
 2667 0040 5F23     		movs	r3, #95
 2668 0042 2B74     		strb	r3, [r5, #16]
 2669 0044 064A     		ldr	r2, .L291
 2670 0046 1360     		str	r3, [r2]
 2671              	.LBE31:
 714:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 2672              		.loc 1 714 0
 2673 0048 4FF0FF30 		mov	r0, #-1
 2674              	.LVL387:
 2675 004c 38BD     		pop	{r3, r4, r5, pc}
 2676              	.LVL388:
 2677              	.L284:
 2678              	.LBB32:
 720:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
 2679              		.loc 1 720 0
 2680 004e 0020     		movs	r0, #0
 2681              	.LVL389:
 2682 0050 2874     		strb	r0, [r5, #16]
 2683              	.LBE32:
 721:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 2684              		.loc 1 721 0
 2685 0052 38BD     		pop	{r3, r4, r5, pc}
 2686              	.LVL390:
 2687              	.L286:
 702:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2688              		.loc 1 702 0
 2689 0054 4FF0FF30 		mov	r0, #-1
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 100


 2690              	.LVL391:
 2691 0058 38BD     		pop	{r3, r4, r5, pc}
 2692              	.LVL392:
 2693              	.L288:
 717:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 2694              		.loc 1 717 0
 2695 005a 4FF0FF30 		mov	r0, #-1
 2696              	.LVL393:
 722:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2697              		.loc 1 722 0
 2698 005e 38BD     		pop	{r3, r4, r5, pc}
 2699              	.LVL394:
 2700              	.L292:
 2701              		.align	2
 2702              	.L291:
 2703 0060 00000000 		.word	errno
 2704              		.cfi_endproc
 2705              	.LFE151:
 2707              		.section	.text.lwip_recvfrom,"ax",%progbits
 2708              		.align	1
 2709              		.global	lwip_recvfrom
 2710              		.syntax unified
 2711              		.thumb
 2712              		.thumb_func
 2713              		.fpu fpv5-sp-d16
 2715              	lwip_recvfrom:
 2716              	.LFB152:
 727:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 2717              		.loc 1 727 0
 2718              		.cfi_startproc
 2719              		@ args = 8, pretend = 0, frame = 40
 2720              		@ frame_needed = 0, uses_anonymous_args = 0
 2721              	.LVL395:
 2722 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2723              	.LCFI29:
 2724              		.cfi_def_cfa_offset 36
 2725              		.cfi_offset 4, -36
 2726              		.cfi_offset 5, -32
 2727              		.cfi_offset 6, -28
 2728              		.cfi_offset 7, -24
 2729              		.cfi_offset 8, -20
 2730              		.cfi_offset 9, -16
 2731              		.cfi_offset 10, -12
 2732              		.cfi_offset 11, -8
 2733              		.cfi_offset 14, -4
 2734 0004 8BB0     		sub	sp, sp, #44
 2735              	.LCFI30:
 2736              		.cfi_def_cfa_offset 80
 2737 0006 0191     		str	r1, [sp, #4]
 2738 0008 1746     		mov	r7, r2
 2739 000a 9846     		mov	r8, r3
 729:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct pbuf      *p;
 2740              		.loc 1 729 0
 2741 000c 0023     		movs	r3, #0
 2742              	.LVL396:
 2743 000e 0993     		str	r3, [sp, #36]
 2744              	.LVL397:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 101


 737:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 2745              		.loc 1 737 0
 2746 0010 FFF7FEFF 		bl	get_socket
 2747              	.LVL398:
 738:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2748              		.loc 1 738 0
 2749 0014 0028     		cmp	r0, #0
 2750 0016 00F0FA80 		beq	.L319
 2751 001a 0546     		mov	r5, r0
 2752 001c 4FF0000B 		mov	fp, #0
 2753 0020 DA46     		mov	r10, fp
 2754 0022 82E0     		b	.L318
 2755              	.LVL399:
 2756              	.L295:
 749:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (sock->rcvevent <= 0)) {
 2757              		.loc 1 749 0
 2758 0024 18F0080F 		tst	r8, #8
 2759 0028 04D1     		bne	.L297
 749:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (sock->rcvevent <= 0)) {
 2760              		.loc 1 749 0 is_stmt 0 discriminator 2
 2761 002a 2B68     		ldr	r3, [r5]
 2762 002c 1B7F     		ldrb	r3, [r3, #28]	@ zero_extendqisi2
 2763 002e 13F0020F 		tst	r3, #2
 2764 0032 03D0     		beq	.L298
 2765              	.L297:
 750:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (off > 0) {
 2766              		.loc 1 750 0 is_stmt 1 discriminator 3
 2767 0034 B5F90A30 		ldrsh	r3, [r5, #10]
 749:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (sock->rcvevent <= 0)) {
 2768              		.loc 1 749 0 discriminator 3
 2769 0038 002B     		cmp	r3, #0
 2770 003a 0CDD     		ble	.L328
 2771              	.L298:
 763:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         err = netconn_recv_tcp_pbuf(sock->conn, (struct pbuf **)&buf);
 2772              		.loc 1 763 0
 2773 003c 2868     		ldr	r0, [r5]
 2774 003e 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 2775 0040 03F0F003 		and	r3, r3, #240
 2776 0044 102B     		cmp	r3, #16
 2777 0046 13D0     		beq	.L329
 766:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 2778              		.loc 1 766 0
 2779 0048 09A9     		add	r1, sp, #36
 2780 004a FFF7FEFF 		bl	netconn_recv
 2781              	.LVL400:
 2782              	.L301:
 771:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (off > 0) {
 2783              		.loc 1 771 0
 2784 004e 98B9     		cbnz	r0, .L330
 791:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->lastdata = buf;
 2785              		.loc 1 791 0
 2786 0050 099B     		ldr	r3, [sp, #36]
 792:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 2787              		.loc 1 792 0
 2788 0052 6B60     		str	r3, [r5, #4]
 2789 0054 6EE0     		b	.L296
 2790              	.LVL401:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 102


 2791              	.L328:
 751:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* already received data, return that */
 2792              		.loc 1 751 0
 2793 0056 BAF1000F 		cmp	r10, #0
 2794 005a 02DD     		ble	.L299
 2795              	.LVL402:
 2796              	.LBB33:
 753:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           return off;
 2797              		.loc 1 753 0
 2798 005c 0023     		movs	r3, #0
 2799 005e 2B74     		strb	r3, [r5, #16]
 2800              	.LBE33:
 754:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 2801              		.loc 1 754 0
 2802 0060 D1E0     		b	.L293
 2803              	.LVL403:
 2804              	.L299:
 2805              	.LBB34:
 757:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return -1;
 2806              		.loc 1 757 0
 2807 0062 0B23     		movs	r3, #11
 2808 0064 2B74     		strb	r3, [r5, #16]
 2809 0066 6D4A     		ldr	r2, .L337
 2810 0068 1360     		str	r3, [r2]
 2811              	.LBE34:
 758:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 2812              		.loc 1 758 0
 2813 006a 4FF0FF3A 		mov	r10, #-1
 2814              	.LVL404:
 2815 006e CAE0     		b	.L293
 2816              	.LVL405:
 2817              	.L329:
 764:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
 2818              		.loc 1 764 0
 2819 0070 09A9     		add	r1, sp, #36
 2820 0072 FFF7FEFF 		bl	netconn_recv_tcp_pbuf
 2821              	.LVL406:
 2822 0076 EAE7     		b	.L301
 2823              	.L330:
 2824 0078 0446     		mov	r4, r0
 772:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (err == ERR_CLSD) {
 2825              		.loc 1 772 0
 2826 007a BAF1000F 		cmp	r10, #0
 2827 007e 0BDD     		ble	.L303
 773:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             /* closed but already received data, ensure select gets the FIN, too */
 2828              		.loc 1 773 0
 2829 0080 10F10F0F 		cmn	r0, #15
 2830 0084 02D0     		beq	.L331
 2831              	.LVL407:
 2832              	.L304:
 2833              	.LBB35:
 778:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           return off;
 2834              		.loc 1 778 0
 2835 0086 0023     		movs	r3, #0
 2836 0088 2B74     		strb	r3, [r5, #16]
 2837              	.LBE35:
 779:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 103


 2838              		.loc 1 779 0
 2839 008a BCE0     		b	.L293
 2840              	.LVL408:
 2841              	.L331:
 775:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
 2842              		.loc 1 775 0
 2843 008c 0022     		movs	r2, #0
 2844 008e 1146     		mov	r1, r2
 2845 0090 2868     		ldr	r0, [r5]
 2846              	.LVL409:
 2847 0092 FFF7FEFF 		bl	event_callback
 2848              	.LVL410:
 2849 0096 F6E7     		b	.L304
 2850              	.LVL411:
 2851              	.L303:
 2852              	.LBB36:
 784:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (err == ERR_CLSD) {
 2853              		.loc 1 784 0
 2854 0098 FFF7FEFF 		bl	err_to_errno
 2855              	.LVL412:
 2856 009c 2874     		strb	r0, [r5, #16]
 2857 009e 08B1     		cbz	r0, .L305
 784:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (err == ERR_CLSD) {
 2858              		.loc 1 784 0 is_stmt 0 discriminator 1
 2859 00a0 5E4B     		ldr	r3, .L337
 2860 00a2 1860     		str	r0, [r3]
 2861              	.L305:
 2862              	.LBE36:
 785:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           return 0;
 2863              		.loc 1 785 0 is_stmt 1
 2864 00a4 14F10F0F 		cmn	r4, #15
 2865 00a8 40F0B480 		bne	.L320
 786:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
 2866              		.loc 1 786 0
 2867 00ac 4FF0000A 		mov	r10, #0
 2868              	.LVL413:
 2869 00b0 A9E0     		b	.L293
 2870              	.LVL414:
 2871              	.L335:
 796:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 2872              		.loc 1 796 0
 2873 00b2 DDF82490 		ldr	r9, [sp, #36]
 2874              	.LVL415:
 2875 00b6 46E0     		b	.L307
 2876              	.LVL416:
 2877              	.L321:
 807:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 2878              		.loc 1 807 0
 2879 00b8 2646     		mov	r6, r4
 2880 00ba 4CE0     		b	.L308
 2881              	.LVL417:
 2882              	.L322:
 828:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 2883              		.loc 1 828 0
 2884 00bc 4FF0010B 		mov	fp, #1
 2885              	.LVL418:
 2886 00c0 65E0     		b	.L309
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 104


 2887              	.LVL419:
 2888              	.L323:
 825:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 2889              		.loc 1 825 0
 2890 00c2 4FF0010B 		mov	fp, #1
 2891              	.LVL420:
 2892 00c6 62E0     		b	.L309
 2893              	.LVL421:
 2894              	.L324:
 2895 00c8 4FF0010B 		mov	fp, #1
 2896              	.LVL422:
 2897 00cc 5FE0     		b	.L309
 2898              	.LVL423:
 2899              	.L325:
 2900 00ce 4FF0010B 		mov	fp, #1
 2901              	.LVL424:
 2902 00d2 5CE0     		b	.L309
 2903              	.LVL425:
 2904              	.L326:
 2905 00d4 4FF0010B 		mov	fp, #1
 2906              	.LVL426:
 2907 00d8 59E0     		b	.L309
 2908              	.LVL427:
 2909              	.L336:
 2910              	.LBB37:
 844:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
 2911              		.loc 1 844 0
 2912 00da 0023     		movs	r3, #0
 2913 00dc 0DF10E02 		add	r2, sp, #14
 2914 00e0 04A9     		add	r1, sp, #16
 2915              	.LVL428:
 2916 00e2 FFF7FEFF 		bl	netconn_getaddr
 2917              	.LVL429:
 843:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           netconn_getaddr(sock->conn, fromaddr, &port, 0);
 2918              		.loc 1 843 0
 2919 00e6 0DF11009 		add	r9, sp, #16
 2920              	.LVL430:
 2921 00ea 61E0     		b	.L312
 2922              	.L313:
 859:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 2923              		.loc 1 859 0
 2924 00ec 159B     		ldr	r3, [sp, #84]
 2925 00ee 1A68     		ldr	r2, [r3]
 2926 00f0 05A9     		add	r1, sp, #20
 2927 00f2 1498     		ldr	r0, [sp, #80]
 2928 00f4 FFF7FEFF 		bl	memcpy
 2929              	.LVL431:
 2930              	.L310:
 2931              	.LBE37:
 865:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* If this is a TCP socket, check if there is data left in the
 2932              		.loc 1 865 0
 2933 00f8 18F0010F 		tst	r8, #1
 2934 00fc 12D1     		bne	.L314
 869:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->lastdata = buf;
 2935              		.loc 1 869 0
 2936 00fe 2A68     		ldr	r2, [r5]
 2937 0100 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 105


 2938 0102 03F0F003 		and	r3, r3, #240
 2939 0106 102B     		cmp	r3, #16
 2940 0108 6DD0     		beq	.L332
 2941              	.LVL432:
 2942              	.L315:
 874:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->lastoffset = 0;
 2943              		.loc 1 874 0
 2944 010a 0023     		movs	r3, #0
 2945 010c 6B60     		str	r3, [r5, #4]
 875:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom: deleting netbuf=%p\n", buf));
 2946              		.loc 1 875 0
 2947 010e 2B81     		strh	r3, [r5, #8]	@ movhi
 877:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           pbuf_free((struct pbuf *)buf);
 2948              		.loc 1 877 0
 2949 0110 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 2950 0112 03F0F003 		and	r3, r3, #240
 2951 0116 102B     		cmp	r3, #16
 2952 0118 6FD0     		beq	.L333
 880:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 2953              		.loc 1 880 0
 2954 011a 0998     		ldr	r0, [sp, #36]
 2955 011c FFF7FEFF 		bl	netbuf_delete
 2956              	.LVL433:
 2957              	.L317:
 882:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 2958              		.loc 1 882 0
 2959 0120 0023     		movs	r3, #0
 2960 0122 0993     		str	r3, [sp, #36]
 2961              	.LVL434:
 2962              	.L314:
 885:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2963              		.loc 1 885 0
 2964 0124 BBF1000F 		cmp	fp, #0
 2965 0128 6BD1     		bne	.L334
 2966              	.LVL435:
 2967              	.L318:
 745:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       buf = sock->lastdata;
 2968              		.loc 1 745 0
 2969 012a 6B68     		ldr	r3, [r5, #4]
 2970 012c 002B     		cmp	r3, #0
 2971 012e 3FF479AF 		beq	.L295
 746:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 2972              		.loc 1 746 0
 2973 0132 0993     		str	r3, [sp, #36]
 2974              	.L296:
 795:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       p = (struct pbuf *)buf;
 2975              		.loc 1 795 0
 2976 0134 2B68     		ldr	r3, [r5]
 2977 0136 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2978 0138 03F0F003 		and	r3, r3, #240
 2979 013c 102B     		cmp	r3, #16
 2980 013e B8D0     		beq	.L335
 798:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 2981              		.loc 1 798 0
 2982 0140 099B     		ldr	r3, [sp, #36]
 2983 0142 D3F80090 		ldr	r9, [r3]
 2984              	.LVL436:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 106


 2985              	.L307:
 800:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom: buflen=%"U16_F" len=%"SZT_F" off=%d sock->lastoffse
 2986              		.loc 1 800 0
 2987 0146 B9F80840 		ldrh	r4, [r9, #8]
 2988              	.LVL437:
 804:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 2989              		.loc 1 804 0
 2990 014a 2B89     		ldrh	r3, [r5, #8]
 2991 014c E41A     		subs	r4, r4, r3
 2992              	.LVL438:
 2993 014e A4B2     		uxth	r4, r4
 2994              	.LVL439:
 806:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       copylen = buflen;
 2995              		.loc 1 806 0
 2996 0150 A742     		cmp	r7, r4
 2997 0152 B1D8     		bhi	.L321
 809:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 2998              		.loc 1 809 0
 2999 0154 BEB2     		uxth	r6, r7
 3000              	.LVL440:
 3001              	.L308:
 814:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3002              		.loc 1 814 0
 3003 0156 3246     		mov	r2, r6
 3004 0158 0199     		ldr	r1, [sp, #4]
 3005 015a 5144     		add	r1, r1, r10
 3006 015c 4846     		mov	r0, r9
 3007 015e FFF7FEFF 		bl	pbuf_copy_partial
 3008              	.LVL441:
 816:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3009              		.loc 1 816 0
 3010 0162 0096     		str	r6, [sp]
 3011 0164 B244     		add	r10, r10, r6
 3012              	.LVL442:
 818:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_ASSERT("invalid copylen, len would underflow", len >= copylen);
 3013              		.loc 1 818 0
 3014 0166 2868     		ldr	r0, [r5]
 3015 0168 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 3016 016a 03F0F003 		and	r3, r3, #240
 3017 016e 102B     		cmp	r3, #16
 3018 0170 A4D1     		bne	.L322
 3019              	.LVL443:
 821:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (p->flags & PBUF_FLAG_PUSH) ||
 3020              		.loc 1 821 0
 3021 0172 BF1B     		subs	r7, r7, r6
 3022              	.LVL444:
 3023 0174 A5D0     		beq	.L323
 822:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (sock->rcvevent <= 0) ||
 3024              		.loc 1 822 0 discriminator 1
 3025 0176 99F80D20 		ldrb	r2, [r9, #13]	@ zero_extendqisi2
 821:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (p->flags & PBUF_FLAG_PUSH) ||
 3026              		.loc 1 821 0 discriminator 1
 3027 017a 12F0010F 		tst	r2, #1
 3028 017e A3D1     		bne	.L324
 823:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           ((flags & MSG_PEEK) != 0)) {
 3029              		.loc 1 823 0
 3030 0180 B5F90A20 		ldrsh	r2, [r5, #10]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 107


 822:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (sock->rcvevent <= 0) ||
 3031              		.loc 1 822 0
 3032 0184 002A     		cmp	r2, #0
 3033 0186 A2DD     		ble	.L325
 823:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           ((flags & MSG_PEEK) != 0)) {
 3034              		.loc 1 823 0
 3035 0188 18F0010F 		tst	r8, #1
 3036 018c A2D1     		bne	.L326
 3037              	.LVL445:
 3038              	.L309:
 832:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !SOCKETS_DEBUG
 3039              		.loc 1 832 0
 3040 018e BBF1000F 		cmp	fp, #0
 3041 0192 B1D0     		beq	.L310
 834:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* !SOCKETS_DEBUG */
 3042              		.loc 1 834 0
 3043 0194 149A     		ldr	r2, [sp, #80]
 3044 0196 1599     		ldr	r1, [sp, #84]
 3045 0198 002A     		cmp	r2, #0
 3046 019a 18BF     		it	ne
 3047 019c 0029     		cmpne	r1, #0
 3048 019e ABD0     		beq	.L310
 3049              	.LBB38:
 842:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           fromaddr = &tmpaddr;
 3050              		.loc 1 842 0
 3051 01a0 102B     		cmp	r3, #16
 3052 01a2 9AD0     		beq	.L336
 846:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           fromaddr = netbuf_fromaddr((struct netbuf *)buf);
 3053              		.loc 1 846 0
 3054 01a4 099B     		ldr	r3, [sp, #36]
 3055 01a6 9A89     		ldrh	r2, [r3, #12]
 3056 01a8 ADF80E20 		strh	r2, [sp, #14]	@ movhi
 847:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 3057              		.loc 1 847 0
 3058 01ac 03F10809 		add	r9, r3, #8
 3059              	.LVL446:
 3060              	.L312:
 849:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ip_addr_debug_print(SOCKETS_DEBUG, fromaddr);
 3061              		.loc 1 849 0
 3062 01b0 1023     		movs	r3, #16
 3063 01b2 8DF81430 		strb	r3, [sp, #20]
 3064 01b6 0223     		movs	r3, #2
 3065 01b8 8DF81530 		strb	r3, [sp, #21]
 3066 01bc BDF80E00 		ldrh	r0, [sp, #14]
 3067 01c0 FFF7FEFF 		bl	lwip_htons
 3068              	.LVL447:
 3069 01c4 ADF81600 		strh	r0, [sp, #22]	@ movhi
 3070 01c8 D9F80030 		ldr	r3, [r9]
 3071 01cc 0693     		str	r3, [sp, #24]
 3072 01ce 0023     		movs	r3, #0
 3073 01d0 0793     		str	r3, [sp, #28]
 3074 01d2 0893     		str	r3, [sp, #32]
 856:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             *fromlen = saddr.sa.sa_len;
 3075              		.loc 1 856 0
 3076 01d4 159B     		ldr	r3, [sp, #84]
 3077 01d6 1A68     		ldr	r2, [r3]
 3078 01d8 9DF81430 		ldrb	r3, [sp, #20]	@ zero_extendqisi2
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 108


 3079 01dc 9A42     		cmp	r2, r3
 3080 01de 85D9     		bls	.L313
 857:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
 3081              		.loc 1 857 0
 3082 01e0 159A     		ldr	r2, [sp, #84]
 3083 01e2 1360     		str	r3, [r2]
 3084 01e4 82E7     		b	.L313
 3085              	.LVL448:
 3086              	.L332:
 3087              	.LBE38:
 869:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->lastdata = buf;
 3088              		.loc 1 869 0 discriminator 1
 3089 01e6 009B     		ldr	r3, [sp]
 3090 01e8 E41A     		subs	r4, r4, r3
 3091              	.LVL449:
 3092 01ea 002C     		cmp	r4, #0
 3093 01ec 8DDD     		ble	.L315
 870:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->lastoffset += copylen;
 3094              		.loc 1 870 0
 3095 01ee 099B     		ldr	r3, [sp, #36]
 3096 01f0 6B60     		str	r3, [r5, #4]
 871:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom: lastdata now netbuf=%p\n", buf));
 3097              		.loc 1 871 0
 3098 01f2 2B89     		ldrh	r3, [r5, #8]
 3099 01f4 1E44     		add	r6, r6, r3
 3100              	.LVL450:
 3101 01f6 2E81     		strh	r6, [r5, #8]	@ movhi
 3102 01f8 94E7     		b	.L314
 3103              	.LVL451:
 3104              	.L333:
 878:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
 3105              		.loc 1 878 0
 3106 01fa 0998     		ldr	r0, [sp, #36]
 3107 01fc FFF7FEFF 		bl	pbuf_free
 3108              	.LVL452:
 3109 0200 8EE7     		b	.L317
 3110              	.LVL453:
 3111              	.L334:
 3112              	.LBB39:
 887:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return off;
 3113              		.loc 1 887 0
 3114 0202 0023     		movs	r3, #0
 3115 0204 2B74     		strb	r3, [r5, #16]
 3116              	.LVL454:
 3117              	.L293:
 3118              	.LBE39:
 889:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3119              		.loc 1 889 0
 3120 0206 5046     		mov	r0, r10
 3121 0208 0BB0     		add	sp, sp, #44
 3122              	.LCFI31:
 3123              		.cfi_remember_state
 3124              		.cfi_def_cfa_offset 36
 3125              		@ sp needed
 3126 020a BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 3127              	.LVL455:
 3128              	.L319:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 109


 3129              	.LCFI32:
 3130              		.cfi_restore_state
 739:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 3131              		.loc 1 739 0
 3132 020e 4FF0FF3A 		mov	r10, #-1
 3133 0212 F8E7     		b	.L293
 3134              	.LVL456:
 3135              	.L320:
 788:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 3136              		.loc 1 788 0
 3137 0214 4FF0FF3A 		mov	r10, #-1
 3138              	.LVL457:
 3139 0218 F5E7     		b	.L293
 3140              	.L338:
 3141 021a 00BF     		.align	2
 3142              	.L337:
 3143 021c 00000000 		.word	errno
 3144              		.cfi_endproc
 3145              	.LFE152:
 3147              		.section	.text.lwip_read,"ax",%progbits
 3148              		.align	1
 3149              		.global	lwip_read
 3150              		.syntax unified
 3151              		.thumb
 3152              		.thumb_func
 3153              		.fpu fpv5-sp-d16
 3155              	lwip_read:
 3156              	.LFB153:
 893:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_recvfrom(s, mem, len, 0, NULL, NULL);
 3157              		.loc 1 893 0
 3158              		.cfi_startproc
 3159              		@ args = 0, pretend = 0, frame = 0
 3160              		@ frame_needed = 0, uses_anonymous_args = 0
 3161              	.LVL458:
 3162 0000 00B5     		push	{lr}
 3163              	.LCFI33:
 3164              		.cfi_def_cfa_offset 4
 3165              		.cfi_offset 14, -4
 3166 0002 83B0     		sub	sp, sp, #12
 3167              	.LCFI34:
 3168              		.cfi_def_cfa_offset 16
 894:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 3169              		.loc 1 894 0
 3170 0004 0023     		movs	r3, #0
 3171 0006 0193     		str	r3, [sp, #4]
 3172 0008 0093     		str	r3, [sp]
 3173 000a FFF7FEFF 		bl	lwip_recvfrom
 3174              	.LVL459:
 895:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3175              		.loc 1 895 0
 3176 000e 03B0     		add	sp, sp, #12
 3177              	.LCFI35:
 3178              		.cfi_def_cfa_offset 4
 3179              		@ sp needed
 3180 0010 5DF804FB 		ldr	pc, [sp], #4
 3181              		.cfi_endproc
 3182              	.LFE153:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 110


 3184              		.section	.text.lwip_recv,"ax",%progbits
 3185              		.align	1
 3186              		.global	lwip_recv
 3187              		.syntax unified
 3188              		.thumb
 3189              		.thumb_func
 3190              		.fpu fpv5-sp-d16
 3192              	lwip_recv:
 3193              	.LFB154:
 899:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_recvfrom(s, mem, len, flags, NULL, NULL);
 3194              		.loc 1 899 0
 3195              		.cfi_startproc
 3196              		@ args = 0, pretend = 0, frame = 0
 3197              		@ frame_needed = 0, uses_anonymous_args = 0
 3198              	.LVL460:
 3199 0000 10B5     		push	{r4, lr}
 3200              	.LCFI36:
 3201              		.cfi_def_cfa_offset 8
 3202              		.cfi_offset 4, -8
 3203              		.cfi_offset 14, -4
 3204 0002 82B0     		sub	sp, sp, #8
 3205              	.LCFI37:
 3206              		.cfi_def_cfa_offset 16
 900:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 3207              		.loc 1 900 0
 3208 0004 0024     		movs	r4, #0
 3209 0006 0194     		str	r4, [sp, #4]
 3210 0008 0094     		str	r4, [sp]
 3211 000a FFF7FEFF 		bl	lwip_recvfrom
 3212              	.LVL461:
 901:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3213              		.loc 1 901 0
 3214 000e 02B0     		add	sp, sp, #8
 3215              	.LCFI38:
 3216              		.cfi_def_cfa_offset 8
 3217              		@ sp needed
 3218 0010 10BD     		pop	{r4, pc}
 3219              		.cfi_endproc
 3220              	.LFE154:
 3222              		.section	.text.lwip_sendmsg,"ax",%progbits
 3223              		.align	1
 3224              		.global	lwip_sendmsg
 3225              		.syntax unified
 3226              		.thumb
 3227              		.thumb_func
 3228              		.fpu fpv5-sp-d16
 3230              	lwip_sendmsg:
 3231              	.LFB156:
 941:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 3232              		.loc 1 941 0
 3233              		.cfi_startproc
 3234              		@ args = 0, pretend = 0, frame = 8
 3235              		@ frame_needed = 0, uses_anonymous_args = 0
 3236              	.LVL462:
 3237 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 3238              	.LCFI39:
 3239              		.cfi_def_cfa_offset 28
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 111


 3240              		.cfi_offset 4, -28
 3241              		.cfi_offset 5, -24
 3242              		.cfi_offset 6, -20
 3243              		.cfi_offset 7, -16
 3244              		.cfi_offset 8, -12
 3245              		.cfi_offset 9, -8
 3246              		.cfi_offset 14, -4
 3247 0004 85B0     		sub	sp, sp, #20
 3248              	.LCFI40:
 3249              		.cfi_def_cfa_offset 48
 3250 0006 0C46     		mov	r4, r1
 3251 0008 1546     		mov	r5, r2
 3252              	.LVL463:
 951:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 3253              		.loc 1 951 0
 3254 000a FFF7FEFF 		bl	get_socket
 3255              	.LVL464:
 952:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 3256              		.loc 1 952 0
 3257 000e 0028     		cmp	r0, #0
 3258 0010 00F0E080 		beq	.L368
 3259 0014 0646     		mov	r6, r0
 956:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 3260              		.loc 1 956 0
 3261 0016 9CB1     		cbz	r4, .L381
 962:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 3262              		.loc 1 962 0
 3263 0018 A368     		ldr	r3, [r4, #8]
 3264 001a 0BB1     		cbz	r3, .L346
 962:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 3265              		.loc 1 962 0 is_stmt 0 discriminator 2
 3266 001c E368     		ldr	r3, [r4, #12]
 3267 001e E3B9     		cbnz	r3, .L347
 3268              	.L346:
 3269              	.LBB40:
 962:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 3270              		.loc 1 962 0 discriminator 3
 3271 0020 6FF00F00 		mvn	r0, #15
 3272              	.LVL465:
 3273 0024 FFF7FEFF 		bl	err_to_errno
 3274              	.LVL466:
 3275 0028 3074     		strb	r0, [r6, #16]
 3276 002a 0028     		cmp	r0, #0
 3277 002c 00F0D880 		beq	.L370
 962:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 3278              		.loc 1 962 0 discriminator 4
 3279 0030 704B     		ldr	r3, .L387
 3280 0032 1860     		str	r0, [r3]
 3281              	.LBE40:
 3282 0034 4FF0FF38 		mov	r8, #-1
 3283              	.LVL467:
 3284              	.L343:
1082:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3285              		.loc 1 1082 0 is_stmt 1
 3286 0038 4046     		mov	r0, r8
 3287 003a 05B0     		add	sp, sp, #20
 3288              	.LCFI41:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 112


 3289              		.cfi_remember_state
 3290              		.cfi_def_cfa_offset 28
 3291              		@ sp needed
 3292 003c BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 3293              	.LVL468:
 3294              	.L381:
 3295              	.LCFI42:
 3296              		.cfi_restore_state
 3297              	.LBB41:
 956:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 3298              		.loc 1 956 0 discriminator 1
 3299 0040 6FF00F00 		mvn	r0, #15
 3300              	.LVL469:
 3301 0044 FFF7FEFF 		bl	err_to_errno
 3302              	.LVL470:
 3303 0048 3074     		strb	r0, [r6, #16]
 3304 004a 0028     		cmp	r0, #0
 3305 004c 00F0C580 		beq	.L369
 956:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 3306              		.loc 1 956 0 is_stmt 0 discriminator 2
 3307 0050 684B     		ldr	r3, .L387
 3308 0052 1860     		str	r0, [r3]
 3309              	.LBE41:
 3310 0054 4FF0FF38 		mov	r8, #-1
 3311 0058 EEE7     		b	.L343
 3312              	.LVL471:
 3313              	.L347:
 965:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
 3314              		.loc 1 965 0 is_stmt 1
 3315 005a 0368     		ldr	r3, [r0]
 3316 005c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3317 005e 03F0F003 		and	r3, r3, #240
 3318 0062 102B     		cmp	r3, #16
 3319 0064 12D0     		beq	.L382
 3320              	.LBB42:
1003:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_LEN_VALID(msg->msg_namelen)) ,
 3321              		.loc 1 1003 0
 3322 0066 2368     		ldr	r3, [r4]
 3323 0068 002B     		cmp	r3, #0
 3324 006a 56D0     		beq	.L383
 3325              	.L356:
1003:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_LEN_VALID(msg->msg_namelen)) ,
 3326              		.loc 1 1003 0 is_stmt 0 discriminator 3
 3327 006c 6368     		ldr	r3, [r4, #4]
 3328 006e 102B     		cmp	r3, #16
 3329 0070 56D0     		beq	.L357
 3330              	.LBB43:
1003:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_LEN_VALID(msg->msg_namelen)) ,
 3331              		.loc 1 1003 0 discriminator 4
 3332 0072 6FF00F00 		mvn	r0, #15
 3333              	.LVL472:
 3334 0076 FFF7FEFF 		bl	err_to_errno
 3335              	.LVL473:
 3336 007a 3074     		strb	r0, [r6, #16]
 3337 007c 0028     		cmp	r0, #0
 3338 007e 00F0B280 		beq	.L374
1003:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_LEN_VALID(msg->msg_namelen)) ,
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 113


 3339              		.loc 1 1003 0 discriminator 5
 3340 0082 5C4B     		ldr	r3, .L387
 3341 0084 1860     		str	r0, [r3]
 3342              	.LBE43:
 3343 0086 4FF0FF38 		mov	r8, #-1
 3344 008a D5E7     		b	.L343
 3345              	.LVL474:
 3346              	.L382:
 3347              	.LBE42:
 968:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_DONTWAIT) ? NETCONN_DONTBLOCK : 0);
 3348              		.loc 1 968 0 is_stmt 1
 3349 008c 15F0100F 		tst	r5, #16
 3350 0090 28D0     		beq	.L371
 3351 0092 0327     		movs	r7, #3
 3352              	.L349:
 968:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_DONTWAIT) ? NETCONN_DONTBLOCK : 0);
 3353              		.loc 1 968 0 is_stmt 0 discriminator 4
 3354 0094 15F0080F 		tst	r5, #8
 3355 0098 26D0     		beq	.L372
 968:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_DONTWAIT) ? NETCONN_DONTBLOCK : 0);
 3356              		.loc 1 968 0
 3357 009a 0423     		movs	r3, #4
 3358              	.L350:
 967:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_MORE)     ? NETCONN_MORE      : 0) |
 3359              		.loc 1 967 0 is_stmt 1 discriminator 8
 3360 009c 1F43     		orrs	r7, r7, r3
 3361              	.LVL475:
 949:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3362              		.loc 1 949 0 discriminator 8
 3363 009e 0021     		movs	r1, #0
 948:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err = ERR_OK;
 3364              		.loc 1 948 0 discriminator 8
 3365 00a0 8846     		mov	r8, r1
 971:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       written = 0;
 3366              		.loc 1 971 0 discriminator 8
 3367 00a2 0D46     		mov	r5, r1
 3368              	.LVL476:
 3369              	.L351:
 971:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       written = 0;
 3370              		.loc 1 971 0 is_stmt 0 discriminator 1
 3371 00a4 E368     		ldr	r3, [r4, #12]
 3372 00a6 9D42     		cmp	r5, r3
 3373 00a8 2BDA     		bge	.L353
 972:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = netconn_write_partly(sock->conn, msg->msg_iov[i].iov_base, msg->msg_iov[i].iov_len, wri
 3374              		.loc 1 972 0 is_stmt 1
 3375 00aa 04AB     		add	r3, sp, #16
 3376 00ac 0022     		movs	r2, #0
 3377 00ae 43F8042D 		str	r2, [r3, #-4]!
 973:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (err == ERR_OK) {
 3378              		.loc 1 973 0
 3379 00b2 3068     		ldr	r0, [r6]
 3380 00b4 A268     		ldr	r2, [r4, #8]
 3381 00b6 4FEAC509 		lsl	r9, r5, #3
 3382 00ba 02EB090E 		add	lr, r2, r9
 3383 00be 52F83510 		ldr	r1, [r2, r5, lsl #3]
 3384              	.LVL477:
 3385 00c2 DEF80420 		ldr	r2, [lr, #4]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 114


 3386 00c6 0093     		str	r3, [sp]
 3387 00c8 3B46     		mov	r3, r7
 3388 00ca FFF7FEFF 		bl	netconn_write_partly
 3389              	.LVL478:
 974:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         size += written;
 3390              		.loc 1 974 0
 3391 00ce 0146     		mov	r1, r0
 3392 00d0 60B9     		cbnz	r0, .L352
 975:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* check that the entire IO vector was accepected, if not return a partial write */
 3393              		.loc 1 975 0
 3394 00d2 039A     		ldr	r2, [sp, #12]
 3395 00d4 9044     		add	r8, r8, r2
 3396              	.LVL479:
 977:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
 3397              		.loc 1 977 0
 3398 00d6 A368     		ldr	r3, [r4, #8]
 3399 00d8 4B44     		add	r3, r3, r9
 3400 00da 5B68     		ldr	r3, [r3, #4]
 3401 00dc 9A42     		cmp	r2, r3
 3402 00de 10D1     		bne	.L353
 971:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       written = 0;
 3403              		.loc 1 971 0 discriminator 2
 3404 00e0 0135     		adds	r5, r5, #1
 3405              	.LVL480:
 3406 00e2 DFE7     		b	.L351
 3407              	.LVL481:
 3408              	.L371:
 968:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_DONTWAIT) ? NETCONN_DONTBLOCK : 0);
 3409              		.loc 1 968 0
 3410 00e4 0127     		movs	r7, #1
 3411 00e6 D5E7     		b	.L349
 3412              	.L372:
 3413 00e8 0023     		movs	r3, #0
 3414 00ea D7E7     		b	.L350
 3415              	.LVL482:
 3416              	.L352:
 981:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         err = ERR_OK;
 3417              		.loc 1 981 0
 3418 00ec B8F1000F 		cmp	r8, #0
 3419 00f0 D4BF     		ite	le
 3420 00f2 0023     		movle	r3, #0
 3421 00f4 0123     		movgt	r3, #1
 3422 00f6 10F1070F 		cmn	r0, #7
 3423 00fa 18BF     		it	ne
 3424 00fc 0023     		movne	r3, #0
 3425 00fe 4BB1     		cbz	r3, .L373
 982:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* let ERR_WOULDBLOCK persist on the netconn since we are returning ERR_OK */
 3426              		.loc 1 982 0
 3427 0100 0021     		movs	r1, #0
 3428              	.LVL483:
 3429              	.L353:
 3430              	.LBB50:
 990:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return size;
 3431              		.loc 1 990 0
 3432 0102 0846     		mov	r0, r1
 3433 0104 FFF7FEFF 		bl	err_to_errno
 3434              	.LVL484:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 115


 3435 0108 3074     		strb	r0, [r6, #16]
 3436 010a 0028     		cmp	r0, #0
 3437 010c 94D0     		beq	.L343
 990:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return size;
 3438              		.loc 1 990 0 is_stmt 0 discriminator 1
 3439 010e 394B     		ldr	r3, .L387
 3440 0110 1860     		str	r0, [r3]
 3441 0112 91E7     		b	.L343
 3442              	.LVL485:
 3443              	.L373:
 3444              	.LBE50:
 986:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
 3445              		.loc 1 986 0 is_stmt 1
 3446 0114 4FF0FF38 		mov	r8, #-1
 3447              	.LVL486:
 3448 0118 F3E7     		b	.L353
 3449              	.LVL487:
 3450              	.L383:
 3451              	.LBB51:
1003:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_LEN_VALID(msg->msg_namelen)) ,
 3452              		.loc 1 1003 0 discriminator 2
 3453 011a 6368     		ldr	r3, [r4, #4]
 3454 011c 002B     		cmp	r3, #0
 3455 011e A5D1     		bne	.L356
 3456              	.L357:
1008:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!chain_buf) {
 3457              		.loc 1 1008 0
 3458 0120 FFF7FEFF 		bl	netbuf_new
 3459              	.LVL488:
1009:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, err_to_errno(ERR_MEM));
 3460              		.loc 1 1009 0
 3461 0124 0746     		mov	r7, r0
 3462 0126 50B1     		cbz	r0, .L384
1013:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u16_t remote_port;
 3463              		.loc 1 1013 0
 3464 0128 2368     		ldr	r3, [r4]
 3465 012a 33B1     		cbz	r3, .L359
 3466              	.LBB44:
1015:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       netbuf_fromport(chain_buf) = remote_port;
 3467              		.loc 1 1015 0
 3468 012c 5B68     		ldr	r3, [r3, #4]
 3469 012e 8360     		str	r3, [r0, #8]
 3470 0130 2368     		ldr	r3, [r4]
 3471 0132 5888     		ldrh	r0, [r3, #2]
 3472              	.LVL489:
 3473 0134 FFF7FEFF 		bl	lwip_htons
 3474              	.LVL490:
1016:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 3475              		.loc 1 1016 0
 3476 0138 B881     		strh	r0, [r7, #12]	@ movhi
 3477              	.LVL491:
 3478              	.L359:
 3479              	.LBE44:
 3480              	.LBE51:
 986:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
 3481              		.loc 1 986 0 discriminator 1
 3482 013a 0025     		movs	r5, #0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 116


 3483              	.LVL492:
 3484 013c 0EE0     		b	.L360
 3485              	.LVL493:
 3486              	.L384:
 3487              	.LBB52:
 3488              	.LBB45:
1010:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 3489              		.loc 1 1010 0
 3490 013e 4FF0FF30 		mov	r0, #-1
 3491              	.LVL494:
 3492 0142 FFF7FEFF 		bl	err_to_errno
 3493              	.LVL495:
 3494 0146 3074     		strb	r0, [r6, #16]
 3495 0148 0028     		cmp	r0, #0
 3496 014a 4FD0     		beq	.L375
1010:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 3497              		.loc 1 1010 0 is_stmt 0 discriminator 1
 3498 014c 294B     		ldr	r3, .L387
 3499 014e 1860     		str	r0, [r3]
 3500              	.LBE45:
1011:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 3501              		.loc 1 1011 0 is_stmt 1 discriminator 1
 3502 0150 4FF0FF38 		mov	r8, #-1
 3503 0154 70E7     		b	.L343
 3504              	.LVL496:
 3505              	.L362:
 3506              	.LBB46:
1058:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 3507              		.loc 1 1058 0
 3508 0156 FFF7FEFF 		bl	pbuf_cat
 3509              	.LVL497:
 3510              	.L363:
 3511              	.LBE46:
1044:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       struct pbuf *p = pbuf_alloc(PBUF_TRANSPORT, 0, PBUF_REF);
 3512              		.loc 1 1044 0 discriminator 2
 3513 015a 0135     		adds	r5, r5, #1
 3514              	.LVL498:
 3515              	.L360:
1044:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       struct pbuf *p = pbuf_alloc(PBUF_TRANSPORT, 0, PBUF_REF);
 3516              		.loc 1 1044 0 is_stmt 0 discriminator 1
 3517 015c E368     		ldr	r3, [r4, #12]
 3518 015e 9D42     		cmp	r5, r3
 3519 0160 16DA     		bge	.L385
 3520              	.LBB47:
1045:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (p == NULL) {
 3521              		.loc 1 1045 0 is_stmt 1
 3522 0162 0222     		movs	r2, #2
 3523 0164 0021     		movs	r1, #0
 3524 0166 0846     		mov	r0, r1
 3525 0168 FFF7FEFF 		bl	pbuf_alloc
 3526              	.LVL499:
1046:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         err = ERR_MEM; /* let netbuf_delete() cleanup chain_buf */
 3527              		.loc 1 1046 0
 3528 016c 0146     		mov	r1, r0
 3529 016e 28B3     		cbz	r0, .L376
1050:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_ASSERT("iov_len < u16_t", msg->msg_iov[i].iov_len <= 0xFFFF);
 3530              		.loc 1 1050 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 117


 3531 0170 A368     		ldr	r3, [r4, #8]
 3532 0172 53F83530 		ldr	r3, [r3, r5, lsl #3]
 3533 0176 4360     		str	r3, [r0, #4]
1051:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       p->len = p->tot_len = (u16_t)msg->msg_iov[i].iov_len;
 3534              		.loc 1 1051 0
 3535 0178 A368     		ldr	r3, [r4, #8]
 3536 017a 03EBC503 		add	r3, r3, r5, lsl #3
1052:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* netbuf empty, add new pbuf */
 3537              		.loc 1 1052 0
 3538 017e 9B88     		ldrh	r3, [r3, #4]
 3539 0180 0381     		strh	r3, [r0, #8]	@ movhi
 3540 0182 4381     		strh	r3, [r0, #10]	@ movhi
1054:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         chain_buf->p = chain_buf->ptr = p;
 3541              		.loc 1 1054 0
 3542 0184 3868     		ldr	r0, [r7]
 3543              	.LVL500:
 3544 0186 0028     		cmp	r0, #0
 3545 0188 E5D1     		bne	.L362
1055:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* add pbuf to existing pbuf chain */
 3546              		.loc 1 1055 0
 3547 018a 7960     		str	r1, [r7, #4]
 3548 018c 3960     		str	r1, [r7]
 3549 018e E4E7     		b	.L363
 3550              	.LVL501:
 3551              	.L385:
 3552              	.LBE47:
 3553              	.LBE52:
 949:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3554              		.loc 1 949 0
 3555 0190 0024     		movs	r4, #0
 3556              	.LVL502:
 3557              	.L361:
 3558              	.LBB53:
1062:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       size = netbuf_len(chain_buf);
 3559              		.loc 1 1062 0
 3560 0192 B4B9     		cbnz	r4, .L377
1063:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 3561              		.loc 1 1063 0
 3562 0194 3B68     		ldr	r3, [r7]
 3563 0196 B3F80880 		ldrh	r8, [r3, #8]
 3564              	.LVL503:
 3565              	.L365:
1067:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* send the data */
 3566              		.loc 1 1067 0
 3567 019a ACB1     		cbz	r4, .L386
 3568              	.L366:
1073:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3569              		.loc 1 1073 0
 3570 019c 3846     		mov	r0, r7
 3571 019e FFF7FEFF 		bl	netbuf_delete
 3572              	.LVL504:
 3573              	.LBB48:
1075:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return (err == ERR_OK ? size : -1);
 3574              		.loc 1 1075 0
 3575 01a2 2046     		mov	r0, r4
 3576 01a4 FFF7FEFF 		bl	err_to_errno
 3577              	.LVL505:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 118


 3578 01a8 3074     		strb	r0, [r6, #16]
 3579 01aa 08B1     		cbz	r0, .L367
1075:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return (err == ERR_OK ? size : -1);
 3580              		.loc 1 1075 0 is_stmt 0 discriminator 1
 3581 01ac 114B     		ldr	r3, .L387
 3582 01ae 1860     		str	r0, [r3]
 3583              	.L367:
 3584              	.LBE48:
1076:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 3585              		.loc 1 1076 0 is_stmt 1
 3586 01b0 002C     		cmp	r4, #0
 3587 01b2 3FF441AF 		beq	.L343
 3588 01b6 4FF0FF38 		mov	r8, #-1
 3589              	.LVL506:
 3590 01ba 3DE7     		b	.L343
 3591              	.LVL507:
 3592              	.L376:
 3593              	.LBB49:
1047:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
 3594              		.loc 1 1047 0
 3595 01bc 4FF0FF34 		mov	r4, #-1
 3596              	.LVL508:
 3597 01c0 E7E7     		b	.L361
 3598              	.LVL509:
 3599              	.L377:
 3600              	.LBE49:
 3601              	.LBE53:
 948:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err = ERR_OK;
 3602              		.loc 1 948 0
 3603 01c2 4FF00008 		mov	r8, #0
 3604 01c6 E8E7     		b	.L365
 3605              	.LVL510:
 3606              	.L386:
 3607              	.LBB54:
1069:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 3608              		.loc 1 1069 0
 3609 01c8 3946     		mov	r1, r7
 3610 01ca 3068     		ldr	r0, [r6]
 3611 01cc FFF7FEFF 		bl	netconn_send
 3612              	.LVL511:
 3613 01d0 0446     		mov	r4, r0
 3614              	.LVL512:
 3615 01d2 E3E7     		b	.L366
 3616              	.LVL513:
 3617              	.L368:
 3618              	.LBE54:
 953:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 3619              		.loc 1 953 0
 3620 01d4 4FF0FF38 		mov	r8, #-1
 3621 01d8 2EE7     		b	.L343
 3622              	.LVL514:
 3623              	.L369:
 956:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 3624              		.loc 1 956 0
 3625 01da 4FF0FF38 		mov	r8, #-1
 3626 01de 2BE7     		b	.L343
 3627              	.LVL515:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 119


 3628              	.L370:
 962:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); return -1;);
 3629              		.loc 1 962 0
 3630 01e0 4FF0FF38 		mov	r8, #-1
 3631 01e4 28E7     		b	.L343
 3632              	.LVL516:
 3633              	.L374:
 3634              	.LBB55:
1003:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_LEN_VALID(msg->msg_namelen)) ,
 3635              		.loc 1 1003 0
 3636 01e6 4FF0FF38 		mov	r8, #-1
 3637 01ea 25E7     		b	.L343
 3638              	.LVL517:
 3639              	.L375:
1011:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 3640              		.loc 1 1011 0
 3641 01ec 4FF0FF38 		mov	r8, #-1
 3642 01f0 22E7     		b	.L343
 3643              	.L388:
 3644 01f2 00BF     		.align	2
 3645              	.L387:
 3646 01f4 00000000 		.word	errno
 3647              	.LBE55:
 3648              		.cfi_endproc
 3649              	.LFE156:
 3651              		.section	.text.lwip_sendto,"ax",%progbits
 3652              		.align	1
 3653              		.global	lwip_sendto
 3654              		.syntax unified
 3655              		.thumb
 3656              		.thumb_func
 3657              		.fpu fpv5-sp-d16
 3659              	lwip_sendto:
 3660              	.LFB157:
1087:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 3661              		.loc 1 1087 0
 3662              		.cfi_startproc
 3663              		@ args = 8, pretend = 0, frame = 16
 3664              		@ frame_needed = 0, uses_anonymous_args = 0
 3665              	.LVL518:
 3666 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 3667              	.LCFI43:
 3668              		.cfi_def_cfa_offset 32
 3669              		.cfi_offset 4, -32
 3670              		.cfi_offset 5, -28
 3671              		.cfi_offset 6, -24
 3672              		.cfi_offset 7, -20
 3673              		.cfi_offset 8, -16
 3674              		.cfi_offset 9, -12
 3675              		.cfi_offset 10, -8
 3676              		.cfi_offset 14, -4
 3677 0004 84B0     		sub	sp, sp, #16
 3678              	.LCFI44:
 3679              		.cfi_def_cfa_offset 48
 3680 0006 8146     		mov	r9, r0
 3681 0008 8846     		mov	r8, r1
 3682 000a 1446     		mov	r4, r2
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 120


 3683 000c 9A46     		mov	r10, r3
 3684 000e 0C9D     		ldr	r5, [sp, #48]
 3685 0010 0D9F     		ldr	r7, [sp, #52]
1094:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 3686              		.loc 1 1094 0
 3687 0012 FFF7FEFF 		bl	get_socket
 3688              	.LVL519:
1095:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 3689              		.loc 1 1095 0
 3690 0016 0028     		cmp	r0, #0
 3691 0018 51D0     		beq	.L398
 3692 001a 0646     		mov	r6, r0
1099:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
 3693              		.loc 1 1099 0
 3694 001c 0368     		ldr	r3, [r0]
 3695 001e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3696 0020 03F0F003 		and	r3, r3, #240
 3697 0024 102B     		cmp	r3, #16
 3698 0026 13D0     		beq	.L402
1117:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ERROR("lwip_sendto: invalid address", (((to == NULL) && (tolen == 0)) ||
 3699              		.loc 1 1117 0
 3700 0028 1FFA84F9 		uxth	r9, r4
 3701              	.LVL520:
1118:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              (IS_SOCK_ADDR_LEN_VALID(tolen) &&
 3702              		.loc 1 1118 0
 3703 002c 002F     		cmp	r7, #0
 3704 002e 08BF     		it	eq
 3705 0030 002D     		cmpeq	r5, #0
 3706 0032 1AD0     		beq	.L392
1118:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              (IS_SOCK_ADDR_LEN_VALID(tolen) &&
 3707              		.loc 1 1118 0 is_stmt 0 discriminator 1
 3708 0034 102F     		cmp	r7, #16
 3709 0036 12D0     		beq	.L403
 3710              	.L393:
 3711              	.LBB56:
1118:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              (IS_SOCK_ADDR_LEN_VALID(tolen) &&
 3712              		.loc 1 1118 0 discriminator 6
 3713 0038 6FF00F00 		mvn	r0, #15
 3714              	.LVL521:
 3715 003c FFF7FEFF 		bl	err_to_errno
 3716              	.LVL522:
 3717 0040 3074     		strb	r0, [r6, #16]
 3718 0042 0028     		cmp	r0, #0
 3719 0044 3ED0     		beq	.L399
1118:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              (IS_SOCK_ADDR_LEN_VALID(tolen) &&
 3720              		.loc 1 1118 0 discriminator 7
 3721 0046 224B     		ldr	r3, .L405
 3722 0048 1860     		str	r0, [r3]
 3723              	.LBE56:
 3724 004a 4FF0FF30 		mov	r0, #-1
 3725              	.LVL523:
 3726 004e 2AE0     		b	.L389
 3727              	.LVL524:
 3728              	.L402:
1101:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_TCP */
 3729              		.loc 1 1101 0 is_stmt 1
 3730 0050 5346     		mov	r3, r10
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 121


 3731 0052 2246     		mov	r2, r4
 3732 0054 4146     		mov	r1, r8
 3733 0056 4846     		mov	r0, r9
 3734              	.LVL525:
 3735 0058 FFF7FEFF 		bl	lwip_send
 3736              	.LVL526:
 3737 005c 23E0     		b	.L389
 3738              	.LVL527:
 3739              	.L403:
1118:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              (IS_SOCK_ADDR_LEN_VALID(tolen) &&
 3740              		.loc 1 1118 0 discriminator 3
 3741 005e 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
 3742 0060 022B     		cmp	r3, #2
 3743 0062 E9D1     		bne	.L393
1118:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              (IS_SOCK_ADDR_LEN_VALID(tolen) &&
 3744              		.loc 1 1118 0 is_stmt 0 discriminator 5
 3745 0064 15F0030F 		tst	r5, #3
 3746 0068 E6D1     		bne	.L393
 3747              	.L392:
1125:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_CHECKSUM_ON_COPY
 3748              		.loc 1 1125 0 is_stmt 1
 3749 006a 0023     		movs	r3, #0
 3750 006c 0193     		str	r3, [sp, #4]
 3751 006e 0093     		str	r3, [sp]
1129:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SOCKADDR_TO_IPADDR_PORT(to, &buf.addr, remote_port);
 3752              		.loc 1 1129 0
 3753 0070 E5B1     		cbz	r5, .L394
1130:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
 3754              		.loc 1 1130 0
 3755 0072 6B68     		ldr	r3, [r5, #4]
 3756 0074 0293     		str	r3, [sp, #8]
 3757 0076 6888     		ldrh	r0, [r5, #2]
 3758              	.LVL528:
 3759 0078 FFF7FEFF 		bl	lwip_htons
 3760              	.LVL529:
 3761              	.L395:
1135:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3762              		.loc 1 1135 0
 3763 007c ADF80C00 		strh	r0, [sp, #12]	@ movhi
1161:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETIF_TX_SINGLE_PBUF */
 3764              		.loc 1 1161 0
 3765 0080 4A46     		mov	r2, r9
 3766 0082 4146     		mov	r1, r8
 3767 0084 6846     		mov	r0, sp
 3768              	.LVL530:
 3769 0086 FFF7FEFF 		bl	netbuf_ref
 3770              	.LVL531:
1163:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* send the data */
 3771              		.loc 1 1163 0
 3772 008a 0546     		mov	r5, r0
 3773 008c 88B1     		cbz	r0, .L404
 3774              	.LVL532:
 3775              	.L396:
1169:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3776              		.loc 1 1169 0
 3777 008e 6846     		mov	r0, sp
 3778 0090 FFF7FEFF 		bl	netbuf_free
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 122


 3779              	.LVL533:
 3780              	.LBB57:
1171:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return (err == ERR_OK ? short_size : -1);
 3781              		.loc 1 1171 0
 3782 0094 2846     		mov	r0, r5
 3783 0096 FFF7FEFF 		bl	err_to_errno
 3784              	.LVL534:
 3785 009a 3074     		strb	r0, [r6, #16]
 3786 009c 08B1     		cbz	r0, .L397
1171:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return (err == ERR_OK ? short_size : -1);
 3787              		.loc 1 1171 0 is_stmt 0 discriminator 1
 3788 009e 0C4B     		ldr	r3, .L405
 3789 00a0 1860     		str	r0, [r3]
 3790              	.L397:
 3791              	.LBE57:
1172:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 3792              		.loc 1 1172 0 is_stmt 1
 3793 00a2 95B9     		cbnz	r5, .L400
1172:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 3794              		.loc 1 1172 0 is_stmt 0 discriminator 1
 3795 00a4 A0B2     		uxth	r0, r4
 3796              	.LVL535:
 3797              	.L389:
1173:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3798              		.loc 1 1173 0 is_stmt 1
 3799 00a6 04B0     		add	sp, sp, #16
 3800              	.LCFI45:
 3801              		.cfi_remember_state
 3802              		.cfi_def_cfa_offset 32
 3803              		@ sp needed
 3804 00a8 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 3805              	.LVL536:
 3806              	.L394:
 3807              	.LCFI46:
 3808              		.cfi_restore_state
1133:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 3809              		.loc 1 1133 0
 3810 00ac 0020     		movs	r0, #0
 3811              	.LVL537:
 3812 00ae 0290     		str	r0, [sp, #8]
 3813 00b0 E4E7     		b	.L395
 3814              	.LVL538:
 3815              	.L404:
1165:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 3816              		.loc 1 1165 0
 3817 00b2 6946     		mov	r1, sp
 3818 00b4 3068     		ldr	r0, [r6]
 3819              	.LVL539:
 3820 00b6 FFF7FEFF 		bl	netconn_send
 3821              	.LVL540:
 3822 00ba 0546     		mov	r5, r0
 3823              	.LVL541:
 3824 00bc E7E7     		b	.L396
 3825              	.LVL542:
 3826              	.L398:
1096:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 3827              		.loc 1 1096 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 123


 3828 00be 4FF0FF30 		mov	r0, #-1
 3829              	.LVL543:
 3830 00c2 F0E7     		b	.L389
 3831              	.LVL544:
 3832              	.L399:
1118:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              (IS_SOCK_ADDR_LEN_VALID(tolen) &&
 3833              		.loc 1 1118 0
 3834 00c4 4FF0FF30 		mov	r0, #-1
 3835              	.LVL545:
 3836 00c8 EDE7     		b	.L389
 3837              	.LVL546:
 3838              	.L400:
1172:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 3839              		.loc 1 1172 0
 3840 00ca 4FF0FF30 		mov	r0, #-1
 3841              	.LVL547:
 3842 00ce EAE7     		b	.L389
 3843              	.L406:
 3844              		.align	2
 3845              	.L405:
 3846 00d0 00000000 		.word	errno
 3847              		.cfi_endproc
 3848              	.LFE157:
 3850              		.section	.text.lwip_send,"ax",%progbits
 3851              		.align	1
 3852              		.global	lwip_send
 3853              		.syntax unified
 3854              		.thumb
 3855              		.thumb_func
 3856              		.fpu fpv5-sp-d16
 3858              	lwip_send:
 3859              	.LFB155:
 905:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 3860              		.loc 1 905 0
 3861              		.cfi_startproc
 3862              		@ args = 0, pretend = 0, frame = 8
 3863              		@ frame_needed = 0, uses_anonymous_args = 0
 3864              	.LVL548:
 3865 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 3866              	.LCFI47:
 3867              		.cfi_def_cfa_offset 24
 3868              		.cfi_offset 4, -24
 3869              		.cfi_offset 5, -20
 3870              		.cfi_offset 6, -16
 3871              		.cfi_offset 7, -12
 3872              		.cfi_offset 8, -8
 3873              		.cfi_offset 14, -4
 3874 0004 84B0     		sub	sp, sp, #16
 3875              	.LCFI48:
 3876              		.cfi_def_cfa_offset 40
 3877 0006 8046     		mov	r8, r0
 3878 0008 0E46     		mov	r6, r1
 3879 000a 1746     		mov	r7, r2
 3880 000c 1D46     		mov	r5, r3
 914:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 3881              		.loc 1 914 0
 3882 000e FFF7FEFF 		bl	get_socket
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 124


 3883              	.LVL549:
 915:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 3884              		.loc 1 915 0
 3885 0012 98B3     		cbz	r0, .L413
 3886 0014 0446     		mov	r4, r0
 919:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if (LWIP_UDP || LWIP_RAW)
 3887              		.loc 1 919 0
 3888 0016 0368     		ldr	r3, [r0]
 3889 0018 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3890 001a 03F0F003 		and	r3, r3, #240
 3891 001e 102B     		cmp	r3, #16
 3892 0020 1ED1     		bne	.L418
 929:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_DONTWAIT) ? NETCONN_DONTBLOCK : 0);
 3893              		.loc 1 929 0
 3894 0022 15F0100F 		tst	r5, #16
 3895 0026 25D0     		beq	.L414
 3896 0028 0321     		movs	r1, #3
 3897              	.L410:
 929:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_DONTWAIT) ? NETCONN_DONTBLOCK : 0);
 3898              		.loc 1 929 0 is_stmt 0 discriminator 4
 3899 002a 15F0080F 		tst	r5, #8
 3900 002e 23D0     		beq	.L415
 929:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_DONTWAIT) ? NETCONN_DONTBLOCK : 0);
 3901              		.loc 1 929 0
 3902 0030 0423     		movs	r3, #4
 3903              	.L411:
 3904              	.LVL550:
 931:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netconn_write_partly(sock->conn, data, size, write_flags, &written);
 3905              		.loc 1 931 0 is_stmt 1 discriminator 8
 3906 0032 04AA     		add	r2, sp, #16
 3907 0034 0020     		movs	r0, #0
 3908              	.LVL551:
 3909 0036 42F8040D 		str	r0, [r2, #-4]!
 932:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3910              		.loc 1 932 0 discriminator 8
 3911 003a 2068     		ldr	r0, [r4]
 3912 003c 0092     		str	r2, [sp]
 3913 003e 0B43     		orrs	r3, r3, r1
 3914              	.LVL552:
 3915 0040 3A46     		mov	r2, r7
 3916 0042 3146     		mov	r1, r6
 3917 0044 FFF7FEFF 		bl	netconn_write_partly
 3918              	.LVL553:
 3919 0048 0546     		mov	r5, r0
 3920              	.LVL554:
 3921              	.LBB58:
 935:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return (err == ERR_OK ? (int)written : -1);
 3922              		.loc 1 935 0 discriminator 8
 3923 004a FFF7FEFF 		bl	err_to_errno
 3924              	.LVL555:
 3925 004e 2074     		strb	r0, [r4, #16]
 3926 0050 08B1     		cbz	r0, .L412
 935:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return (err == ERR_OK ? (int)written : -1);
 3927              		.loc 1 935 0 is_stmt 0 discriminator 1
 3928 0052 0D4B     		ldr	r3, .L419
 3929 0054 1860     		str	r0, [r3]
 3930              	.L412:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 125


 3931              	.LBE58:
 936:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 3932              		.loc 1 936 0 is_stmt 1
 3933 0056 A5B9     		cbnz	r5, .L416
 936:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 3934              		.loc 1 936 0 is_stmt 0 discriminator 1
 3935 0058 0398     		ldr	r0, [sp, #12]
 3936              	.LVL556:
 3937              	.L407:
 937:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 3938              		.loc 1 937 0 is_stmt 1
 3939 005a 04B0     		add	sp, sp, #16
 3940              	.LCFI49:
 3941              		.cfi_remember_state
 3942              		.cfi_def_cfa_offset 24
 3943              		@ sp needed
 3944 005c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 3945              	.LVL557:
 3946              	.L418:
 3947              	.LCFI50:
 3948              		.cfi_restore_state
 921:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* (LWIP_UDP || LWIP_RAW) */
 3949              		.loc 1 921 0
 3950 0060 0023     		movs	r3, #0
 3951 0062 0193     		str	r3, [sp, #4]
 3952 0064 0093     		str	r3, [sp]
 3953 0066 2B46     		mov	r3, r5
 3954 0068 3A46     		mov	r2, r7
 3955 006a 3146     		mov	r1, r6
 3956 006c 4046     		mov	r0, r8
 3957              	.LVL558:
 3958 006e FFF7FEFF 		bl	lwip_sendto
 3959              	.LVL559:
 3960 0072 F2E7     		b	.L407
 3961              	.LVL560:
 3962              	.L414:
 929:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ((flags & MSG_DONTWAIT) ? NETCONN_DONTBLOCK : 0);
 3963              		.loc 1 929 0
 3964 0074 0121     		movs	r1, #1
 3965 0076 D8E7     		b	.L410
 3966              	.L415:
 3967 0078 0023     		movs	r3, #0
 3968 007a DAE7     		b	.L411
 3969              	.L413:
 916:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 3970              		.loc 1 916 0
 3971 007c 4FF0FF30 		mov	r0, #-1
 3972              	.LVL561:
 3973 0080 EBE7     		b	.L407
 3974              	.LVL562:
 3975              	.L416:
 936:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 3976              		.loc 1 936 0
 3977 0082 4FF0FF30 		mov	r0, #-1
 3978              	.LVL563:
 3979 0086 E8E7     		b	.L407
 3980              	.L420:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 126


 3981              		.align	2
 3982              	.L419:
 3983 0088 00000000 		.word	errno
 3984              		.cfi_endproc
 3985              	.LFE155:
 3987              		.section	.text.lwip_socket,"ax",%progbits
 3988              		.align	1
 3989              		.global	lwip_socket
 3990              		.syntax unified
 3991              		.thumb
 3992              		.thumb_func
 3993              		.fpu fpv5-sp-d16
 3995              	lwip_socket:
 3996              	.LFB158:
1177:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct netconn *conn;
 3997              		.loc 1 1177 0
 3998              		.cfi_startproc
 3999              		@ args = 0, pretend = 0, frame = 0
 4000              		@ frame_needed = 0, uses_anonymous_args = 0
 4001              	.LVL564:
 4002 0000 38B5     		push	{r3, r4, r5, lr}
 4003              	.LCFI51:
 4004              		.cfi_def_cfa_offset 16
 4005              		.cfi_offset 3, -16
 4006              		.cfi_offset 4, -12
 4007              		.cfi_offset 5, -8
 4008              		.cfi_offset 14, -4
 4009 0002 1346     		mov	r3, r2
1186:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case SOCK_RAW:
 4010              		.loc 1 1186 0
 4011 0004 0229     		cmp	r1, #2
 4012 0006 1BD0     		beq	.L423
 4013 0008 0329     		cmp	r1, #3
 4014 000a 07D0     		beq	.L424
 4015 000c 0129     		cmp	r1, #1
 4016 000e 22D0     		beq	.L434
1208:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 4017              		.loc 1 1208 0 discriminator 1
 4018 0010 1622     		movs	r2, #22
 4019              	.LVL565:
 4020 0012 1B4B     		ldr	r3, .L438
 4021              	.LVL566:
 4022 0014 1A60     		str	r2, [r3]
1209:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4023              		.loc 1 1209 0 discriminator 1
 4024 0016 4FF0FF34 		mov	r4, #-1
 4025 001a 0FE0     		b	.L421
 4026              	.LVL567:
 4027              	.L424:
1188:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                                (u8_t)protocol, event_callback);
 4028              		.loc 1 1188 0
 4029 001c 194A     		ldr	r2, .L438+4
 4030              	.LVL568:
 4031 001e D9B2     		uxtb	r1, r3
 4032              	.LVL569:
 4033 0020 4020     		movs	r0, #64
 4034              	.LVL570:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 127


 4035 0022 FFF7FEFF 		bl	netconn_new_with_proto_and_callback
 4036              	.LVL571:
 4037 0026 0546     		mov	r5, r0
 4038              	.LVL572:
 4039              	.L426:
1212:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("-1 / ENOBUFS (could not create netconn)\n"));
 4040              		.loc 1 1212 0
 4041 0028 E5B1     		cbz	r5, .L435
1218:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4042              		.loc 1 1218 0
 4043 002a 0021     		movs	r1, #0
 4044 002c 2846     		mov	r0, r5
 4045 002e FFF7FEFF 		bl	alloc_socket
 4046              	.LVL573:
 4047 0032 0446     		mov	r4, r0
 4048              	.LVL574:
1220:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     netconn_delete(conn);
 4049              		.loc 1 1220 0
 4050 0034 B0F1FF3F 		cmp	r0, #-1
 4051 0038 1AD0     		beq	.L436
1225:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("%d\n", i));
 4052              		.loc 1 1225 0
 4053 003a A861     		str	r0, [r5, #24]
 4054              	.LVL575:
 4055              	.L421:
1229:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4056              		.loc 1 1229 0
 4057 003c 2046     		mov	r0, r4
 4058 003e 38BD     		pop	{r3, r4, r5, pc}
 4059              	.LVL576:
 4060              	.L423:
1194:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                  ((protocol == IPPROTO_UDPLITE) ? NETCONN_UDPLITE : NETCONN_UDP)) ,
 4061              		.loc 1 1194 0
 4062 0040 882A     		cmp	r2, #136
 4063 0042 06D0     		beq	.L437
 4064 0044 2020     		movs	r0, #32
 4065              	.LVL577:
 4066              	.L427:
1194:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                  ((protocol == IPPROTO_UDPLITE) ? NETCONN_UDPLITE : NETCONN_UDP)) ,
 4067              		.loc 1 1194 0 is_stmt 0 discriminator 4
 4068 0046 0F4A     		ldr	r2, .L438+4
 4069              	.LVL578:
 4070 0048 0021     		movs	r1, #0
 4071              	.LVL579:
 4072 004a FFF7FEFF 		bl	netconn_new_with_proto_and_callback
 4073              	.LVL580:
 4074 004e 0546     		mov	r5, r0
 4075              	.LVL581:
1199:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case SOCK_STREAM:
 4076              		.loc 1 1199 0 is_stmt 1 discriminator 4
 4077 0050 EAE7     		b	.L426
 4078              	.LVL582:
 4079              	.L437:
1194:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                  ((protocol == IPPROTO_UDPLITE) ? NETCONN_UDPLITE : NETCONN_UDP)) ,
 4080              		.loc 1 1194 0
 4081 0052 2120     		movs	r0, #33
 4082              	.LVL583:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 128


 4083 0054 F7E7     		b	.L427
 4084              	.LVL584:
 4085              	.L434:
1201:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_socket(%s, SOCK_STREAM, %d) = ",
 4086              		.loc 1 1201 0
 4087 0056 0B4A     		ldr	r2, .L438+4
 4088              	.LVL585:
 4089 0058 0021     		movs	r1, #0
 4090              	.LVL586:
 4091 005a 1020     		movs	r0, #16
 4092              	.LVL587:
 4093 005c FFF7FEFF 		bl	netconn_new_with_proto_and_callback
 4094              	.LVL588:
 4095 0060 0546     		mov	r5, r0
 4096              	.LVL589:
1204:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   default:
 4097              		.loc 1 1204 0
 4098 0062 E1E7     		b	.L426
 4099              	.L435:
1214:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 4100              		.loc 1 1214 0 discriminator 1
 4101 0064 6922     		movs	r2, #105
 4102 0066 064B     		ldr	r3, .L438
 4103 0068 1A60     		str	r2, [r3]
1215:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4104              		.loc 1 1215 0 discriminator 1
 4105 006a 4FF0FF34 		mov	r4, #-1
 4106 006e E5E7     		b	.L421
 4107              	.LVL590:
 4108              	.L436:
1221:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     set_errno(ENFILE);
 4109              		.loc 1 1221 0
 4110 0070 2846     		mov	r0, r5
 4111              	.LVL591:
 4112 0072 FFF7FEFF 		bl	netconn_delete
 4113              	.LVL592:
1222:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 4114              		.loc 1 1222 0
 4115 0076 1722     		movs	r2, #23
 4116 0078 014B     		ldr	r3, .L438
 4117 007a 1A60     		str	r2, [r3]
1223:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4118              		.loc 1 1223 0
 4119 007c DEE7     		b	.L421
 4120              	.L439:
 4121 007e 00BF     		.align	2
 4122              	.L438:
 4123 0080 00000000 		.word	errno
 4124 0084 00000000 		.word	event_callback
 4125              		.cfi_endproc
 4126              	.LFE158:
 4128              		.section	.text.lwip_write,"ax",%progbits
 4129              		.align	1
 4130              		.global	lwip_write
 4131              		.syntax unified
 4132              		.thumb
 4133              		.thumb_func
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 129


 4134              		.fpu fpv5-sp-d16
 4136              	lwip_write:
 4137              	.LFB159:
1233:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_send(s, data, size, 0);
 4138              		.loc 1 1233 0
 4139              		.cfi_startproc
 4140              		@ args = 0, pretend = 0, frame = 0
 4141              		@ frame_needed = 0, uses_anonymous_args = 0
 4142              	.LVL593:
 4143 0000 08B5     		push	{r3, lr}
 4144              	.LCFI52:
 4145              		.cfi_def_cfa_offset 8
 4146              		.cfi_offset 3, -8
 4147              		.cfi_offset 14, -4
1234:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 4148              		.loc 1 1234 0
 4149 0002 0023     		movs	r3, #0
 4150 0004 FFF7FEFF 		bl	lwip_send
 4151              	.LVL594:
1235:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4152              		.loc 1 1235 0
 4153 0008 08BD     		pop	{r3, pc}
 4154              		.cfi_endproc
 4155              	.LFE159:
 4157              		.section	.text.lwip_writev,"ax",%progbits
 4158              		.align	1
 4159              		.global	lwip_writev
 4160              		.syntax unified
 4161              		.thumb
 4162              		.thumb_func
 4163              		.fpu fpv5-sp-d16
 4165              	lwip_writev:
 4166              	.LFB160:
1239:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct msghdr msg;
 4167              		.loc 1 1239 0
 4168              		.cfi_startproc
 4169              		@ args = 0, pretend = 0, frame = 32
 4170              		@ frame_needed = 0, uses_anonymous_args = 0
 4171              	.LVL595:
 4172 0000 00B5     		push	{lr}
 4173              	.LCFI53:
 4174              		.cfi_def_cfa_offset 4
 4175              		.cfi_offset 14, -4
 4176 0002 89B0     		sub	sp, sp, #36
 4177              	.LCFI54:
 4178              		.cfi_def_cfa_offset 40
1242:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_namelen = 0;
 4179              		.loc 1 1242 0
 4180 0004 0023     		movs	r3, #0
 4181 0006 0193     		str	r3, [sp, #4]
1243:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Hack: we have to cast via number to cast from 'const' pointer to non-const.
 4182              		.loc 1 1243 0
 4183 0008 0293     		str	r3, [sp, #8]
1246:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_iovlen = iovcnt;
 4184              		.loc 1 1246 0
 4185 000a 0391     		str	r1, [sp, #12]
1247:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_control = NULL;
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 130


 4186              		.loc 1 1247 0
 4187 000c 0492     		str	r2, [sp, #16]
1248:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_controllen = 0;
 4188              		.loc 1 1248 0
 4189 000e 0593     		str	r3, [sp, #20]
1249:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_flags = 0;
 4190              		.loc 1 1249 0
 4191 0010 0693     		str	r3, [sp, #24]
1250:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_sendmsg(s, &msg, 0);
 4192              		.loc 1 1250 0
 4193 0012 0793     		str	r3, [sp, #28]
1251:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 4194              		.loc 1 1251 0
 4195 0014 1A46     		mov	r2, r3
 4196              	.LVL596:
 4197 0016 01A9     		add	r1, sp, #4
 4198              	.LVL597:
 4199 0018 FFF7FEFF 		bl	lwip_sendmsg
 4200              	.LVL598:
1252:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4201              		.loc 1 1252 0
 4202 001c 09B0     		add	sp, sp, #36
 4203              	.LCFI55:
 4204              		.cfi_def_cfa_offset 4
 4205              		@ sp needed
 4206 001e 5DF804FB 		ldr	pc, [sp], #4
 4207              		.cfi_endproc
 4208              	.LFE160:
 4210              		.section	.text.lwip_select,"ax",%progbits
 4211              		.align	1
 4212              		.global	lwip_select
 4213              		.syntax unified
 4214              		.thumb
 4215              		.thumb_func
 4216              		.fpu fpv5-sp-d16
 4218              	lwip_select:
 4219              	.LFB162:
1336:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u32_t waitres = 0;
 4220              		.loc 1 1336 0
 4221              		.cfi_startproc
 4222              		@ args = 4, pretend = 0, frame = 64
 4223              		@ frame_needed = 0, uses_anonymous_args = 0
 4224              	.LVL599:
 4225 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 4226              	.LCFI56:
 4227              		.cfi_def_cfa_offset 36
 4228              		.cfi_offset 4, -36
 4229              		.cfi_offset 5, -32
 4230              		.cfi_offset 6, -28
 4231              		.cfi_offset 7, -24
 4232              		.cfi_offset 8, -20
 4233              		.cfi_offset 9, -16
 4234              		.cfi_offset 10, -12
 4235              		.cfi_offset 11, -8
 4236              		.cfi_offset 14, -4
 4237 0004 95B0     		sub	sp, sp, #84
 4238              	.LCFI57:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 131


 4239              		.cfi_def_cfa_offset 120
 4240 0006 8146     		mov	r9, r0
 4241 0008 0E46     		mov	r6, r1
 4242 000a 1746     		mov	r7, r2
 4243 000c 9846     		mov	r8, r3
 4244 000e DDF878A0 		ldr	r10, [sp, #120]
 4245              	.LVL600:
1356:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4246              		.loc 1 1356 0
 4247 0012 0EAC     		add	r4, sp, #56
 4248 0014 0294     		str	r4, [sp, #8]
 4249 0016 10AC     		add	r4, sp, #64
 4250 0018 0194     		str	r4, [sp, #4]
 4251 001a 12AC     		add	r4, sp, #72
 4252 001c 0094     		str	r4, [sp]
 4253 001e FFF7FEFF 		bl	lwip_selscan
 4254              	.LVL601:
1359:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (timeout && timeout->tv_sec == 0 && timeout->tv_usec == 0) {
 4255              		.loc 1 1359 0
 4256 0022 0546     		mov	r5, r0
 4257 0024 0028     		cmp	r0, #0
 4258 0026 40F0FC80 		bne	.L445
1360:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_select: no timeout, returning 0\n"));
 4259              		.loc 1 1360 0
 4260 002a BAF1000F 		cmp	r10, #0
 4261 002e 07D0     		beq	.L446
1360:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_select: no timeout, returning 0\n"));
 4262              		.loc 1 1360 0 is_stmt 0 discriminator 1
 4263 0030 DAF80030 		ldr	r3, [r10]
 4264 0034 23B9     		cbnz	r3, .L446
1360:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_select: no timeout, returning 0\n"));
 4265              		.loc 1 1360 0 discriminator 2
 4266 0036 DAF80430 		ldr	r3, [r10, #4]
 4267 003a 002B     		cmp	r3, #0
 4268 003c 00F0F180 		beq	.L445
 4269              	.L446:
1372:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.prev = NULL;
 4270              		.loc 1 1372 0 is_stmt 1
 4271 0040 0021     		movs	r1, #0
 4272 0042 0791     		str	r1, [sp, #28]
1373:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.readset = readset;
 4273              		.loc 1 1373 0
 4274 0044 0891     		str	r1, [sp, #32]
1374:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.writeset = writeset;
 4275              		.loc 1 1374 0
 4276 0046 0996     		str	r6, [sp, #36]
1375:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.exceptset = exceptset;
 4277              		.loc 1 1375 0
 4278 0048 0A97     		str	r7, [sp, #40]
1376:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb.sem_signalled = 0;
 4279              		.loc 1 1376 0
 4280 004a CDF82C80 		str	r8, [sp, #44]
1377:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
 4281              		.loc 1 1377 0
 4282 004e 0C91     		str	r1, [sp, #48]
1381:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* failed to create semaphore */
 4283              		.loc 1 1381 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 132


 4284 0050 0DA8     		add	r0, sp, #52
 4285              	.LVL602:
 4286 0052 FFF7FEFF 		bl	sys_sem_new
 4287              	.LVL603:
 4288 0056 90B9     		cbnz	r0, .L480
1389:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4289              		.loc 1 1389 0
 4290 0058 FFF7FEFF 		bl	sys_arch_protect
 4291              	.LVL604:
1392:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (select_cb_list != NULL) {
 4292              		.loc 1 1392 0
 4293 005c 824B     		ldr	r3, .L485
 4294 005e 1B68     		ldr	r3, [r3]
 4295 0060 0793     		str	r3, [sp, #28]
1393:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       select_cb_list->prev = &select_cb;
 4296              		.loc 1 1393 0
 4297 0062 0BB1     		cbz	r3, .L449
1394:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 4298              		.loc 1 1394 0
 4299 0064 07AA     		add	r2, sp, #28
 4300 0066 5A60     		str	r2, [r3, #4]
 4301              	.L449:
1396:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Increasing this counter tells event_callback that the list has changed. */
 4302              		.loc 1 1396 0
 4303 0068 07AA     		add	r2, sp, #28
 4304 006a 7F4B     		ldr	r3, .L485
 4305 006c 1A60     		str	r2, [r3]
1398:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4306              		.loc 1 1398 0
 4307 006e 7F4A     		ldr	r2, .L485+4
 4308 0070 1368     		ldr	r3, [r2]
 4309 0072 0133     		adds	r3, r3, #1
 4310 0074 1360     		str	r3, [r2]
1401:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4311              		.loc 1 1401 0
 4312 0076 FFF7FEFF 		bl	sys_arch_unprotect
 4313              	.LVL605:
1405:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((readset && FD_ISSET(i, readset)) ||
 4314              		.loc 1 1405 0
 4315 007a 2C46     		mov	r4, r5
 4316 007c 13E0     		b	.L450
 4317              	.LVL606:
 4318              	.L480:
1383:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 4319              		.loc 1 1383 0 discriminator 1
 4320 007e 0C22     		movs	r2, #12
 4321 0080 7B4B     		ldr	r3, .L485+8
 4322 0082 1A60     		str	r2, [r3]
1384:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 4323              		.loc 1 1384 0 discriminator 1
 4324 0084 4FF0FF35 		mov	r5, #-1
 4325              	.LVL607:
 4326 0088 DFE0     		b	.L444
 4327              	.LVL608:
 4328              	.L452:
 4329              	.LBB59:
1410:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock = tryget_socket(i);
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 133


 4330              		.loc 1 1410 0
 4331 008a FFF7FEFF 		bl	sys_arch_protect
 4332              	.LVL609:
 4333 008e 8346     		mov	fp, r0
 4334              	.LVL610:
1411:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (sock != NULL) {
 4335              		.loc 1 1411 0
 4336 0090 2046     		mov	r0, r4
 4337              	.LVL611:
 4338 0092 FFF7FEFF 		bl	tryget_socket
 4339              	.LVL612:
1412:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           sock->select_waiting++;
 4340              		.loc 1 1412 0
 4341 0096 48B3     		cbz	r0, .L455
1413:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_ASSERT("sock->select_waiting > 0", sock->select_waiting > 0);
 4342              		.loc 1 1413 0
 4343 0098 437C     		ldrb	r3, [r0, #17]	@ zero_extendqisi2
 4344 009a 0133     		adds	r3, r3, #1
 4345 009c 4374     		strb	r3, [r0, #17]
1422:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 4346              		.loc 1 1422 0
 4347 009e 5846     		mov	r0, fp
 4348              	.LVL613:
 4349 00a0 FFF7FEFF 		bl	sys_arch_unprotect
 4350              	.LVL614:
 4351              	.L454:
 4352              	.LBE59:
1405:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((readset && FD_ISSET(i, readset)) ||
 4353              		.loc 1 1405 0 discriminator 2
 4354 00a4 0134     		adds	r4, r4, #1
 4355              	.LVL615:
 4356              	.L450:
1405:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((readset && FD_ISSET(i, readset)) ||
 4357              		.loc 1 1405 0 is_stmt 0 discriminator 1
 4358 00a6 4C45     		cmp	r4, r9
 4359 00a8 26DA     		bge	.L481
1406:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (writeset && FD_ISSET(i, writeset)) ||
 4360              		.loc 1 1406 0 is_stmt 1
 4361 00aa 46B1     		cbz	r6, .L451
1406:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (writeset && FD_ISSET(i, writeset)) ||
 4362              		.loc 1 1406 0 is_stmt 0 discriminator 1
 4363 00ac 6309     		lsrs	r3, r4, #5
 4364 00ae 56F82320 		ldr	r2, [r6, r3, lsl #2]
 4365 00b2 04F01F01 		and	r1, r4, #31
 4366 00b6 0123     		movs	r3, #1
 4367 00b8 8B40     		lsls	r3, r3, r1
 4368 00ba 1A42     		tst	r2, r3
 4369 00bc E5D1     		bne	.L452
 4370              	.L451:
1406:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (writeset && FD_ISSET(i, writeset)) ||
 4371              		.loc 1 1406 0 discriminator 3
 4372 00be 47B1     		cbz	r7, .L453
1407:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (exceptset && FD_ISSET(i, exceptset))) {
 4373              		.loc 1 1407 0 is_stmt 1
 4374 00c0 6309     		lsrs	r3, r4, #5
 4375 00c2 57F82320 		ldr	r2, [r7, r3, lsl #2]
 4376 00c6 04F01F01 		and	r1, r4, #31
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 134


 4377 00ca 0123     		movs	r3, #1
 4378 00cc 8B40     		lsls	r3, r3, r1
 4379 00ce 1A42     		tst	r2, r3
 4380 00d0 DBD1     		bne	.L452
 4381              	.L453:
1407:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (exceptset && FD_ISSET(i, exceptset))) {
 4382              		.loc 1 1407 0 is_stmt 0 discriminator 1
 4383 00d2 B8F1000F 		cmp	r8, #0
 4384 00d6 E5D0     		beq	.L454
1408:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         struct lwip_sock *sock;
 4385              		.loc 1 1408 0 is_stmt 1
 4386 00d8 6309     		lsrs	r3, r4, #5
 4387 00da 58F82320 		ldr	r2, [r8, r3, lsl #2]
 4388 00de 04F01F01 		and	r1, r4, #31
 4389 00e2 0123     		movs	r3, #1
 4390 00e4 8B40     		lsls	r3, r3, r1
 4391 00e6 1A42     		tst	r2, r3
 4392 00e8 DCD0     		beq	.L454
 4393 00ea CEE7     		b	.L452
 4394              	.LVL616:
 4395              	.L455:
 4396              	.LBB60:
1419:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
 4397              		.loc 1 1419 0
 4398 00ec 5846     		mov	r0, fp
 4399              	.LVL617:
 4400 00ee FFF7FEFF 		bl	sys_arch_unprotect
 4401              	.LVL618:
1417:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           maxfdp2 = i;
 4402              		.loc 1 1417 0
 4403 00f2 4FF0FF3B 		mov	fp, #-1
 4404              	.LVL619:
1420:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 4405              		.loc 1 1420 0
 4406 00f6 01E0     		b	.L456
 4407              	.LVL620:
 4408              	.L481:
 4409              	.LBE60:
1404:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     for (i = LWIP_SOCKET_OFFSET; i < maxfdp1; i++) {
 4410              		.loc 1 1404 0
 4411 00f8 4C46     		mov	r4, r9
 4412              	.LVL621:
1356:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4413              		.loc 1 1356 0
 4414 00fa AB46     		mov	fp, r5
 4415              	.LVL622:
 4416              	.L456:
1426:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Call lwip_selscan again: there could have been events between
 4417              		.loc 1 1426 0
 4418 00fc BBF1000F 		cmp	fp, #0
 4419 0100 2ADB     		blt	.L473
1429:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (!nready) {
 4420              		.loc 1 1429 0
 4421 0102 0EAB     		add	r3, sp, #56
 4422 0104 0293     		str	r3, [sp, #8]
 4423 0106 10AB     		add	r3, sp, #64
 4424 0108 0193     		str	r3, [sp, #4]
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 135


 4425 010a 12AB     		add	r3, sp, #72
 4426 010c 0093     		str	r3, [sp]
 4427 010e 4346     		mov	r3, r8
 4428 0110 3A46     		mov	r2, r7
 4429 0112 3146     		mov	r1, r6
 4430 0114 4846     		mov	r0, r9
 4431 0116 FFF7FEFF 		bl	lwip_selscan
 4432              	.LVL623:
1430:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* Still none ready, just wait to be woken */
 4433              		.loc 1 1430 0
 4434 011a 8346     		mov	fp, r0
 4435 011c F8B9     		cbnz	r0, .L474
1432:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* Wait forever */
 4436              		.loc 1 1432 0
 4437 011e BAF1000F 		cmp	r10, #0
 4438 0122 15D0     		beq	.L475
1436:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (msectimeout == 0) {
 4439              		.loc 1 1436 0
 4440 0124 DAF80010 		ldr	r1, [r10]
 4441 0128 DAF80430 		ldr	r3, [r10, #4]
 4442 012c 03F5FA73 		add	r3, r3, #500
 4443 0130 504A     		ldr	r2, .L485+12
 4444 0132 82FB0302 		smull	r0, r2, r2, r3
 4445              	.LVL624:
 4446 0136 DB17     		asrs	r3, r3, #31
 4447 0138 C3EBA213 		rsb	r3, r3, r2, asr #6
 4448 013c 4FF47A72 		mov	r2, #1000
 4449 0140 02FB0131 		mla	r1, r2, r1, r3
 4450              	.LVL625:
1437:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             /* Wait 1ms at least (0 means wait forever) */
 4451              		.loc 1 1437 0
 4452 0144 31B1     		cbz	r1, .L476
 4453              	.LVL626:
 4454              	.L459:
1443:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
 4455              		.loc 1 1443 0
 4456 0146 0DA8     		add	r0, sp, #52
 4457 0148 FFF7FEFF 		bl	sys_arch_sem_wait
 4458              	.LVL627:
 4459 014c 0590     		str	r0, [sp, #20]
 4460              	.LVL628:
 4461 014e 18E0     		b	.L460
 4462              	.LVL629:
 4463              	.L475:
1434:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
 4464              		.loc 1 1434 0
 4465 0150 0021     		movs	r1, #0
 4466 0152 F8E7     		b	.L459
 4467              	.LVL630:
 4468              	.L476:
1439:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
 4469              		.loc 1 1439 0
 4470 0154 0121     		movs	r1, #1
 4471              	.LVL631:
 4472 0156 F6E7     		b	.L459
 4473              	.LVL632:
 4474              	.L473:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 136


1337:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int nready;
 4475              		.loc 1 1337 0
 4476 0158 0023     		movs	r3, #0
 4477 015a 0593     		str	r3, [sp, #20]
 4478 015c 11E0     		b	.L460
 4479              	.LVL633:
 4480              	.L474:
 4481 015e 0023     		movs	r3, #0
 4482 0160 0593     		str	r3, [sp, #20]
 4483              	.LVL634:
1451:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((readset && FD_ISSET(i, readset)) ||
 4484              		.loc 1 1451 0
 4485 0162 0EE0     		b	.L460
 4486              	.LVL635:
 4487              	.L462:
 4488              	.LBB61:
1456:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock = tryget_socket(i);
 4489              		.loc 1 1456 0
 4490 0164 FFF7FEFF 		bl	sys_arch_protect
 4491              	.LVL636:
 4492 0168 8246     		mov	r10, r0
 4493              	.LVL637:
1457:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (sock != NULL) {
 4494              		.loc 1 1457 0
 4495 016a 2846     		mov	r0, r5
 4496              	.LVL638:
 4497 016c FFF7FEFF 		bl	tryget_socket
 4498              	.LVL639:
1458:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* @todo: what if this is a new socket (reallocated?) in this case,
 4499              		.loc 1 1458 0
 4500 0170 50B3     		cbz	r0, .L477
1462:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (sock->select_waiting > 0) {
 4501              		.loc 1 1462 0
 4502 0172 437C     		ldrb	r3, [r0, #17]	@ zero_extendqisi2
1463:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             sock->select_waiting--;
 4503              		.loc 1 1463 0
 4504 0174 0BB1     		cbz	r3, .L465
1464:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
 4505              		.loc 1 1464 0
 4506 0176 013B     		subs	r3, r3, #1
 4507 0178 4374     		strb	r3, [r0, #17]
 4508              	.LVL640:
 4509              	.L465:
1470:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 4510              		.loc 1 1470 0
 4511 017a 5046     		mov	r0, r10
 4512              	.LVL641:
 4513 017c FFF7FEFF 		bl	sys_arch_unprotect
 4514              	.LVL642:
 4515              	.L464:
 4516              	.LBE61:
1451:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((readset && FD_ISSET(i, readset)) ||
 4517              		.loc 1 1451 0 discriminator 2
 4518 0180 0135     		adds	r5, r5, #1
 4519              	.LVL643:
 4520              	.L460:
1451:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((readset && FD_ISSET(i, readset)) ||
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 137


 4521              		.loc 1 1451 0 is_stmt 0 discriminator 1
 4522 0182 A542     		cmp	r5, r4
 4523 0184 23DA     		bge	.L482
1452:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (writeset && FD_ISSET(i, writeset)) ||
 4524              		.loc 1 1452 0 is_stmt 1
 4525 0186 46B1     		cbz	r6, .L461
1452:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (writeset && FD_ISSET(i, writeset)) ||
 4526              		.loc 1 1452 0 is_stmt 0 discriminator 1
 4527 0188 6B09     		lsrs	r3, r5, #5
 4528 018a 56F82320 		ldr	r2, [r6, r3, lsl #2]
 4529 018e 05F01F01 		and	r1, r5, #31
 4530 0192 0123     		movs	r3, #1
 4531 0194 8B40     		lsls	r3, r3, r1
 4532 0196 1A42     		tst	r2, r3
 4533 0198 E4D1     		bne	.L462
 4534              	.L461:
1452:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (writeset && FD_ISSET(i, writeset)) ||
 4535              		.loc 1 1452 0 discriminator 3
 4536 019a 47B1     		cbz	r7, .L463
1453:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (exceptset && FD_ISSET(i, exceptset))) {
 4537              		.loc 1 1453 0 is_stmt 1
 4538 019c 6B09     		lsrs	r3, r5, #5
 4539 019e 57F82320 		ldr	r2, [r7, r3, lsl #2]
 4540 01a2 05F01F01 		and	r1, r5, #31
 4541 01a6 0123     		movs	r3, #1
 4542 01a8 8B40     		lsls	r3, r3, r1
 4543 01aa 1A42     		tst	r2, r3
 4544 01ac DAD1     		bne	.L462
 4545              	.L463:
1453:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (exceptset && FD_ISSET(i, exceptset))) {
 4546              		.loc 1 1453 0 is_stmt 0 discriminator 1
 4547 01ae B8F1000F 		cmp	r8, #0
 4548 01b2 E5D0     		beq	.L464
1454:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         struct lwip_sock *sock;
 4549              		.loc 1 1454 0 is_stmt 1
 4550 01b4 6B09     		lsrs	r3, r5, #5
 4551 01b6 58F82320 		ldr	r2, [r8, r3, lsl #2]
 4552 01ba 05F01F01 		and	r1, r5, #31
 4553 01be 0123     		movs	r3, #1
 4554 01c0 8B40     		lsls	r3, r3, r1
 4555 01c2 1A42     		tst	r2, r3
 4556 01c4 DCD0     		beq	.L464
 4557 01c6 CDE7     		b	.L462
 4558              	.LVL644:
 4559              	.L477:
 4560              	.LBB62:
1468:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 4561              		.loc 1 1468 0
 4562 01c8 4FF0FF3B 		mov	fp, #-1
 4563              	.LVL645:
 4564 01cc D5E7     		b	.L465
 4565              	.LVL646:
 4566              	.L482:
 4567              	.LBE62:
1474:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (select_cb.next != NULL) {
 4568              		.loc 1 1474 0
 4569 01ce FFF7FEFF 		bl	sys_arch_protect
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 138


 4570              	.LVL647:
1475:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       select_cb.next->prev = select_cb.prev;
 4571              		.loc 1 1475 0
 4572 01d2 079B     		ldr	r3, [sp, #28]
 4573 01d4 0BB1     		cbz	r3, .L467
1476:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 4574              		.loc 1 1476 0
 4575 01d6 089A     		ldr	r2, [sp, #32]
 4576 01d8 5A60     		str	r2, [r3, #4]
 4577              	.L467:
1478:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_ASSERT("select_cb.prev == NULL", select_cb.prev == NULL);
 4578              		.loc 1 1478 0
 4579 01da 234A     		ldr	r2, .L485
 4580 01dc 1168     		ldr	r1, [r2]
 4581 01de 07AA     		add	r2, sp, #28
 4582 01e0 9142     		cmp	r1, r2
 4583 01e2 36D0     		beq	.L483
1482:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       select_cb.prev->next = select_cb.next;
 4584              		.loc 1 1482 0
 4585 01e4 089A     		ldr	r2, [sp, #32]
1483:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 4586              		.loc 1 1483 0
 4587 01e6 1360     		str	r3, [r2]
 4588              	.L469:
1486:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_UNPROTECT(lev);
 4589              		.loc 1 1486 0
 4590 01e8 204A     		ldr	r2, .L485+4
 4591 01ea 1368     		ldr	r3, [r2]
 4592 01ec 0133     		adds	r3, r3, #1
 4593 01ee 1360     		str	r3, [r2]
1487:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4594              		.loc 1 1487 0
 4595 01f0 FFF7FEFF 		bl	sys_arch_unprotect
 4596              	.LVL648:
1495:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETCONN_SEM_PER_THREAD */
 4597              		.loc 1 1495 0
 4598 01f4 0DA8     		add	r0, sp, #52
 4599 01f6 FFF7FEFF 		bl	sys_sem_free
 4600              	.LVL649:
1498:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* This happens when a socket got closed while waiting */
 4601              		.loc 1 1498 0
 4602 01fa BBF1000F 		cmp	fp, #0
 4603 01fe 2BDB     		blt	.L484
1504:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Timeout */
 4604              		.loc 1 1504 0
 4605 0200 059B     		ldr	r3, [sp, #20]
 4606 0202 B3F1FF3F 		cmp	r3, #-1
 4607 0206 2DD0     		beq	.L478
1513:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4608              		.loc 1 1513 0
 4609 0208 0EAB     		add	r3, sp, #56
 4610 020a 0293     		str	r3, [sp, #8]
 4611 020c 10AB     		add	r3, sp, #64
 4612 020e 0193     		str	r3, [sp, #4]
 4613 0210 12AB     		add	r3, sp, #72
 4614 0212 0093     		str	r3, [sp]
 4615 0214 4346     		mov	r3, r8
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 139


 4616 0216 3A46     		mov	r2, r7
 4617 0218 3146     		mov	r1, r6
 4618 021a 4846     		mov	r0, r9
 4619 021c FFF7FEFF 		bl	lwip_selscan
 4620              	.LVL650:
 4621 0220 0546     		mov	r5, r0
 4622              	.LVL651:
 4623              	.L445:
1519:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *readset = lreadset;
 4624              		.loc 1 1519 0
 4625 0222 26B1     		cbz	r6, .L471
1520:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4626              		.loc 1 1520 0
 4627 0224 14AB     		add	r3, sp, #80
 4628 0226 13E90300 		ldmdb	r3, {r0, r1}
 4629 022a 86E80300 		stm	r6, {r0, r1}
 4630              	.L471:
1522:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *writeset = lwriteset;
 4631              		.loc 1 1522 0
 4632 022e 27B1     		cbz	r7, .L472
1523:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4633              		.loc 1 1523 0
 4634 0230 10AB     		add	r3, sp, #64
 4635 0232 93E80300 		ldm	r3, {r0, r1}
 4636 0236 87E80300 		stm	r7, {r0, r1}
 4637              	.L472:
1525:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *exceptset = lexceptset;
 4638              		.loc 1 1525 0
 4639 023a B8F1000F 		cmp	r8, #0
 4640 023e 04D0     		beq	.L444
1526:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4641              		.loc 1 1526 0
 4642 0240 0EAB     		add	r3, sp, #56
 4643 0242 93E80300 		ldm	r3, {r0, r1}
 4644 0246 88E80300 		stm	r8, {r0, r1}
 4645              	.LVL652:
 4646              	.L444:
1529:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4647              		.loc 1 1529 0
 4648 024a 2846     		mov	r0, r5
 4649 024c 15B0     		add	sp, sp, #84
 4650              	.LCFI58:
 4651              		.cfi_remember_state
 4652              		.cfi_def_cfa_offset 36
 4653              		@ sp needed
 4654 024e BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 4655              	.LVL653:
 4656              	.L483:
 4657              	.LCFI59:
 4658              		.cfi_restore_state
1480:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 4659              		.loc 1 1480 0
 4660 0252 054A     		ldr	r2, .L485
 4661 0254 1360     		str	r3, [r2]
 4662 0256 C7E7     		b	.L469
 4663              	.LVL654:
 4664              	.L484:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 140


1500:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 4665              		.loc 1 1500 0 discriminator 1
 4666 0258 0922     		movs	r2, #9
 4667 025a 054B     		ldr	r3, .L485+8
 4668 025c 1A60     		str	r2, [r3]
1501:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 4669              		.loc 1 1501 0 discriminator 1
 4670 025e 4FF0FF35 		mov	r5, #-1
 4671              	.LVL655:
 4672 0262 F2E7     		b	.L444
 4673              	.LVL656:
 4674              	.L478:
 4675 0264 5D46     		mov	r5, fp
 4676              	.LVL657:
 4677 0266 DCE7     		b	.L445
 4678              	.L486:
 4679              		.align	2
 4680              	.L485:
 4681 0268 00000000 		.word	.LANCHOR1
 4682 026c 00000000 		.word	.LANCHOR2
 4683 0270 00000000 		.word	errno
 4684 0274 D34D6210 		.word	274877907
 4685              		.cfi_endproc
 4686              	.LFE162:
 4688              		.section	.text.lwip_shutdown,"ax",%progbits
 4689              		.align	1
 4690              		.global	lwip_shutdown
 4691              		.syntax unified
 4692              		.thumb
 4693              		.thumb_func
 4694              		.fpu fpv5-sp-d16
 4696              	lwip_shutdown:
 4697              	.LFB164:
1658:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 4698              		.loc 1 1658 0
 4699              		.cfi_startproc
 4700              		@ args = 0, pretend = 0, frame = 0
 4701              		@ frame_needed = 0, uses_anonymous_args = 0
 4702              	.LVL658:
 4703 0000 38B5     		push	{r3, r4, r5, lr}
 4704              	.LCFI60:
 4705              		.cfi_def_cfa_offset 16
 4706              		.cfi_offset 3, -16
 4707              		.cfi_offset 4, -12
 4708              		.cfi_offset 5, -8
 4709              		.cfi_offset 14, -4
 4710 0002 0D46     		mov	r5, r1
 4711              	.LVL659:
1665:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 4712              		.loc 1 1665 0
 4713 0004 FFF7FEFF 		bl	get_socket
 4714              	.LVL660:
1666:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 4715              		.loc 1 1666 0
 4716 0008 0028     		cmp	r0, #0
 4717 000a 35D0     		beq	.L493
 4718 000c 0446     		mov	r4, r0
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 141


1670:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_TCP) {
 4719              		.loc 1 1670 0
 4720 000e 0068     		ldr	r0, [r0]
 4721              	.LVL661:
 4722 0010 F0B1     		cbz	r0, .L489
1671:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, EOPNOTSUPP);
 4723              		.loc 1 1671 0
 4724 0012 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 4725 0014 03F0F003 		and	r3, r3, #240
 4726 0018 102B     		cmp	r3, #16
 4727 001a 12D1     		bne	.L499
1680:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     shut_rx = 1;
 4728              		.loc 1 1680 0
 4729 001c 35B3     		cbz	r5, .L494
1682:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     shut_tx = 1;
 4730              		.loc 1 1682 0
 4731 001e 012D     		cmp	r5, #1
 4732 0020 27D0     		beq	.L495
1684:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     shut_rx = 1;
 4733              		.loc 1 1684 0
 4734 0022 022D     		cmp	r5, #2
 4735 0024 1BD1     		bne	.L500
1686:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
 4736              		.loc 1 1686 0
 4737 0026 0122     		movs	r2, #1
1685:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     shut_tx = 1;
 4738              		.loc 1 1685 0
 4739 0028 1146     		mov	r1, r2
 4740              	.L491:
 4741              	.LVL662:
1691:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4742              		.loc 1 1691 0
 4743 002a FFF7FEFF 		bl	netconn_shutdown
 4744              	.LVL663:
 4745 002e 0546     		mov	r5, r0
 4746              	.LVL664:
 4747              	.LBB63:
1693:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return (err == ERR_OK ? 0 : -1);
 4748              		.loc 1 1693 0
 4749 0030 FFF7FEFF 		bl	err_to_errno
 4750              	.LVL665:
 4751 0034 2074     		strb	r0, [r4, #16]
 4752 0036 08B1     		cbz	r0, .L492
1693:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return (err == ERR_OK ? 0 : -1);
 4753              		.loc 1 1693 0 is_stmt 0 discriminator 1
 4754 0038 124B     		ldr	r3, .L501
 4755 003a 1860     		str	r0, [r3]
 4756              	.L492:
 4757              	.LBE63:
1694:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 4758              		.loc 1 1694 0 is_stmt 1
 4759 003c FDB9     		cbnz	r5, .L497
 4760 003e 0020     		movs	r0, #0
 4761              	.LVL666:
 4762 0040 38BD     		pop	{r3, r4, r5, pc}
 4763              	.LVL667:
 4764              	.L499:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 142


 4765              	.LBB64:
1672:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 4766              		.loc 1 1672 0
 4767 0042 5F23     		movs	r3, #95
 4768 0044 2374     		strb	r3, [r4, #16]
 4769 0046 0F4A     		ldr	r2, .L501
 4770 0048 1360     		str	r3, [r2]
 4771              	.LBE64:
1673:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 4772              		.loc 1 1673 0
 4773 004a 4FF0FF30 		mov	r0, #-1
 4774 004e 38BD     		pop	{r3, r4, r5, pc}
 4775              	.LVL668:
 4776              	.L489:
 4777              	.LBB65:
1676:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 4778              		.loc 1 1676 0
 4779 0050 6B23     		movs	r3, #107
 4780 0052 2374     		strb	r3, [r4, #16]
 4781 0054 0B4A     		ldr	r2, .L501
 4782 0056 1360     		str	r3, [r2]
 4783              	.LBE65:
1677:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4784              		.loc 1 1677 0
 4785 0058 4FF0FF30 		mov	r0, #-1
 4786 005c 38BD     		pop	{r3, r4, r5, pc}
 4787              	.LVL669:
 4788              	.L500:
 4789              	.LBB66:
1688:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 4790              		.loc 1 1688 0
 4791 005e 1623     		movs	r3, #22
 4792 0060 2374     		strb	r3, [r4, #16]
 4793 0062 084A     		ldr	r2, .L501
 4794 0064 1360     		str	r3, [r2]
 4795              	.LBE66:
1689:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4796              		.loc 1 1689 0
 4797 0066 4FF0FF30 		mov	r0, #-1
 4798 006a 38BD     		pop	{r3, r4, r5, pc}
 4799              	.LVL670:
 4800              	.L494:
1661:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4801              		.loc 1 1661 0
 4802 006c 0022     		movs	r2, #0
1681:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else if (how == SHUT_WR) {
 4803              		.loc 1 1681 0
 4804 006e 0121     		movs	r1, #1
 4805 0070 DBE7     		b	.L491
 4806              	.L495:
1683:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else if (how == SHUT_RDWR) {
 4807              		.loc 1 1683 0
 4808 0072 0122     		movs	r2, #1
1661:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4809              		.loc 1 1661 0
 4810 0074 0021     		movs	r1, #0
 4811 0076 D8E7     		b	.L491
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 143


 4812              	.LVL671:
 4813              	.L493:
1667:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4814              		.loc 1 1667 0
 4815 0078 4FF0FF30 		mov	r0, #-1
 4816              	.LVL672:
 4817 007c 38BD     		pop	{r3, r4, r5, pc}
 4818              	.LVL673:
 4819              	.L497:
1694:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 4820              		.loc 1 1694 0
 4821 007e 4FF0FF30 		mov	r0, #-1
 4822              	.LVL674:
1695:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4823              		.loc 1 1695 0
 4824 0082 38BD     		pop	{r3, r4, r5, pc}
 4825              	.LVL675:
 4826              	.L502:
 4827              		.align	2
 4828              	.L501:
 4829 0084 00000000 		.word	errno
 4830              		.cfi_endproc
 4831              	.LFE164:
 4833              		.section	.text.lwip_getpeername,"ax",%progbits
 4834              		.align	1
 4835              		.global	lwip_getpeername
 4836              		.syntax unified
 4837              		.thumb
 4838              		.thumb_func
 4839              		.fpu fpv5-sp-d16
 4841              	lwip_getpeername:
 4842              	.LFB166:
1735:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_getaddrname(s, name, namelen, 0);
 4843              		.loc 1 1735 0
 4844              		.cfi_startproc
 4845              		@ args = 0, pretend = 0, frame = 0
 4846              		@ frame_needed = 0, uses_anonymous_args = 0
 4847              	.LVL676:
 4848 0000 08B5     		push	{r3, lr}
 4849              	.LCFI61:
 4850              		.cfi_def_cfa_offset 8
 4851              		.cfi_offset 3, -8
 4852              		.cfi_offset 14, -4
1736:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 4853              		.loc 1 1736 0
 4854 0002 0023     		movs	r3, #0
 4855 0004 FFF7FEFF 		bl	lwip_getaddrname
 4856              	.LVL677:
1737:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4857              		.loc 1 1737 0
 4858 0008 08BD     		pop	{r3, pc}
 4859              		.cfi_endproc
 4860              	.LFE166:
 4862              		.section	.text.lwip_getsockname,"ax",%progbits
 4863              		.align	1
 4864              		.global	lwip_getsockname
 4865              		.syntax unified
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 144


 4866              		.thumb
 4867              		.thumb_func
 4868              		.fpu fpv5-sp-d16
 4870              	lwip_getsockname:
 4871              	.LFB167:
1741:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_getaddrname(s, name, namelen, 1);
 4872              		.loc 1 1741 0
 4873              		.cfi_startproc
 4874              		@ args = 0, pretend = 0, frame = 0
 4875              		@ frame_needed = 0, uses_anonymous_args = 0
 4876              	.LVL678:
 4877 0000 08B5     		push	{r3, lr}
 4878              	.LCFI62:
 4879              		.cfi_def_cfa_offset 8
 4880              		.cfi_offset 3, -8
 4881              		.cfi_offset 14, -4
1742:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 4882              		.loc 1 1742 0
 4883 0002 0123     		movs	r3, #1
 4884 0004 FFF7FEFF 		bl	lwip_getaddrname
 4885              	.LVL679:
1743:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4886              		.loc 1 1743 0
 4887 0008 08BD     		pop	{r3, pc}
 4888              		.cfi_endproc
 4889              	.LFE167:
 4891              		.section	.text.lwip_getsockopt,"ax",%progbits
 4892              		.align	1
 4893              		.global	lwip_getsockopt
 4894              		.syntax unified
 4895              		.thumb
 4896              		.thumb_func
 4897              		.fpu fpv5-sp-d16
 4899              	lwip_getsockopt:
 4900              	.LFB168:
1747:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t err;
 4901              		.loc 1 1747 0
 4902              		.cfi_startproc
 4903              		@ args = 4, pretend = 0, frame = 0
 4904              		@ frame_needed = 0, uses_anonymous_args = 0
 4905              	.LVL680:
 4906 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 4907              	.LCFI63:
 4908              		.cfi_def_cfa_offset 32
 4909              		.cfi_offset 4, -32
 4910              		.cfi_offset 5, -28
 4911              		.cfi_offset 6, -24
 4912              		.cfi_offset 7, -20
 4913              		.cfi_offset 8, -16
 4914              		.cfi_offset 9, -12
 4915              		.cfi_offset 10, -8
 4916              		.cfi_offset 14, -4
 4917 0004 82B0     		sub	sp, sp, #8
 4918              	.LCFI64:
 4919              		.cfi_def_cfa_offset 40
 4920 0006 8046     		mov	r8, r0
 4921 0008 8946     		mov	r9, r1
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 145


 4922 000a 9246     		mov	r10, r2
 4923 000c 1C46     		mov	r4, r3
 4924 000e 0A9D     		ldr	r5, [sp, #40]
1749:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_TCPIP_CORE_LOCKING
 4925              		.loc 1 1749 0
 4926 0010 FFF7FEFF 		bl	get_socket
 4927              	.LVL681:
1754:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 4928              		.loc 1 1754 0
 4929 0014 30B3     		cbz	r0, .L511
 4930 0016 0746     		mov	r7, r0
1758:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, EFAULT);
 4931              		.loc 1 1758 0
 4932 0018 002D     		cmp	r5, #0
 4933 001a 18BF     		it	ne
 4934 001c 002C     		cmpne	r4, #0
 4935 001e 17D0     		beq	.L514
1765:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = lwip_getsockopt_impl(s, level, optname, optval, optlen);
 4936              		.loc 1 1765 0
 4937 0020 124E     		ldr	r6, .L516
 4938 0022 3046     		mov	r0, r6
 4939              	.LVL682:
 4940 0024 FFF7FEFF 		bl	sys_mutex_lock
 4941              	.LVL683:
1766:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   UNLOCK_TCPIP_CORE();
 4942              		.loc 1 1766 0
 4943 0028 0095     		str	r5, [sp]
 4944 002a 2346     		mov	r3, r4
 4945 002c 5246     		mov	r2, r10
 4946 002e 4946     		mov	r1, r9
 4947 0030 4046     		mov	r0, r8
 4948 0032 FFF7FEFF 		bl	lwip_getsockopt_impl
 4949              	.LVL684:
 4950 0036 0446     		mov	r4, r0
 4951              	.LVL685:
1767:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4952              		.loc 1 1767 0
 4953 0038 3046     		mov	r0, r6
 4954 003a FFF7FEFF 		bl	sys_mutex_unlock
 4955              	.LVL686:
 4956              	.LBB67:
1813:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return err ? -1 : 0;
 4957              		.loc 1 1813 0
 4958 003e 3C74     		strb	r4, [r7, #16]
 4959 0040 0CB1     		cbz	r4, .L510
1813:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return err ? -1 : 0;
 4960              		.loc 1 1813 0 is_stmt 0 discriminator 1
 4961 0042 0B4B     		ldr	r3, .L516+4
 4962 0044 1C60     		str	r4, [r3]
 4963              	.L510:
 4964              	.LBE67:
1814:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 4965              		.loc 1 1814 0 is_stmt 1
 4966 0046 54B9     		cbnz	r4, .L515
 4967 0048 0020     		movs	r0, #0
 4968              	.LVL687:
 4969              	.L507:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 146


1815:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 4970              		.loc 1 1815 0
 4971 004a 02B0     		add	sp, sp, #8
 4972              	.LCFI65:
 4973              		.cfi_remember_state
 4974              		.cfi_def_cfa_offset 32
 4975              		@ sp needed
 4976 004c BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 4977              	.LVL688:
 4978              	.L514:
 4979              	.LCFI66:
 4980              		.cfi_restore_state
 4981              	.LBB68:
1759:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 4982              		.loc 1 1759 0
 4983 0050 0E23     		movs	r3, #14
 4984 0052 0374     		strb	r3, [r0, #16]
 4985 0054 064A     		ldr	r2, .L516+4
 4986 0056 1360     		str	r3, [r2]
 4987              	.LBE68:
1760:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4988              		.loc 1 1760 0
 4989 0058 4FF0FF30 		mov	r0, #-1
 4990              	.LVL689:
 4991 005c F5E7     		b	.L507
 4992              	.LVL690:
 4993              	.L515:
1814:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 4994              		.loc 1 1814 0
 4995 005e 4FF0FF30 		mov	r0, #-1
 4996 0062 F2E7     		b	.L507
 4997              	.LVL691:
 4998              	.L511:
1755:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 4999              		.loc 1 1755 0
 5000 0064 4FF0FF30 		mov	r0, #-1
 5001              	.LVL692:
 5002 0068 EFE7     		b	.L507
 5003              	.L517:
 5004 006a 00BF     		.align	2
 5005              	.L516:
 5006 006c 00000000 		.word	lock_tcpip_core
 5007 0070 00000000 		.word	errno
 5008              		.cfi_endproc
 5009              	.LFE168:
 5011              		.section	.text.lwip_setsockopt,"ax",%progbits
 5012              		.align	1
 5013              		.global	lwip_setsockopt
 5014              		.syntax unified
 5015              		.thumb
 5016              		.thumb_func
 5017              		.fpu fpv5-sp-d16
 5019              	lwip_setsockopt:
 5020              	.LFB170:
2154:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t err = 0;
 5021              		.loc 1 2154 0
 5022              		.cfi_startproc
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 147


 5023              		@ args = 4, pretend = 0, frame = 0
 5024              		@ frame_needed = 0, uses_anonymous_args = 0
 5025              	.LVL693:
 5026 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 5027              	.LCFI67:
 5028              		.cfi_def_cfa_offset 28
 5029              		.cfi_offset 4, -28
 5030              		.cfi_offset 5, -24
 5031              		.cfi_offset 6, -20
 5032              		.cfi_offset 7, -16
 5033              		.cfi_offset 8, -12
 5034              		.cfi_offset 9, -8
 5035              		.cfi_offset 14, -4
 5036 0004 83B0     		sub	sp, sp, #12
 5037              	.LCFI68:
 5038              		.cfi_def_cfa_offset 40
 5039 0006 0746     		mov	r7, r0
 5040 0008 8846     		mov	r8, r1
 5041 000a 9146     		mov	r9, r2
 5042 000c 1C46     		mov	r4, r3
 5043              	.LVL694:
2156:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_TCPIP_CORE_LOCKING
 5044              		.loc 1 2156 0
 5045 000e FFF7FEFF 		bl	get_socket
 5046              	.LVL695:
2161:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 5047              		.loc 1 2161 0
 5048 0012 20B3     		cbz	r0, .L522
 5049 0014 0646     		mov	r6, r0
2165:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, EFAULT);
 5050              		.loc 1 2165 0
 5051 0016 C4B1     		cbz	r4, .L525
2172:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = lwip_setsockopt_impl(s, level, optname, optval, optlen);
 5052              		.loc 1 2172 0
 5053 0018 124D     		ldr	r5, .L527
 5054 001a 2846     		mov	r0, r5
 5055              	.LVL696:
 5056 001c FFF7FEFF 		bl	sys_mutex_lock
 5057              	.LVL697:
2173:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   UNLOCK_TCPIP_CORE();
 5058              		.loc 1 2173 0
 5059 0020 0A9B     		ldr	r3, [sp, #40]
 5060 0022 0093     		str	r3, [sp]
 5061 0024 2346     		mov	r3, r4
 5062 0026 4A46     		mov	r2, r9
 5063 0028 4146     		mov	r1, r8
 5064 002a 3846     		mov	r0, r7
 5065 002c FFF7FEFF 		bl	lwip_setsockopt_impl
 5066              	.LVL698:
 5067 0030 0446     		mov	r4, r0
 5068              	.LVL699:
2174:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 5069              		.loc 1 2174 0
 5070 0032 2846     		mov	r0, r5
 5071 0034 FFF7FEFF 		bl	sys_mutex_unlock
 5072              	.LVL700:
 5073              	.LBB69:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 148


2215:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return err ? -1 : 0;
 5074              		.loc 1 2215 0
 5075 0038 3474     		strb	r4, [r6, #16]
 5076 003a 0CB1     		cbz	r4, .L521
2215:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return err ? -1 : 0;
 5077              		.loc 1 2215 0 is_stmt 0 discriminator 1
 5078 003c 0A4B     		ldr	r3, .L527+4
 5079 003e 1C60     		str	r4, [r3]
 5080              	.L521:
 5081              	.LBE69:
2216:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 5082              		.loc 1 2216 0 is_stmt 1
 5083 0040 54B9     		cbnz	r4, .L526
 5084 0042 0020     		movs	r0, #0
 5085              	.LVL701:
 5086              	.L518:
2217:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 5087              		.loc 1 2217 0
 5088 0044 03B0     		add	sp, sp, #12
 5089              	.LCFI69:
 5090              		.cfi_remember_state
 5091              		.cfi_def_cfa_offset 28
 5092              		@ sp needed
 5093 0046 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 5094              	.LVL702:
 5095              	.L525:
 5096              	.LCFI70:
 5097              		.cfi_restore_state
 5098              	.LBB70:
2166:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 5099              		.loc 1 2166 0
 5100 004a 0E23     		movs	r3, #14
 5101 004c 0374     		strb	r3, [r0, #16]
 5102 004e 064A     		ldr	r2, .L527+4
 5103 0050 1360     		str	r3, [r2]
 5104              	.LBE70:
2167:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 5105              		.loc 1 2167 0
 5106 0052 4FF0FF30 		mov	r0, #-1
 5107              	.LVL703:
 5108 0056 F5E7     		b	.L518
 5109              	.LVL704:
 5110              	.L526:
2216:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 5111              		.loc 1 2216 0
 5112 0058 4FF0FF30 		mov	r0, #-1
 5113 005c F2E7     		b	.L518
 5114              	.LVL705:
 5115              	.L522:
2162:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 5116              		.loc 1 2162 0
 5117 005e 4FF0FF30 		mov	r0, #-1
 5118              	.LVL706:
 5119 0062 EFE7     		b	.L518
 5120              	.L528:
 5121              		.align	2
 5122              	.L527:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 149


 5123 0064 00000000 		.word	lock_tcpip_core
 5124 0068 00000000 		.word	errno
 5125              		.cfi_endproc
 5126              	.LFE170:
 5128              		.section	.text.lwip_ioctl,"ax",%progbits
 5129              		.align	1
 5130              		.global	lwip_ioctl
 5131              		.syntax unified
 5132              		.thumb
 5133              		.thumb_func
 5134              		.fpu fpv5-sp-d16
 5136              	lwip_ioctl:
 5137              	.LFB172:
2563:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2564:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
2565:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_ioctl(int s, long cmd, void *argp)
2566:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 5138              		.loc 1 2566 0
 5139              		.cfi_startproc
 5140              		@ args = 0, pretend = 0, frame = 0
 5141              		@ frame_needed = 0, uses_anonymous_args = 0
 5142              	.LVL707:
 5143 0000 38B5     		push	{r3, r4, r5, lr}
 5144              	.LCFI71:
 5145              		.cfi_def_cfa_offset 16
 5146              		.cfi_offset 3, -16
 5147              		.cfi_offset 4, -12
 5148              		.cfi_offset 5, -8
 5149              		.cfi_offset 14, -4
 5150 0002 0D46     		mov	r5, r1
 5151 0004 1446     		mov	r4, r2
2567:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = get_socket(s);
 5152              		.loc 1 2567 0
 5153 0006 FFF7FEFF 		bl	get_socket
 5154              	.LVL708:
2568:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t val;
2569:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_RCVBUF
2570:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t buflen = 0;
2571:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int recv_avail;
2572:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_RCVBUF */
2573:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2574:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 5155              		.loc 1 2574 0
 5156 000a 00B3     		cbz	r0, .L536
 5157 000c 0346     		mov	r3, r0
2575:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
2576:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2577:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2578:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   switch (cmd) {
 5158              		.loc 1 2578 0
 5159 000e 114A     		ldr	r2, .L541
 5160 0010 9542     		cmp	r5, r2
 5161 0012 15D1     		bne	.L539
 5162              	.LVL709:
2579:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_RCVBUF || LWIP_FIONREAD_LINUXMODE
2580:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case FIONREAD:
2581:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!argp) {
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 150


2582:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, EINVAL);
2583:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
2584:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2585:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_FIONREAD_LINUXMODE
2586:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_TCP) {
2587:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       struct pbuf *p;
2588:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (sock->lastdata) {
2589:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         p = ((struct netbuf *)sock->lastdata)->p;
2590:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         *((int*)argp) = p->tot_len - sock->lastoffset;
2591:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2592:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         struct netbuf *rxbuf;
2593:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         err_t err;
2594:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (sock->rcvevent <= 0) {
2595:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           *((int*)argp) = 0;
2596:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
2597:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           err = netconn_recv(sock->conn, &rxbuf);
2598:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (err != ERR_OK) {
2599:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             *((int*)argp) = 0;
2600:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           } else {
2601:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             sock->lastdata = rxbuf;
2602:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             sock->lastoffset = 0;
2603:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             *((int*)argp) = rxbuf->p->tot_len;
2604:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
2605:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
2606:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2607:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return 0;
2608:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2609:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_FIONREAD_LINUXMODE */
2610:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2611:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_RCVBUF
2612:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* we come here if either LWIP_FIONREAD_LINUXMODE==0 or this is a TCP socket */
2613:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_GET(sock->conn->recv_avail, recv_avail);
2614:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (recv_avail < 0) {
2615:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       recv_avail = 0;
2616:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2617:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *((int*)argp) = recv_avail;
2618:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2619:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Check if there is data left from the last recv operation. /maq 041215 */
2620:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->lastdata) {
2621:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       struct pbuf *p = (struct pbuf *)sock->lastdata;
2622:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_TCP) {
2623:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         p = ((struct netbuf *)p)->p;
2624:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2625:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       buflen = p->tot_len;
2626:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       buflen -= sock->lastoffset;
2627:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2628:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *((int*)argp) += buflen;
2629:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2630:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2631:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_ioctl(%d, FIONREAD, %p) = %"U16_F"\n", s, argp, *((u16_t*)arg
2632:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, 0);
2633:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return 0;
2634:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_SO_RCVBUF */
2635:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2636:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_RCVBUF */
2637:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_RCVBUF || LWIP_FIONREAD_LINUXMODE */
2638:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 151


2639:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case (long)FIONBIO:
2640:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     val = 0;
2641:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (argp && *(u32_t*)argp) {
 5163              		.loc 1 2641 0
 5164 0014 54B1     		cbz	r4, .L537
 5165              		.loc 1 2641 0 is_stmt 0 discriminator 1
 5166 0016 2268     		ldr	r2, [r4]
 5167 0018 52B9     		cbnz	r2, .L538
 5168              	.L533:
 5169              	.LVL710:
2642:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       val = 1;
2643:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2644:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     netconn_set_nonblocking(sock->conn, val);
 5170              		.loc 1 2644 0 is_stmt 1
 5171 001a 5AB1     		cbz	r2, .L534
 5172              		.loc 1 2644 0 is_stmt 0 discriminator 1
 5173 001c 1968     		ldr	r1, [r3]
 5174 001e 0A7F     		ldrb	r2, [r1, #28]	@ zero_extendqisi2
 5175              	.LVL711:
 5176 0020 42F00202 		orr	r2, r2, #2
 5177 0024 0A77     		strb	r2, [r1, #28]
 5178              	.L535:
 5179              	.LVL712:
 5180              	.LBB71:
2645:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_ioctl(%d, FIONBIO, %d)\n", s, val));
2646:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, 0);
 5181              		.loc 1 2646 0 is_stmt 1
 5182 0026 0020     		movs	r0, #0
 5183              	.LVL713:
 5184 0028 1874     		strb	r0, [r3, #16]
 5185              	.LBE71:
2647:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return 0;
 5186              		.loc 1 2647 0
 5187 002a 38BD     		pop	{r3, r4, r5, pc}
 5188              	.LVL714:
 5189              	.L537:
2640:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (argp && *(u32_t*)argp) {
 5190              		.loc 1 2640 0
 5191 002c 0022     		movs	r2, #0
 5192 002e F4E7     		b	.L533
 5193              	.L538:
2642:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 5194              		.loc 1 2642 0
 5195 0030 0122     		movs	r2, #1
 5196 0032 F2E7     		b	.L533
 5197              	.LVL715:
 5198              	.L534:
2644:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_ioctl(%d, FIONBIO, %d)\n", s, val));
 5199              		.loc 1 2644 0 discriminator 2
 5200 0034 1968     		ldr	r1, [r3]
 5201 0036 0A7F     		ldrb	r2, [r1, #28]	@ zero_extendqisi2
 5202              	.LVL716:
 5203 0038 22F00202 		bic	r2, r2, #2
 5204 003c 0A77     		strb	r2, [r1, #28]
 5205 003e F2E7     		b	.L535
 5206              	.L539:
 5207              	.LVL717:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 152


 5208              	.LBB72:
2648:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2649:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   default:
2650:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2651:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } /* switch (cmd) */
2652:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_ioctl(%d, UNIMPL: 0x%lx, %p)\n", s, cmd, argp));
2653:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, ENOSYS); /* not yet implemented */
 5209              		.loc 1 2653 0
 5210 0040 2622     		movs	r2, #38
 5211 0042 0274     		strb	r2, [r0, #16]
 5212 0044 044B     		ldr	r3, .L541+4
 5213 0046 1A60     		str	r2, [r3]
 5214              	.LBE72:
2654:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return -1;
 5215              		.loc 1 2654 0
 5216 0048 4FF0FF30 		mov	r0, #-1
 5217              	.LVL718:
 5218 004c 38BD     		pop	{r3, r4, r5, pc}
 5219              	.LVL719:
 5220              	.L536:
2575:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 5221              		.loc 1 2575 0
 5222 004e 4FF0FF30 		mov	r0, #-1
 5223              	.LVL720:
2655:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 5224              		.loc 1 2655 0
 5225 0052 38BD     		pop	{r3, r4, r5, pc}
 5226              	.LVL721:
 5227              	.L542:
 5228              		.align	2
 5229              	.L541:
 5230 0054 7E660480 		.word	-2147195266
 5231 0058 00000000 		.word	errno
 5232              		.cfi_endproc
 5233              	.LFE172:
 5235              		.section	.text.lwip_fcntl,"ax",%progbits
 5236              		.align	1
 5237              		.global	lwip_fcntl
 5238              		.syntax unified
 5239              		.thumb
 5240              		.thumb_func
 5241              		.fpu fpv5-sp-d16
 5243              	lwip_fcntl:
 5244              	.LFB173:
2656:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2657:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** A minimal implementation of fcntl.
2658:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Currently only the commands F_GETFL and F_SETFL are implemented.
2659:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Only the flag O_NONBLOCK is implemented.
2660:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
2661:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
2662:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_fcntl(int s, int cmd, int val)
2663:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 5245              		.loc 1 2663 0
 5246              		.cfi_startproc
 5247              		@ args = 0, pretend = 0, frame = 0
 5248              		@ frame_needed = 0, uses_anonymous_args = 0
 5249              	.LVL722:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 153


 5250 0000 38B5     		push	{r3, r4, r5, lr}
 5251              	.LCFI72:
 5252              		.cfi_def_cfa_offset 16
 5253              		.cfi_offset 3, -16
 5254              		.cfi_offset 4, -12
 5255              		.cfi_offset 5, -8
 5256              		.cfi_offset 14, -4
 5257 0002 0C46     		mov	r4, r1
 5258 0004 1546     		mov	r5, r2
2664:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = get_socket(s);
 5259              		.loc 1 2664 0
 5260 0006 FFF7FEFF 		bl	get_socket
 5261              	.LVL723:
2665:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int ret = -1;
2666:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2667:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 5262              		.loc 1 2667 0
 5263 000a 68B3     		cbz	r0, .L551
 5264 000c 0346     		mov	r3, r0
2668:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
2669:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2670:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2671:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   switch (cmd) {
 5265              		.loc 1 2671 0
 5266 000e 032C     		cmp	r4, #3
 5267 0010 08D0     		beq	.L546
 5268 0012 042C     		cmp	r4, #4
 5269 0014 0DD0     		beq	.L547
 5270              	.LVL724:
 5271              	.LBB73:
2672:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case F_GETFL:
2673:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ret = netconn_is_nonblocking(sock->conn) ? O_NONBLOCK : 0;
2674:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, 0);
2675:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2676:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case F_SETFL:
2677:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if ((val & ~O_NONBLOCK) == 0) {
2678:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* only O_NONBLOCK, all other bits are zero */
2679:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       netconn_set_nonblocking(sock->conn, val & O_NONBLOCK);
2680:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       ret = 0;
2681:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, 0);
2682:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
2683:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, ENOSYS); /* not yet implemented */
2684:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2685:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2686:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   default:
2687:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_fcntl(%d, UNIMPL: %d, %d)\n", s, cmd, val));
2688:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, ENOSYS); /* not yet implemented */
 5272              		.loc 1 2688 0
 5273 0016 2622     		movs	r2, #38
 5274 0018 0274     		strb	r2, [r0, #16]
 5275 001a 154B     		ldr	r3, .L554
 5276 001c 1A60     		str	r2, [r3]
 5277              	.LBE73:
2665:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 5278              		.loc 1 2665 0
 5279 001e 4FF0FF30 		mov	r0, #-1
 5280              	.LVL725:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 154


 5281 0022 38BD     		pop	{r3, r4, r5, pc}
 5282              	.LVL726:
 5283              	.L546:
2673:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, 0);
 5284              		.loc 1 2673 0
 5285 0024 0268     		ldr	r2, [r0]
 5286 0026 107F     		ldrb	r0, [r2, #28]	@ zero_extendqisi2
 5287              	.LVL727:
 5288 0028 C0F34000 		ubfx	r0, r0, #1, #1
 5289              	.LVL728:
 5290              	.LBB74:
2674:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
 5291              		.loc 1 2674 0
 5292 002c 0022     		movs	r2, #0
 5293 002e 1A74     		strb	r2, [r3, #16]
 5294              	.LBE74:
2675:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case F_SETFL:
 5295              		.loc 1 2675 0
 5296 0030 38BD     		pop	{r3, r4, r5, pc}
 5297              	.LVL729:
 5298              	.L547:
2677:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* only O_NONBLOCK, all other bits are zero */
 5299              		.loc 1 2677 0
 5300 0032 35F00100 		bics	r0, r5, #1
 5301              	.LVL730:
 5302 0036 10D1     		bne	.L548
2679:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       ret = 0;
 5303              		.loc 1 2679 0
 5304 0038 15F0010F 		tst	r5, #1
 5305 003c 07D0     		beq	.L549
2679:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       ret = 0;
 5306              		.loc 1 2679 0 is_stmt 0 discriminator 1
 5307 003e 1968     		ldr	r1, [r3]
 5308 0040 0A7F     		ldrb	r2, [r1, #28]	@ zero_extendqisi2
 5309 0042 42F00202 		orr	r2, r2, #2
 5310 0046 0A77     		strb	r2, [r1, #28]
 5311              	.L550:
 5312              	.LVL731:
 5313              	.LBB75:
2681:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 5314              		.loc 1 2681 0 is_stmt 1
 5315 0048 0022     		movs	r2, #0
 5316 004a 1A74     		strb	r2, [r3, #16]
 5317              	.LBE75:
 5318 004c 38BD     		pop	{r3, r4, r5, pc}
 5319              	.LVL732:
 5320              	.L549:
2679:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       ret = 0;
 5321              		.loc 1 2679 0 discriminator 2
 5322 004e 1968     		ldr	r1, [r3]
 5323 0050 0A7F     		ldrb	r2, [r1, #28]	@ zero_extendqisi2
 5324 0052 22F00202 		bic	r2, r2, #2
 5325 0056 0A77     		strb	r2, [r1, #28]
 5326 0058 F6E7     		b	.L550
 5327              	.L548:
 5328              	.LVL733:
 5329              	.LBB76:
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 155


2683:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 5330              		.loc 1 2683 0
 5331 005a 2622     		movs	r2, #38
 5332 005c 1A74     		strb	r2, [r3, #16]
 5333 005e 044B     		ldr	r3, .L554
 5334              	.LVL734:
 5335 0060 1A60     		str	r2, [r3]
 5336              	.LBE76:
2665:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 5337              		.loc 1 2665 0
 5338 0062 4FF0FF30 		mov	r0, #-1
 5339 0066 38BD     		pop	{r3, r4, r5, pc}
 5340              	.LVL735:
 5341              	.L551:
2668:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 5342              		.loc 1 2668 0
 5343 0068 4FF0FF30 		mov	r0, #-1
 5344              	.LVL736:
2689:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     break;
2690:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2691:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return ret;
2692:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 5345              		.loc 1 2692 0
 5346 006c 38BD     		pop	{r3, r4, r5, pc}
 5347              	.LVL737:
 5348              	.L555:
 5349 006e 00BF     		.align	2
 5350              	.L554:
 5351 0070 00000000 		.word	errno
 5352              		.cfi_endproc
 5353              	.LFE173:
 5355              		.section	.bss.select_cb_ctr,"aw",%nobits
 5356              		.align	2
 5357              		.set	.LANCHOR2,. + 0
 5360              	select_cb_ctr:
 5361 0000 00000000 		.space	4
 5362              		.section	.bss.select_cb_list,"aw",%nobits
 5363              		.align	2
 5364              		.set	.LANCHOR1,. + 0
 5367              	select_cb_list:
 5368 0000 00000000 		.space	4
 5369              		.section	.bss.sockets,"aw",%nobits
 5370              		.align	2
 5371              		.set	.LANCHOR0,. + 0
 5374              	sockets:
 5375 0000 00000000 		.space	80
 5375      00000000 
 5375      00000000 
 5375      00000000 
 5375      00000000 
 5376              		.text
 5377              	.Letext0:
 5378              		.file 2 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\machine\\_default_types.h"
 5379              		.file 3 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\_stdint.h"
 5380              		.file 4 "Drivers/CMSIS/Include/core_cm7.h"
 5381              		.file 5 "Drivers/CMSIS/Device/ST/STM32F7xx/Include/system_stm32f7xx.h"
 5382              		.file 6 "c:\\gcc_toolchain\\6_2017-q1-update\\lib\\gcc\\arm-none-eabi\\6.3.1\\include\\stddef.h"
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 156


 5383              		.file 7 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\lock.h"
 5384              		.file 8 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\_types.h"
 5385              		.file 9 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\reent.h"
 5386              		.file 10 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\select.h"
 5387              		.file 11 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\types.h"
 5388              		.file 12 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\stdlib.h"
 5389              		.file 13 "Middlewares/Third_Party/LwIP/system/arch/cc.h"
 5390              		.file 14 "Middlewares/Third_Party/LwIP/src/include/lwip/arch.h"
 5391              		.file 15 "Middlewares/Third_Party/LwIP/src/include/lwip/ip4_addr.h"
 5392              		.file 16 "Middlewares/Third_Party/LwIP/src/include/lwip/ip_addr.h"
 5393              		.file 17 "Middlewares/Third_Party/LwIP/src/include/lwip/err.h"
 5394              		.file 18 "Middlewares/Third_Party/LwIP/src/include/lwip/inet.h"
 5395              		.file 19 "Middlewares/Third_Party/LwIP/src/include/lwip/errno.h"
 5396              		.file 20 "Middlewares/Third_Party/LwIP/src/include/lwip/sockets.h"
 5397              		.file 21 "Middlewares/Third_Party/LwIP/src/include/lwip/pbuf.h"
 5398              		.file 22 "Middlewares/Third_Party/LwIP/src/include/lwip/netbuf.h"
 5399              		.file 23 "Middlewares/Third_Party/FreeRTOS/Source/include/queue.h"
 5400              		.file 24 "Middlewares/Third_Party/FreeRTOS/Source/include/semphr.h"
 5401              		.file 25 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.h"
 5402              		.file 26 "Middlewares/Third_Party/LwIP/system/arch/sys_arch.h"
 5403              		.file 27 "Middlewares/Third_Party/LwIP/src/include/lwip/api.h"
 5404              		.file 28 "Middlewares/Third_Party/LwIP/src/include/lwip/ip.h"
 5405              		.file 29 "Middlewares/Third_Party/LwIP/src/include/lwip/tcp.h"
 5406              		.file 30 "Middlewares/Third_Party/LwIP/src/include/lwip/udp.h"
 5407              		.file 31 "Middlewares/Third_Party/LwIP/src/include/lwip/memp.h"
 5408              		.file 32 "Middlewares/Third_Party/LwIP/src/include/lwip/priv/memp_priv.h"
 5409              		.file 33 "Middlewares/Third_Party/LwIP/src/include/lwip/netif.h"
 5410              		.file 34 "Middlewares/Third_Party/LwIP/src/include/lwip/prot/ip4.h"
 5411              		.file 35 "Middlewares/Third_Party/LwIP/src/include/lwip/timeouts.h"
 5412              		.file 36 "Middlewares/Third_Party/LwIP/src/include/lwip/tcpip.h"
 5413              		.file 37 "Middlewares/Third_Party/LwIP/src/include/lwip/sys.h"
 5414              		.file 38 "Middlewares/Third_Party/LwIP/src/include/lwip/def.h"
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 157


DEFINED SYMBOLS
                            *ABS*:00000000 sockets.c
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:18     .text.get_socket:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:24     .text.get_socket:00000000 get_socket
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:91     .text.get_socket:00000034 $d
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:97     .text.tryget_socket:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:103    .text.tryget_socket:00000000 tryget_socket
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:143    .text.tryget_socket:00000024 $d
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:148    .text.lwip_setsockopt_impl:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:154    .text.lwip_setsockopt_impl:00000000 lwip_setsockopt_impl
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:501    .text.lwip_getsockopt_impl:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:507    .text.lwip_getsockopt_impl:00000000 lwip_getsockopt_impl
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:1015   .text.lwip_getsockopt_impl:00000238 $d
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:1020   .text.alloc_socket:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:1026   .text.alloc_socket:00000000 alloc_socket
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:1133   .text.alloc_socket:00000070 $d
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:1138   .text.lwip_selscan:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:1144   .text.lwip_selscan:00000000 lwip_selscan
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:1427   .text.lwip_getaddrname:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:1433   .text.lwip_getaddrname:00000000 lwip_getaddrname
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:1546   .text.lwip_getaddrname:00000080 $d
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:1551   .text.free_socket:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:1557   .text.free_socket:00000000 free_socket
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:1614   .text.event_callback:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:1620   .text.event_callback:00000000 event_callback
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:1668   .text.event_callback:00000034 $d
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:1890   .text.event_callback:00000144 $d
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:1896   .text.lwip_socket_thread_init:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:1903   .text.lwip_socket_thread_init:00000000 lwip_socket_thread_init
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:1915   .text.lwip_socket_thread_cleanup:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:1922   .text.lwip_socket_thread_cleanup:00000000 lwip_socket_thread_cleanup
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:1934   .text.lwip_accept:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:1941   .text.lwip_accept:00000000 lwip_accept
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:2204   .text.lwip_accept:00000154 $d
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:2210   .text.lwip_bind:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:2217   .text.lwip_bind:00000000 lwip_bind
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:2343   .text.lwip_bind:0000007c $d
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:2348   .text.lwip_close:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:2355   .text.lwip_close:00000000 lwip_close
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:2441   .text.lwip_close:00000050 $d
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:2446   .text.lwip_connect:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:2453   .text.lwip_connect:00000000 lwip_connect
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:2589   .text.lwip_connect:00000080 $d
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:2594   .text.lwip_listen:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:2601   .text.lwip_listen:00000000 lwip_listen
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:2703   .text.lwip_listen:00000060 $d
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:2708   .text.lwip_recvfrom:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:2715   .text.lwip_recvfrom:00000000 lwip_recvfrom
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:3143   .text.lwip_recvfrom:0000021c $d
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:3148   .text.lwip_read:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:3155   .text.lwip_read:00000000 lwip_read
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:3185   .text.lwip_recv:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:3192   .text.lwip_recv:00000000 lwip_recv
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:3223   .text.lwip_sendmsg:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:3230   .text.lwip_sendmsg:00000000 lwip_sendmsg
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:3646   .text.lwip_sendmsg:000001f4 $d
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:3652   .text.lwip_sendto:00000000 $t
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 158


C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:3659   .text.lwip_sendto:00000000 lwip_sendto
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:3858   .text.lwip_send:00000000 lwip_send
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:3846   .text.lwip_sendto:000000d0 $d
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:3851   .text.lwip_send:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:3983   .text.lwip_send:00000088 $d
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:3988   .text.lwip_socket:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:3995   .text.lwip_socket:00000000 lwip_socket
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:4123   .text.lwip_socket:00000080 $d
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:4129   .text.lwip_write:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:4136   .text.lwip_write:00000000 lwip_write
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:4158   .text.lwip_writev:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:4165   .text.lwip_writev:00000000 lwip_writev
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:4211   .text.lwip_select:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:4218   .text.lwip_select:00000000 lwip_select
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:4681   .text.lwip_select:00000268 $d
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:4689   .text.lwip_shutdown:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:4696   .text.lwip_shutdown:00000000 lwip_shutdown
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:4829   .text.lwip_shutdown:00000084 $d
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:4834   .text.lwip_getpeername:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:4841   .text.lwip_getpeername:00000000 lwip_getpeername
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:4863   .text.lwip_getsockname:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:4870   .text.lwip_getsockname:00000000 lwip_getsockname
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:4892   .text.lwip_getsockopt:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:4899   .text.lwip_getsockopt:00000000 lwip_getsockopt
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:5006   .text.lwip_getsockopt:0000006c $d
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:5012   .text.lwip_setsockopt:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:5019   .text.lwip_setsockopt:00000000 lwip_setsockopt
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:5123   .text.lwip_setsockopt:00000064 $d
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:5129   .text.lwip_ioctl:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:5136   .text.lwip_ioctl:00000000 lwip_ioctl
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:5230   .text.lwip_ioctl:00000054 $d
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:5236   .text.lwip_fcntl:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:5243   .text.lwip_fcntl:00000000 lwip_fcntl
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:5351   .text.lwip_fcntl:00000070 $d
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:5356   .bss.select_cb_ctr:00000000 $d
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:5360   .bss.select_cb_ctr:00000000 select_cb_ctr
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:5363   .bss.select_cb_list:00000000 $d
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:5367   .bss.select_cb_list:00000000 select_cb_list
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:5370   .bss.sockets:00000000 $d
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:5374   .bss.sockets:00000000 sockets
                     .debug_frame:00000010 $d
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:1674   .text.event_callback:00000039 $d
C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s:1674   .text.event_callback:0000003a $t

UNDEFINED SYMBOLS
errno
err_to_errno
sys_arch_protect
sys_arch_unprotect
netconn_getaddr
lwip_htons
memcpy
netbuf_delete
pbuf_free
sys_sem_signal
netconn_accept
netconn_delete
ARM GAS  C:\Users\Student\AppData\Local\Temp\cc3mhBHG.s 			page 159


netconn_bind
netconn_connect
netconn_disconnect
netconn_listen_with_backlog
netconn_recv
netconn_recv_tcp_pbuf
pbuf_copy_partial
netconn_write_partly
netbuf_new
pbuf_cat
pbuf_alloc
netconn_send
netbuf_ref
netbuf_free
netconn_new_with_proto_and_callback
sys_sem_new
sys_arch_sem_wait
sys_sem_free
netconn_shutdown
sys_mutex_lock
sys_mutex_unlock
lock_tcpip_core
