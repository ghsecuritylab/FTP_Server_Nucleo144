ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"etharp.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.etharp_free_entry,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv5-sp-d16
  24              	etharp_free_entry:
  25              	.LFB136:
  26              		.file 1 "Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c"
   1:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** /**
   2:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @file
   3:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * Address Resolution Protocol module for IP over Ethernet
   4:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
   5:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * Functionally, ARP is divided into two parts. The first maps an IP address
   6:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * to a physical address when sending a packet, and the second part answers
   7:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * requests from other machines for our physical address.
   8:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
   9:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * This implementation complies with RFC 826 (Ethernet ARP). It supports
  10:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * Gratuitious ARP from RFC3220 (IP Mobility Support for IPv4) section 4.6
  11:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * if an interface calls etharp_gratuitous(our_netif) upon address change.
  12:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  */
  13:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
  14:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** /*
  15:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * Copyright (c) 2001-2003 Swedish Institute of Computer Science.
  16:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * Copyright (c) 2003-2004 Leon Woestenberg <leon.woestenberg@axon.tv>
  17:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * Copyright (c) 2003-2004 Axon Digital Design B.V., The Netherlands.
  18:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * All rights reserved.
  19:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
  20:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * Redistribution and use in source and binary forms, with or without modification,
  21:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * are permitted provided that the following conditions are met:
  22:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
  23:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * 1. Redistributions of source code must retain the above copyright notice,
  24:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *    this list of conditions and the following disclaimer.
  25:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  26:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *    this list of conditions and the following disclaimer in the documentation
  27:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *    and/or other materials provided with the distribution.
  28:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * 3. The name of the author may not be used to endorse or promote products
  29:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *    derived from this software without specific prior written permission.
  30:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
  31:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR IMPLIED
  32:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 2


  33:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
  34:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  35:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT
  36:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  37:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  38:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
  39:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY
  40:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * OF SUCH DAMAGE.
  41:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
  42:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * This file is part of the lwIP TCP/IP stack.
  43:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
  44:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  */
  45:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
  46:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #include "lwip/opt.h"
  47:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
  48:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if LWIP_ARP || LWIP_ETHERNET
  49:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
  50:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #include "lwip/etharp.h"
  51:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #include "lwip/stats.h"
  52:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #include "lwip/snmp.h"
  53:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #include "lwip/dhcp.h"
  54:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #include "lwip/autoip.h"
  55:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #include "netif/ethernet.h"
  56:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
  57:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #include <string.h>
  58:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
  59:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if LWIP_IPV4 && LWIP_ARP /* don't build if not configured for use in lwipopts.h */
  60:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
  61:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** /** Re-request a used ARP entry 1 minute before it would expire to prevent
  62:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *  breaking a steadily used connection because the ARP entry timed out. */
  63:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #define ARP_AGE_REREQUEST_USED_UNICAST   (ARP_MAXAGE - 30)
  64:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #define ARP_AGE_REREQUEST_USED_BROADCAST (ARP_MAXAGE - 15)
  65:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
  66:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** /** the time an ARP entry stays pending after first request,
  67:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *  for ARP_TMR_INTERVAL = 1000, this is
  68:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *  10 seconds.
  69:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
  70:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *  @internal Keep this number at least 2, otherwise it might
  71:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *  run out instantly if the timeout occurs directly after a request.
  72:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  */
  73:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #define ARP_MAXPENDING 5
  74:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
  75:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** /** ARP states */
  76:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** enum etharp_state {
  77:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   ETHARP_STATE_EMPTY = 0,
  78:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   ETHARP_STATE_PENDING,
  79:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   ETHARP_STATE_STABLE,
  80:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   ETHARP_STATE_STABLE_REREQUESTING_1,
  81:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   ETHARP_STATE_STABLE_REREQUESTING_2
  82:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if ETHARP_SUPPORT_STATIC_ENTRIES
  83:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   ,ETHARP_STATE_STATIC
  84:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #endif /* ETHARP_SUPPORT_STATIC_ENTRIES */
  85:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** };
  86:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
  87:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** struct etharp_entry {
  88:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if ARP_QUEUEING
  89:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /** Pointer to queue of pending outgoing packets on this ARP entry. */
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 3


  90:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   struct etharp_q_entry *q;
  91:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #else /* ARP_QUEUEING */
  92:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /** Pointer to a single pending outgoing packet on this ARP entry. */
  93:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   struct pbuf *q;
  94:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #endif /* ARP_QUEUEING */
  95:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   ip4_addr_t ipaddr;
  96:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   struct netif *netif;
  97:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   struct eth_addr ethaddr;
  98:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   u16_t ctime;
  99:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   u8_t state;
 100:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** };
 101:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 102:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** static struct etharp_entry arp_table[ARP_TABLE_SIZE];
 103:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 104:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if !LWIP_NETIF_HWADDRHINT
 105:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** static u8_t etharp_cached_entry;
 106:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #endif /* !LWIP_NETIF_HWADDRHINT */
 107:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 108:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** /** Try hard to create a new entry - we want the IP address to appear in
 109:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     the cache (even if this means removing an active entry or so). */
 110:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #define ETHARP_FLAG_TRY_HARD     1
 111:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #define ETHARP_FLAG_FIND_ONLY    2
 112:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if ETHARP_SUPPORT_STATIC_ENTRIES
 113:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #define ETHARP_FLAG_STATIC_ENTRY 4
 114:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #endif /* ETHARP_SUPPORT_STATIC_ENTRIES */
 115:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 116:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if LWIP_NETIF_HWADDRHINT
 117:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #define ETHARP_SET_HINT(netif, hint)  if (((netif) != NULL) && ((netif)->addr_hint != NULL))  \
 118:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****                                       *((netif)->addr_hint) = (hint);
 119:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #else /* LWIP_NETIF_HWADDRHINT */
 120:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #define ETHARP_SET_HINT(netif, hint)  (etharp_cached_entry = (hint))
 121:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #endif /* LWIP_NETIF_HWADDRHINT */
 122:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 123:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 124:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** /* Some checks, instead of etharp_init(): */
 125:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if (LWIP_ARP && (ARP_TABLE_SIZE > 0x7f))
 126:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   #error "ARP_TABLE_SIZE must fit in an s8_t, you have to reduce it in your lwipopts.h"
 127:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #endif
 128:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 129:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 130:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** static err_t etharp_request_dst(struct netif *netif, const ip4_addr_t *ipaddr, const struct eth_add
 131:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 132:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 133:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if ARP_QUEUEING
 134:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** /**
 135:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * Free a complete queue of etharp entries
 136:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
 137:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param q a qeueue of etharp_q_entry's to free
 138:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  */
 139:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** static void
 140:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** free_etharp_q(struct etharp_q_entry *q)
 141:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** {
 142:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   struct etharp_q_entry *r;
 143:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   LWIP_ASSERT("q != NULL", q != NULL);
 144:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   LWIP_ASSERT("q->p != NULL", q->p != NULL);
 145:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   while (q) {
 146:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     r = q;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 4


 147:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     q = q->next;
 148:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     LWIP_ASSERT("r->p != NULL", (r->p != NULL));
 149:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     pbuf_free(r->p);
 150:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     memp_free(MEMP_ARP_QUEUE, r);
 151:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 152:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** }
 153:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #else /* ARP_QUEUEING */
 154:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 155:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** /** Compatibility define: free the queued pbuf */
 156:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #define free_etharp_q(q) pbuf_free(q)
 157:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 158:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #endif /* ARP_QUEUEING */
 159:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 160:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** /** Clean up ARP table entries */
 161:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** static void
 162:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** etharp_free_entry(int i)
 163:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** {
  27              		.loc 1 163 0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              	.LVL0:
  32 0000 10B5     		push	{r4, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 4, -8
  36              		.cfi_offset 14, -4
  37 0002 0446     		mov	r4, r0
 164:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* remove from SNMP ARP index tree */
 165:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   mib2_remove_arp_entry(arp_table[i].netif, &arp_table[i].ipaddr);
 166:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* and empty packet queue */
 167:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   if (arp_table[i].q != NULL) {
  38              		.loc 1 167 0
  39 0004 00EB4002 		add	r2, r0, r0, lsl #1
  40 0008 D300     		lsls	r3, r2, #3
  41 000a 094A     		ldr	r2, .L4
  42 000c D058     		ldr	r0, [r2, r3]
  43              	.LVL1:
  44 000e 38B1     		cbz	r0, .L2
 168:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* remove all queued packets */
 169:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     LWIP_DEBUGF(ETHARP_DEBUG, ("etharp_free_entry: freeing entry %"U16_F", packet queue %p.\n", (u1
 170:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     free_etharp_q(arp_table[i].q);
  45              		.loc 1 170 0
  46 0010 FFF7FEFF 		bl	pbuf_free
  47              	.LVL2:
 171:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     arp_table[i].q = NULL;
  48              		.loc 1 171 0
  49 0014 04EB4402 		add	r2, r4, r4, lsl #1
  50 0018 D300     		lsls	r3, r2, #3
  51 001a 0021     		movs	r1, #0
  52 001c 044A     		ldr	r2, .L4
  53 001e D150     		str	r1, [r2, r3]
  54              	.L2:
 172:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 173:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* recycle entry for re-use */
 174:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   arp_table[i].state = ETHARP_STATE_EMPTY;
  55              		.loc 1 174 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 5


  56 0020 04EB4404 		add	r4, r4, r4, lsl #1
  57              	.LVL3:
  58 0024 E200     		lsls	r2, r4, #3
  59 0026 024B     		ldr	r3, .L4
  60 0028 1344     		add	r3, r3, r2
  61 002a 0022     		movs	r2, #0
  62 002c 1A75     		strb	r2, [r3, #20]
  63 002e 10BD     		pop	{r4, pc}
  64              	.L5:
  65              		.align	2
  66              	.L4:
  67 0030 00000000 		.word	.LANCHOR0
  68              		.cfi_endproc
  69              	.LFE136:
  71              		.section	.text.etharp_find_entry,"ax",%progbits
  72              		.align	1
  73              		.syntax unified
  74              		.thumb
  75              		.thumb_func
  76              		.fpu fpv5-sp-d16
  78              	etharp_find_entry:
  79              	.LFB138:
 175:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #ifdef LWIP_DEBUG
 176:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* for debugging, clean out the complete entry */
 177:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   arp_table[i].ctime = 0;
 178:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   arp_table[i].netif = NULL;
 179:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   ip4_addr_set_zero(&arp_table[i].ipaddr);
 180:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   arp_table[i].ethaddr = ethzero;
 181:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #endif /* LWIP_DEBUG */
 182:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** }
 183:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 184:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** /**
 185:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * Clears expired entries in the ARP table.
 186:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
 187:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * This function should be called every ARP_TMR_INTERVAL milliseconds (1 second),
 188:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * in order to expire entries in the ARP table.
 189:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  */
 190:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** void
 191:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** etharp_tmr(void)
 192:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** {
 193:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   u8_t i;
 194:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 195:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   LWIP_DEBUGF(ETHARP_DEBUG, ("etharp_timer\n"));
 196:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* remove expired entries from the ARP table */
 197:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   for (i = 0; i < ARP_TABLE_SIZE; ++i) {
 198:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     u8_t state = arp_table[i].state;
 199:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     if (state != ETHARP_STATE_EMPTY
 200:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if ETHARP_SUPPORT_STATIC_ENTRIES
 201:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       && (state != ETHARP_STATE_STATIC)
 202:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #endif /* ETHARP_SUPPORT_STATIC_ENTRIES */
 203:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       ) {
 204:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       arp_table[i].ctime++;
 205:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       if ((arp_table[i].ctime >= ARP_MAXAGE) ||
 206:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           ((arp_table[i].state == ETHARP_STATE_PENDING)  &&
 207:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****            (arp_table[i].ctime >= ARP_MAXPENDING))) {
 208:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         /* pending or stable entry has become old! */
 209:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         LWIP_DEBUGF(ETHARP_DEBUG, ("etharp_timer: expired %s entry %"U16_F".\n",
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 6


 210:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****              arp_table[i].state >= ETHARP_STATE_STABLE ? "stable" : "pending", (u16_t)i));
 211:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         /* clean up entries that have just been expired */
 212:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         etharp_free_entry(i);
 213:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       } else if (arp_table[i].state == ETHARP_STATE_STABLE_REREQUESTING_1) {
 214:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         /* Don't send more than one request every 2 seconds. */
 215:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         arp_table[i].state = ETHARP_STATE_STABLE_REREQUESTING_2;
 216:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       } else if (arp_table[i].state == ETHARP_STATE_STABLE_REREQUESTING_2) {
 217:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         /* Reset state to stable, so that the next transmitted packet will
 218:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****            re-send an ARP request. */
 219:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         arp_table[i].state = ETHARP_STATE_STABLE;
 220:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       } else if (arp_table[i].state == ETHARP_STATE_PENDING) {
 221:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         /* still pending, resend an ARP query */
 222:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         etharp_request(arp_table[i].netif, &arp_table[i].ipaddr);
 223:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       }
 224:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     }
 225:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 226:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** }
 227:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 228:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** /**
 229:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * Search the ARP table for a matching or new entry.
 230:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
 231:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * If an IP address is given, return a pending or stable ARP entry that matches
 232:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * the address. If no match is found, create a new entry with this address set,
 233:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * but in state ETHARP_EMPTY. The caller must check and possibly change the
 234:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * state of the returned entry.
 235:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
 236:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * If ipaddr is NULL, return a initialized new entry in state ETHARP_EMPTY.
 237:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
 238:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * In all cases, attempt to create new entries from an empty entry. If no
 239:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * empty entries are available and ETHARP_FLAG_TRY_HARD flag is set, recycle
 240:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * old entries. Heuristic choose the least important entry for recycling.
 241:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
 242:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param ipaddr IP address to find in ARP cache, or to add if not found.
 243:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param flags See @ref etharp_state
 244:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param netif netif related to this address (used for NETIF_HWADDRHINT)
 245:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
 246:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @return The ARP entry index that matched or is created, ERR_MEM if no
 247:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * entry is found or could be recycled.
 248:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  */
 249:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** static s8_t
 250:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** etharp_find_entry(const ip4_addr_t *ipaddr, u8_t flags, struct netif* netif)
 251:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** {
  80              		.loc 1 251 0
  81              		.cfi_startproc
  82              		@ args = 0, pretend = 0, frame = 0
  83              		@ frame_needed = 0, uses_anonymous_args = 0
  84              	.LVL4:
  85 0000 2DE9F84F 		push	{r3, r4, r5, r6, r7, r8, r9, r10, fp, lr}
  86              	.LCFI1:
  87              		.cfi_def_cfa_offset 40
  88              		.cfi_offset 3, -40
  89              		.cfi_offset 4, -36
  90              		.cfi_offset 5, -32
  91              		.cfi_offset 6, -28
  92              		.cfi_offset 7, -24
  93              		.cfi_offset 8, -20
  94              		.cfi_offset 9, -16
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 7


  95              		.cfi_offset 10, -12
  96              		.cfi_offset 11, -8
  97              		.cfi_offset 14, -4
  98              	.LVL5:
 252:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   s8_t old_pending = ARP_TABLE_SIZE, old_stable = ARP_TABLE_SIZE;
 253:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   s8_t empty = ARP_TABLE_SIZE;
 254:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   u8_t i = 0;
 255:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* oldest entry with packets on queue */
 256:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   s8_t old_queue = ARP_TABLE_SIZE;
 257:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* its age */
 258:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   u16_t age_queue = 0, age_pending = 0, age_stable = 0;
  99              		.loc 1 258 0
 100 0004 4FF0000E 		mov	lr, #0
 101 0008 F346     		mov	fp, lr
 102 000a F146     		mov	r9, lr
 256:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* its age */
 103              		.loc 1 256 0
 104 000c 4FF00A0C 		mov	ip, #10
 259:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 260:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   LWIP_UNUSED_ARG(netif);
 261:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 262:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /**
 263:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****    * a) do a search through the cache, remember candidates
 264:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****    * b) select candidate entry
 265:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****    * c) create new entry
 266:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****    */
 267:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 268:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* a) in a single search sweep, do all of this
 269:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****    * 1) remember the first empty entry (if any)
 270:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****    * 2) remember the oldest stable entry (if any)
 271:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****    * 3) remember the oldest pending entry without queued packets (if any)
 272:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****    * 4) remember the oldest pending entry with queued packets (if any)
 273:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****    * 5) search for a matching IP entry, either pending or stable
 274:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****    *    until 5 matches, or all entries are searched for.
 275:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****    */
 276:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 277:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   for (i = 0; i < ARP_TABLE_SIZE; ++i) {
 105              		.loc 1 277 0
 106 0010 7346     		mov	r3, lr
 253:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   u8_t i = 0;
 107              		.loc 1 253 0
 108 0012 6546     		mov	r5, ip
 252:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   s8_t empty = ARP_TABLE_SIZE;
 109              		.loc 1 252 0
 110 0014 E046     		mov	r8, ip
 111 0016 E246     		mov	r10, ip
 112              		.loc 1 277 0
 113 0018 1BE0     		b	.L7
 114              	.LVL6:
 115              	.L8:
 116              	.LBB2:
 278:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     u8_t state = arp_table[i].state;
 279:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* no empty entry found yet and now we do find one? */
 280:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     if ((empty == ARP_TABLE_SIZE) && (state == ETHARP_STATE_EMPTY)) {
 281:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       LWIP_DEBUGF(ETHARP_DEBUG, ("etharp_find_entry: found empty entry %"U16_F"\n", (u16_t)i));
 282:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* remember first empty entry */
 283:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       empty = i;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 8


 284:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     } else if (state != ETHARP_STATE_EMPTY) {
 117              		.loc 1 284 0
 118 001a C2B1     		cbz	r2, .L9
 285:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       LWIP_ASSERT("state == ETHARP_STATE_PENDING || state >= ETHARP_STATE_STABLE",
 286:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         state == ETHARP_STATE_PENDING || state >= ETHARP_STATE_STABLE);
 287:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* if given, does IP address match IP address in ARP entry? */
 288:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       if (ipaddr && ip4_addr_cmp(ipaddr, &arp_table[i].ipaddr)
 119              		.loc 1 288 0
 120 001c 40B1     		cbz	r0, .L10
 121              		.loc 1 288 0 is_stmt 0 discriminator 1
 122 001e 03EB4306 		add	r6, r3, r3, lsl #1
 123 0022 F700     		lsls	r7, r6, #3
 124 0024 434E     		ldr	r6, .L30
 125 0026 3E44     		add	r6, r6, r7
 126 0028 7668     		ldr	r6, [r6, #4]
 127 002a 0768     		ldr	r7, [r0]
 128 002c B742     		cmp	r7, r6
 129 002e 1FD0     		beq	.L26
 130              	.L10:
 289:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if ETHARP_TABLE_MATCH_NETIF
 290:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           && ((netif == NULL) || (netif == arp_table[i].netif))
 291:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #endif /* ETHARP_TABLE_MATCH_NETIF */
 292:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         ) {
 293:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_find_entry: found matching entry %"U16_
 294:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         /* found exact IP address match, simply bail out */
 295:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         return i;
 296:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       }
 297:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* pending entry? */
 298:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       if (state == ETHARP_STATE_PENDING) {
 131              		.loc 1 298 0 is_stmt 1
 132 0030 012A     		cmp	r2, #1
 133 0032 20D0     		beq	.L27
 299:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         /* pending with queued packets? */
 300:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         if (arp_table[i].q != NULL) {
 301:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           if (arp_table[i].ctime >= age_queue) {
 302:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****             old_queue = i;
 303:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****             age_queue = arp_table[i].ctime;
 304:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           }
 305:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         } else
 306:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         /* pending without queued packets? */
 307:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         {
 308:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           if (arp_table[i].ctime >= age_pending) {
 309:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****             old_pending = i;
 310:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****             age_pending = arp_table[i].ctime;
 311:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           }
 312:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         }
 313:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* stable entry? */
 314:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       } else if (state >= ETHARP_STATE_STABLE) {
 134              		.loc 1 314 0
 135 0034 012A     		cmp	r2, #1
 136 0036 0AD9     		bls	.L9
 315:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if ETHARP_SUPPORT_STATIC_ENTRIES
 316:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         /* don't record old_stable for static entries since they never expire */
 317:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         if (state < ETHARP_STATE_STATIC)
 318:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #endif /* ETHARP_SUPPORT_STATIC_ENTRIES */
 319:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         {
 320:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           /* remember entry with oldest stable entry in oldest, its age in maxtime */
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 9


 321:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           if (arp_table[i].ctime >= age_stable) {
 137              		.loc 1 321 0
 138 0038 04EB4404 		add	r4, r4, r4, lsl #1
 139 003c E600     		lsls	r6, r4, #3
 140 003e 3D4A     		ldr	r2, .L30
 141              	.LVL7:
 142 0040 3244     		add	r2, r2, r6
 143              	.LVL8:
 144 0042 528A     		ldrh	r2, [r2, #18]
 145 0044 9645     		cmp	lr, r2
 146 0046 02D8     		bhi	.L9
 322:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****             old_stable = i;
 147              		.loc 1 322 0
 148 0048 4FFA83F8 		sxtb	r8, r3
 149              	.LVL9:
 323:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****             age_stable = arp_table[i].ctime;
 150              		.loc 1 323 0
 151 004c 9646     		mov	lr, r2
 152              	.LVL10:
 153              	.L9:
 154              	.LBE2:
 277:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     u8_t state = arp_table[i].state;
 155              		.loc 1 277 0 discriminator 2
 156 004e 0133     		adds	r3, r3, #1
 157              	.LVL11:
 158 0050 DBB2     		uxtb	r3, r3
 159              	.LVL12:
 160              	.L7:
 277:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     u8_t state = arp_table[i].state;
 161              		.loc 1 277 0 is_stmt 0 discriminator 1
 162 0052 092B     		cmp	r3, #9
 163 0054 2DD8     		bhi	.L28
 164              	.LBB3:
 278:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* no empty entry found yet and now we do find one? */
 165              		.loc 1 278 0 is_stmt 1
 166 0056 1C46     		mov	r4, r3
 167 0058 03EB4302 		add	r2, r3, r3, lsl #1
 168 005c D600     		lsls	r6, r2, #3
 169 005e 354A     		ldr	r2, .L30
 170 0060 3244     		add	r2, r2, r6
 171 0062 127D     		ldrb	r2, [r2, #20]	@ zero_extendqisi2
 172              	.LVL13:
 280:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       LWIP_DEBUGF(ETHARP_DEBUG, ("etharp_find_entry: found empty entry %"U16_F"\n", (u16_t)i));
 173              		.loc 1 280 0
 174 0064 0A2D     		cmp	r5, #10
 175 0066 08BF     		it	eq
 176 0068 002A     		cmpeq	r2, #0
 177 006a D6D1     		bne	.L8
 283:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     } else if (state != ETHARP_STATE_EMPTY) {
 178              		.loc 1 283 0
 179 006c 5DB2     		sxtb	r5, r3
 180              	.LVL14:
 181 006e EEE7     		b	.L9
 182              	.L26:
 295:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       }
 183              		.loc 1 295 0
 184 0070 58B2     		sxtb	r0, r3
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 10


 185              	.LVL15:
 186 0072 BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 187              	.LVL16:
 188              	.L27:
 300:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           if (arp_table[i].ctime >= age_queue) {
 189              		.loc 1 300 0
 190 0076 04EB4406 		add	r6, r4, r4, lsl #1
 191 007a F200     		lsls	r2, r6, #3
 192              	.LVL17:
 193 007c 2D4E     		ldr	r6, .L30
 194              	.LVL18:
 195 007e B258     		ldr	r2, [r6, r2]
 196 0080 5AB1     		cbz	r2, .L13
 301:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****             old_queue = i;
 197              		.loc 1 301 0
 198 0082 04EB4404 		add	r4, r4, r4, lsl #1
 199 0086 E600     		lsls	r6, r4, #3
 200              	.LVL19:
 201 0088 2A4A     		ldr	r2, .L30
 202              	.LVL20:
 203 008a 3244     		add	r2, r2, r6
 204              	.LVL21:
 205 008c 528A     		ldrh	r2, [r2, #18]
 206 008e 9145     		cmp	r9, r2
 207 0090 DDD8     		bhi	.L9
 302:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****             age_queue = arp_table[i].ctime;
 208              		.loc 1 302 0
 209 0092 4FFA83FC 		sxtb	ip, r3
 210              	.LVL22:
 303:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           }
 211              		.loc 1 303 0
 212 0096 9146     		mov	r9, r2
 213 0098 D9E7     		b	.L9
 214              	.LVL23:
 215              	.L13:
 308:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****             old_pending = i;
 216              		.loc 1 308 0
 217 009a 04EB4404 		add	r4, r4, r4, lsl #1
 218 009e E600     		lsls	r6, r4, #3
 219              	.LVL24:
 220 00a0 244A     		ldr	r2, .L30
 221              	.LVL25:
 222 00a2 3244     		add	r2, r2, r6
 223              	.LVL26:
 224 00a4 528A     		ldrh	r2, [r2, #18]
 225 00a6 9345     		cmp	fp, r2
 226 00a8 D1D8     		bhi	.L9
 309:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****             age_pending = arp_table[i].ctime;
 227              		.loc 1 309 0
 228 00aa 4FFA83FA 		sxtb	r10, r3
 229              	.LVL27:
 310:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           }
 230              		.loc 1 310 0
 231 00ae 9346     		mov	fp, r2
 232 00b0 CDE7     		b	.L9
 233              	.LVL28:
 234              	.L28:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 11


 235              	.LBE3:
 324:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           }
 325:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         }
 326:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       }
 327:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     }
 328:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 329:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* { we have no match } => try to create a new entry */
 330:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 331:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* don't create new entry, only search? */
 332:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   if (((flags & ETHARP_FLAG_FIND_ONLY) != 0) ||
 236              		.loc 1 332 0
 237 00b2 11F0020F 		tst	r1, #2
 238 00b6 34D1     		bne	.L22
 239              		.loc 1 332 0 is_stmt 0 discriminator 1
 240 00b8 0A2D     		cmp	r5, #10
 241 00ba 16D0     		beq	.L29
 242              	.L15:
 243 00bc 0446     		mov	r4, r0
 333:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* or no empty entry found and not allowed to recycle? */
 334:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       ((empty == ARP_TABLE_SIZE) && ((flags & ETHARP_FLAG_TRY_HARD) == 0))) {
 335:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_find_entry: no empty entry found and not al
 336:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     return (s8_t)ERR_MEM;
 337:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 338:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 339:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* b) choose the least destructive entry to recycle:
 340:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****    * 1) empty entry
 341:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****    * 2) oldest stable entry
 342:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****    * 3) oldest pending entry without queued packets
 343:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****    * 4) oldest pending entry with queued packets
 344:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****    *
 345:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****    * { ETHARP_FLAG_TRY_HARD is set at this point }
 346:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****    */
 347:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 348:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* 1) empty entry available? */
 349:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   if (empty < ARP_TABLE_SIZE) {
 244              		.loc 1 349 0 is_stmt 1
 245 00be 092D     		cmp	r5, #9
 246 00c0 1ADC     		bgt	.L16
 350:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     i = empty;
 247              		.loc 1 350 0
 248 00c2 EDB2     		uxtb	r5, r5
 249              	.LVL29:
 250              	.L17:
 351:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_find_entry: selecting empty entry %"U16_F"\
 352:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   } else {
 353:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* 2) found recyclable stable entry? */
 354:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     if (old_stable < ARP_TABLE_SIZE) {
 355:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* recycle oldest stable*/
 356:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       i = old_stable;
 357:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_find_entry: selecting oldest stable entry
 358:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* no queued packets should exist on stable entries */
 359:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       LWIP_ASSERT("arp_table[i].q == NULL", arp_table[i].q == NULL);
 360:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* 3) found recyclable pending entry without queued packets? */
 361:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     } else if (old_pending < ARP_TABLE_SIZE) {
 362:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* recycle oldest pending */
 363:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       i = old_pending;
 364:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_find_entry: selecting oldest pending entr
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 12


 365:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* 4) found recyclable pending entry with queued packets? */
 366:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     } else if (old_queue < ARP_TABLE_SIZE) {
 367:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* recycle oldest pending (queued packets are free in etharp_free_entry) */
 368:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       i = old_queue;
 369:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_find_entry: selecting oldest pending entr
 370:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* no empty or recyclable entries found */
 371:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     } else {
 372:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_find_entry: no empty or recyclable entrie
 373:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       return (s8_t)ERR_MEM;
 374:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     }
 375:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 376:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* { empty or recyclable entry found } */
 377:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     LWIP_ASSERT("i < ARP_TABLE_SIZE", i < ARP_TABLE_SIZE);
 378:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     etharp_free_entry(i);
 379:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 380:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 381:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   LWIP_ASSERT("i < ARP_TABLE_SIZE", i < ARP_TABLE_SIZE);
 382:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   LWIP_ASSERT("arp_table[i].state == ETHARP_STATE_EMPTY",
 251              		.loc 1 382 0
 252 00c4 2B46     		mov	r3, r5
 383:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     arp_table[i].state == ETHARP_STATE_EMPTY);
 384:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 385:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* IP address given? */
 386:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   if (ipaddr != NULL) {
 253              		.loc 1 386 0
 254 00c6 34B1     		cbz	r4, .L21
 387:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* set IP address */
 388:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     ip4_addr_copy(arp_table[i].ipaddr, *ipaddr);
 255              		.loc 1 388 0
 256 00c8 2068     		ldr	r0, [r4]
 257 00ca 05EB4502 		add	r2, r5, r5, lsl #1
 258 00ce D100     		lsls	r1, r2, #3
 259 00d0 184A     		ldr	r2, .L30
 260 00d2 0A44     		add	r2, r2, r1
 261 00d4 5060     		str	r0, [r2, #4]
 262              	.L21:
 389:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 390:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   arp_table[i].ctime = 0;
 263              		.loc 1 390 0
 264 00d6 03EB4303 		add	r3, r3, r3, lsl #1
 265 00da DA00     		lsls	r2, r3, #3
 266 00dc 154B     		ldr	r3, .L30
 267 00de 1344     		add	r3, r3, r2
 268 00e0 0022     		movs	r2, #0
 269 00e2 5A82     		strh	r2, [r3, #18]	@ movhi
 391:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if ETHARP_TABLE_MATCH_NETIF
 392:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   arp_table[i].netif = netif;
 393:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #endif /* ETHARP_TABLE_MATCH_NETIF*/
 394:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   return (err_t)i;
 270              		.loc 1 394 0
 271 00e4 68B2     		sxtb	r0, r5
 272 00e6 BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 273              	.LVL30:
 274              	.L29:
 334:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_find_entry: no empty entry found and not al
 275              		.loc 1 334 0
 276 00ea 11F0010F 		tst	r1, #1
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 13


 277 00ee E5D1     		bne	.L15
 336:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 278              		.loc 1 336 0
 279 00f0 4FF0FF30 		mov	r0, #-1
 280              	.LVL31:
 281 00f4 BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 282              	.LVL32:
 283              	.L16:
 354:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* recycle oldest stable*/
 284              		.loc 1 354 0
 285 00f8 B8F1090F 		cmp	r8, #9
 286 00fc 05DC     		bgt	.L18
 356:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_find_entry: selecting oldest stable entry
 287              		.loc 1 356 0
 288 00fe 5FFA88F5 		uxtb	r5, r8
 289              	.LVL33:
 290              	.L19:
 378:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 291              		.loc 1 378 0
 292 0102 2846     		mov	r0, r5
 293              	.LVL34:
 294 0104 FFF7FEFF 		bl	etharp_free_entry
 295              	.LVL35:
 296 0108 DCE7     		b	.L17
 297              	.LVL36:
 298              	.L18:
 361:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* recycle oldest pending */
 299              		.loc 1 361 0
 300 010a BAF1090F 		cmp	r10, #9
 301 010e 02DC     		bgt	.L20
 363:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_find_entry: selecting oldest pending entr
 302              		.loc 1 363 0
 303 0110 5FFA8AF5 		uxtb	r5, r10
 304              	.LVL37:
 305 0114 F5E7     		b	.L19
 306              	.LVL38:
 307              	.L20:
 366:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* recycle oldest pending (queued packets are free in etharp_free_entry) */
 308              		.loc 1 366 0
 309 0116 BCF1090F 		cmp	ip, #9
 310 011a 06DC     		bgt	.L24
 368:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_find_entry: selecting oldest pending entr
 311              		.loc 1 368 0
 312 011c 5FFA8CF5 		uxtb	r5, ip
 313              	.LVL39:
 314 0120 EFE7     		b	.L19
 315              	.LVL40:
 316              	.L22:
 336:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 317              		.loc 1 336 0
 318 0122 4FF0FF30 		mov	r0, #-1
 319              	.LVL41:
 320 0126 BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 321              	.LVL42:
 322              	.L24:
 373:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     }
 323              		.loc 1 373 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 14


 324 012a 4FF0FF30 		mov	r0, #-1
 325              	.LVL43:
 395:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** }
 326              		.loc 1 395 0
 327 012e BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 328              	.LVL44:
 329              	.L31:
 330 0132 00BF     		.align	2
 331              	.L30:
 332 0134 00000000 		.word	.LANCHOR0
 333              		.cfi_endproc
 334              	.LFE138:
 336              		.section	.text.etharp_update_arp_entry,"ax",%progbits
 337              		.align	1
 338              		.syntax unified
 339              		.thumb
 340              		.thumb_func
 341              		.fpu fpv5-sp-d16
 343              	etharp_update_arp_entry:
 344              	.LFB139:
 396:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 397:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** /**
 398:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * Update (or insert) a IP/MAC address pair in the ARP cache.
 399:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
 400:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * If a pending entry is resolved, any queued packets will be sent
 401:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * at this point.
 402:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
 403:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param netif netif related to this entry (used for NETIF_ADDRHINT)
 404:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param ipaddr IP address of the inserted ARP entry.
 405:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param ethaddr Ethernet address of the inserted ARP entry.
 406:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param flags See @ref etharp_state
 407:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
 408:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @return
 409:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * - ERR_OK Successfully updated ARP cache.
 410:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * - ERR_MEM If we could not add a new ARP entry when ETHARP_FLAG_TRY_HARD was set.
 411:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * - ERR_ARG Non-unicast address given, those will not appear in ARP cache.
 412:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
 413:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @see pbuf_free()
 414:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  */
 415:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** static err_t
 416:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** etharp_update_arp_entry(struct netif *netif, const ip4_addr_t *ipaddr, struct eth_addr *ethaddr, u8
 417:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** {
 345              		.loc 1 417 0
 346              		.cfi_startproc
 347              		@ args = 0, pretend = 0, frame = 0
 348              		@ frame_needed = 0, uses_anonymous_args = 0
 349              	.LVL45:
 418:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   s8_t i;
 419:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   LWIP_ASSERT("netif->hwaddr_len == ETH_HWADDR_LEN", netif->hwaddr_len == ETH_HWADDR_LEN);
 420:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_update_arp_entry: %"U16_F".%"U16_F".%"U16_F".
 421:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     ip4_addr1_16(ipaddr), ip4_addr2_16(ipaddr), ip4_addr3_16(ipaddr), ip4_addr4_16(ipaddr),
 422:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     (u16_t)ethaddr->addr[0], (u16_t)ethaddr->addr[1], (u16_t)ethaddr->addr[2],
 423:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     (u16_t)ethaddr->addr[3], (u16_t)ethaddr->addr[4], (u16_t)ethaddr->addr[5]));
 424:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* non-unicast address? */
 425:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   if (ip4_addr_isany(ipaddr) ||
 350              		.loc 1 425 0
 351 0000 0029     		cmp	r1, #0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 15


 352 0002 3FD0     		beq	.L34
 417:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   s8_t i;
 353              		.loc 1 417 0 discriminator 1
 354 0004 F0B5     		push	{r4, r5, r6, r7, lr}
 355              	.LCFI2:
 356              		.cfi_def_cfa_offset 20
 357              		.cfi_offset 4, -20
 358              		.cfi_offset 5, -16
 359              		.cfi_offset 6, -12
 360              		.cfi_offset 7, -8
 361              		.cfi_offset 14, -4
 362 0006 83B0     		sub	sp, sp, #12
 363              	.LCFI3:
 364              		.cfi_def_cfa_offset 32
 365 0008 0446     		mov	r4, r0
 366 000a 0F46     		mov	r7, r1
 367              		.loc 1 425 0 discriminator 1
 368 000c 0868     		ldr	r0, [r1]
 369              	.LVL46:
 370 000e 0028     		cmp	r0, #0
 371 0010 3BD0     		beq	.L35
 372 0012 1E46     		mov	r6, r3
 373 0014 1546     		mov	r5, r2
 426:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       ip4_addr_isbroadcast(ipaddr, netif) ||
 374              		.loc 1 426 0 discriminator 2
 375 0016 2146     		mov	r1, r4
 376              	.LVL47:
 377 0018 FFF7FEFF 		bl	ip4_addr_isbroadcast_u32
 378              	.LVL48:
 425:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       ip4_addr_isbroadcast(ipaddr, netif) ||
 379              		.loc 1 425 0 discriminator 2
 380 001c 0028     		cmp	r0, #0
 381 001e 37D1     		bne	.L36
 427:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       ip4_addr_ismulticast(ipaddr)) {
 382              		.loc 1 427 0
 383 0020 3B68     		ldr	r3, [r7]
 384 0022 03F0F003 		and	r3, r3, #240
 426:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       ip4_addr_isbroadcast(ipaddr, netif) ||
 385              		.loc 1 426 0
 386 0026 E02B     		cmp	r3, #224
 387 0028 35D0     		beq	.L37
 428:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_update_arp_entry: will not add non-unicast 
 429:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     return ERR_ARG;
 430:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 431:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* find or create ARP entry */
 432:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   i = etharp_find_entry(ipaddr, flags, netif);
 388              		.loc 1 432 0
 389 002a 2246     		mov	r2, r4
 390 002c 3146     		mov	r1, r6
 391 002e 3846     		mov	r0, r7
 392 0030 FFF7FEFF 		bl	etharp_find_entry
 393              	.LVL49:
 433:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* bail out if no entry could be found */
 434:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   if (i < 0) {
 394              		.loc 1 434 0
 395 0034 0028     		cmp	r0, #0
 396              	.LVL50:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 16


 397 0036 23DB     		blt	.L33
 435:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     return (err_t)i;
 436:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 437:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 438:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if ETHARP_SUPPORT_STATIC_ENTRIES
 439:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   if (flags & ETHARP_FLAG_STATIC_ENTRY) {
 440:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* record static type */
 441:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     arp_table[i].state = ETHARP_STATE_STATIC;
 442:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   } else if (arp_table[i].state == ETHARP_STATE_STATIC) {
 443:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* found entry is a static type, don't overwrite it */
 444:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     return ERR_VAL;
 445:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   } else
 446:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #endif /* ETHARP_SUPPORT_STATIC_ENTRIES */
 447:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   {
 448:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* mark it stable */
 449:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     arp_table[i].state = ETHARP_STATE_STABLE;
 398              		.loc 1 449 0
 399 0038 194E     		ldr	r6, .L43
 400 003a 4200     		lsls	r2, r0, #1
 401 003c 1318     		adds	r3, r2, r0
 402 003e D900     		lsls	r1, r3, #3
 403 0040 7718     		adds	r7, r6, r1
 404              	.LVL51:
 405 0042 0223     		movs	r3, #2
 406 0044 3B75     		strb	r3, [r7, #20]
 450:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 451:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 452:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* record network interface */
 453:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   arp_table[i].netif = netif;
 407              		.loc 1 453 0
 408 0046 BC60     		str	r4, [r7, #8]
 454:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* insert in SNMP ARP index tree */
 455:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   mib2_add_arp_entry(netif, &arp_table[i].ipaddr);
 456:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 457:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_update_arp_entry: updating stable entry %"S16
 458:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* update address */
 459:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   ETHADDR32_COPY(&arp_table[i].ethaddr, ethaddr);
 409              		.loc 1 459 0
 410 0048 0B46     		mov	r3, r1
 411 004a 0833     		adds	r3, r3, #8
 412 004c 3344     		add	r3, r3, r6
 413 004e 2A68     		ldr	r2, [r5]	@ unaligned
 414 0050 5A60     		str	r2, [r3, #4]	@ unaligned
 415 0052 AA88     		ldrh	r2, [r5, #4]	@ unaligned
 416 0054 1A81     		strh	r2, [r3, #8]	@ unaligned
 460:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* reset time stamp */
 461:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   arp_table[i].ctime = 0;
 417              		.loc 1 461 0
 418 0056 0023     		movs	r3, #0
 419 0058 7B82     		strh	r3, [r7, #18]	@ movhi
 462:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* this is where we will send out queued packets! */
 463:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if ARP_QUEUEING
 464:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   while (arp_table[i].q != NULL) {
 465:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     struct pbuf *p;
 466:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* remember remainder of queue */
 467:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     struct etharp_q_entry *q = arp_table[i].q;
 468:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* pop first item off the queue */
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 17


 469:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     arp_table[i].q = q->next;
 470:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* get the packet pointer */
 471:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     p = q->p;
 472:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* now queue entry can be freed */
 473:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     memp_free(MEMP_ARP_QUEUE, q);
 474:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #else /* ARP_QUEUEING */
 475:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   if (arp_table[i].q != NULL) {
 420              		.loc 1 475 0
 421 005a 7658     		ldr	r6, [r6, r1]
 422 005c F6B1     		cbz	r6, .L38
 423              	.LVL52:
 424              	.LBB4:
 476:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     struct pbuf *p = arp_table[i].q;
 477:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     arp_table[i].q = NULL;
 425              		.loc 1 477 0
 426 005e 0027     		movs	r7, #0
 427 0060 0F4A     		ldr	r2, .L43
 428 0062 5750     		str	r7, [r2, r1]
 478:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #endif /* ARP_QUEUEING */
 479:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* send the queued IP packet */
 480:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     ethernet_output(netif, p, (struct eth_addr*)(netif->hwaddr), ethaddr, ETHTYPE_IP);
 429              		.loc 1 480 0
 430 0064 4FF40063 		mov	r3, #2048
 431 0068 0093     		str	r3, [sp]
 432 006a 2B46     		mov	r3, r5
 433 006c 04F12902 		add	r2, r4, #41
 434 0070 3146     		mov	r1, r6
 435 0072 2046     		mov	r0, r4
 436 0074 FFF7FEFF 		bl	ethernet_output
 437              	.LVL53:
 481:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* free the queued IP packet */
 482:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     pbuf_free(p);
 438              		.loc 1 482 0
 439 0078 3046     		mov	r0, r6
 440 007a FFF7FEFF 		bl	pbuf_free
 441              	.LVL54:
 442              	.LBE4:
 483:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 484:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   return ERR_OK;
 443              		.loc 1 484 0
 444 007e 3846     		mov	r0, r7
 445              	.LVL55:
 446              	.L33:
 485:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** }
 447              		.loc 1 485 0
 448 0080 03B0     		add	sp, sp, #12
 449              	.LCFI4:
 450              		.cfi_def_cfa_offset 20
 451              		@ sp needed
 452 0082 F0BD     		pop	{r4, r5, r6, r7, pc}
 453              	.LVL56:
 454              	.L34:
 455              	.LCFI5:
 456              		.cfi_def_cfa_offset 0
 457              		.cfi_restore 4
 458              		.cfi_restore 5
 459              		.cfi_restore 6
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 18


 460              		.cfi_restore 7
 461              		.cfi_restore 14
 429:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 462              		.loc 1 429 0
 463 0084 6FF00F00 		mvn	r0, #15
 464              	.LVL57:
 465 0088 7047     		bx	lr
 466              	.LVL58:
 467              	.L35:
 468              	.LCFI6:
 469              		.cfi_def_cfa_offset 32
 470              		.cfi_offset 4, -20
 471              		.cfi_offset 5, -16
 472              		.cfi_offset 6, -12
 473              		.cfi_offset 7, -8
 474              		.cfi_offset 14, -4
 475 008a 6FF00F00 		mvn	r0, #15
 476 008e F7E7     		b	.L33
 477              	.LVL59:
 478              	.L36:
 479 0090 6FF00F00 		mvn	r0, #15
 480 0094 F4E7     		b	.L33
 481              	.L37:
 482 0096 6FF00F00 		mvn	r0, #15
 483 009a F1E7     		b	.L33
 484              	.LVL60:
 485              	.L38:
 484:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** }
 486              		.loc 1 484 0
 487 009c 0020     		movs	r0, #0
 488 009e EFE7     		b	.L33
 489              	.L44:
 490              		.align	2
 491              	.L43:
 492 00a0 00000000 		.word	.LANCHOR0
 493              		.cfi_endproc
 494              	.LFE139:
 496              		.section	.text.etharp_raw,"ax",%progbits
 497              		.align	1
 498              		.syntax unified
 499              		.thumb
 500              		.thumb_func
 501              		.fpu fpv5-sp-d16
 503              	etharp_raw:
 504              	.LFB147:
 486:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 487:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if ETHARP_SUPPORT_STATIC_ENTRIES
 488:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** /** Add a new static entry to the ARP table. If an entry exists for the
 489:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * specified IP address, this entry is overwritten.
 490:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * If packets are queued for the specified IP address, they are sent out.
 491:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
 492:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param ipaddr IP address for the new static entry
 493:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param ethaddr ethernet address for the new static entry
 494:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @return See return values of etharp_add_static_entry
 495:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  */
 496:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** err_t
 497:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** etharp_add_static_entry(const ip4_addr_t *ipaddr, struct eth_addr *ethaddr)
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 19


 498:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** {
 499:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   struct netif *netif;
 500:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_add_static_entry: %"U16_F".%"U16_F".%"U16_F".
 501:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     ip4_addr1_16(ipaddr), ip4_addr2_16(ipaddr), ip4_addr3_16(ipaddr), ip4_addr4_16(ipaddr),
 502:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     (u16_t)ethaddr->addr[0], (u16_t)ethaddr->addr[1], (u16_t)ethaddr->addr[2],
 503:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     (u16_t)ethaddr->addr[3], (u16_t)ethaddr->addr[4], (u16_t)ethaddr->addr[5]));
 504:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 505:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   netif = ip4_route(ipaddr);
 506:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   if (netif == NULL) {
 507:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     return ERR_RTE;
 508:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 509:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 510:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   return etharp_update_arp_entry(netif, ipaddr, ethaddr, ETHARP_FLAG_TRY_HARD | ETHARP_FLAG_STATIC_
 511:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** }
 512:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 513:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** /** Remove a static entry from the ARP table previously added with a call to
 514:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * etharp_add_static_entry.
 515:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
 516:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param ipaddr IP address of the static entry to remove
 517:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @return ERR_OK: entry removed
 518:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *         ERR_MEM: entry wasn't found
 519:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *         ERR_ARG: entry wasn't a static entry but a dynamic one
 520:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  */
 521:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** err_t
 522:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** etharp_remove_static_entry(const ip4_addr_t *ipaddr)
 523:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** {
 524:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   s8_t i;
 525:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_remove_static_entry: %"U16_F".%"U16_F".%"U16_
 526:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     ip4_addr1_16(ipaddr), ip4_addr2_16(ipaddr), ip4_addr3_16(ipaddr), ip4_addr4_16(ipaddr)));
 527:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 528:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* find or create ARP entry */
 529:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   i = etharp_find_entry(ipaddr, ETHARP_FLAG_FIND_ONLY, NULL);
 530:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* bail out if no entry could be found */
 531:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   if (i < 0) {
 532:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     return (err_t)i;
 533:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 534:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 535:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   if (arp_table[i].state != ETHARP_STATE_STATIC) {
 536:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* entry wasn't a static entry, cannot remove it */
 537:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     return ERR_ARG;
 538:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 539:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* entry found, free it */
 540:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   etharp_free_entry(i);
 541:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   return ERR_OK;
 542:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** }
 543:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #endif /* ETHARP_SUPPORT_STATIC_ENTRIES */
 544:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 545:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** /**
 546:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * Remove all ARP table entries of the specified netif.
 547:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
 548:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param netif points to a network interface
 549:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  */
 550:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** void
 551:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** etharp_cleanup_netif(struct netif *netif)
 552:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** {
 553:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   u8_t i;
 554:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 20


 555:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   for (i = 0; i < ARP_TABLE_SIZE; ++i) {
 556:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     u8_t state = arp_table[i].state;
 557:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     if ((state != ETHARP_STATE_EMPTY) && (arp_table[i].netif == netif)) {
 558:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       etharp_free_entry(i);
 559:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     }
 560:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 561:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** }
 562:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 563:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** /**
 564:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * Finds (stable) ethernet/IP address pair from ARP table
 565:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * using interface and IP address index.
 566:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @note the addresses in the ARP table are in network order!
 567:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
 568:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param netif points to interface index
 569:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param ipaddr points to the (network order) IP address index
 570:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param eth_ret points to return pointer
 571:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param ip_ret points to return pointer
 572:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @return table index if found, -1 otherwise
 573:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  */
 574:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** s8_t
 575:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** etharp_find_addr(struct netif *netif, const ip4_addr_t *ipaddr,
 576:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****          struct eth_addr **eth_ret, const ip4_addr_t **ip_ret)
 577:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** {
 578:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   s8_t i;
 579:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 580:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   LWIP_ASSERT("eth_ret != NULL && ip_ret != NULL",
 581:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     eth_ret != NULL && ip_ret != NULL);
 582:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 583:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   LWIP_UNUSED_ARG(netif);
 584:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 585:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   i = etharp_find_entry(ipaddr, ETHARP_FLAG_FIND_ONLY, netif);
 586:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   if ((i >= 0) && (arp_table[i].state >= ETHARP_STATE_STABLE)) {
 587:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       *eth_ret = &arp_table[i].ethaddr;
 588:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       *ip_ret = &arp_table[i].ipaddr;
 589:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       return i;
 590:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 591:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   return -1;
 592:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** }
 593:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 594:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** /**
 595:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * Possibility to iterate over stable ARP table entries
 596:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
 597:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param i entry number, 0 to ARP_TABLE_SIZE
 598:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param ipaddr return value: IP address
 599:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param netif return value: points to interface
 600:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param eth_ret return value: ETH address
 601:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @return 1 on valid index, 0 otherwise
 602:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  */
 603:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** u8_t
 604:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** etharp_get_entry(u8_t i, ip4_addr_t **ipaddr, struct netif **netif, struct eth_addr **eth_ret)
 605:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** {
 606:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   LWIP_ASSERT("ipaddr != NULL", ipaddr != NULL);
 607:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   LWIP_ASSERT("netif != NULL", netif != NULL);
 608:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   LWIP_ASSERT("eth_ret != NULL", eth_ret != NULL);
 609:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 610:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   if((i < ARP_TABLE_SIZE) && (arp_table[i].state >= ETHARP_STATE_STABLE)) {
 611:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     *ipaddr  = &arp_table[i].ipaddr;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 21


 612:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     *netif   = arp_table[i].netif;
 613:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     *eth_ret = &arp_table[i].ethaddr;
 614:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     return 1;
 615:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   } else {
 616:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     return 0;
 617:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 618:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** }
 619:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 620:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** /**
 621:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * Responds to ARP requests to us. Upon ARP replies to us, add entry to cache
 622:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * send out queued IP packets. Updates cache with snooped address pairs.
 623:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
 624:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * Should be called for incoming ARP packets. The pbuf in the argument
 625:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * is freed by this function.
 626:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
 627:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param p The ARP packet that arrived on netif. Is freed by this function.
 628:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param netif The lwIP network interface on which the ARP packet pbuf arrived.
 629:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
 630:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @see pbuf_free()
 631:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  */
 632:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** void
 633:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** etharp_input(struct pbuf *p, struct netif *netif)
 634:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** {
 635:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   struct etharp_hdr *hdr;
 636:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* these are aligned properly, whereas the ARP header fields might not be */
 637:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   ip4_addr_t sipaddr, dipaddr;
 638:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   u8_t for_us;
 639:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 640:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   LWIP_ERROR("netif != NULL", (netif != NULL), return;);
 641:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 642:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   hdr = (struct etharp_hdr *)p->payload;
 643:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 644:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* RFC 826 "Packet Reception": */
 645:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   if ((hdr->hwtype != PP_HTONS(HWTYPE_ETHERNET)) ||
 646:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       (hdr->hwlen != ETH_HWADDR_LEN) ||
 647:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       (hdr->protolen != sizeof(ip4_addr_t)) ||
 648:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       (hdr->proto != PP_HTONS(ETHTYPE_IP)))  {
 649:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE | LWIP_DBG_LEVEL_WARNING,
 650:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       ("etharp_input: packet dropped, wrong hw type, hwlen, proto, protolen or ethernet type (%"U16
 651:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       hdr->hwtype, (u16_t)hdr->hwlen, hdr->proto, (u16_t)hdr->protolen));
 652:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     ETHARP_STATS_INC(etharp.proterr);
 653:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     ETHARP_STATS_INC(etharp.drop);
 654:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     pbuf_free(p);
 655:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     return;
 656:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 657:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   ETHARP_STATS_INC(etharp.recv);
 658:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 659:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if LWIP_AUTOIP
 660:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* We have to check if a host already has configured our random
 661:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****    * created link local address and continuously check if there is
 662:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****    * a host with this IP-address so we can detect collisions */
 663:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   autoip_arp_reply(netif, hdr);
 664:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #endif /* LWIP_AUTOIP */
 665:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 666:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* Copy struct ip4_addr2 to aligned ip4_addr, to support compilers without
 667:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****    * structure packing (not using structure copy which breaks strict-aliasing rules). */
 668:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   IPADDR2_COPY(&sipaddr, &hdr->sipaddr);
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 22


 669:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   IPADDR2_COPY(&dipaddr, &hdr->dipaddr);
 670:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 671:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* this interface is not configured? */
 672:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   if (ip4_addr_isany_val(*netif_ip4_addr(netif))) {
 673:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     for_us = 0;
 674:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   } else {
 675:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* ARP packet directed to us? */
 676:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     for_us = (u8_t)ip4_addr_cmp(&dipaddr, netif_ip4_addr(netif));
 677:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 678:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 679:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* ARP message directed to us?
 680:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       -> add IP address in ARP cache; assume requester wants to talk to us,
 681:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****          can result in directly sending the queued packets for this host.
 682:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****      ARP message not directed to us?
 683:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       ->  update the source IP address in the cache, if present */
 684:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   etharp_update_arp_entry(netif, &sipaddr, &(hdr->shwaddr),
 685:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****                    for_us ? ETHARP_FLAG_TRY_HARD : ETHARP_FLAG_FIND_ONLY);
 686:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 687:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* now act on the message itself */
 688:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   switch (hdr->opcode) {
 689:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* ARP request? */
 690:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   case PP_HTONS(ARP_REQUEST):
 691:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* ARP request. If it asked for our address, we send out a
 692:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****      * reply. In any case, we time-stamp any existing ARP entry,
 693:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****      * and possibly send out an IP packet that was queued on it. */
 694:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 695:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     LWIP_DEBUGF (ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_input: incoming ARP request\n"));
 696:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* ARP request for our address? */
 697:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     if (for_us) {
 698:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 699:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_input: replying to ARP request for our IP
 700:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* Re-use pbuf to send ARP reply.
 701:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****          Since we are re-using an existing pbuf, we can't call etharp_raw since
 702:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****          that would allocate a new pbuf. */
 703:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       hdr->opcode = lwip_htons(ARP_REPLY);
 704:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 705:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       IPADDR2_COPY(&hdr->dipaddr, &hdr->sipaddr);
 706:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       IPADDR2_COPY(&hdr->sipaddr, netif_ip4_addr(netif));
 707:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 708:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       LWIP_ASSERT("netif->hwaddr_len must be the same as ETH_HWADDR_LEN for etharp!",
 709:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****                   (netif->hwaddr_len == ETH_HWADDR_LEN));
 710:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 711:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* hwtype, hwaddr_len, proto, protolen and the type in the ethernet header
 712:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****          are already correct, we tested that before */
 713:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 714:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       ETHADDR16_COPY(&hdr->dhwaddr, &hdr->shwaddr);
 715:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       ETHADDR16_COPY(&hdr->shwaddr, netif->hwaddr);
 716:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 717:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* return ARP reply */
 718:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if LWIP_AUTOIP
 719:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* If we are using Link-Local, all ARP packets that contain a Link-Local
 720:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****        * 'sender IP address' MUST be sent using link-layer broadcast instead of
 721:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****        * link-layer unicast. (See RFC3927 Section 2.5, last paragraph) */
 722:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       if (ip4_addr_islinklocal(netif_ip4_addr(netif))) {
 723:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         ethernet_output(netif, p, &hdr->shwaddr, &ethbroadcast, ETHTYPE_ARP);
 724:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       } else
 725:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #endif /* LWIP_AUTOIP */
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 23


 726:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       {
 727:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         ethernet_output(netif, p, &hdr->shwaddr, &hdr->dhwaddr, ETHTYPE_ARP);
 728:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       }
 729:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 730:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* we are not configured? */
 731:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     } else if (ip4_addr_isany_val(*netif_ip4_addr(netif))) {
 732:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* { for_us == 0 and netif->ip_addr.addr == 0 } */
 733:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_input: we are unconfigured, ARP request i
 734:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* request was not directed to us */
 735:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     } else {
 736:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* { for_us == 0 and netif->ip_addr.addr != 0 } */
 737:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_input: ARP request was not for us.\n"));
 738:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     }
 739:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     break;
 740:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   case PP_HTONS(ARP_REPLY):
 741:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* ARP reply. We already updated the ARP cache earlier. */
 742:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_input: incoming ARP reply\n"));
 743:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if (LWIP_DHCP && DHCP_DOES_ARP_CHECK)
 744:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* DHCP wants to know about ARP replies from any host with an
 745:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****      * IP address also offered to us by the DHCP server. We do not
 746:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****      * want to take a duplicate IP address on a single network.
 747:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****      * @todo How should we handle redundant (fail-over) interfaces? */
 748:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     dhcp_arp_reply(netif, &sipaddr);
 749:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #endif /* (LWIP_DHCP && DHCP_DOES_ARP_CHECK) */
 750:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     break;
 751:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   default:
 752:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_input: ARP unknown opcode type %"S16_F"\n",
 753:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     ETHARP_STATS_INC(etharp.err);
 754:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     break;
 755:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 756:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* free ARP packet */
 757:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   pbuf_free(p);
 758:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** }
 759:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 760:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** /** Just a small helper function that sends a pbuf to an ethernet address
 761:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * in the arp_table specified by the index 'arp_idx'.
 762:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  */
 763:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** static err_t
 764:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** etharp_output_to_arp_index(struct netif *netif, struct pbuf *q, u8_t arp_idx)
 765:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** {
 766:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   LWIP_ASSERT("arp_table[arp_idx].state >= ETHARP_STATE_STABLE",
 767:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****               arp_table[arp_idx].state >= ETHARP_STATE_STABLE);
 768:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* if arp table entry is about to expire: re-request it,
 769:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****      but only if its state is ETHARP_STATE_STABLE to prevent flooding the
 770:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****      network with ARP requests if this address is used frequently. */
 771:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   if (arp_table[arp_idx].state == ETHARP_STATE_STABLE) {
 772:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     if (arp_table[arp_idx].ctime >= ARP_AGE_REREQUEST_USED_BROADCAST) {
 773:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* issue a standard request using broadcast */
 774:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       if (etharp_request(netif, &arp_table[arp_idx].ipaddr) == ERR_OK) {
 775:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         arp_table[arp_idx].state = ETHARP_STATE_STABLE_REREQUESTING_1;
 776:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       }
 777:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     } else if (arp_table[arp_idx].ctime >= ARP_AGE_REREQUEST_USED_UNICAST) {
 778:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* issue a unicast request (for 15 seconds) to prevent unnecessary broadcast */
 779:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       if (etharp_request_dst(netif, &arp_table[arp_idx].ipaddr, &arp_table[arp_idx].ethaddr) == ERR
 780:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         arp_table[arp_idx].state = ETHARP_STATE_STABLE_REREQUESTING_1;
 781:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       }
 782:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     }
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 24


 783:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 784:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 785:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   return ethernet_output(netif, q, (struct eth_addr*)(netif->hwaddr), &arp_table[arp_idx].ethaddr, 
 786:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** }
 787:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 788:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** /**
 789:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * Resolve and fill-in Ethernet address header for outgoing IP packet.
 790:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
 791:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * For IP multicast and broadcast, corresponding Ethernet addresses
 792:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * are selected and the packet is transmitted on the link.
 793:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
 794:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * For unicast addresses, the packet is submitted to etharp_query(). In
 795:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * case the IP address is outside the local network, the IP address of
 796:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * the gateway is used.
 797:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
 798:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param netif The lwIP network interface which the IP packet will be sent on.
 799:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param q The pbuf(s) containing the IP packet to be sent.
 800:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param ipaddr The IP address of the packet destination.
 801:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
 802:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @return
 803:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * - ERR_RTE No route to destination (no gateway to external networks),
 804:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * or the return type of either etharp_query() or ethernet_output().
 805:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  */
 806:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** err_t
 807:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** etharp_output(struct netif *netif, struct pbuf *q, const ip4_addr_t *ipaddr)
 808:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** {
 809:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   const struct eth_addr *dest;
 810:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   struct eth_addr mcastaddr;
 811:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   const ip4_addr_t *dst_addr = ipaddr;
 812:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 813:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   LWIP_ASSERT("netif != NULL", netif != NULL);
 814:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   LWIP_ASSERT("q != NULL", q != NULL);
 815:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   LWIP_ASSERT("ipaddr != NULL", ipaddr != NULL);
 816:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 817:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* Determine on destination hardware address. Broadcasts and multicasts
 818:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****    * are special, other IP addresses are looked up in the ARP table. */
 819:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 820:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* broadcast destination IP address? */
 821:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   if (ip4_addr_isbroadcast(ipaddr, netif)) {
 822:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* broadcast on Ethernet also */
 823:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     dest = (const struct eth_addr *)&ethbroadcast;
 824:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* multicast destination IP address? */
 825:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   } else if (ip4_addr_ismulticast(ipaddr)) {
 826:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* Hash IP multicast address to MAC address.*/
 827:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     mcastaddr.addr[0] = LL_IP4_MULTICAST_ADDR_0;
 828:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     mcastaddr.addr[1] = LL_IP4_MULTICAST_ADDR_1;
 829:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     mcastaddr.addr[2] = LL_IP4_MULTICAST_ADDR_2;
 830:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     mcastaddr.addr[3] = ip4_addr2(ipaddr) & 0x7f;
 831:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     mcastaddr.addr[4] = ip4_addr3(ipaddr);
 832:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     mcastaddr.addr[5] = ip4_addr4(ipaddr);
 833:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* destination Ethernet address is multicast */
 834:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     dest = &mcastaddr;
 835:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* unicast destination IP address? */
 836:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   } else {
 837:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     s8_t i;
 838:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* outside local network? if so, this can neither be a global broadcast nor
 839:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****        a subnet broadcast. */
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 25


 840:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     if (!ip4_addr_netcmp(ipaddr, netif_ip4_addr(netif), netif_ip4_netmask(netif)) &&
 841:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         !ip4_addr_islinklocal(ipaddr)) {
 842:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if LWIP_AUTOIP
 843:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       struct ip_hdr *iphdr = (struct ip_hdr*)(size_t)q->payload;
 844:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* According to RFC 3297, chapter 2.6.2 (Forwarding Rules), a packet with
 845:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****          a link-local source address must always be "directly to its destination
 846:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****          on the same physical link. The host MUST NOT send the packet to any
 847:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****          router for forwarding". */
 848:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       if (!ip4_addr_islinklocal(&iphdr->src))
 849:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #endif /* LWIP_AUTOIP */
 850:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       {
 851:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #ifdef LWIP_HOOK_ETHARP_GET_GW
 852:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         /* For advanced routing, a single default gateway might not be enough, so get
 853:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****            the IP address of the gateway to handle the current destination address. */
 854:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         dst_addr = LWIP_HOOK_ETHARP_GET_GW(netif, ipaddr);
 855:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         if (dst_addr == NULL)
 856:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #endif /* LWIP_HOOK_ETHARP_GET_GW */
 857:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         {
 858:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           /* interface has default gateway? */
 859:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           if (!ip4_addr_isany_val(*netif_ip4_gw(netif))) {
 860:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****             /* send to hardware address of default gateway IP address */
 861:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****             dst_addr = netif_ip4_gw(netif);
 862:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           /* no default gateway available */
 863:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           } else {
 864:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****             /* no route to destination error (default gateway missing) */
 865:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****             return ERR_RTE;
 866:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           }
 867:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         }
 868:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       }
 869:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     }
 870:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if LWIP_NETIF_HWADDRHINT
 871:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     if (netif->addr_hint != NULL) {
 872:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* per-pcb cached entry was given */
 873:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       u8_t etharp_cached_entry = *(netif->addr_hint);
 874:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       if (etharp_cached_entry < ARP_TABLE_SIZE) {
 875:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #endif /* LWIP_NETIF_HWADDRHINT */
 876:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         if ((arp_table[etharp_cached_entry].state >= ETHARP_STATE_STABLE) &&
 877:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if ETHARP_TABLE_MATCH_NETIF
 878:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****             (arp_table[etharp_cached_entry].netif == netif) &&
 879:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #endif
 880:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****             (ip4_addr_cmp(dst_addr, &arp_table[etharp_cached_entry].ipaddr))) {
 881:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           /* the per-pcb-cached entry is stable and the right one! */
 882:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           ETHARP_STATS_INC(etharp.cachehit);
 883:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           return etharp_output_to_arp_index(netif, q, etharp_cached_entry);
 884:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         }
 885:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if LWIP_NETIF_HWADDRHINT
 886:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       }
 887:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     }
 888:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #endif /* LWIP_NETIF_HWADDRHINT */
 889:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 890:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* find stable entry: do this here since this is a critical path for
 891:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****        throughput and etharp_find_entry() is kind of slow */
 892:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     for (i = 0; i < ARP_TABLE_SIZE; i++) {
 893:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       if ((arp_table[i].state >= ETHARP_STATE_STABLE) &&
 894:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if ETHARP_TABLE_MATCH_NETIF
 895:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           (arp_table[i].netif == netif) &&
 896:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #endif
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 26


 897:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           (ip4_addr_cmp(dst_addr, &arp_table[i].ipaddr))) {
 898:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         /* found an existing, stable entry */
 899:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         ETHARP_SET_HINT(netif, i);
 900:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         return etharp_output_to_arp_index(netif, q, i);
 901:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       }
 902:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     }
 903:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* no stable entry found, use the (slower) query function:
 904:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****        queue on destination Ethernet address belonging to ipaddr */
 905:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     return etharp_query(netif, dst_addr, q);
 906:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 907:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 908:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* continuation for multicast/broadcast destinations */
 909:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* obtain source Ethernet address of the given interface */
 910:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* send packet directly on the link */
 911:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   return ethernet_output(netif, q, (struct eth_addr*)(netif->hwaddr), dest, ETHTYPE_IP);
 912:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** }
 913:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 914:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** /**
 915:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * Send an ARP request for the given IP address and/or queue a packet.
 916:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
 917:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * If the IP address was not yet in the cache, a pending ARP cache entry
 918:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * is added and an ARP request is sent for the given address. The packet
 919:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * is queued on this entry.
 920:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
 921:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * If the IP address was already pending in the cache, a new ARP request
 922:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * is sent for the given address. The packet is queued on this entry.
 923:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
 924:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * If the IP address was already stable in the cache, and a packet is
 925:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * given, it is directly sent and no ARP request is sent out.
 926:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
 927:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * If the IP address was already stable in the cache, and no packet is
 928:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * given, an ARP request is sent out.
 929:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
 930:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param netif The lwIP network interface on which ipaddr
 931:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * must be queried for.
 932:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param ipaddr The IP address to be resolved.
 933:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param q If non-NULL, a pbuf that must be delivered to the IP address.
 934:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * q is not freed by this function.
 935:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
 936:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @note q must only be ONE packet, not a packet queue!
 937:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
 938:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @return
 939:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * - ERR_BUF Could not make room for Ethernet header.
 940:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * - ERR_MEM Hardware address unknown, and no more ARP entries available
 941:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *   to query for address or queue the packet.
 942:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * - ERR_MEM Could not queue packet due to memory shortage.
 943:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * - ERR_RTE No route to destination (no gateway to external networks).
 944:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * - ERR_ARG Non-unicast address given, those will not appear in ARP cache.
 945:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
 946:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  */
 947:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** err_t
 948:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** etharp_query(struct netif *netif, const ip4_addr_t *ipaddr, struct pbuf *q)
 949:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** {
 950:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   struct eth_addr * srcaddr = (struct eth_addr *)netif->hwaddr;
 951:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   err_t result = ERR_MEM;
 952:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   int is_new_entry = 0;
 953:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   s8_t i; /* ARP entry index */
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 27


 954:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 955:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* non-unicast address? */
 956:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   if (ip4_addr_isbroadcast(ipaddr, netif) ||
 957:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       ip4_addr_ismulticast(ipaddr) ||
 958:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       ip4_addr_isany(ipaddr)) {
 959:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_query: will not add non-unicast IP address 
 960:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     return ERR_ARG;
 961:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 962:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 963:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* find entry in ARP cache, ask to create entry if queueing packet */
 964:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   i = etharp_find_entry(ipaddr, ETHARP_FLAG_TRY_HARD, netif);
 965:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 966:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* could not find or create entry? */
 967:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   if (i < 0) {
 968:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_query: could not create ARP entry\n"));
 969:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     if (q) {
 970:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_query: packet dropped\n"));
 971:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       ETHARP_STATS_INC(etharp.memerr);
 972:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     }
 973:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     return (err_t)i;
 974:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 975:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 976:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* mark a fresh entry as pending (we just sent a request) */
 977:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   if (arp_table[i].state == ETHARP_STATE_EMPTY) {
 978:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     is_new_entry = 1;
 979:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     arp_table[i].state = ETHARP_STATE_PENDING;
 980:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* record network interface for re-sending arp request in etharp_tmr */
 981:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     arp_table[i].netif = netif;
 982:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 983:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 984:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* { i is either a STABLE or (new or existing) PENDING entry } */
 985:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   LWIP_ASSERT("arp_table[i].state == PENDING or STABLE",
 986:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   ((arp_table[i].state == ETHARP_STATE_PENDING) ||
 987:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****    (arp_table[i].state >= ETHARP_STATE_STABLE)));
 988:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 989:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* do we have a new entry? or an implicit query request? */
 990:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   if (is_new_entry || (q == NULL)) {
 991:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* try to resolve it; send out ARP request */
 992:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     result = etharp_request(netif, ipaddr);
 993:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     if (result != ERR_OK) {
 994:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* ARP request couldn't be sent */
 995:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* We don't re-send arp request in etharp_tmr, but we still queue packets,
 996:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****          since this failure could be temporary, and the next packet calling
 997:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****          etharp_query again could lead to sending the queued packets. */
 998:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     }
 999:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     if (q == NULL) {
1000:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       return result;
1001:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     }
1002:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
1003:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
1004:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* packet given? */
1005:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   LWIP_ASSERT("q != NULL", q != NULL);
1006:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* stable entry? */
1007:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   if (arp_table[i].state >= ETHARP_STATE_STABLE) {
1008:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* we have a valid IP->Ethernet address mapping */
1009:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     ETHARP_SET_HINT(netif, i);
1010:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* send the packet */
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 28


1011:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     result = ethernet_output(netif, q, srcaddr, &(arp_table[i].ethaddr), ETHTYPE_IP);
1012:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* pending entry? (either just created or already pending */
1013:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   } else if (arp_table[i].state == ETHARP_STATE_PENDING) {
1014:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* entry is still pending, queue the given packet 'q' */
1015:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     struct pbuf *p;
1016:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     int copy_needed = 0;
1017:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* IF q includes a PBUF_REF, PBUF_POOL or PBUF_RAM, we have no choice but
1018:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****      * to copy the whole queue into a new PBUF_RAM (see bug #11400)
1019:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****      * PBUF_ROMs can be left as they are, since ROM must not get changed. */
1020:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     p = q;
1021:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     while (p) {
1022:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       LWIP_ASSERT("no packet queues allowed!", (p->len != p->tot_len) || (p->next == 0));
1023:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       if (p->type != PBUF_ROM) {
1024:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         copy_needed = 1;
1025:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         break;
1026:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       }
1027:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       p = p->next;
1028:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     }
1029:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     if (copy_needed) {
1030:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* copy the whole packet into new pbufs */
1031:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       p = pbuf_alloc(PBUF_LINK, p->tot_len, PBUF_RAM);
1032:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       if (p != NULL) {
1033:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         if (pbuf_copy(p, q) != ERR_OK) {
1034:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           pbuf_free(p);
1035:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           p = NULL;
1036:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         }
1037:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       }
1038:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     } else {
1039:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* referencing the old pbuf is enough */
1040:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       p = q;
1041:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       pbuf_ref(p);
1042:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     }
1043:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* packet could be taken over? */
1044:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     if (p != NULL) {
1045:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* queue packet ... */
1046:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if ARP_QUEUEING
1047:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       struct etharp_q_entry *new_entry;
1048:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* allocate a new arp queue entry */
1049:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       new_entry = (struct etharp_q_entry *)memp_malloc(MEMP_ARP_QUEUE);
1050:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       if (new_entry != NULL) {
1051:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         unsigned int qlen = 0;
1052:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         new_entry->next = 0;
1053:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         new_entry->p = p;
1054:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         if (arp_table[i].q != NULL) {
1055:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           /* queue was already existent, append the new entry to the end */
1056:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           struct etharp_q_entry *r;
1057:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           r = arp_table[i].q;
1058:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           qlen++;
1059:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           while (r->next != NULL) {
1060:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****             r = r->next;
1061:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****             qlen++;
1062:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           }
1063:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           r->next = new_entry;
1064:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         } else {
1065:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           /* queue did not exist, first item in queue */
1066:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           arp_table[i].q = new_entry;
1067:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         }
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 29


1068:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if ARP_QUEUE_LEN
1069:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         if (qlen >= ARP_QUEUE_LEN) {
1070:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           struct etharp_q_entry *old;
1071:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           old = arp_table[i].q;
1072:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           arp_table[i].q = arp_table[i].q->next;
1073:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           pbuf_free(old->p);
1074:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           memp_free(MEMP_ARP_QUEUE, old);
1075:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         }
1076:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #endif
1077:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_query: queued packet %p on ARP entry %"
1078:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         result = ERR_OK;
1079:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       } else {
1080:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         /* the pool MEMP_ARP_QUEUE is empty */
1081:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         pbuf_free(p);
1082:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_query: could not queue a copy of PBUF_R
1083:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         result = ERR_MEM;
1084:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       }
1085:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #else /* ARP_QUEUEING */
1086:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* always queue one packet per ARP request only, freeing a previously queued packet */
1087:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       if (arp_table[i].q != NULL) {
1088:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_query: dropped previously queued packet
1089:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         pbuf_free(arp_table[i].q);
1090:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       }
1091:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       arp_table[i].q = p;
1092:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       result = ERR_OK;
1093:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_query: queued packet %p on ARP entry %"S1
1094:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #endif /* ARP_QUEUEING */
1095:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     } else {
1096:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       ETHARP_STATS_INC(etharp.memerr);
1097:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_query: could not queue a copy of PBUF_REF
1098:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       result = ERR_MEM;
1099:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     }
1100:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
1101:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   return result;
1102:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** }
1103:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
1104:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** /**
1105:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * Send a raw ARP packet (opcode and all addresses can be modified)
1106:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
1107:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param netif the lwip network interface on which to send the ARP packet
1108:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param ethsrc_addr the source MAC address for the ethernet header
1109:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param ethdst_addr the destination MAC address for the ethernet header
1110:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param hwsrc_addr the source MAC address for the ARP protocol header
1111:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param ipsrc_addr the source IP address for the ARP protocol header
1112:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param hwdst_addr the destination MAC address for the ARP protocol header
1113:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param ipdst_addr the destination IP address for the ARP protocol header
1114:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param opcode the type of the ARP packet
1115:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @return ERR_OK if the ARP packet has been sent
1116:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *         ERR_MEM if the ARP packet couldn't be allocated
1117:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *         any other err_t on failure
1118:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  */
1119:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** static err_t
1120:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** etharp_raw(struct netif *netif, const struct eth_addr *ethsrc_addr,
1121:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****            const struct eth_addr *ethdst_addr,
1122:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****            const struct eth_addr *hwsrc_addr, const ip4_addr_t *ipsrc_addr,
1123:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****            const struct eth_addr *hwdst_addr, const ip4_addr_t *ipdst_addr,
1124:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****            const u16_t opcode)
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 30


1125:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** {
 505              		.loc 1 1125 0
 506              		.cfi_startproc
 507              		@ args = 16, pretend = 0, frame = 0
 508              		@ frame_needed = 0, uses_anonymous_args = 0
 509              	.LVL61:
 510 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 511              	.LCFI7:
 512              		.cfi_def_cfa_offset 32
 513              		.cfi_offset 4, -32
 514              		.cfi_offset 5, -28
 515              		.cfi_offset 6, -24
 516              		.cfi_offset 7, -20
 517              		.cfi_offset 8, -16
 518              		.cfi_offset 9, -12
 519              		.cfi_offset 10, -8
 520              		.cfi_offset 14, -4
 521 0004 82B0     		sub	sp, sp, #8
 522              	.LCFI8:
 523              		.cfi_def_cfa_offset 40
 524 0006 8046     		mov	r8, r0
 525 0008 8946     		mov	r9, r1
 526 000a 9246     		mov	r10, r2
 527 000c 1F46     		mov	r7, r3
 528 000e 0B9D     		ldr	r5, [sp, #44]
 529              	.LVL62:
1126:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   struct pbuf *p;
1127:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   err_t result = ERR_OK;
1128:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   struct etharp_hdr *hdr;
1129:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
1130:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   LWIP_ASSERT("netif != NULL", netif != NULL);
1131:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
1132:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* allocate a pbuf for the outgoing ARP request packet */
1133:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   p = pbuf_alloc(PBUF_LINK, SIZEOF_ETHARP_HDR, PBUF_RAM);
 530              		.loc 1 1133 0
 531 0010 0022     		movs	r2, #0
 532              	.LVL63:
 533 0012 1C21     		movs	r1, #28
 534              	.LVL64:
 535 0014 0220     		movs	r0, #2
 536              	.LVL65:
 537 0016 FFF7FEFF 		bl	pbuf_alloc
 538              	.LVL66:
1134:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* could allocate a pbuf for an ARP request? */
1135:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   if (p == NULL) {
 539              		.loc 1 1135 0
 540 001a 88B3     		cbz	r0, .L47
 541 001c 0646     		mov	r6, r0
1136:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE | LWIP_DBG_LEVEL_SERIOUS,
1137:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       ("etharp_raw: could not allocate pbuf for ARP request.\n"));
1138:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     ETHARP_STATS_INC(etharp.memerr);
1139:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     return ERR_MEM;
1140:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
1141:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   LWIP_ASSERT("check that first pbuf can hold struct etharp_hdr",
1142:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****               (p->len >= SIZEOF_ETHARP_HDR));
1143:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
1144:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   hdr = (struct etharp_hdr *)p->payload;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 31


 542              		.loc 1 1144 0
 543 001e 4468     		ldr	r4, [r0, #4]
 544              	.LVL67:
1145:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_raw: sending raw ARP packet.\n"));
1146:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   hdr->opcode = lwip_htons(opcode);
 545              		.loc 1 1146 0
 546 0020 BDF83400 		ldrh	r0, [sp, #52]
 547              	.LVL68:
 548 0024 FFF7FEFF 		bl	lwip_htons
 549              	.LVL69:
 550 0028 E080     		strh	r0, [r4, #6]	@ unaligned
1147:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
1148:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   LWIP_ASSERT("netif->hwaddr_len must be the same as ETH_HWADDR_LEN for etharp!",
1149:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****               (netif->hwaddr_len == ETH_HWADDR_LEN));
1150:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
1151:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* Write the ARP MAC-Addresses */
1152:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   ETHADDR16_COPY(&hdr->shwaddr, hwsrc_addr);
 551              		.loc 1 1152 0
 552 002a 3B68     		ldr	r3, [r7]	@ unaligned
 553 002c A360     		str	r3, [r4, #8]	@ unaligned
 554 002e BB88     		ldrh	r3, [r7, #4]	@ unaligned
 555 0030 A381     		strh	r3, [r4, #12]	@ unaligned
1153:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   ETHADDR16_COPY(&hdr->dhwaddr, hwdst_addr);
 556              		.loc 1 1153 0
 557 0032 2B68     		ldr	r3, [r5]	@ unaligned
 558 0034 C4F81230 		str	r3, [r4, #18]	@ unaligned
 559 0038 AB88     		ldrh	r3, [r5, #4]	@ unaligned
 560 003a E382     		strh	r3, [r4, #22]	@ unaligned
1154:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* Copy struct ip4_addr2 to aligned ip4_addr, to support compilers without
1155:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****    * structure packing. */
1156:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   IPADDR2_COPY(&hdr->sipaddr, ipsrc_addr);
 561              		.loc 1 1156 0
 562 003c 0A9B     		ldr	r3, [sp, #40]
 563 003e 1B68     		ldr	r3, [r3]	@ unaligned
 564 0040 C4F80E30 		str	r3, [r4, #14]	@ unaligned
1157:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   IPADDR2_COPY(&hdr->dipaddr, ipdst_addr);
 565              		.loc 1 1157 0
 566 0044 0C9B     		ldr	r3, [sp, #48]
 567 0046 1B68     		ldr	r3, [r3]	@ unaligned
 568 0048 A361     		str	r3, [r4, #24]	@ unaligned
1158:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
1159:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   hdr->hwtype = PP_HTONS(HWTYPE_ETHERNET);
 569              		.loc 1 1159 0
 570 004a 0025     		movs	r5, #0
 571 004c 2570     		strb	r5, [r4]
 572 004e 0123     		movs	r3, #1
 573 0050 6370     		strb	r3, [r4, #1]
1160:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   hdr->proto = PP_HTONS(ETHTYPE_IP);
 574              		.loc 1 1160 0
 575 0052 0823     		movs	r3, #8
 576 0054 A370     		strb	r3, [r4, #2]
 577 0056 E570     		strb	r5, [r4, #3]
1161:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* set hwlen and protolen */
1162:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   hdr->hwlen = ETH_HWADDR_LEN;
 578              		.loc 1 1162 0
 579 0058 0623     		movs	r3, #6
 580 005a 2371     		strb	r3, [r4, #4]
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 32


1163:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   hdr->protolen = sizeof(ip4_addr_t);
 581              		.loc 1 1163 0
 582 005c 0423     		movs	r3, #4
 583 005e 6371     		strb	r3, [r4, #5]
1164:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
1165:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* send ARP query */
1166:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if LWIP_AUTOIP
1167:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* If we are using Link-Local, all ARP packets that contain a Link-Local
1168:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****    * 'sender IP address' MUST be sent using link-layer broadcast instead of
1169:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****    * link-layer unicast. (See RFC3927 Section 2.5, last paragraph) */
1170:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   if(ip4_addr_islinklocal(ipsrc_addr)) {
1171:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     ethernet_output(netif, p, ethsrc_addr, &ethbroadcast, ETHTYPE_ARP);
1172:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   } else
1173:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #endif /* LWIP_AUTOIP */
1174:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   {
1175:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     ethernet_output(netif, p, ethsrc_addr, ethdst_addr, ETHTYPE_ARP);
 584              		.loc 1 1175 0
 585 0060 40F60603 		movw	r3, #2054
 586 0064 0093     		str	r3, [sp]
 587 0066 5346     		mov	r3, r10
 588 0068 4A46     		mov	r2, r9
 589 006a 3146     		mov	r1, r6
 590 006c 4046     		mov	r0, r8
 591 006e FFF7FEFF 		bl	ethernet_output
 592              	.LVL70:
1176:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
1177:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
1178:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   ETHARP_STATS_INC(etharp.xmit);
1179:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* free ARP query packet */
1180:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   pbuf_free(p);
 593              		.loc 1 1180 0
 594 0072 3046     		mov	r0, r6
 595 0074 FFF7FEFF 		bl	pbuf_free
 596              	.LVL71:
1181:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   p = NULL;
1182:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* could not allocate pbuf for ARP request */
1183:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
1184:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   return result;
 597              		.loc 1 1184 0
 598 0078 2846     		mov	r0, r5
 599              	.LVL72:
 600              	.L46:
1185:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** }
 601              		.loc 1 1185 0
 602 007a 02B0     		add	sp, sp, #8
 603              	.LCFI9:
 604              		.cfi_remember_state
 605              		.cfi_def_cfa_offset 32
 606              		@ sp needed
 607 007c BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 608              	.LVL73:
 609              	.L47:
 610              	.LCFI10:
 611              		.cfi_restore_state
1139:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 612              		.loc 1 1139 0
 613 0080 4FF0FF30 		mov	r0, #-1
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 33


 614              	.LVL74:
 615 0084 F9E7     		b	.L46
 616              		.cfi_endproc
 617              	.LFE147:
 619              		.section	.text.etharp_request_dst,"ax",%progbits
 620              		.align	1
 621              		.syntax unified
 622              		.thumb
 623              		.thumb_func
 624              		.fpu fpv5-sp-d16
 626              	etharp_request_dst:
 627              	.LFB148:
1186:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
1187:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** /**
1188:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * Send an ARP request packet asking for ipaddr to a specific eth address.
1189:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * Used to send unicast request to refresh the ARP table just before an entry
1190:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * times out
1191:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
1192:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param netif the lwip network interface on which to send the request
1193:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param ipaddr the IP address for which to ask
1194:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param hw_dst_addr the ethernet address to send this packet to
1195:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @return ERR_OK if the request has been sent
1196:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *         ERR_MEM if the ARP packet couldn't be allocated
1197:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *         any other err_t on failure
1198:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  */
1199:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** static err_t
1200:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** etharp_request_dst(struct netif *netif, const ip4_addr_t *ipaddr, const struct eth_addr* hw_dst_add
1201:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** {
 628              		.loc 1 1201 0
 629              		.cfi_startproc
 630              		@ args = 0, pretend = 0, frame = 0
 631              		@ frame_needed = 0, uses_anonymous_args = 0
 632              	.LVL75:
 633 0000 30B5     		push	{r4, r5, lr}
 634              	.LCFI11:
 635              		.cfi_def_cfa_offset 12
 636              		.cfi_offset 4, -12
 637              		.cfi_offset 5, -8
 638              		.cfi_offset 14, -4
 639 0002 85B0     		sub	sp, sp, #20
 640              	.LCFI12:
 641              		.cfi_def_cfa_offset 32
 642 0004 0346     		mov	r3, r0
1202:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   return etharp_raw(netif, (struct eth_addr *)netif->hwaddr, hw_dst_addr,
 643              		.loc 1 1202 0
 644 0006 00F12904 		add	r4, r0, #41
1203:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****                     (struct eth_addr *)netif->hwaddr, netif_ip4_addr(netif), &ethzero,
 645              		.loc 1 1203 0
 646 000a 0433     		adds	r3, r3, #4
1202:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   return etharp_raw(netif, (struct eth_addr *)netif->hwaddr, hw_dst_addr,
 647              		.loc 1 1202 0
 648 000c 0125     		movs	r5, #1
 649 000e 0395     		str	r5, [sp, #12]
 650 0010 0291     		str	r1, [sp, #8]
 651 0012 0449     		ldr	r1, .L51
 652              	.LVL76:
 653 0014 0191     		str	r1, [sp, #4]
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 34


 654 0016 0093     		str	r3, [sp]
 655 0018 2346     		mov	r3, r4
 656 001a 2146     		mov	r1, r4
 657 001c FFF7FEFF 		bl	etharp_raw
 658              	.LVL77:
1204:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****                     ipaddr, ARP_REQUEST);
1205:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** }
 659              		.loc 1 1205 0
 660 0020 05B0     		add	sp, sp, #20
 661              	.LCFI13:
 662              		.cfi_def_cfa_offset 12
 663              		@ sp needed
 664 0022 30BD     		pop	{r4, r5, pc}
 665              	.LVL78:
 666              	.L52:
 667              		.align	2
 668              	.L51:
 669 0024 00000000 		.word	ethzero
 670              		.cfi_endproc
 671              	.LFE148:
 673              		.section	.text.etharp_cleanup_netif,"ax",%progbits
 674              		.align	1
 675              		.global	etharp_cleanup_netif
 676              		.syntax unified
 677              		.thumb
 678              		.thumb_func
 679              		.fpu fpv5-sp-d16
 681              	etharp_cleanup_netif:
 682              	.LFB140:
 552:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   u8_t i;
 683              		.loc 1 552 0
 684              		.cfi_startproc
 685              		@ args = 0, pretend = 0, frame = 0
 686              		@ frame_needed = 0, uses_anonymous_args = 0
 687              	.LVL79:
 688 0000 38B5     		push	{r3, r4, r5, lr}
 689              	.LCFI14:
 690              		.cfi_def_cfa_offset 16
 691              		.cfi_offset 3, -16
 692              		.cfi_offset 4, -12
 693              		.cfi_offset 5, -8
 694              		.cfi_offset 14, -4
 695 0002 0546     		mov	r5, r0
 696              	.LVL80:
 555:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     u8_t state = arp_table[i].state;
 697              		.loc 1 555 0
 698 0004 0024     		movs	r4, #0
 699 0006 01E0     		b	.L54
 700              	.LVL81:
 701              	.L55:
 555:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     u8_t state = arp_table[i].state;
 702              		.loc 1 555 0 is_stmt 0 discriminator 2
 703 0008 0134     		adds	r4, r4, #1
 704              	.LVL82:
 705 000a E4B2     		uxtb	r4, r4
 706              	.LVL83:
 707              	.L54:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 35


 555:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     u8_t state = arp_table[i].state;
 708              		.loc 1 555 0 discriminator 1
 709 000c 092C     		cmp	r4, #9
 710 000e 10D8     		bhi	.L58
 711              	.LBB5:
 556:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     if ((state != ETHARP_STATE_EMPTY) && (arp_table[i].netif == netif)) {
 712              		.loc 1 556 0 is_stmt 1
 713 0010 2046     		mov	r0, r4
 714 0012 04EB4403 		add	r3, r4, r4, lsl #1
 715 0016 DA00     		lsls	r2, r3, #3
 716 0018 064B     		ldr	r3, .L59
 717 001a 1344     		add	r3, r3, r2
 718 001c 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 719              	.LVL84:
 557:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       etharp_free_entry(i);
 720              		.loc 1 557 0
 721 001e 002B     		cmp	r3, #0
 722 0020 F2D0     		beq	.L55
 557:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       etharp_free_entry(i);
 723              		.loc 1 557 0 is_stmt 0 discriminator 1
 724 0022 044B     		ldr	r3, .L59
 725              	.LVL85:
 726 0024 1344     		add	r3, r3, r2
 727              	.LVL86:
 728 0026 9B68     		ldr	r3, [r3, #8]
 729              	.LVL87:
 730 0028 AB42     		cmp	r3, r5
 731 002a EDD1     		bne	.L55
 558:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     }
 732              		.loc 1 558 0 is_stmt 1
 733 002c FFF7FEFF 		bl	etharp_free_entry
 734              	.LVL88:
 735 0030 EAE7     		b	.L55
 736              	.L58:
 737              	.LBE5:
 561:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 738              		.loc 1 561 0
 739 0032 38BD     		pop	{r3, r4, r5, pc}
 740              	.LVL89:
 741              	.L60:
 742              		.align	2
 743              	.L59:
 744 0034 00000000 		.word	.LANCHOR0
 745              		.cfi_endproc
 746              	.LFE140:
 748              		.section	.text.etharp_find_addr,"ax",%progbits
 749              		.align	1
 750              		.global	etharp_find_addr
 751              		.syntax unified
 752              		.thumb
 753              		.thumb_func
 754              		.fpu fpv5-sp-d16
 756              	etharp_find_addr:
 757              	.LFB141:
 577:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   s8_t i;
 758              		.loc 1 577 0
 759              		.cfi_startproc
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 36


 760              		@ args = 0, pretend = 0, frame = 0
 761              		@ frame_needed = 0, uses_anonymous_args = 0
 762              	.LVL90:
 763 0000 70B5     		push	{r4, r5, r6, lr}
 764              	.LCFI15:
 765              		.cfi_def_cfa_offset 16
 766              		.cfi_offset 4, -16
 767              		.cfi_offset 5, -12
 768              		.cfi_offset 6, -8
 769              		.cfi_offset 14, -4
 770 0002 0E46     		mov	r6, r1
 771 0004 1546     		mov	r5, r2
 772 0006 1C46     		mov	r4, r3
 585:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   if ((i >= 0) && (arp_table[i].state >= ETHARP_STATE_STABLE)) {
 773              		.loc 1 585 0
 774 0008 0246     		mov	r2, r0
 775              	.LVL91:
 776 000a 0221     		movs	r1, #2
 777              	.LVL92:
 778 000c 3046     		mov	r0, r6
 779              	.LVL93:
 780 000e FFF7FEFF 		bl	etharp_find_entry
 781              	.LVL94:
 586:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       *eth_ret = &arp_table[i].ethaddr;
 782              		.loc 1 586 0
 783 0012 0028     		cmp	r0, #0
 784              	.LVL95:
 785 0014 14DB     		blt	.L63
 586:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       *eth_ret = &arp_table[i].ethaddr;
 786              		.loc 1 586 0 is_stmt 0 discriminator 1
 787 0016 00EB4003 		add	r3, r0, r0, lsl #1
 788 001a DA00     		lsls	r2, r3, #3
 789 001c 0B4B     		ldr	r3, .L66
 790 001e 1344     		add	r3, r3, r2
 791 0020 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 792 0022 012B     		cmp	r3, #1
 793 0024 0FD9     		bls	.L64
 587:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       *ip_ret = &arp_table[i].ipaddr;
 794              		.loc 1 587 0 is_stmt 1
 795 0026 094A     		ldr	r2, .L66
 796 0028 4100     		lsls	r1, r0, #1
 797 002a 0E18     		adds	r6, r1, r0
 798              	.LVL96:
 799 002c F300     		lsls	r3, r6, #3
 800 002e 1E46     		mov	r6, r3
 801 0030 0833     		adds	r3, r3, #8
 802 0032 1344     		add	r3, r3, r2
 803 0034 0433     		adds	r3, r3, #4
 804 0036 2B60     		str	r3, [r5]
 588:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       return i;
 805              		.loc 1 588 0
 806 0038 3244     		add	r2, r2, r6
 807 003a 0432     		adds	r2, r2, #4
 808 003c 2260     		str	r2, [r4]
 589:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 809              		.loc 1 589 0
 810 003e 70BD     		pop	{r4, r5, r6, pc}
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 37


 811              	.LVL97:
 812              	.L63:
 591:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** }
 813              		.loc 1 591 0
 814 0040 4FF0FF30 		mov	r0, #-1
 815 0044 70BD     		pop	{r4, r5, r6, pc}
 816              	.LVL98:
 817              	.L64:
 818 0046 4FF0FF30 		mov	r0, #-1
 592:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 819              		.loc 1 592 0
 820 004a 70BD     		pop	{r4, r5, r6, pc}
 821              	.LVL99:
 822              	.L67:
 823              		.align	2
 824              	.L66:
 825 004c 00000000 		.word	.LANCHOR0
 826              		.cfi_endproc
 827              	.LFE141:
 829              		.section	.text.etharp_get_entry,"ax",%progbits
 830              		.align	1
 831              		.global	etharp_get_entry
 832              		.syntax unified
 833              		.thumb
 834              		.thumb_func
 835              		.fpu fpv5-sp-d16
 837              	etharp_get_entry:
 838              	.LFB142:
 605:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   LWIP_ASSERT("ipaddr != NULL", ipaddr != NULL);
 839              		.loc 1 605 0
 840              		.cfi_startproc
 841              		@ args = 0, pretend = 0, frame = 0
 842              		@ frame_needed = 0, uses_anonymous_args = 0
 843              		@ link register save eliminated.
 844              	.LVL100:
 610:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     *ipaddr  = &arp_table[i].ipaddr;
 845              		.loc 1 610 0
 846 0000 0928     		cmp	r0, #9
 847 0002 1AD8     		bhi	.L70
 605:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   LWIP_ASSERT("ipaddr != NULL", ipaddr != NULL);
 848              		.loc 1 605 0 discriminator 1
 849 0004 F0B4     		push	{r4, r5, r6, r7}
 850              	.LCFI16:
 851              		.cfi_def_cfa_offset 16
 852              		.cfi_offset 4, -16
 853              		.cfi_offset 5, -12
 854              		.cfi_offset 6, -8
 855              		.cfi_offset 7, -4
 610:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     *ipaddr  = &arp_table[i].ipaddr;
 856              		.loc 1 610 0 discriminator 1
 857 0006 00EB4004 		add	r4, r0, r0, lsl #1
 858 000a E500     		lsls	r5, r4, #3
 859 000c 0D4C     		ldr	r4, .L76
 860 000e 2C44     		add	r4, r4, r5
 861 0010 247D     		ldrb	r4, [r4, #20]	@ zero_extendqisi2
 862 0012 012C     		cmp	r4, #1
 863 0014 13D9     		bls	.L71
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 38


 611:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     *netif   = arp_table[i].netif;
 864              		.loc 1 611 0
 865 0016 0B4C     		ldr	r4, .L76
 866 0018 4500     		lsls	r5, r0, #1
 867 001a 2F18     		adds	r7, r5, r0
 868 001c FE00     		lsls	r6, r7, #3
 869 001e 2644     		add	r6, r6, r4
 870 0020 371D     		adds	r7, r6, #4
 871 0022 0F60     		str	r7, [r1]
 612:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     *eth_ret = &arp_table[i].ethaddr;
 872              		.loc 1 612 0
 873 0024 B168     		ldr	r1, [r6, #8]
 874              	.LVL101:
 875 0026 1160     		str	r1, [r2]
 613:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     return 1;
 876              		.loc 1 613 0
 877 0028 2844     		add	r0, r0, r5
 878              	.LVL102:
 879 002a C200     		lsls	r2, r0, #3
 880              	.LVL103:
 881 002c 0832     		adds	r2, r2, #8
 882 002e 1444     		add	r4, r4, r2
 883 0030 0434     		adds	r4, r4, #4
 884 0032 1C60     		str	r4, [r3]
 614:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   } else {
 885              		.loc 1 614 0
 886 0034 0120     		movs	r0, #1
 887              	.L69:
 618:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 888              		.loc 1 618 0
 889 0036 F0BC     		pop	{r4, r5, r6, r7}
 890              	.LCFI17:
 891              		.cfi_restore 7
 892              		.cfi_restore 6
 893              		.cfi_restore 5
 894              		.cfi_restore 4
 895              		.cfi_def_cfa_offset 0
 896 0038 7047     		bx	lr
 897              	.LVL104:
 898              	.L70:
 616:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 899              		.loc 1 616 0
 900 003a 0020     		movs	r0, #0
 901              	.LVL105:
 902 003c 7047     		bx	lr
 903              	.LVL106:
 904              	.L71:
 905              	.LCFI18:
 906              		.cfi_def_cfa_offset 16
 907              		.cfi_offset 4, -16
 908              		.cfi_offset 5, -12
 909              		.cfi_offset 6, -8
 910              		.cfi_offset 7, -4
 911 003e 0020     		movs	r0, #0
 912              	.LVL107:
 913 0040 F9E7     		b	.L69
 914              	.L77:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 39


 915 0042 00BF     		.align	2
 916              	.L76:
 917 0044 00000000 		.word	.LANCHOR0
 918              		.cfi_endproc
 919              	.LFE142:
 921              		.section	.text.etharp_input,"ax",%progbits
 922              		.align	1
 923              		.global	etharp_input
 924              		.syntax unified
 925              		.thumb
 926              		.thumb_func
 927              		.fpu fpv5-sp-d16
 929              	etharp_input:
 930              	.LFB143:
 634:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   struct etharp_hdr *hdr;
 931              		.loc 1 634 0
 932              		.cfi_startproc
 933              		@ args = 0, pretend = 0, frame = 8
 934              		@ frame_needed = 0, uses_anonymous_args = 0
 935              	.LVL108:
 640:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 936              		.loc 1 640 0
 937 0000 0029     		cmp	r1, #0
 938 0002 64D0     		beq	.L91
 634:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   struct etharp_hdr *hdr;
 939              		.loc 1 634 0
 940 0004 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 941              	.LCFI19:
 942              		.cfi_def_cfa_offset 24
 943              		.cfi_offset 4, -24
 944              		.cfi_offset 5, -20
 945              		.cfi_offset 6, -16
 946              		.cfi_offset 7, -12
 947              		.cfi_offset 8, -8
 948              		.cfi_offset 14, -4
 949 0008 84B0     		sub	sp, sp, #16
 950              	.LCFI20:
 951              		.cfi_def_cfa_offset 40
 952 000a 0E46     		mov	r6, r1
 953 000c 0446     		mov	r4, r0
 642:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 954              		.loc 1 642 0
 955 000e 4568     		ldr	r5, [r0, #4]
 956              	.LVL109:
 645:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       (hdr->hwlen != ETH_HWADDR_LEN) ||
 957              		.loc 1 645 0
 958 0010 2B88     		ldrh	r3, [r5]	@ unaligned
 959 0012 B3F5807F 		cmp	r3, #256
 960 0016 05D0     		beq	.L94
 961              	.L80:
 654:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     return;
 962              		.loc 1 654 0
 963 0018 2046     		mov	r0, r4
 964              	.LVL110:
 965 001a FFF7FEFF 		bl	pbuf_free
 966              	.LVL111:
 967              	.L78:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 40


 758:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 968              		.loc 1 758 0
 969 001e 04B0     		add	sp, sp, #16
 970              	.LCFI21:
 971              		.cfi_remember_state
 972              		.cfi_def_cfa_offset 24
 973              		@ sp needed
 974 0020 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 975              	.LVL112:
 976              	.L94:
 977              	.LCFI22:
 978              		.cfi_restore_state
 646:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       (hdr->protolen != sizeof(ip4_addr_t)) ||
 979              		.loc 1 646 0 discriminator 1
 980 0024 2B79     		ldrb	r3, [r5, #4]	@ zero_extendqisi2
 645:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       (hdr->hwlen != ETH_HWADDR_LEN) ||
 981              		.loc 1 645 0 discriminator 1
 982 0026 062B     		cmp	r3, #6
 983 0028 F6D1     		bne	.L80
 647:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       (hdr->proto != PP_HTONS(ETHTYPE_IP)))  {
 984              		.loc 1 647 0
 985 002a 6B79     		ldrb	r3, [r5, #5]	@ zero_extendqisi2
 646:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       (hdr->protolen != sizeof(ip4_addr_t)) ||
 986              		.loc 1 646 0
 987 002c 042B     		cmp	r3, #4
 988 002e F3D1     		bne	.L80
 648:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE | LWIP_DBG_LEVEL_WARNING,
 989              		.loc 1 648 0
 990 0030 6B88     		ldrh	r3, [r5, #2]	@ unaligned
 647:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       (hdr->proto != PP_HTONS(ETHTYPE_IP)))  {
 991              		.loc 1 647 0
 992 0032 082B     		cmp	r3, #8
 993 0034 F0D1     		bne	.L80
 668:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   IPADDR2_COPY(&dipaddr, &hdr->dipaddr);
 994              		.loc 1 668 0
 995 0036 D5F80E30 		ldr	r3, [r5, #14]	@ unaligned
 996 003a 0393     		str	r3, [sp, #12]
 669:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 997              		.loc 1 669 0
 998 003c AF69     		ldr	r7, [r5, #24]	@ unaligned
 672:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     for_us = 0;
 999              		.loc 1 672 0
 1000 003e 4B68     		ldr	r3, [r1, #4]
 1001 0040 BBB1     		cbz	r3, .L88
 676:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 1002              		.loc 1 676 0
 1003 0042 9F42     		cmp	r7, r3
 1004 0044 14BF     		ite	ne
 1005 0046 0027     		movne	r7, #0
 1006 0048 0127     		moveq	r7, #1
 1007              	.LVL113:
 1008              	.L82:
 684:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****                    for_us ? ETHARP_FLAG_TRY_HARD : ETHARP_FLAG_FIND_ONLY);
 1009              		.loc 1 684 0
 1010 004a 05F10808 		add	r8, r5, #8
 1011 004e 97B1     		cbz	r7, .L89
 1012 0050 0123     		movs	r3, #1
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 41


 1013              	.L83:
 684:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****                    for_us ? ETHARP_FLAG_TRY_HARD : ETHARP_FLAG_FIND_ONLY);
 1014              		.loc 1 684 0 is_stmt 0 discriminator 4
 1015 0052 4246     		mov	r2, r8
 1016 0054 03A9     		add	r1, sp, #12
 1017              	.LVL114:
 1018 0056 3046     		mov	r0, r6
 1019              	.LVL115:
 1020 0058 FFF7FEFF 		bl	etharp_update_arp_entry
 1021              	.LVL116:
 688:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* ARP request? */
 1022              		.loc 1 688 0 is_stmt 1 discriminator 4
 1023 005c EB88     		ldrh	r3, [r5, #6]	@ unaligned
 1024 005e B3F5807F 		cmp	r3, #256
 1025 0062 0AD0     		beq	.L85
 1026 0064 B3F5007F 		cmp	r3, #512
 1027 0068 2CD0     		beq	.L86
 1028              	.L84:
 757:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** }
 1029              		.loc 1 757 0 discriminator 2
 1030 006a 2046     		mov	r0, r4
 1031 006c FFF7FEFF 		bl	pbuf_free
 1032              	.LVL117:
 1033 0070 D5E7     		b	.L78
 1034              	.LVL118:
 1035              	.L88:
 673:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   } else {
 1036              		.loc 1 673 0
 1037 0072 0027     		movs	r7, #0
 1038 0074 E9E7     		b	.L82
 1039              	.LVL119:
 1040              	.L89:
 684:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****                    for_us ? ETHARP_FLAG_TRY_HARD : ETHARP_FLAG_FIND_ONLY);
 1041              		.loc 1 684 0
 1042 0076 0223     		movs	r3, #2
 1043 0078 EBE7     		b	.L83
 1044              	.LVL120:
 1045              	.L85:
 697:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 1046              		.loc 1 697 0
 1047 007a 002F     		cmp	r7, #0
 1048 007c F5D0     		beq	.L84
 703:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 1049              		.loc 1 703 0
 1050 007e 0220     		movs	r0, #2
 1051 0080 FFF7FEFF 		bl	lwip_htons
 1052              	.LVL121:
 1053 0084 E880     		strh	r0, [r5, #6]	@ unaligned
 705:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       IPADDR2_COPY(&hdr->sipaddr, netif_ip4_addr(netif));
 1054              		.loc 1 705 0
 1055 0086 D5F80E30 		ldr	r3, [r5, #14]	@ unaligned
 1056 008a AB61     		str	r3, [r5, #24]	@ unaligned
 706:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 1057              		.loc 1 706 0
 1058 008c 7368     		ldr	r3, [r6, #4]	@ unaligned
 1059 008e C5F80E30 		str	r3, [r5, #14]	@ unaligned
 714:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       ETHADDR16_COPY(&hdr->shwaddr, netif->hwaddr);
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 42


 1060              		.loc 1 714 0
 1061 0092 05F11203 		add	r3, r5, #18
 1062 0096 D8F80020 		ldr	r2, [r8]	@ unaligned
 1063 009a C5F81220 		str	r2, [r5, #18]	@ unaligned
 1064 009e B8F80420 		ldrh	r2, [r8, #4]	@ unaligned
 1065 00a2 9A80     		strh	r2, [r3, #4]	@ unaligned
 715:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 1066              		.loc 1 715 0
 1067 00a4 3246     		mov	r2, r6
 1068 00a6 52F8291F 		ldr	r1, [r2, #41]!	@ unaligned
 1069 00aa A960     		str	r1, [r5, #8]	@ unaligned
 1070 00ac 9288     		ldrh	r2, [r2, #4]	@ unaligned
 1071 00ae A8F80420 		strh	r2, [r8, #4]	@ unaligned
 727:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       }
 1072              		.loc 1 727 0
 1073 00b2 40F60602 		movw	r2, #2054
 1074 00b6 0092     		str	r2, [sp]
 1075 00b8 4246     		mov	r2, r8
 1076 00ba 2146     		mov	r1, r4
 1077 00bc 3046     		mov	r0, r6
 1078 00be FFF7FEFF 		bl	ethernet_output
 1079              	.LVL122:
 1080 00c2 D2E7     		b	.L84
 1081              	.L86:
 748:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #endif /* (LWIP_DHCP && DHCP_DOES_ARP_CHECK) */
 1082              		.loc 1 748 0
 1083 00c4 03A9     		add	r1, sp, #12
 1084 00c6 3046     		mov	r0, r6
 1085 00c8 FFF7FEFF 		bl	dhcp_arp_reply
 1086              	.LVL123:
 750:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   default:
 1087              		.loc 1 750 0
 1088 00cc CDE7     		b	.L84
 1089              	.LVL124:
 1090              	.L91:
 1091              	.LCFI23:
 1092              		.cfi_def_cfa_offset 0
 1093              		.cfi_restore 4
 1094              		.cfi_restore 5
 1095              		.cfi_restore 6
 1096              		.cfi_restore 7
 1097              		.cfi_restore 8
 1098              		.cfi_restore 14
 1099 00ce 7047     		bx	lr
 1100              		.cfi_endproc
 1101              	.LFE143:
 1103              		.section	.text.etharp_request,"ax",%progbits
 1104              		.align	1
 1105              		.global	etharp_request
 1106              		.syntax unified
 1107              		.thumb
 1108              		.thumb_func
 1109              		.fpu fpv5-sp-d16
 1111              	etharp_request:
 1112              	.LFB149:
1206:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
1207:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** /**
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 43


1208:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * Send an ARP request packet asking for ipaddr.
1209:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *
1210:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param netif the lwip network interface on which to send the request
1211:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @param ipaddr the IP address for which to ask
1212:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  * @return ERR_OK if the request has been sent
1213:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *         ERR_MEM if the ARP packet couldn't be allocated
1214:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  *         any other err_t on failure
1215:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****  */
1216:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** err_t
1217:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** etharp_request(struct netif *netif, const ip4_addr_t *ipaddr)
1218:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** {
 1113              		.loc 1 1218 0
 1114              		.cfi_startproc
 1115              		@ args = 0, pretend = 0, frame = 0
 1116              		@ frame_needed = 0, uses_anonymous_args = 0
 1117              	.LVL125:
 1118 0000 08B5     		push	{r3, lr}
 1119              	.LCFI24:
 1120              		.cfi_def_cfa_offset 8
 1121              		.cfi_offset 3, -8
 1122              		.cfi_offset 14, -4
1219:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_request: sending ARP request.\n"));
1220:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   return etharp_request_dst(netif, ipaddr, &ethbroadcast);
 1123              		.loc 1 1220 0
 1124 0002 024A     		ldr	r2, .L97
 1125 0004 FFF7FEFF 		bl	etharp_request_dst
 1126              	.LVL126:
1221:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** }
 1127              		.loc 1 1221 0
 1128 0008 08BD     		pop	{r3, pc}
 1129              	.L98:
 1130 000a 00BF     		.align	2
 1131              	.L97:
 1132 000c 00000000 		.word	ethbroadcast
 1133              		.cfi_endproc
 1134              	.LFE149:
 1136              		.section	.text.etharp_tmr,"ax",%progbits
 1137              		.align	1
 1138              		.global	etharp_tmr
 1139              		.syntax unified
 1140              		.thumb
 1141              		.thumb_func
 1142              		.fpu fpv5-sp-d16
 1144              	etharp_tmr:
 1145              	.LFB137:
 192:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   u8_t i;
 1146              		.loc 1 192 0
 1147              		.cfi_startproc
 1148              		@ args = 0, pretend = 0, frame = 0
 1149              		@ frame_needed = 0, uses_anonymous_args = 0
 1150 0000 38B5     		push	{r3, r4, r5, lr}
 1151              	.LCFI25:
 1152              		.cfi_def_cfa_offset 16
 1153              		.cfi_offset 3, -16
 1154              		.cfi_offset 4, -12
 1155              		.cfi_offset 5, -8
 1156              		.cfi_offset 14, -4
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 44


 1157              	.LVL127:
 197:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     u8_t state = arp_table[i].state;
 1158              		.loc 1 197 0
 1159 0002 0024     		movs	r4, #0
 1160 0004 05E0     		b	.L100
 1161              	.LVL128:
 1162              	.L109:
 1163              	.LBB6:
 206:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****            (arp_table[i].ctime >= ARP_MAXPENDING))) {
 1164              		.loc 1 206 0
 1165 0006 042B     		cmp	r3, #4
 1166 0008 1DD9     		bls	.L103
 1167              	.LVL129:
 1168              	.L102:
 212:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       } else if (arp_table[i].state == ETHARP_STATE_STABLE_REREQUESTING_1) {
 1169              		.loc 1 212 0
 1170 000a FFF7FEFF 		bl	etharp_free_entry
 1171              	.LVL130:
 1172              	.L101:
 1173              	.LBE6:
 197:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     u8_t state = arp_table[i].state;
 1174              		.loc 1 197 0 discriminator 2
 1175 000e 0134     		adds	r4, r4, #1
 1176              	.LVL131:
 1177 0010 E4B2     		uxtb	r4, r4
 1178              	.LVL132:
 1179              	.L100:
 197:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     u8_t state = arp_table[i].state;
 1180              		.loc 1 197 0 is_stmt 0 discriminator 1
 1181 0012 092C     		cmp	r4, #9
 1182 0014 38D8     		bhi	.L108
 1183              	.LBB7:
 198:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     if (state != ETHARP_STATE_EMPTY
 1184              		.loc 1 198 0 is_stmt 1
 1185 0016 2046     		mov	r0, r4
 1186 0018 04EB4403 		add	r3, r4, r4, lsl #1
 1187 001c DA00     		lsls	r2, r3, #3
 1188 001e 1B4B     		ldr	r3, .L112
 1189 0020 1344     		add	r3, r3, r2
 1190 0022 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 1191              	.LVL133:
 199:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if ETHARP_SUPPORT_STATIC_ENTRIES
 1192              		.loc 1 199 0
 1193 0024 002B     		cmp	r3, #0
 1194 0026 F2D0     		beq	.L101
 204:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       if ((arp_table[i].ctime >= ARP_MAXAGE) ||
 1195              		.loc 1 204 0
 1196 0028 1146     		mov	r1, r2
 1197 002a 184A     		ldr	r2, .L112
 1198 002c 0A44     		add	r2, r2, r1
 1199 002e 538A     		ldrh	r3, [r2, #18]
 1200              	.LVL134:
 1201 0030 0133     		adds	r3, r3, #1
 1202 0032 9BB2     		uxth	r3, r3
 1203 0034 5382     		strh	r3, [r2, #18]	@ movhi
 205:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           ((arp_table[i].state == ETHARP_STATE_PENDING)  &&
 1204              		.loc 1 205 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 45


 1205 0036 B3F5967F 		cmp	r3, #300
 1206 003a E6D2     		bcs	.L102
 206:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****            (arp_table[i].ctime >= ARP_MAXPENDING))) {
 1207              		.loc 1 206 0 discriminator 1
 1208 003c 134A     		ldr	r2, .L112
 1209              	.LVL135:
 1210 003e 0A44     		add	r2, r2, r1
 1211              	.LVL136:
 1212 0040 127D     		ldrb	r2, [r2, #20]	@ zero_extendqisi2
 1213              	.LVL137:
 205:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           ((arp_table[i].state == ETHARP_STATE_PENDING)  &&
 1214              		.loc 1 205 0 discriminator 1
 1215 0042 012A     		cmp	r2, #1
 1216 0044 DFD0     		beq	.L109
 1217              	.L103:
 213:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         /* Don't send more than one request every 2 seconds. */
 1218              		.loc 1 213 0
 1219 0046 032A     		cmp	r2, #3
 1220 0048 0ED0     		beq	.L110
 216:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         /* Reset state to stable, so that the next transmitted packet will
 1221              		.loc 1 216 0
 1222 004a 042A     		cmp	r2, #4
 1223 004c 14D0     		beq	.L111
 220:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         /* still pending, resend an ARP query */
 1224              		.loc 1 220 0
 1225 004e 012A     		cmp	r2, #1
 1226 0050 DDD1     		bne	.L101
 222:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       }
 1227              		.loc 1 222 0
 1228 0052 0E4A     		ldr	r2, .L112
 1229              	.LVL138:
 1230 0054 4300     		lsls	r3, r0, #1
 1231 0056 1D18     		adds	r5, r3, r0
 1232 0058 E900     		lsls	r1, r5, #3
 1233              	.LVL139:
 1234 005a 1144     		add	r1, r1, r2
 1235 005c 0A46     		mov	r2, r1
 1236              	.LVL140:
 1237 005e 0431     		adds	r1, r1, #4
 1238 0060 9068     		ldr	r0, [r2, #8]
 1239              	.LVL141:
 1240 0062 FFF7FEFF 		bl	etharp_request
 1241              	.LVL142:
 1242 0066 D2E7     		b	.L101
 1243              	.LVL143:
 1244              	.L110:
 215:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       } else if (arp_table[i].state == ETHARP_STATE_STABLE_REREQUESTING_2) {
 1245              		.loc 1 215 0
 1246 0068 00EB4000 		add	r0, r0, r0, lsl #1
 1247 006c C200     		lsls	r2, r0, #3
 1248              	.LVL144:
 1249 006e 074B     		ldr	r3, .L112
 1250              	.LVL145:
 1251 0070 1344     		add	r3, r3, r2
 1252              	.LVL146:
 1253 0072 0422     		movs	r2, #4
 1254 0074 1A75     		strb	r2, [r3, #20]
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 46


 1255              	.LVL147:
 1256 0076 CAE7     		b	.L101
 1257              	.LVL148:
 1258              	.L111:
 219:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       } else if (arp_table[i].state == ETHARP_STATE_PENDING) {
 1259              		.loc 1 219 0
 1260 0078 00EB4000 		add	r0, r0, r0, lsl #1
 1261 007c C200     		lsls	r2, r0, #3
 1262              	.LVL149:
 1263 007e 034B     		ldr	r3, .L112
 1264              	.LVL150:
 1265 0080 1344     		add	r3, r3, r2
 1266              	.LVL151:
 1267 0082 0222     		movs	r2, #2
 1268 0084 1A75     		strb	r2, [r3, #20]
 1269              	.LVL152:
 1270 0086 C2E7     		b	.L101
 1271              	.L108:
 1272              	.LBE7:
 226:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 1273              		.loc 1 226 0
 1274 0088 38BD     		pop	{r3, r4, r5, pc}
 1275              	.LVL153:
 1276              	.L113:
 1277 008a 00BF     		.align	2
 1278              	.L112:
 1279 008c 00000000 		.word	.LANCHOR0
 1280              		.cfi_endproc
 1281              	.LFE137:
 1283              		.section	.text.etharp_output_to_arp_index,"ax",%progbits
 1284              		.align	1
 1285              		.syntax unified
 1286              		.thumb
 1287              		.thumb_func
 1288              		.fpu fpv5-sp-d16
 1290              	etharp_output_to_arp_index:
 1291              	.LFB144:
 765:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   LWIP_ASSERT("arp_table[arp_idx].state >= ETHARP_STATE_STABLE",
 1292              		.loc 1 765 0
 1293              		.cfi_startproc
 1294              		@ args = 0, pretend = 0, frame = 0
 1295              		@ frame_needed = 0, uses_anonymous_args = 0
 1296              	.LVL154:
 1297 0000 70B5     		push	{r4, r5, r6, lr}
 1298              	.LCFI26:
 1299              		.cfi_def_cfa_offset 16
 1300              		.cfi_offset 4, -16
 1301              		.cfi_offset 5, -12
 1302              		.cfi_offset 6, -8
 1303              		.cfi_offset 14, -4
 1304 0002 82B0     		sub	sp, sp, #8
 1305              	.LCFI27:
 1306              		.cfi_def_cfa_offset 24
 1307 0004 0546     		mov	r5, r0
 1308 0006 0E46     		mov	r6, r1
 1309 0008 1446     		mov	r4, r2
 766:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****               arp_table[arp_idx].state >= ETHARP_STATE_STABLE);
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 47


 1310              		.loc 1 766 0
 1311 000a 02EB4203 		add	r3, r2, r2, lsl #1
 1312 000e DA00     		lsls	r2, r3, #3
 1313              	.LVL155:
 1314 0010 244B     		ldr	r3, .L120
 1315 0012 1344     		add	r3, r3, r2
 1316 0014 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 771:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     if (arp_table[arp_idx].ctime >= ARP_AGE_REREQUEST_USED_BROADCAST) {
 1317              		.loc 1 771 0
 1318 0016 022B     		cmp	r3, #2
 1319 0018 11D0     		beq	.L118
 1320              	.LVL156:
 1321              	.L115:
 785:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** }
 1322              		.loc 1 785 0
 1323 001a 04EB4404 		add	r4, r4, r4, lsl #1
 1324 001e E300     		lsls	r3, r4, #3
 1325 0020 0833     		adds	r3, r3, #8
 1326 0022 204A     		ldr	r2, .L120
 1327 0024 1344     		add	r3, r3, r2
 1328 0026 4FF40062 		mov	r2, #2048
 1329 002a 0092     		str	r2, [sp]
 1330 002c 0433     		adds	r3, r3, #4
 1331 002e 05F12902 		add	r2, r5, #41
 1332 0032 3146     		mov	r1, r6
 1333 0034 2846     		mov	r0, r5
 1334 0036 FFF7FEFF 		bl	ethernet_output
 1335              	.LVL157:
 786:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 1336              		.loc 1 786 0
 1337 003a 02B0     		add	sp, sp, #8
 1338              	.LCFI28:
 1339              		.cfi_remember_state
 1340              		.cfi_def_cfa_offset 16
 1341              		@ sp needed
 1342 003c 70BD     		pop	{r4, r5, r6, pc}
 1343              	.LVL158:
 1344              	.L118:
 1345              	.LCFI29:
 1346              		.cfi_restore_state
 772:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* issue a standard request using broadcast */
 1347              		.loc 1 772 0
 1348 003e 194B     		ldr	r3, .L120
 1349 0040 1344     		add	r3, r3, r2
 1350 0042 5B8A     		ldrh	r3, [r3, #18]
 1351 0044 B3F58E7F 		cmp	r3, #284
 1352 0048 19D8     		bhi	.L119
 777:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* issue a unicast request (for 15 seconds) to prevent unnecessary broadcast */
 1353              		.loc 1 777 0
 1354 004a B3F5877F 		cmp	r3, #270
 1355 004e E4D3     		bcc	.L115
 779:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         arp_table[arp_idx].state = ETHARP_STATE_STABLE_REREQUESTING_1;
 1356              		.loc 1 779 0
 1357 0050 144A     		ldr	r2, .L120
 1358 0052 6300     		lsls	r3, r4, #1
 1359 0054 1819     		adds	r0, r3, r4
 1360              	.LVL159:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 48


 1361 0056 C100     		lsls	r1, r0, #3
 1362              	.LVL160:
 1363 0058 0846     		mov	r0, r1
 1364 005a 1144     		add	r1, r1, r2
 1365 005c 0830     		adds	r0, r0, #8
 1366 005e 0244     		add	r2, r2, r0
 1367 0060 0432     		adds	r2, r2, #4
 1368 0062 0431     		adds	r1, r1, #4
 1369 0064 2846     		mov	r0, r5
 1370 0066 FFF7FEFF 		bl	etharp_request_dst
 1371              	.LVL161:
 1372 006a 0028     		cmp	r0, #0
 1373 006c D5D1     		bne	.L115
 780:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       }
 1374              		.loc 1 780 0
 1375 006e 04EB4403 		add	r3, r4, r4, lsl #1
 1376 0072 DA00     		lsls	r2, r3, #3
 1377 0074 0B4B     		ldr	r3, .L120
 1378 0076 1344     		add	r3, r3, r2
 1379 0078 0322     		movs	r2, #3
 1380 007a 1A75     		strb	r2, [r3, #20]
 1381 007c CDE7     		b	.L115
 1382              	.LVL162:
 1383              	.L119:
 774:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         arp_table[arp_idx].state = ETHARP_STATE_STABLE_REREQUESTING_1;
 1384              		.loc 1 774 0
 1385 007e 04EB4402 		add	r2, r4, r4, lsl #1
 1386 0082 D300     		lsls	r3, r2, #3
 1387 0084 0749     		ldr	r1, .L120
 1388              	.LVL163:
 1389 0086 1944     		add	r1, r1, r3
 1390 0088 0431     		adds	r1, r1, #4
 1391 008a FFF7FEFF 		bl	etharp_request
 1392              	.LVL164:
 1393 008e 0028     		cmp	r0, #0
 1394 0090 C3D1     		bne	.L115
 775:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       }
 1395              		.loc 1 775 0
 1396 0092 04EB4403 		add	r3, r4, r4, lsl #1
 1397 0096 DA00     		lsls	r2, r3, #3
 1398 0098 024B     		ldr	r3, .L120
 1399 009a 1344     		add	r3, r3, r2
 1400 009c 0322     		movs	r2, #3
 1401 009e 1A75     		strb	r2, [r3, #20]
 1402 00a0 BBE7     		b	.L115
 1403              	.L121:
 1404 00a2 00BF     		.align	2
 1405              	.L120:
 1406 00a4 00000000 		.word	.LANCHOR0
 1407              		.cfi_endproc
 1408              	.LFE144:
 1410              		.section	.text.etharp_query,"ax",%progbits
 1411              		.align	1
 1412              		.global	etharp_query
 1413              		.syntax unified
 1414              		.thumb
 1415              		.thumb_func
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 49


 1416              		.fpu fpv5-sp-d16
 1418              	etharp_query:
 1419              	.LFB146:
 949:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   struct eth_addr * srcaddr = (struct eth_addr *)netif->hwaddr;
 1420              		.loc 1 949 0
 1421              		.cfi_startproc
 1422              		@ args = 0, pretend = 0, frame = 0
 1423              		@ frame_needed = 0, uses_anonymous_args = 0
 1424              	.LVL165:
 1425 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1426              	.LCFI30:
 1427              		.cfi_def_cfa_offset 24
 1428              		.cfi_offset 4, -24
 1429              		.cfi_offset 5, -20
 1430              		.cfi_offset 6, -16
 1431              		.cfi_offset 7, -12
 1432              		.cfi_offset 8, -8
 1433              		.cfi_offset 14, -4
 1434 0004 82B0     		sub	sp, sp, #8
 1435              	.LCFI31:
 1436              		.cfi_def_cfa_offset 32
 1437 0006 0646     		mov	r6, r0
 1438 0008 0D46     		mov	r5, r1
 1439 000a 1746     		mov	r7, r2
 950:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   err_t result = ERR_MEM;
 1440              		.loc 1 950 0
 1441 000c 00F12908 		add	r8, r0, #41
 1442              	.LVL166:
 956:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       ip4_addr_ismulticast(ipaddr) ||
 1443              		.loc 1 956 0
 1444 0010 0146     		mov	r1, r0
 1445              	.LVL167:
 1446 0012 2868     		ldr	r0, [r5]
 1447              	.LVL168:
 1448 0014 FFF7FEFF 		bl	ip4_addr_isbroadcast_u32
 1449              	.LVL169:
 1450 0018 0028     		cmp	r0, #0
 1451 001a 77D1     		bne	.L133
 957:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       ip4_addr_isany(ipaddr)) {
 1452              		.loc 1 957 0 discriminator 1
 1453 001c 2B68     		ldr	r3, [r5]
 1454 001e 03F0F002 		and	r2, r3, #240
 956:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       ip4_addr_ismulticast(ipaddr) ||
 1455              		.loc 1 956 0 discriminator 1
 1456 0022 E02A     		cmp	r2, #224
 1457 0024 75D0     		beq	.L134
 957:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       ip4_addr_isany(ipaddr)) {
 1458              		.loc 1 957 0
 1459 0026 002D     		cmp	r5, #0
 1460 0028 76D0     		beq	.L135
 958:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_query: will not add non-unicast IP address 
 1461              		.loc 1 958 0
 1462 002a 002B     		cmp	r3, #0
 1463 002c 77D0     		beq	.L136
 964:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 1464              		.loc 1 964 0
 1465 002e 3246     		mov	r2, r6
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 50


 1466 0030 0121     		movs	r1, #1
 1467 0032 2846     		mov	r0, r5
 1468 0034 FFF7FEFF 		bl	etharp_find_entry
 1469              	.LVL170:
 967:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_query: could not create ARP entry\n"));
 1470              		.loc 1 967 0
 1471 0038 041E     		subs	r4, r0, #0
 1472 003a 73DB     		blt	.L137
 977:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     is_new_entry = 1;
 1473              		.loc 1 977 0
 1474 003c 04EB4403 		add	r3, r4, r4, lsl #1
 1475 0040 DA00     		lsls	r2, r3, #3
 1476 0042 3B4B     		ldr	r3, .L147
 1477 0044 1344     		add	r3, r3, r2
 1478 0046 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 1479 0048 EBB9     		cbnz	r3, .L138
 1480              	.LVL171:
 979:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* record network interface for re-sending arp request in etharp_tmr */
 1481              		.loc 1 979 0
 1482 004a 1146     		mov	r1, r2
 1483 004c 384A     		ldr	r2, .L147
 1484 004e 0A44     		add	r2, r2, r1
 1485 0050 0123     		movs	r3, #1
 1486 0052 1375     		strb	r3, [r2, #20]
 981:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 1487              		.loc 1 981 0
 1488 0054 9660     		str	r6, [r2, #8]
 1489              	.LVL172:
 1490              	.L124:
 990:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* try to resolve it; send out ARP request */
 1491              		.loc 1 990 0
 1492 0056 002F     		cmp	r7, #0
 1493 0058 08BF     		it	eq
 1494 005a 43F00103 		orreq	r3, r3, #1
 1495              	.LVL173:
 1496 005e A3B9     		cbnz	r3, .L144
 951:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   int is_new_entry = 0;
 1497              		.loc 1 951 0
 1498 0060 4FF0FF30 		mov	r0, #-1
 1499              	.LVL174:
 1500              	.L125:
1007:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* we have a valid IP->Ethernet address mapping */
 1501              		.loc 1 1007 0
 1502 0064 04EB4403 		add	r3, r4, r4, lsl #1
 1503 0068 DA00     		lsls	r2, r3, #3
 1504 006a 314B     		ldr	r3, .L147
 1505 006c 1344     		add	r3, r3, r2
 1506 006e 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 1507 0070 012B     		cmp	r3, #1
 1508 0072 11D8     		bhi	.L145
1013:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* entry is still pending, queue the given packet 'q' */
 1509              		.loc 1 1013 0
 1510 0074 012B     		cmp	r3, #1
 1511 0076 1ED1     		bne	.L123
 1512 0078 3B46     		mov	r3, r7
 1513              	.L127:
 1514              	.LVL175:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 51


 1515              	.LBB8:
1021:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       LWIP_ASSERT("no packet queues allowed!", (p->len != p->tot_len) || (p->next == 0));
 1516              		.loc 1 1021 0
 1517 007a FBB1     		cbz	r3, .L146
1023:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         copy_needed = 1;
 1518              		.loc 1 1023 0
 1519 007c 1A7B     		ldrb	r2, [r3, #12]	@ zero_extendqisi2
 1520 007e 012A     		cmp	r2, #1
 1521 0080 2ED1     		bne	.L141
1027:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     }
 1522              		.loc 1 1027 0
 1523 0082 1B68     		ldr	r3, [r3]
 1524              	.LVL176:
 1525 0084 F9E7     		b	.L127
 1526              	.LVL177:
 1527              	.L138:
 1528              	.LBE8:
 952:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   s8_t i; /* ARP entry index */
 1529              		.loc 1 952 0
 1530 0086 0023     		movs	r3, #0
 1531 0088 E5E7     		b	.L124
 1532              	.LVL178:
 1533              	.L144:
 992:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     if (result != ERR_OK) {
 1534              		.loc 1 992 0
 1535 008a 2946     		mov	r1, r5
 1536 008c 3046     		mov	r0, r6
 1537              	.LVL179:
 1538 008e FFF7FEFF 		bl	etharp_request
 1539              	.LVL180:
 999:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       return result;
 1540              		.loc 1 999 0
 1541 0092 002F     		cmp	r7, #0
 1542 0094 E6D1     		bne	.L125
 1543 0096 0EE0     		b	.L123
 1544              	.L145:
1009:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* send the packet */
 1545              		.loc 1 1009 0
 1546 0098 264B     		ldr	r3, .L147+4
 1547 009a 1C70     		strb	r4, [r3]
1011:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* pending entry? (either just created or already pending */
 1548              		.loc 1 1011 0
 1549 009c 1346     		mov	r3, r2
 1550 009e 0833     		adds	r3, r3, #8
 1551 00a0 234A     		ldr	r2, .L147
 1552 00a2 1344     		add	r3, r3, r2
 1553 00a4 4FF40062 		mov	r2, #2048
 1554 00a8 0092     		str	r2, [sp]
 1555 00aa 0433     		adds	r3, r3, #4
 1556 00ac 4246     		mov	r2, r8
 1557 00ae 3946     		mov	r1, r7
 1558 00b0 3046     		mov	r0, r6
 1559              	.LVL181:
 1560 00b2 FFF7FEFF 		bl	ethernet_output
 1561              	.LVL182:
 1562              	.L123:
1102:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 52


 1563              		.loc 1 1102 0
 1564 00b6 02B0     		add	sp, sp, #8
 1565              	.LCFI32:
 1566              		.cfi_remember_state
 1567              		.cfi_def_cfa_offset 24
 1568              		@ sp needed
 1569 00b8 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1570              	.LVL183:
 1571              	.L146:
 1572              	.LCFI33:
 1573              		.cfi_restore_state
 1574              	.LBB9:
1016:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* IF q includes a PBUF_REF, PBUF_POOL or PBUF_RAM, we have no choice but
 1575              		.loc 1 1016 0
 1576 00bc 0022     		movs	r2, #0
 1577              	.L128:
 1578              	.LVL184:
1029:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* copy the whole packet into new pbufs */
 1579              		.loc 1 1029 0
 1580 00be 8AB1     		cbz	r2, .L130
1031:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       if (p != NULL) {
 1581              		.loc 1 1031 0
 1582 00c0 0022     		movs	r2, #0
 1583              	.LVL185:
 1584 00c2 1989     		ldrh	r1, [r3, #8]
 1585 00c4 0220     		movs	r0, #2
 1586              	.LVL186:
 1587 00c6 FFF7FEFF 		bl	pbuf_alloc
 1588              	.LVL187:
1032:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         if (pbuf_copy(p, q) != ERR_OK) {
 1589              		.loc 1 1032 0
 1590 00ca 0546     		mov	r5, r0
 1591              	.LVL188:
 1592 00cc 70B1     		cbz	r0, .L131
1033:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           pbuf_free(p);
 1593              		.loc 1 1033 0
 1594 00ce 3946     		mov	r1, r7
 1595 00d0 FFF7FEFF 		bl	pbuf_copy
 1596              	.LVL189:
 1597 00d4 50B1     		cbz	r0, .L131
1034:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           p = NULL;
 1598              		.loc 1 1034 0
 1599 00d6 2846     		mov	r0, r5
 1600 00d8 FFF7FEFF 		bl	pbuf_free
 1601              	.LVL190:
1035:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         }
 1602              		.loc 1 1035 0
 1603 00dc 0025     		movs	r5, #0
 1604 00de 05E0     		b	.L131
 1605              	.LVL191:
 1606              	.L141:
1024:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         break;
 1607              		.loc 1 1024 0
 1608 00e0 0122     		movs	r2, #1
 1609 00e2 ECE7     		b	.L128
 1610              	.LVL192:
 1611              	.L130:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 53


1041:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     }
 1612              		.loc 1 1041 0
 1613 00e4 3846     		mov	r0, r7
 1614              	.LVL193:
 1615 00e6 FFF7FEFF 		bl	pbuf_ref
 1616              	.LVL194:
1040:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       pbuf_ref(p);
 1617              		.loc 1 1040 0
 1618 00ea 3D46     		mov	r5, r7
 1619              	.LVL195:
 1620              	.L131:
1044:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       /* queue packet ... */
 1621              		.loc 1 1044 0
 1622 00ec E5B1     		cbz	r5, .L142
1087:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_query: dropped previously queued packet
 1623              		.loc 1 1087 0
 1624 00ee 04EB4402 		add	r2, r4, r4, lsl #1
 1625 00f2 D300     		lsls	r3, r2, #3
 1626 00f4 0E4A     		ldr	r2, .L147
 1627 00f6 D058     		ldr	r0, [r2, r3]
 1628 00f8 08B1     		cbz	r0, .L132
1089:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       }
 1629              		.loc 1 1089 0
 1630 00fa FFF7FEFF 		bl	pbuf_free
 1631              	.LVL196:
 1632              	.L132:
1091:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       result = ERR_OK;
 1633              		.loc 1 1091 0
 1634 00fe 04EB4404 		add	r4, r4, r4, lsl #1
 1635 0102 E300     		lsls	r3, r4, #3
 1636 0104 0A4A     		ldr	r2, .L147
 1637 0106 D550     		str	r5, [r2, r3]
 1638              	.LVL197:
1092:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       LWIP_DEBUGF(ETHARP_DEBUG | LWIP_DBG_TRACE, ("etharp_query: queued packet %p on ARP entry %"S1
 1639              		.loc 1 1092 0
 1640 0108 0020     		movs	r0, #0
 1641 010a D4E7     		b	.L123
 1642              	.LVL198:
 1643              	.L133:
 1644              	.LBE9:
 960:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 1645              		.loc 1 960 0
 1646 010c 6FF00F00 		mvn	r0, #15
 1647 0110 D1E7     		b	.L123
 1648              	.L134:
 1649 0112 6FF00F00 		mvn	r0, #15
 1650 0116 CEE7     		b	.L123
 1651              	.L135:
 1652 0118 6FF00F00 		mvn	r0, #15
 1653 011c CBE7     		b	.L123
 1654              	.L136:
 1655 011e 6FF00F00 		mvn	r0, #15
 1656 0122 C8E7     		b	.L123
 1657              	.LVL199:
 1658              	.L137:
 973:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 1659              		.loc 1 973 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 54


 1660 0124 2046     		mov	r0, r4
 1661              	.LVL200:
 1662 0126 C6E7     		b	.L123
 1663              	.LVL201:
 1664              	.L142:
 1665              	.LBB10:
1098:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     }
 1666              		.loc 1 1098 0
 1667 0128 4FF0FF30 		mov	r0, #-1
 1668 012c C3E7     		b	.L123
 1669              	.L148:
 1670 012e 00BF     		.align	2
 1671              	.L147:
 1672 0130 00000000 		.word	.LANCHOR0
 1673 0134 00000000 		.word	.LANCHOR1
 1674              	.LBE10:
 1675              		.cfi_endproc
 1676              	.LFE146:
 1678              		.section	.text.etharp_output,"ax",%progbits
 1679              		.align	1
 1680              		.global	etharp_output
 1681              		.syntax unified
 1682              		.thumb
 1683              		.thumb_func
 1684              		.fpu fpv5-sp-d16
 1686              	etharp_output:
 1687              	.LFB145:
 808:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   const struct eth_addr *dest;
 1688              		.loc 1 808 0
 1689              		.cfi_startproc
 1690              		@ args = 0, pretend = 0, frame = 8
 1691              		@ frame_needed = 0, uses_anonymous_args = 0
 1692              	.LVL202:
 1693 0000 70B5     		push	{r4, r5, r6, lr}
 1694              	.LCFI34:
 1695              		.cfi_def_cfa_offset 16
 1696              		.cfi_offset 4, -16
 1697              		.cfi_offset 5, -12
 1698              		.cfi_offset 6, -8
 1699              		.cfi_offset 14, -4
 1700 0002 84B0     		sub	sp, sp, #16
 1701              	.LCFI35:
 1702              		.cfi_def_cfa_offset 32
 1703 0004 0546     		mov	r5, r0
 1704 0006 0E46     		mov	r6, r1
 1705 0008 1446     		mov	r4, r2
 1706              	.LVL203:
 821:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* broadcast on Ethernet also */
 1707              		.loc 1 821 0
 1708 000a 0146     		mov	r1, r0
 1709              	.LVL204:
 1710 000c 1068     		ldr	r0, [r2]
 1711              	.LVL205:
 1712 000e FFF7FEFF 		bl	ip4_addr_isbroadcast_u32
 1713              	.LVL206:
 1714 0012 0028     		cmp	r0, #0
 1715 0014 62D1     		bne	.L157
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 55


 825:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* Hash IP multicast address to MAC address.*/
 1716              		.loc 1 825 0
 1717 0016 2368     		ldr	r3, [r4]
 1718 0018 03F0F002 		and	r2, r3, #240
 1719 001c E02A     		cmp	r2, #224
 1720 001e 20D0     		beq	.L162
 1721              	.LBB11:
 840:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         !ip4_addr_islinklocal(ipaddr)) {
 1722              		.loc 1 840 0
 1723 0020 6A68     		ldr	r2, [r5, #4]
 1724 0022 A968     		ldr	r1, [r5, #8]
 1725 0024 5A40     		eors	r2, r2, r3
 1726 0026 0A42     		tst	r2, r1
 1727 0028 09D0     		beq	.L152
 841:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if LWIP_AUTOIP
 1728              		.loc 1 841 0 discriminator 1
 1729 002a 9BB2     		uxth	r3, r3
 840:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         !ip4_addr_islinklocal(ipaddr)) {
 1730              		.loc 1 840 0 discriminator 1
 1731 002c 4FF6A962 		movw	r2, #65193
 1732 0030 9342     		cmp	r3, r2
 1733 0032 04D0     		beq	.L152
 859:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****             /* send to hardware address of default gateway IP address */
 1734              		.loc 1 859 0
 1735 0034 EB68     		ldr	r3, [r5, #12]
 1736 0036 002B     		cmp	r3, #0
 1737 0038 5CD0     		beq	.L158
 861:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           /* no default gateway available */
 1738              		.loc 1 861 0
 1739 003a 05F10C04 		add	r4, r5, #12
 1740              	.LVL207:
 1741              	.L152:
 876:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if ETHARP_TABLE_MATCH_NETIF
 1742              		.loc 1 876 0
 1743 003e 2F4B     		ldr	r3, .L165
 1744 0040 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1745 0042 02EB4203 		add	r3, r2, r2, lsl #1
 1746 0046 D900     		lsls	r1, r3, #3
 1747 0048 2D4B     		ldr	r3, .L165+4
 1748 004a 0B44     		add	r3, r3, r1
 1749 004c 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 1750 004e 012B     		cmp	r3, #1
 1751 0050 3CD9     		bls	.L159
 880:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           /* the per-pcb-cached entry is stable and the right one! */
 1752              		.loc 1 880 0 discriminator 1
 1753 0052 2068     		ldr	r0, [r4]
 1754 0054 2A4B     		ldr	r3, .L165+4
 1755 0056 0B44     		add	r3, r3, r1
 1756 0058 5B68     		ldr	r3, [r3, #4]
 876:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if ETHARP_TABLE_MATCH_NETIF
 1757              		.loc 1 876 0 discriminator 1
 1758 005a 9842     		cmp	r0, r3
 1759 005c 17D0     		beq	.L163
 1760 005e 0022     		movs	r2, #0
 1761 0060 1CE0     		b	.L154
 1762              	.LVL208:
 1763              	.L162:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 56


 1764              	.LBE11:
 827:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     mcastaddr.addr[1] = LL_IP4_MULTICAST_ADDR_1;
 1765              		.loc 1 827 0
 1766 0062 0123     		movs	r3, #1
 1767 0064 8DF80830 		strb	r3, [sp, #8]
 828:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     mcastaddr.addr[2] = LL_IP4_MULTICAST_ADDR_2;
 1768              		.loc 1 828 0
 1769 0068 0023     		movs	r3, #0
 1770 006a 8DF80930 		strb	r3, [sp, #9]
 829:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     mcastaddr.addr[3] = ip4_addr2(ipaddr) & 0x7f;
 1771              		.loc 1 829 0
 1772 006e 5E23     		movs	r3, #94
 1773 0070 8DF80A30 		strb	r3, [sp, #10]
 830:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     mcastaddr.addr[4] = ip4_addr3(ipaddr);
 1774              		.loc 1 830 0
 1775 0074 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 1776 0076 03F07F03 		and	r3, r3, #127
 1777 007a 8DF80B30 		strb	r3, [sp, #11]
 831:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     mcastaddr.addr[5] = ip4_addr4(ipaddr);
 1778              		.loc 1 831 0
 1779 007e A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 1780 0080 8DF80C30 		strb	r3, [sp, #12]
 832:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****     /* destination Ethernet address is multicast */
 1781              		.loc 1 832 0
 1782 0084 E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 1783 0086 8DF80D30 		strb	r3, [sp, #13]
 1784              	.LVL209:
 834:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* unicast destination IP address? */
 1785              		.loc 1 834 0
 1786 008a 02AB     		add	r3, sp, #8
 1787              	.LVL210:
 1788 008c 27E0     		b	.L150
 1789              	.LVL211:
 1790              	.L163:
 1791              	.LBB12:
 883:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         }
 1792              		.loc 1 883 0
 1793 008e 3146     		mov	r1, r6
 1794 0090 2846     		mov	r0, r5
 1795 0092 FFF7FEFF 		bl	etharp_output_to_arp_index
 1796              	.LVL212:
 1797 0096 2BE0     		b	.L153
 1798              	.LVL213:
 1799              	.L155:
 892:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       if ((arp_table[i].state >= ETHARP_STATE_STABLE) &&
 1800              		.loc 1 892 0 discriminator 2
 1801 0098 0132     		adds	r2, r2, #1
 1802              	.LVL214:
 1803 009a 52B2     		sxtb	r2, r2
 1804              	.LVL215:
 1805              	.L154:
 892:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       if ((arp_table[i].state >= ETHARP_STATE_STABLE) &&
 1806              		.loc 1 892 0 is_stmt 0 discriminator 1
 1807 009c 092A     		cmp	r2, #9
 1808 009e 17DC     		bgt	.L164
 893:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if ETHARP_TABLE_MATCH_NETIF
 1809              		.loc 1 893 0 is_stmt 1
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 57


 1810 00a0 02EB4203 		add	r3, r2, r2, lsl #1
 1811 00a4 D900     		lsls	r1, r3, #3
 1812 00a6 164B     		ldr	r3, .L165+4
 1813 00a8 0B44     		add	r3, r3, r1
 1814 00aa 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 1815 00ac 012B     		cmp	r3, #1
 1816 00ae F3D9     		bls	.L155
 897:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         /* found an existing, stable entry */
 1817              		.loc 1 897 0 discriminator 1
 1818 00b0 2068     		ldr	r0, [r4]
 1819 00b2 134B     		ldr	r3, .L165+4
 1820 00b4 0B44     		add	r3, r3, r1
 1821 00b6 5B68     		ldr	r3, [r3, #4]
 893:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** #if ETHARP_TABLE_MATCH_NETIF
 1822              		.loc 1 893 0 discriminator 1
 1823 00b8 9842     		cmp	r0, r3
 1824 00ba EDD1     		bne	.L155
 899:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****         return etharp_output_to_arp_index(netif, q, i);
 1825              		.loc 1 899 0
 1826 00bc D2B2     		uxtb	r2, r2
 1827 00be 0F4B     		ldr	r3, .L165
 1828 00c0 1A70     		strb	r2, [r3]
 900:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****       }
 1829              		.loc 1 900 0
 1830 00c2 3146     		mov	r1, r6
 1831 00c4 2846     		mov	r0, r5
 1832 00c6 FFF7FEFF 		bl	etharp_output_to_arp_index
 1833              	.LVL216:
 1834 00ca 11E0     		b	.L153
 1835              	.L159:
 1836 00cc 0022     		movs	r2, #0
 1837 00ce E5E7     		b	.L154
 1838              	.LVL217:
 1839              	.L164:
 905:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   }
 1840              		.loc 1 905 0
 1841 00d0 3246     		mov	r2, r6
 1842              	.LVL218:
 1843 00d2 2146     		mov	r1, r4
 1844 00d4 2846     		mov	r0, r5
 1845 00d6 FFF7FEFF 		bl	etharp_query
 1846              	.LVL219:
 1847 00da 09E0     		b	.L153
 1848              	.LVL220:
 1849              	.L157:
 1850              	.LBE12:
 823:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****   /* multicast destination IP address? */
 1851              		.loc 1 823 0
 1852 00dc 094B     		ldr	r3, .L165+8
 1853              	.L150:
 1854              	.LVL221:
 911:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** }
 1855              		.loc 1 911 0
 1856 00de 4FF40062 		mov	r2, #2048
 1857 00e2 0092     		str	r2, [sp]
 1858 00e4 05F12902 		add	r2, r5, #41
 1859 00e8 3146     		mov	r1, r6
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 58


 1860 00ea 2846     		mov	r0, r5
 1861 00ec FFF7FEFF 		bl	ethernet_output
 1862              	.LVL222:
 1863              	.L153:
 912:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c **** 
 1864              		.loc 1 912 0
 1865 00f0 04B0     		add	sp, sp, #16
 1866              	.LCFI36:
 1867              		.cfi_remember_state
 1868              		.cfi_def_cfa_offset 16
 1869              		@ sp needed
 1870 00f2 70BD     		pop	{r4, r5, r6, pc}
 1871              	.LVL223:
 1872              	.L158:
 1873              	.LCFI37:
 1874              		.cfi_restore_state
 1875              	.LBB13:
 865:Middlewares/Third_Party/LwIP/src/core/ipv4/etharp.c ****           }
 1876              		.loc 1 865 0
 1877 00f4 6FF00300 		mvn	r0, #3
 1878 00f8 FAE7     		b	.L153
 1879              	.L166:
 1880 00fa 00BF     		.align	2
 1881              	.L165:
 1882 00fc 00000000 		.word	.LANCHOR1
 1883 0100 00000000 		.word	.LANCHOR0
 1884 0104 00000000 		.word	ethbroadcast
 1885              	.LBE13:
 1886              		.cfi_endproc
 1887              	.LFE145:
 1889              		.section	.bss.arp_table,"aw",%nobits
 1890              		.align	2
 1891              		.set	.LANCHOR0,. + 0
 1894              	arp_table:
 1895 0000 00000000 		.space	240
 1895      00000000 
 1895      00000000 
 1895      00000000 
 1895      00000000 
 1896              		.section	.bss.etharp_cached_entry,"aw",%nobits
 1897              		.set	.LANCHOR1,. + 0
 1900              	etharp_cached_entry:
 1901 0000 00       		.space	1
 1902              		.text
 1903              	.Letext0:
 1904              		.file 2 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\machine\\_default_types.h"
 1905              		.file 3 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\_stdint.h"
 1906              		.file 4 "Drivers/CMSIS/Include/core_cm7.h"
 1907              		.file 5 "Drivers/CMSIS/Device/ST/STM32F7xx/Include/system_stm32f7xx.h"
 1908              		.file 6 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\lock.h"
 1909              		.file 7 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\_types.h"
 1910              		.file 8 "c:\\gcc_toolchain\\6_2017-q1-update\\lib\\gcc\\arm-none-eabi\\6.3.1\\include\\stddef.h"
 1911              		.file 9 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\reent.h"
 1912              		.file 10 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\stdlib.h"
 1913              		.file 11 "Middlewares/Third_Party/LwIP/src/include/lwip/arch.h"
 1914              		.file 12 "Middlewares/Third_Party/LwIP/src/include/lwip/err.h"
 1915              		.file 13 "Middlewares/Third_Party/LwIP/src/include/lwip/pbuf.h"
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 59


 1916              		.file 14 "Middlewares/Third_Party/LwIP/src/include/lwip/ip4_addr.h"
 1917              		.file 15 "Middlewares/Third_Party/LwIP/src/include/lwip/ip_addr.h"
 1918              		.file 16 "Middlewares/Third_Party/LwIP/src/include/lwip/memp.h"
 1919              		.file 17 "Middlewares/Third_Party/LwIP/src/include/lwip/priv/memp_priv.h"
 1920              		.file 18 "Middlewares/Third_Party/LwIP/src/include/lwip/netif.h"
 1921              		.file 19 "Middlewares/Third_Party/LwIP/src/include/lwip/prot/ip4.h"
 1922              		.file 20 "Middlewares/Third_Party/LwIP/src/include/lwip/prot/ethernet.h"
 1923              		.file 21 "Middlewares/Third_Party/LwIP/src/include/lwip/prot/etharp.h"
 1924              		.file 22 "Middlewares/Third_Party/LwIP/src/include/lwip/ip.h"
 1925              		.file 23 "Middlewares/Third_Party/LwIP/src/include/lwip/udp.h"
 1926              		.file 24 "Middlewares/Third_Party/LwIP/src/include/netif/ethernet.h"
 1927              		.file 25 "Middlewares/Third_Party/LwIP/src/include/lwip/def.h"
 1928              		.file 26 "Middlewares/Third_Party/LwIP/src/include/lwip/dhcp.h"
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 60


DEFINED SYMBOLS
                            *ABS*:00000000 etharp.c
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:18     .text.etharp_free_entry:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:24     .text.etharp_free_entry:00000000 etharp_free_entry
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:67     .text.etharp_free_entry:00000030 $d
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:72     .text.etharp_find_entry:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:78     .text.etharp_find_entry:00000000 etharp_find_entry
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:332    .text.etharp_find_entry:00000134 $d
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:337    .text.etharp_update_arp_entry:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:343    .text.etharp_update_arp_entry:00000000 etharp_update_arp_entry
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:492    .text.etharp_update_arp_entry:000000a0 $d
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:497    .text.etharp_raw:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:503    .text.etharp_raw:00000000 etharp_raw
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:620    .text.etharp_request_dst:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:626    .text.etharp_request_dst:00000000 etharp_request_dst
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:669    .text.etharp_request_dst:00000024 $d
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:674    .text.etharp_cleanup_netif:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:681    .text.etharp_cleanup_netif:00000000 etharp_cleanup_netif
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:744    .text.etharp_cleanup_netif:00000034 $d
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:749    .text.etharp_find_addr:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:756    .text.etharp_find_addr:00000000 etharp_find_addr
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:825    .text.etharp_find_addr:0000004c $d
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:830    .text.etharp_get_entry:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:837    .text.etharp_get_entry:00000000 etharp_get_entry
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:917    .text.etharp_get_entry:00000044 $d
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:922    .text.etharp_input:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:929    .text.etharp_input:00000000 etharp_input
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:1104   .text.etharp_request:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:1111   .text.etharp_request:00000000 etharp_request
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:1132   .text.etharp_request:0000000c $d
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:1137   .text.etharp_tmr:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:1144   .text.etharp_tmr:00000000 etharp_tmr
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:1279   .text.etharp_tmr:0000008c $d
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:1284   .text.etharp_output_to_arp_index:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:1290   .text.etharp_output_to_arp_index:00000000 etharp_output_to_arp_index
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:1406   .text.etharp_output_to_arp_index:000000a4 $d
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:1411   .text.etharp_query:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:1418   .text.etharp_query:00000000 etharp_query
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:1672   .text.etharp_query:00000130 $d
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:1679   .text.etharp_output:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:1686   .text.etharp_output:00000000 etharp_output
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:1882   .text.etharp_output:000000fc $d
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:1890   .bss.arp_table:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:1894   .bss.arp_table:00000000 arp_table
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:1900   .bss.etharp_cached_entry:00000000 etharp_cached_entry
C:\Users\Student\AppData\Local\Temp\ccAgPPME.s:1901   .bss.etharp_cached_entry:00000000 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
pbuf_free
ip4_addr_isbroadcast_u32
ethernet_output
pbuf_alloc
lwip_htons
ethzero
dhcp_arp_reply
ethbroadcast
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccAgPPME.s 			page 61


pbuf_copy
pbuf_ref
