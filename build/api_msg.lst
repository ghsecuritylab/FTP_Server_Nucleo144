ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"api_msg.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.recv_udp,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv5-sp-d16
  24              	recv_udp:
  25              	.LFB141:
  26              		.file 1 "Middlewares/Third_Party/LwIP/src/api/api_msg.c"
   1:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
   2:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @file
   3:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Sequential API Internal module
   4:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
   5:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
   6:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
   7:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /*
   8:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Copyright (c) 2001-2004 Swedish Institute of Computer Science.
   9:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * All rights reserved.
  10:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
  11:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Redistribution and use in source and binary forms, with or without modification,
  12:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * are permitted provided that the following conditions are met:
  13:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
  14:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * 1. Redistributions of source code must retain the above copyright notice,
  15:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *    this list of conditions and the following disclaimer.
  16:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  17:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *    this list of conditions and the following disclaimer in the documentation
  18:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *    and/or other materials provided with the distribution.
  19:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * 3. The name of the author may not be used to endorse or promote products
  20:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *    derived from this software without specific prior written permission.
  21:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
  22:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR IMPLIED
  23:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  24:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
  25:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  26:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT
  27:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  28:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  29:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
  30:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY
  31:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * OF SUCH DAMAGE.
  32:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 2


  33:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * This file is part of the lwIP TCP/IP stack.
  34:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
  35:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Author: Adam Dunkels <adam@sics.se>
  36:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
  37:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
  38:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  39:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/opt.h"
  40:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  41:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_NETCONN /* don't build if not configured for use in lwipopts.h */
  42:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  43:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/priv/api_msg.h"
  44:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  45:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/ip.h"
  46:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/udp.h"
  47:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/tcp.h"
  48:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/raw.h"
  49:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  50:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/memp.h"
  51:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/igmp.h"
  52:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/dns.h"
  53:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/mld6.h"
  54:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/priv/tcpip_priv.h"
  55:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  56:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include <string.h>
  57:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  58:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /* netconns are polled once per second (e.g. continue write on memory error) */
  59:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define NETCONN_TCP_POLL_INTERVAL 2
  60:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  61:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define SET_NONBLOCKING_CONNECT(conn, val)  do { if (val) { \
  62:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   (conn)->flags |= NETCONN_FLAG_IN_NONBLOCKING_CONNECT; \
  63:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** } else { \
  64:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   (conn)->flags &= ~ NETCONN_FLAG_IN_NONBLOCKING_CONNECT; }} while(0)
  65:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define IN_NONBLOCKING_CONNECT(conn) (((conn)->flags & NETCONN_FLAG_IN_NONBLOCKING_CONNECT) != 0)
  66:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  67:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /* forward declarations */
  68:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
  69:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
  70:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define WRITE_DELAYED         , 1
  71:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define WRITE_DELAYED_PARAM   , u8_t delayed
  72:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
  73:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define WRITE_DELAYED
  74:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define WRITE_DELAYED_PARAM
  75:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
  76:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t lwip_netconn_do_writemore(struct netconn *conn  WRITE_DELAYED_PARAM);
  77:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t lwip_netconn_do_close_internal(struct netconn *conn  WRITE_DELAYED_PARAM);
  78:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
  79:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  80:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
  81:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define TCPIP_APIMSG_ACK(m)   NETCONN_SET_SAFE_ERR((m)->conn, (m)->err)
  82:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
  83:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define TCPIP_APIMSG_ACK(m)   do { NETCONN_SET_SAFE_ERR((m)->conn, (m)->err); sys_sem_signal(LWIP_A
  84:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
  85:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  86:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
  87:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** u8_t netconn_aborted;
  88:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
  89:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 3


  90:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
  91:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
  92:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Receive callback function for RAW netconns.
  93:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Doesn't 'eat' the packet, only copies it and sends it to
  94:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * conn->recvmbox
  95:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
  96:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @see raw.h (struct raw_pcb.recv) for parameters and return value
  97:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
  98:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static u8_t
  99:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** recv_raw(void *arg, struct raw_pcb *pcb, struct pbuf *p,
 100:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     const ip_addr_t *addr)
 101:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 102:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct pbuf *q;
 103:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netbuf *buf;
 104:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 105:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 106:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_UNUSED_ARG(addr);
 107:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)arg;
 108:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 109:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if ((conn != NULL) && sys_mbox_valid(&conn->recvmbox)) {
 110:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_RCVBUF
 111:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     int recv_avail;
 112:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     SYS_ARCH_GET(conn->recv_avail, recv_avail);
 113:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if ((recv_avail + (int)(p->tot_len)) > conn->recv_bufsize) {
 114:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       return 0;
 115:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 116:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_RCVBUF */
 117:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* copy the whole packet into new pbufs */
 118:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     q = pbuf_alloc(PBUF_RAW, p->tot_len, PBUF_RAM);
 119:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (q != NULL) {
 120:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (pbuf_copy(q, p) != ERR_OK) {
 121:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         pbuf_free(q);
 122:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         q = NULL;
 123:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 124:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 125:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 126:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (q != NULL) {
 127:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       u16_t len;
 128:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       buf = (struct netbuf *)memp_malloc(MEMP_NETBUF);
 129:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (buf == NULL) {
 130:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         pbuf_free(q);
 131:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         return 0;
 132:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 133:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 134:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       buf->p = q;
 135:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       buf->ptr = q;
 136:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ip_addr_copy(buf->addr, *ip_current_src_addr());
 137:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       buf->port = pcb->protocol;
 138:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 139:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       len = q->tot_len;
 140:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (sys_mbox_trypost(&conn->recvmbox, buf) != ERR_OK) {
 141:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         netbuf_delete(buf);
 142:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         return 0;
 143:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
 144:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_RCVBUF
 145:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         SYS_ARCH_INC(conn->recv_avail, len);
 146:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_RCVBUF */
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 4


 147:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* Register event with callback */
 148:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EVENT(conn, NETCONN_EVT_RCVPLUS, len);
 149:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 150:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 151:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 152:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 153:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return 0; /* do not eat the packet */
 154:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 155:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_RAW*/
 156:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 157:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
 158:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 159:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Receive callback function for UDP netconns.
 160:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Posts the packet to conn->recvmbox or deletes it on memory error.
 161:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 162:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @see udp.h (struct udp_pcb.recv) for parameters
 163:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 164:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static void
 165:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** recv_udp(void *arg, struct udp_pcb *pcb, struct pbuf *p,
 166:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****    const ip_addr_t *addr, u16_t port)
 167:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
  27              		.loc 1 167 0
  28              		.cfi_startproc
  29              		@ args = 4, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              	.LVL0:
  32 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 24
  35              		.cfi_offset 4, -24
  36              		.cfi_offset 5, -20
  37              		.cfi_offset 6, -16
  38              		.cfi_offset 7, -12
  39              		.cfi_offset 8, -8
  40              		.cfi_offset 14, -4
  41 0004 1446     		mov	r4, r2
  42              	.LVL1:
 168:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netbuf *buf;
 169:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 170:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u16_t len;
 171:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_RCVBUF
 172:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   int recv_avail;
 173:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_RCVBUF */
 174:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 175:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_UNUSED_ARG(pcb); /* only used for asserts... */
 176:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_udp must have a pcb argument", pcb != NULL);
 177:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_udp must have an argument", arg != NULL);
 178:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)arg;
 179:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_udp: recv for wrong pcb!", conn->pcb.udp == pcb);
 180:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 181:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_RCVBUF
 182:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   SYS_ARCH_GET(conn->recv_avail, recv_avail);
 183:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if ((conn == NULL) || !sys_mbox_valid(&conn->recvmbox) ||
 184:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ((recv_avail + (int)(p->tot_len)) > conn->recv_bufsize)) {
 185:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else  /* LWIP_SO_RCVBUF */
 186:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if ((conn == NULL) || !sys_mbox_valid(&conn->recvmbox)) {
  43              		.loc 1 186 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 5


  44 0006 38B1     		cbz	r0, .L2
  45 0008 9846     		mov	r8, r3
  46 000a 0546     		mov	r5, r0
  47              		.loc 1 186 0 is_stmt 0 discriminator 1
  48 000c 00F11006 		add	r6, r0, #16
  49 0010 3046     		mov	r0, r6
  50              	.LVL2:
  51 0012 FFF7FEFF 		bl	sys_mbox_valid
  52              	.LVL3:
  53 0016 20B9     		cbnz	r0, .L3
  54              	.LVL4:
  55              	.L2:
 187:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_RCVBUF */
 188:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     pbuf_free(p);
  56              		.loc 1 188 0 is_stmt 1
  57 0018 2046     		mov	r0, r4
  58 001a FFF7FEFF 		bl	pbuf_free
  59              	.LVL5:
 189:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
  60              		.loc 1 189 0
  61 001e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
  62              	.LVL6:
  63              	.L3:
 190:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 191:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 192:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   buf = (struct netbuf *)memp_malloc(MEMP_NETBUF);
  64              		.loc 1 192 0
  65 0022 0620     		movs	r0, #6
  66 0024 FFF7FEFF 		bl	memp_malloc
  67              	.LVL7:
 193:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (buf == NULL) {
  68              		.loc 1 193 0
  69 0028 0746     		mov	r7, r0
  70 002a C0B1     		cbz	r0, .L10
 194:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     pbuf_free(p);
 195:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 196:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 197:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     buf->p = p;
  71              		.loc 1 197 0
  72 002c 0460     		str	r4, [r0]
 198:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     buf->ptr = p;
  73              		.loc 1 198 0
  74 002e 4460     		str	r4, [r0, #4]
 199:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     ip_addr_set(&buf->addr, addr);
  75              		.loc 1 199 0
  76 0030 B8F1000F 		cmp	r8, #0
  77 0034 18D0     		beq	.L8
  78              		.loc 1 199 0 is_stmt 0 discriminator 1
  79 0036 D8F80030 		ldr	r3, [r8]
  80              	.L6:
  81              		.loc 1 199 0 discriminator 4
  82 003a BB60     		str	r3, [r7, #8]
 200:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     buf->port = port;
  83              		.loc 1 200 0 is_stmt 1 discriminator 4
  84 003c BDF81830 		ldrh	r3, [sp, #24]
  85 0040 BB81     		strh	r3, [r7, #12]	@ movhi
 201:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_NETBUF_RECVINFO
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 6


 202:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     {
 203:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* get the UDP header - always in the first pbuf, ensured by udp_input */
 204:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       const struct udp_hdr* udphdr = (const struct udp_hdr*)ip_next_header_ptr();
 205:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_CHECKSUM_ON_COPY
 206:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       buf->flags = NETBUF_FLAG_DESTADDR;
 207:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_CHECKSUM_ON_COPY */
 208:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ip_addr_set(&buf->toaddr, ip_current_dest_addr());
 209:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       buf->toport_chksum = udphdr->dest;
 210:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 211:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_NETBUF_RECVINFO */
 212:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 213:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 214:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   len = p->tot_len;
  86              		.loc 1 214 0 discriminator 4
  87 0042 2489     		ldrh	r4, [r4, #8]
  88              	.LVL8:
 215:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_mbox_trypost(&conn->recvmbox, buf) != ERR_OK) {
  89              		.loc 1 215 0 discriminator 4
  90 0044 3946     		mov	r1, r7
  91 0046 3046     		mov	r0, r6
  92              	.LVL9:
  93 0048 FFF7FEFF 		bl	sys_mbox_trypost
  94              	.LVL10:
  95 004c 70B9     		cbnz	r0, .L11
 216:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     netbuf_delete(buf);
 217:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 218:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 219:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_RCVBUF
 220:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     SYS_ARCH_INC(conn->recv_avail, len);
 221:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_RCVBUF */
 222:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Register event with callback */
 223:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EVENT(conn, NETCONN_EVT_RCVPLUS, len);
  96              		.loc 1 223 0
  97 004e AB6A     		ldr	r3, [r5, #40]
  98 0050 1BB1     		cbz	r3, .L1
  99              		.loc 1 223 0 is_stmt 0 discriminator 1
 100 0052 2246     		mov	r2, r4
 101 0054 0021     		movs	r1, #0
 102 0056 2846     		mov	r0, r5
 103 0058 9847     		blx	r3
 104              	.LVL11:
 105              	.L1:
 106 005a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 107              	.LVL12:
 108              	.L10:
 194:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 109              		.loc 1 194 0 is_stmt 1
 110 005e 2046     		mov	r0, r4
 111              	.LVL13:
 112 0060 FFF7FEFF 		bl	pbuf_free
 113              	.LVL14:
 195:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 114              		.loc 1 195 0
 115 0064 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 116              	.LVL15:
 117              	.L8:
 199:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     buf->port = port;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 7


 118              		.loc 1 199 0
 119 0068 0023     		movs	r3, #0
 120 006a E6E7     		b	.L6
 121              	.LVL16:
 122              	.L11:
 216:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 123              		.loc 1 216 0
 124 006c 3846     		mov	r0, r7
 125 006e FFF7FEFF 		bl	netbuf_delete
 126              	.LVL17:
 217:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 127              		.loc 1 217 0
 128 0072 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 129              		.cfi_endproc
 130              	.LFE141:
 132              		.section	.text.setup_tcp,"ax",%progbits
 133              		.align	1
 134              		.syntax unified
 135              		.thumb
 136              		.thumb_func
 137              		.fpu fpv5-sp-d16
 139              	setup_tcp:
 140              	.LFB146:
 224:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 225:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 226:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
 227:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 228:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 229:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 230:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Receive callback function for TCP netconns.
 231:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Posts the packet to conn->recvmbox, but doesn't delete it on errors.
 232:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 233:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @see tcp.h (struct tcp_pcb.recv) for parameters and return value
 234:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 235:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t
 236:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** recv_tcp(void *arg, struct tcp_pcb *pcb, struct pbuf *p, err_t err)
 237:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 238:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 239:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u16_t len;
 240:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 241:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_UNUSED_ARG(pcb);
 242:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_tcp must have a pcb argument", pcb != NULL);
 243:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_tcp must have an argument", arg != NULL);
 244:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)arg;
 245:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 246:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn == NULL) {
 247:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_VAL;
 248:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 249:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_tcp: recv for wrong pcb!", conn->pcb.tcp == pcb);
 250:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 251:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (!sys_mbox_valid(&conn->recvmbox)) {
 252:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* recvmbox already deleted */
 253:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (p != NULL) {
 254:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_recved(pcb, p->tot_len);
 255:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       pbuf_free(p);
 256:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 257:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_OK;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 8


 258:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 259:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Unlike for UDP or RAW pcbs, don't check for available space
 260:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****      using recv_avail since that could break the connection
 261:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****      (data is already ACKed) */
 262:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 263:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* don't overwrite fatal errors! */
 264:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (err != ERR_OK) {
 265:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     NETCONN_SET_SAFE_ERR(conn, err);
 266:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 267:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 268:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (p != NULL) {
 269:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     len = p->tot_len;
 270:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 271:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     len = 0;
 272:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 273:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 274:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_mbox_trypost(&conn->recvmbox, p) != ERR_OK) {
 275:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* don't deallocate p: it is presented to us later again from tcp_fasttmr! */
 276:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_MEM;
 277:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 278:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_RCVBUF
 279:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     SYS_ARCH_INC(conn->recv_avail, len);
 280:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_RCVBUF */
 281:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Register event with callback */
 282:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EVENT(conn, NETCONN_EVT_RCVPLUS, len);
 283:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 284:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 285:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return ERR_OK;
 286:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 287:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 288:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 289:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Poll callback function for TCP netconns.
 290:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Wakes up an application thread that waits for a connection to close
 291:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * or data to be sent. The application thread then takes the
 292:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * appropriate action to go on.
 293:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 294:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Signals the conn->sem.
 295:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * netconn_close waits for conn->sem if closing failed.
 296:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 297:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @see tcp.h (struct tcp_pcb.poll) for parameters and return value
 298:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 299:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t
 300:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** poll_tcp(void *arg, struct tcp_pcb *pcb)
 301:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 302:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn = (struct netconn *)arg;
 303:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 304:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_UNUSED_ARG(pcb);
 305:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn != NULL", (conn != NULL));
 306:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 307:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn->state == NETCONN_WRITE) {
 308:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     lwip_netconn_do_writemore(conn  WRITE_DELAYED);
 309:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else if (conn->state == NETCONN_CLOSE) {
 310:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if !LWIP_SO_SNDTIMEO && !LWIP_SO_LINGER
 311:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (conn->current_msg && conn->current_msg->msg.sd.polls_left) {
 312:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->msg.sd.polls_left--;
 313:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 314:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* !LWIP_SO_SNDTIMEO && !LWIP_SO_LINGER */
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 9


 315:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     lwip_netconn_do_close_internal(conn  WRITE_DELAYED);
 316:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 317:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* @todo: implement connect timeout here? */
 318:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 319:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Did a nonblocking write fail before? Then check available write-space. */
 320:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn->flags & NETCONN_FLAG_CHECK_WRITESPACE) {
 321:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* If the queued byte- or pbuf-count drops below the configured low-water limit,
 322:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        let select mark this pcb as writable again. */
 323:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if ((conn->pcb.tcp != NULL) && (tcp_sndbuf(conn->pcb.tcp) > TCP_SNDLOWAT) &&
 324:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (tcp_sndqueuelen(conn->pcb.tcp) < TCP_SNDQUEUELOWAT)) {
 325:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->flags &= ~NETCONN_FLAG_CHECK_WRITESPACE;
 326:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       API_EVENT(conn, NETCONN_EVT_SENDPLUS, 0);
 327:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 328:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 329:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 330:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return ERR_OK;
 331:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 332:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 333:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 334:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Sent callback function for TCP netconns.
 335:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Signals the conn->sem and calls API_EVENT.
 336:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * netconn_write waits for conn->sem if send buffer is low.
 337:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 338:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @see tcp.h (struct tcp_pcb.sent) for parameters and return value
 339:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 340:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t
 341:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** sent_tcp(void *arg, struct tcp_pcb *pcb, u16_t len)
 342:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 343:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn = (struct netconn *)arg;
 344:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 345:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_UNUSED_ARG(pcb);
 346:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn != NULL", (conn != NULL));
 347:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 348:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn) {
 349:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (conn->state == NETCONN_WRITE) {
 350:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       lwip_netconn_do_writemore(conn  WRITE_DELAYED);
 351:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else if (conn->state == NETCONN_CLOSE) {
 352:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       lwip_netconn_do_close_internal(conn  WRITE_DELAYED);
 353:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 354:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 355:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* If the queued byte- or pbuf-count drops below the configured low-water limit,
 356:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        let select mark this pcb as writable again. */
 357:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if ((conn->pcb.tcp != NULL) && (tcp_sndbuf(conn->pcb.tcp) > TCP_SNDLOWAT) &&
 358:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (tcp_sndqueuelen(conn->pcb.tcp) < TCP_SNDQUEUELOWAT)) {
 359:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->flags &= ~NETCONN_FLAG_CHECK_WRITESPACE;
 360:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       API_EVENT(conn, NETCONN_EVT_SENDPLUS, len);
 361:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 362:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 363:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 364:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return ERR_OK;
 365:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 366:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 367:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 368:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Error callback function for TCP netconns.
 369:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Signals conn->sem, posts to all conn mboxes and calls API_EVENT.
 370:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * The application thread has then to decide what to do.
 371:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 10


 372:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @see tcp.h (struct tcp_pcb.err) for parameters
 373:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 374:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static void
 375:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** err_tcp(void *arg, err_t err)
 376:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 377:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 378:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   enum netconn_state old_state;
 379:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 380:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)arg;
 381:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn != NULL", (conn != NULL));
 382:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 383:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->pcb.tcp = NULL;
 384:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 385:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* reset conn->state now before waking up other threads */
 386:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   old_state = conn->state;
 387:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->state = NETCONN_NONE;
 388:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 389:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (old_state == NETCONN_CLOSE) {
 390:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* RST during close: let close return success & dealloc the netconn */
 391:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     err = ERR_OK;
 392:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     NETCONN_SET_SAFE_ERR(conn, ERR_OK);
 393:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 394:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* no check since this is always fatal! */
 395:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     SYS_ARCH_SET(conn->last_err, err);
 396:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 397:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 398:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* @todo: the type of NETCONN_EVT created should depend on 'old_state' */
 399:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 400:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Notify the user layer about a connection error. Used to signal select. */
 401:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   API_EVENT(conn, NETCONN_EVT_ERROR, 0);
 402:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Try to release selects pending on 'read' or 'write', too.
 403:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****      They will get an error if they actually try to read or write. */
 404:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   API_EVENT(conn, NETCONN_EVT_RCVPLUS, 0);
 405:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   API_EVENT(conn, NETCONN_EVT_SENDPLUS, 0);
 406:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 407:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* pass NULL-message to recvmbox to wake up pending recv */
 408:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_mbox_valid(&conn->recvmbox)) {
 409:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* use trypost to prevent deadlock */
 410:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_trypost(&conn->recvmbox, NULL);
 411:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 412:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* pass NULL-message to acceptmbox to wake up pending accept */
 413:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_mbox_valid(&conn->acceptmbox)) {
 414:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* use trypost to preven deadlock */
 415:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_trypost(&conn->acceptmbox, NULL);
 416:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 417:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 418:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if ((old_state == NETCONN_WRITE) || (old_state == NETCONN_CLOSE) ||
 419:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (old_state == NETCONN_CONNECT)) {
 420:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* calling lwip_netconn_do_writemore/lwip_netconn_do_close_internal is not necessary
 421:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        since the pcb has already been deleted! */
 422:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     int was_nonblocking_connect = IN_NONBLOCKING_CONNECT(conn);
 423:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     SET_NONBLOCKING_CONNECT(conn, 0);
 424:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 425:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (!was_nonblocking_connect) {
 426:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_t* op_completed_sem;
 427:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* set error return code */
 428:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       LWIP_ASSERT("conn->current_msg != NULL", conn->current_msg != NULL);
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 11


 429:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->err = err;
 430:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       op_completed_sem = LWIP_API_MSG_SEM(conn->current_msg);
 431:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       LWIP_ASSERT("inavlid op_completed_sem", sys_sem_valid(op_completed_sem));
 432:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg = NULL;
 433:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* wake up the waiting task */
 434:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       NETCONN_SET_SAFE_ERR(conn, err);
 435:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_signal(op_completed_sem);
 436:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 437:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 438:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     LWIP_ASSERT("conn->current_msg == NULL", conn->current_msg == NULL);
 439:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 440:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 441:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 442:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 443:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Setup a tcp_pcb with the correct callback function pointers
 444:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * and their arguments.
 445:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 446:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param conn the TCP netconn to setup
 447:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 448:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static void
 449:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** setup_tcp(struct netconn *conn)
 450:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 141              		.loc 1 450 0
 142              		.cfi_startproc
 143              		@ args = 0, pretend = 0, frame = 0
 144              		@ frame_needed = 0, uses_anonymous_args = 0
 145              	.LVL18:
 146 0000 10B5     		push	{r4, lr}
 147              	.LCFI1:
 148              		.cfi_def_cfa_offset 8
 149              		.cfi_offset 4, -8
 150              		.cfi_offset 14, -4
 151 0002 0146     		mov	r1, r0
 451:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct tcp_pcb *pcb;
 452:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 453:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   pcb = conn->pcb.tcp;
 152              		.loc 1 453 0
 153 0004 4468     		ldr	r4, [r0, #4]
 154              	.LVL19:
 454:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   tcp_arg(pcb, conn);
 155              		.loc 1 454 0
 156 0006 2046     		mov	r0, r4
 157              	.LVL20:
 158 0008 FFF7FEFF 		bl	tcp_arg
 159              	.LVL21:
 455:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   tcp_recv(pcb, recv_tcp);
 160              		.loc 1 455 0
 161 000c 0849     		ldr	r1, .L14
 162 000e 2046     		mov	r0, r4
 163 0010 FFF7FEFF 		bl	tcp_recv
 164              	.LVL22:
 456:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   tcp_sent(pcb, sent_tcp);
 165              		.loc 1 456 0
 166 0014 0749     		ldr	r1, .L14+4
 167 0016 2046     		mov	r0, r4
 168 0018 FFF7FEFF 		bl	tcp_sent
 169              	.LVL23:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 12


 457:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   tcp_poll(pcb, poll_tcp, NETCONN_TCP_POLL_INTERVAL);
 170              		.loc 1 457 0
 171 001c 0222     		movs	r2, #2
 172 001e 0649     		ldr	r1, .L14+8
 173 0020 2046     		mov	r0, r4
 174 0022 FFF7FEFF 		bl	tcp_poll
 175              	.LVL24:
 458:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   tcp_err(pcb, err_tcp);
 176              		.loc 1 458 0
 177 0026 0549     		ldr	r1, .L14+12
 178 0028 2046     		mov	r0, r4
 179 002a FFF7FEFF 		bl	tcp_err
 180              	.LVL25:
 181 002e 10BD     		pop	{r4, pc}
 182              	.LVL26:
 183              	.L15:
 184              		.align	2
 185              	.L14:
 186 0030 00000000 		.word	recv_tcp
 187 0034 00000000 		.word	sent_tcp
 188 0038 00000000 		.word	poll_tcp
 189 003c 00000000 		.word	err_tcp
 190              		.cfi_endproc
 191              	.LFE146:
 193              		.section	.text.pcb_new,"ax",%progbits
 194              		.align	1
 195              		.syntax unified
 196              		.thumb
 197              		.thumb_func
 198              		.fpu fpv5-sp-d16
 200              	pcb_new:
 201              	.LFB148:
 459:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 460:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 461:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 462:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Accept callback function for TCP netconns.
 463:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Allocates a new netconn and posts that to conn->acceptmbox.
 464:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 465:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @see tcp.h (struct tcp_pcb_listen.accept) for parameters and return value
 466:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 467:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t
 468:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** accept_function(void *arg, struct tcp_pcb *newpcb, err_t err)
 469:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 470:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *newconn;
 471:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn = (struct netconn *)arg;
 472:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 473:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_DEBUGF(API_MSG_DEBUG, ("accept_function: newpcb->tate: %s\n", tcp_debug_state_str(newpcb->st
 474:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 475:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn == NULL) {
 476:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_VAL;
 477:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 478:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (!sys_mbox_valid(&conn->acceptmbox)) {
 479:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     LWIP_DEBUGF(API_MSG_DEBUG, ("accept_function: acceptmbox already deleted\n"));
 480:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_VAL;
 481:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 482:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 483:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (newpcb == NULL) {
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 13


 484:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* out-of-pcbs during connect: pass on this error to the application */
 485:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (sys_mbox_trypost(&conn->acceptmbox, &netconn_aborted) == ERR_OK) {
 486:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Register event with callback */
 487:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       API_EVENT(conn, NETCONN_EVT_RCVPLUS, 0);
 488:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 489:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_VAL;
 490:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 491:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 492:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* We have to set the callback here even though
 493:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****    * the new socket is unknown. newconn->socket is marked as -1. */
 494:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   newconn = netconn_alloc(conn->type, conn->callback);
 495:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (newconn == NULL) {
 496:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* outof netconns: pass on this error to the application */
 497:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (sys_mbox_trypost(&conn->acceptmbox, &netconn_aborted) == ERR_OK) {
 498:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Register event with callback */
 499:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       API_EVENT(conn, NETCONN_EVT_RCVPLUS, 0);
 500:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 501:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_MEM;
 502:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 503:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   newconn->pcb.tcp = newpcb;
 504:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   setup_tcp(newconn);
 505:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* no protection: when creating the pcb, the netconn is not yet known
 506:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****      to the application thread */
 507:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   newconn->last_err = err;
 508:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 509:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* handle backlog counter */
 510:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   tcp_backlog_delayed(newpcb);
 511:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 512:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_mbox_trypost(&conn->acceptmbox, newconn) != ERR_OK) {
 513:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* When returning != ERR_OK, the pcb is aborted in tcp_process(),
 514:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        so do nothing here! */
 515:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* remove all references to this netconn from the pcb */
 516:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     struct tcp_pcb* pcb = newconn->pcb.tcp;
 517:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_arg(pcb, NULL);
 518:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_recv(pcb, NULL);
 519:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_sent(pcb, NULL);
 520:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_poll(pcb, NULL, 0);
 521:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_err(pcb, NULL);
 522:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* remove reference from to the pcb from this netconn */
 523:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     newconn->pcb.tcp = NULL;
 524:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* no need to drain since we know the recvmbox is empty. */
 525:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_free(&newconn->recvmbox);
 526:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_set_invalid(&newconn->recvmbox);
 527:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     netconn_free(newconn);
 528:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_MEM;
 529:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 530:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Register event with callback */
 531:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EVENT(conn, NETCONN_EVT_RCVPLUS, 0);
 532:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 533:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 534:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return ERR_OK;
 535:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 536:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 537:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 538:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 539:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Create a new pcb of a specific type.
 540:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from lwip_netconn_do_newconn().
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 14


 541:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 542:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param msg the api_msg_msg describing the connection type
 543:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 544:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static void
 545:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** pcb_new(struct api_msg *msg)
 546:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 202              		.loc 1 546 0
 203              		.cfi_startproc
 204              		@ args = 0, pretend = 0, frame = 0
 205              		@ frame_needed = 0, uses_anonymous_args = 0
 206              	.LVL27:
 207 0000 38B5     		push	{r3, r4, r5, lr}
 208              	.LCFI2:
 209              		.cfi_def_cfa_offset 16
 210              		.cfi_offset 3, -16
 211              		.cfi_offset 4, -12
 212              		.cfi_offset 5, -8
 213              		.cfi_offset 14, -4
 214 0002 0446     		mov	r4, r0
 547:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("pcb_new: pcb already allocated", msg->conn->pcb.tcp == NULL);
 215              		.loc 1 547 0
 216 0004 0568     		ldr	r5, [r0]
 548:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 549:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Allocate a PCB for this connection */
 550:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   switch(NETCONNTYPE_GROUP(msg->conn->type)) {
 217              		.loc 1 550 0
 218 0006 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 219 0008 03F0F003 		and	r3, r3, #240
 220 000c 102B     		cmp	r3, #16
 221 000e 17D0     		beq	.L18
 222 0010 202B     		cmp	r3, #32
 223 0012 1FD1     		bne	.L23
 551:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
 552:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   case NETCONN_RAW:
 553:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->conn->pcb.raw = raw_new(msg->msg.n.proto);
 554:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.raw != NULL) {
 555:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       raw_recv(msg->conn->pcb.raw, recv_raw, msg->conn);
 556:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 557:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     break;
 558:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_RAW */
 559:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
 560:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   case NETCONN_UDP:
 561:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->conn->pcb.udp = udp_new();
 224              		.loc 1 561 0
 225 0014 FFF7FEFF 		bl	udp_new
 226              	.LVL28:
 227 0018 6860     		str	r0, [r5, #4]
 562:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.udp != NULL) {
 228              		.loc 1 562 0
 229 001a 2368     		ldr	r3, [r4]
 230 001c 5A68     		ldr	r2, [r3, #4]
 231 001e 42B1     		cbz	r2, .L20
 563:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDPLITE
 564:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (NETCONNTYPE_ISUDPLITE(msg->conn->type)) {
 565:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         udp_setflags(msg->conn->pcb.udp, UDP_FLAGS_UDPLITE);
 566:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 567:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDPLITE */
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 15


 568:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (NETCONNTYPE_ISUDPNOCHKSUM(msg->conn->type)) {
 232              		.loc 1 568 0
 233 0020 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 234 0022 222B     		cmp	r3, #34
 235 0024 09D0     		beq	.L25
 236              	.L21:
 569:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         udp_setflags(msg->conn->pcb.udp, UDP_FLAGS_NOCHKSUM);
 570:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 571:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       udp_recv(msg->conn->pcb.udp, recv_udp, msg->conn);
 237              		.loc 1 571 0
 238 0026 2368     		ldr	r3, [r4]
 239 0028 1A46     		mov	r2, r3
 240 002a 0D49     		ldr	r1, .L27
 241 002c 5868     		ldr	r0, [r3, #4]
 242 002e FFF7FEFF 		bl	udp_recv
 243              	.LVL29:
 244              	.L20:
 572:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 573:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     break;
 574:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
 575:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 576:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   case NETCONN_TCP:
 577:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->conn->pcb.tcp = tcp_new();
 578:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
 579:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       setup_tcp(msg->conn);
 580:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 581:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     break;
 582:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 583:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   default:
 584:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Unsupported netconn type, e.g. protocol disabled */
 585:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_VAL;
 586:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 587:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 588:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (msg->conn->pcb.ip == NULL) {
 245              		.loc 1 588 0
 246 0032 2368     		ldr	r3, [r4]
 247 0034 5B68     		ldr	r3, [r3, #4]
 248 0036 83B1     		cbz	r3, .L26
 249              	.L16:
 250 0038 38BD     		pop	{r3, r4, r5, pc}
 251              	.LVL30:
 252              	.L25:
 569:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         udp_setflags(msg->conn->pcb.udp, UDP_FLAGS_NOCHKSUM);
 253              		.loc 1 569 0
 254 003a 0123     		movs	r3, #1
 255 003c 1374     		strb	r3, [r2, #16]
 256 003e F2E7     		b	.L21
 257              	.LVL31:
 258              	.L18:
 577:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
 259              		.loc 1 577 0
 260 0040 FFF7FEFF 		bl	tcp_new
 261              	.LVL32:
 262 0044 6860     		str	r0, [r5, #4]
 578:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       setup_tcp(msg->conn);
 263              		.loc 1 578 0
 264 0046 2068     		ldr	r0, [r4]
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 16


 265 0048 4368     		ldr	r3, [r0, #4]
 266 004a 002B     		cmp	r3, #0
 267 004c F1D0     		beq	.L20
 579:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 268              		.loc 1 579 0
 269 004e FFF7FEFF 		bl	setup_tcp
 270              	.LVL33:
 271 0052 EEE7     		b	.L20
 272              	.LVL34:
 273              	.L23:
 585:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 274              		.loc 1 585 0
 275 0054 FA23     		movs	r3, #250
 276 0056 0371     		strb	r3, [r0, #4]
 586:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 277              		.loc 1 586 0
 278 0058 38BD     		pop	{r3, r4, r5, pc}
 279              	.LVL35:
 280              	.L26:
 589:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_MEM;
 281              		.loc 1 589 0
 282 005a FF23     		movs	r3, #255
 283 005c 2371     		strb	r3, [r4, #4]
 284 005e EBE7     		b	.L16
 285              	.L28:
 286              		.align	2
 287              	.L27:
 288 0060 00000000 		.word	recv_udp
 289              		.cfi_endproc
 290              	.LFE148:
 292              		.section	.text.err_tcp,"ax",%progbits
 293              		.align	1
 294              		.syntax unified
 295              		.thumb
 296              		.thumb_func
 297              		.fpu fpv5-sp-d16
 299              	err_tcp:
 300              	.LFB145:
 376:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 301              		.loc 1 376 0
 302              		.cfi_startproc
 303              		@ args = 0, pretend = 0, frame = 0
 304              		@ frame_needed = 0, uses_anonymous_args = 0
 305              	.LVL36:
 306 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 307              	.LCFI3:
 308              		.cfi_def_cfa_offset 24
 309              		.cfi_offset 3, -24
 310              		.cfi_offset 4, -20
 311              		.cfi_offset 5, -16
 312              		.cfi_offset 6, -12
 313              		.cfi_offset 7, -8
 314              		.cfi_offset 14, -4
 315 0002 0446     		mov	r4, r0
 316              	.LVL37:
 383:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 317              		.loc 1 383 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 17


 318 0004 0023     		movs	r3, #0
 319 0006 4360     		str	r3, [r0, #4]
 386:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->state = NETCONN_NONE;
 320              		.loc 1 386 0
 321 0008 4578     		ldrb	r5, [r0, #1]	@ zero_extendqisi2
 322              	.LVL38:
 387:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 323              		.loc 1 387 0
 324 000a 4370     		strb	r3, [r0, #1]
 389:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* RST during close: let close return success & dealloc the netconn */
 325              		.loc 1 389 0
 326 000c 042D     		cmp	r5, #4
 327 000e 31D0     		beq	.L44
 328 0010 0E46     		mov	r6, r1
 329              	.LBB2:
 395:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 330              		.loc 1 395 0
 331 0012 FFF7FEFF 		bl	sys_arch_protect
 332              	.LVL39:
 333 0016 2672     		strb	r6, [r4, #8]
 334 0018 FFF7FEFF 		bl	sys_arch_unprotect
 335              	.LVL40:
 336              	.L31:
 337              	.LBE2:
 401:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Try to release selects pending on 'read' or 'write', too.
 338              		.loc 1 401 0
 339 001c A36A     		ldr	r3, [r4, #40]
 340 001e 1BB1     		cbz	r3, .L33
 401:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Try to release selects pending on 'read' or 'write', too.
 341              		.loc 1 401 0 is_stmt 0 discriminator 1
 342 0020 0022     		movs	r2, #0
 343 0022 0421     		movs	r1, #4
 344 0024 2046     		mov	r0, r4
 345 0026 9847     		blx	r3
 346              	.LVL41:
 347              	.L33:
 404:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   API_EVENT(conn, NETCONN_EVT_SENDPLUS, 0);
 348              		.loc 1 404 0 is_stmt 1
 349 0028 A36A     		ldr	r3, [r4, #40]
 350 002a 1BB1     		cbz	r3, .L34
 404:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   API_EVENT(conn, NETCONN_EVT_SENDPLUS, 0);
 351              		.loc 1 404 0 is_stmt 0 discriminator 1
 352 002c 0022     		movs	r2, #0
 353 002e 1146     		mov	r1, r2
 354 0030 2046     		mov	r0, r4
 355 0032 9847     		blx	r3
 356              	.LVL42:
 357              	.L34:
 405:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 358              		.loc 1 405 0 is_stmt 1
 359 0034 A36A     		ldr	r3, [r4, #40]
 360 0036 1BB1     		cbz	r3, .L35
 405:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 361              		.loc 1 405 0 is_stmt 0 discriminator 1
 362 0038 0022     		movs	r2, #0
 363 003a 0221     		movs	r1, #2
 364 003c 2046     		mov	r0, r4
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 18


 365 003e 9847     		blx	r3
 366              	.LVL43:
 367              	.L35:
 408:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* use trypost to prevent deadlock */
 368              		.loc 1 408 0 is_stmt 1
 369 0040 04F11007 		add	r7, r4, #16
 370 0044 3846     		mov	r0, r7
 371 0046 FFF7FEFF 		bl	sys_mbox_valid
 372              	.LVL44:
 373 004a 18BB     		cbnz	r0, .L45
 374              	.L36:
 413:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* use trypost to preven deadlock */
 375              		.loc 1 413 0
 376 004c 04F11407 		add	r7, r4, #20
 377 0050 3846     		mov	r0, r7
 378 0052 FFF7FEFF 		bl	sys_mbox_valid
 379              	.LVL45:
 380 0056 10BB     		cbnz	r0, .L46
 381              	.L37:
 418:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (old_state == NETCONN_CONNECT)) {
 382              		.loc 1 418 0
 383 0058 042D     		cmp	r5, #4
 384 005a 18BF     		it	ne
 385 005c 012D     		cmpne	r5, #1
 386 005e 01D0     		beq	.L38
 418:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (old_state == NETCONN_CONNECT)) {
 387              		.loc 1 418 0 is_stmt 0 discriminator 1
 388 0060 032D     		cmp	r5, #3
 389 0062 06D1     		bne	.L29
 390              	.L38:
 391              	.LBB3:
 422:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     SET_NONBLOCKING_CONNECT(conn, 0);
 392              		.loc 1 422 0 is_stmt 1
 393 0064 237F     		ldrb	r3, [r4, #28]	@ zero_extendqisi2
 394              	.LVL46:
 423:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 395              		.loc 1 423 0
 396 0066 23F00402 		bic	r2, r3, #4
 397 006a 2277     		strb	r2, [r4, #28]
 425:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_t* op_completed_sem;
 398              		.loc 1 425 0
 399 006c 13F0040F 		tst	r3, #4
 400 0070 1AD0     		beq	.L47
 401              	.LVL47:
 402              	.L29:
 403 0072 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 404              	.LVL48:
 405              	.L44:
 406              	.LBE3:
 392:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 407              		.loc 1 392 0
 408 0074 60B1     		cbz	r0, .L42
 409              	.LBB6:
 392:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 410              		.loc 1 392 0 is_stmt 0 discriminator 1
 411 0076 FFF7FEFF 		bl	sys_arch_protect
 412              	.LVL49:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 19


 413 007a 94F90830 		ldrsb	r3, [r4, #8]
 414 007e 13F10C0F 		cmn	r3, #12
 415 0082 01DB     		blt	.L32
 392:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 416              		.loc 1 392 0 discriminator 2
 417 0084 0023     		movs	r3, #0
 418 0086 2372     		strb	r3, [r4, #8]
 419              	.L32:
 392:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 420              		.loc 1 392 0 discriminator 4
 421 0088 FFF7FEFF 		bl	sys_arch_unprotect
 422              	.LVL50:
 423              	.LBE6:
 391:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     NETCONN_SET_SAFE_ERR(conn, ERR_OK);
 424              		.loc 1 391 0 is_stmt 1 discriminator 4
 425 008c 0026     		movs	r6, #0
 426 008e C5E7     		b	.L31
 427              	.LVL51:
 428              	.L42:
 391:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     NETCONN_SET_SAFE_ERR(conn, ERR_OK);
 429              		.loc 1 391 0 is_stmt 0
 430 0090 0026     		movs	r6, #0
 431 0092 C3E7     		b	.L31
 432              	.LVL52:
 433              	.L45:
 410:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 434              		.loc 1 410 0 is_stmt 1
 435 0094 0021     		movs	r1, #0
 436 0096 3846     		mov	r0, r7
 437 0098 FFF7FEFF 		bl	sys_mbox_trypost
 438              	.LVL53:
 439 009c D6E7     		b	.L36
 440              	.L46:
 415:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 441              		.loc 1 415 0
 442 009e 0021     		movs	r1, #0
 443 00a0 3846     		mov	r0, r7
 444 00a2 FFF7FEFF 		bl	sys_mbox_trypost
 445              	.LVL54:
 446 00a6 D7E7     		b	.L37
 447              	.LVL55:
 448              	.L47:
 449              	.LBB7:
 450              	.LBB4:
 428:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->err = err;
 451              		.loc 1 428 0
 452 00a8 636A     		ldr	r3, [r4, #36]
 453              	.LVL56:
 429:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       op_completed_sem = LWIP_API_MSG_SEM(conn->current_msg);
 454              		.loc 1 429 0
 455 00aa 1E71     		strb	r6, [r3, #4]
 430:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       LWIP_ASSERT("inavlid op_completed_sem", sys_sem_valid(op_completed_sem));
 456              		.loc 1 430 0
 457 00ac 636A     		ldr	r3, [r4, #36]
 458 00ae 1D68     		ldr	r5, [r3]
 459              	.LVL57:
 460 00b0 0C35     		adds	r5, r5, #12
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 20


 461              	.LVL58:
 431:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg = NULL;
 462              		.loc 1 431 0
 463 00b2 2846     		mov	r0, r5
 464 00b4 FFF7FEFF 		bl	sys_sem_valid
 465              	.LVL59:
 432:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* wake up the waiting task */
 466              		.loc 1 432 0
 467 00b8 0023     		movs	r3, #0
 468 00ba 6362     		str	r3, [r4, #36]
 434:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_signal(op_completed_sem);
 469              		.loc 1 434 0
 470 00bc 4CB1     		cbz	r4, .L40
 471              	.LBB5:
 434:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_signal(op_completed_sem);
 472              		.loc 1 434 0 is_stmt 0 discriminator 1
 473 00be FFF7FEFF 		bl	sys_arch_protect
 474              	.LVL60:
 475 00c2 94F90830 		ldrsb	r3, [r4, #8]
 476 00c6 13F10C0F 		cmn	r3, #12
 477 00ca 00DB     		blt	.L41
 434:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_signal(op_completed_sem);
 478              		.loc 1 434 0 discriminator 2
 479 00cc 2672     		strb	r6, [r4, #8]
 480              	.L41:
 434:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_signal(op_completed_sem);
 481              		.loc 1 434 0 discriminator 4
 482 00ce FFF7FEFF 		bl	sys_arch_unprotect
 483              	.LVL61:
 484              	.L40:
 485              	.LBE5:
 435:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 486              		.loc 1 435 0 is_stmt 1
 487 00d2 2846     		mov	r0, r5
 488 00d4 FFF7FEFF 		bl	sys_sem_signal
 489              	.LVL62:
 490              	.LBE4:
 491              	.LBE7:
 440:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 492              		.loc 1 440 0
 493 00d8 CBE7     		b	.L29
 494              		.cfi_endproc
 495              	.LFE145:
 497              		.section	.text.lwip_netconn_do_connected,"ax",%progbits
 498              		.align	1
 499              		.syntax unified
 500              		.thumb
 501              		.thumb_func
 502              		.fpu fpv5-sp-d16
 504              	lwip_netconn_do_connected:
 505              	.LFB156:
 590:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 591:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_IPV4 && LWIP_IPV6
 592:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   else {
 593:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (NETCONNTYPE_ISIPV6(msg->conn->type)) {
 594:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Convert IPv4 PCB manually to an IPv6 PCB */
 595:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       IP_SET_TYPE_VAL(msg->conn->pcb.ip->local_ip,  IPADDR_TYPE_V6);
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 21


 596:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       IP_SET_TYPE_VAL(msg->conn->pcb.ip->remote_ip, IPADDR_TYPE_V6);
 597:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 598:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 599:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_IPV4 && LWIP_IPV6 */
 600:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 601:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 602:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 603:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Create a new pcb of a specific type inside a netconn.
 604:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_new_with_proto_and_callback.
 605:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 606:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg describing the connection type
 607:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 608:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
 609:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_newconn(void *m)
 610:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 611:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 612:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 613:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   msg->err = ERR_OK;
 614:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (msg->conn->pcb.tcp == NULL) {
 615:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     pcb_new(msg);
 616:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 617:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Else? This "new" connection already has a PCB allocated. */
 618:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Is this an error condition? Should it be deleted? */
 619:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* We currently just are happy and return. */
 620:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 621:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
 622:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 623:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 624:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 625:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Create a new netconn (of a specific type) that has a callback function.
 626:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * The corresponding pcb is NOT created!
 627:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 628:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param t the type of 'connection' to create (@see enum netconn_type)
 629:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param callback a function to call on status changes (RX available, TX'ed)
 630:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @return a newly allocated struct netconn or
 631:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *         NULL on memory error
 632:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 633:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** struct netconn*
 634:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** netconn_alloc(enum netconn_type t, netconn_callback callback)
 635:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 636:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 637:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   int size;
 638:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 639:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)memp_malloc(MEMP_NETCONN);
 640:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn == NULL) {
 641:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return NULL;
 642:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 643:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 644:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->last_err = ERR_OK;
 645:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->type = t;
 646:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->pcb.tcp = NULL;
 647:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 648:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* If all sizes are the same, every compiler should optimize this switch to nothing */
 649:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   switch(NETCONNTYPE_GROUP(t)) {
 650:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
 651:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   case NETCONN_RAW:
 652:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     size = DEFAULT_RAW_RECVMBOX_SIZE;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 22


 653:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     break;
 654:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_RAW */
 655:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
 656:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   case NETCONN_UDP:
 657:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     size = DEFAULT_UDP_RECVMBOX_SIZE;
 658:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     break;
 659:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
 660:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 661:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   case NETCONN_TCP:
 662:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     size = DEFAULT_TCP_RECVMBOX_SIZE;
 663:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     break;
 664:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 665:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   default:
 666:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     LWIP_ASSERT("netconn_alloc: undefined netconn_type", 0);
 667:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     goto free_and_return;
 668:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 669:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 670:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_mbox_new(&conn->recvmbox, size) != ERR_OK) {
 671:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     goto free_and_return;
 672:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 673:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if !LWIP_NETCONN_SEM_PER_THREAD
 674:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_sem_new(&conn->op_completed, 0) != ERR_OK) {
 675:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_free(&conn->recvmbox);
 676:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     goto free_and_return;
 677:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 678:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 679:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 680:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 681:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   sys_mbox_set_invalid(&conn->acceptmbox);
 682:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 683:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->state        = NETCONN_NONE;
 684:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SOCKET
 685:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* initialize socket to -1 since 0 is a valid socket */
 686:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->socket       = -1;
 687:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SOCKET */
 688:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->callback     = callback;
 689:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 690:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->current_msg  = NULL;
 691:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->write_offset = 0;
 692:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 693:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_SNDTIMEO
 694:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->send_timeout = 0;
 695:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_SNDTIMEO */
 696:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_RCVTIMEO
 697:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->recv_timeout = 0;
 698:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_RCVTIMEO */
 699:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_RCVBUF
 700:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->recv_bufsize = RECV_BUFSIZE_DEFAULT;
 701:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->recv_avail   = 0;
 702:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_RCVBUF */
 703:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_LINGER
 704:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->linger = -1;
 705:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_LINGER */
 706:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->flags = 0;
 707:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return conn;
 708:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** free_and_return:
 709:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   memp_free(MEMP_NETCONN, conn);
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 23


 710:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return NULL;
 711:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 712:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 713:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 714:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Delete a netconn and all its resources.
 715:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * The pcb is NOT freed (since we might not be in the right thread context do this).
 716:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 717:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param conn the netconn to free
 718:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 719:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
 720:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** netconn_free(struct netconn *conn)
 721:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 722:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("PCB must be deallocated outside this function", conn->pcb.tcp == NULL);
 723:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recvmbox must be deallocated before calling this function",
 724:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     !sys_mbox_valid(&conn->recvmbox));
 725:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 726:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("acceptmbox must be deallocated before calling this function",
 727:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     !sys_mbox_valid(&conn->acceptmbox));
 728:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 729:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 730:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if !LWIP_NETCONN_SEM_PER_THREAD
 731:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   sys_sem_free(&conn->op_completed);
 732:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   sys_sem_set_invalid(&conn->op_completed);
 733:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 734:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 735:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   memp_free(MEMP_NETCONN, conn);
 736:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 737:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 738:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 739:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Delete rcvmbox and acceptmbox of a netconn and free the left-over data in
 740:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * these mboxes
 741:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 742:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param conn the netconn to free
 743:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @bytes_drained bytes drained from recvmbox
 744:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @accepts_drained pending connections drained from acceptmbox
 745:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 746:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static void
 747:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** netconn_drain(struct netconn *conn)
 748:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 749:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   void *mem;
 750:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 751:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct pbuf *p;
 752:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 753:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 754:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* This runs in tcpip_thread, so we don't need to lock against rx packets */
 755:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 756:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Delete and drain the recvmbox. */
 757:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_mbox_valid(&conn->recvmbox)) {
 758:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     while (sys_mbox_tryfetch(&conn->recvmbox, &mem) != SYS_MBOX_EMPTY) {
 759:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 760:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (NETCONNTYPE_GROUP(conn->type) == NETCONN_TCP) {
 761:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (mem != NULL) {
 762:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           p = (struct pbuf*)mem;
 763:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           /* pcb might be set to NULL already by err_tcp() */
 764:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           if (conn->pcb.tcp != NULL) {
 765:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             tcp_recved(conn->pcb.tcp, p->tot_len);
 766:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           }
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 24


 767:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           pbuf_free(p);
 768:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 769:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else
 770:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 771:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       {
 772:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         netbuf_delete((struct netbuf *)mem);
 773:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 774:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 775:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_free(&conn->recvmbox);
 776:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_set_invalid(&conn->recvmbox);
 777:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 778:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 779:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Delete and drain the acceptmbox. */
 780:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 781:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_mbox_valid(&conn->acceptmbox)) {
 782:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     while (sys_mbox_tryfetch(&conn->acceptmbox, &mem) != SYS_MBOX_EMPTY) {
 783:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (mem != &netconn_aborted) {
 784:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         struct netconn *newconn = (struct netconn *)mem;
 785:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* Only tcp pcbs have an acceptmbox, so no need to check conn->type */
 786:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* pcb might be set to NULL already by err_tcp() */
 787:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* drain recvmbox */
 788:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         netconn_drain(newconn);
 789:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (newconn->pcb.tcp != NULL) {
 790:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           tcp_abort(newconn->pcb.tcp);
 791:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           newconn->pcb.tcp = NULL;
 792:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 793:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         netconn_free(newconn);
 794:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 795:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 796:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_free(&conn->acceptmbox);
 797:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_set_invalid(&conn->acceptmbox);
 798:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 799:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 800:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 801:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 802:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 803:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 804:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Internal helper function to close a TCP netconn: since this sometimes
 805:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * doesn't work at the first attempt, this function is called from multiple
 806:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * places.
 807:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 808:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param conn the TCP netconn to close
 809:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 810:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t
 811:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_close_internal(struct netconn *conn  WRITE_DELAYED_PARAM)
 812:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 813:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   err_t err;
 814:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u8_t shut, shut_rx, shut_tx, close;
 815:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u8_t close_finished = 0;
 816:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct tcp_pcb* tpcb;
 817:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_LINGER
 818:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u8_t linger_wait_required = 0;
 819:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_LINGER */
 820:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 821:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("invalid conn", (conn != NULL));
 822:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("this is for tcp netconns only", (NETCONNTYPE_GROUP(conn->type) == NETCONN_TCP));
 823:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn must be in state NETCONN_CLOSE", (conn->state == NETCONN_CLOSE));
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 25


 824:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("pcb already closed", (conn->pcb.tcp != NULL));
 825:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->current_msg != NULL", conn->current_msg != NULL);
 826:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 827:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   tpcb = conn->pcb.tcp;
 828:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   shut = conn->current_msg->msg.sd.shut;
 829:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   shut_rx = shut & NETCONN_SHUT_RD;
 830:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   shut_tx = shut & NETCONN_SHUT_WR;
 831:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* shutting down both ends is the same as closing
 832:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****      (also if RD or WR side was shut down before already) */
 833:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (shut == NETCONN_SHUT_RDWR) {
 834:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close = 1;
 835:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else if (shut_rx &&
 836:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****              ((tpcb->state == FIN_WAIT_1) ||
 837:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               (tpcb->state == FIN_WAIT_2) ||
 838:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               (tpcb->state == CLOSING))) {
 839:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close = 1;
 840:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else if (shut_tx && ((tpcb->flags & TF_RXCLOSED) != 0)) {
 841:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close = 1;
 842:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 843:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close = 0;
 844:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 845:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 846:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Set back some callback pointers */
 847:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (close) {
 848:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_arg(tpcb, NULL);
 849:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 850:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (tpcb->state == LISTEN) {
 851:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_accept(tpcb, NULL);
 852:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 853:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* some callbacks have to be reset if tcp_close is not successful */
 854:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (shut_rx) {
 855:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_recv(tpcb, NULL);
 856:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_accept(tpcb, NULL);
 857:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 858:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (shut_tx) {
 859:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_sent(tpcb, NULL);
 860:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 861:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (close) {
 862:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_poll(tpcb, NULL, 0);
 863:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_err(tpcb, NULL);
 864:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 865:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 866:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Try to close the connection */
 867:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (close) {
 868:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_LINGER
 869:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* check linger possibilites before calling tcp_close */
 870:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     err = ERR_OK;
 871:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* linger enabled/required at all? (i.e. is there untransmitted data left?) */
 872:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if ((conn->linger >= 0) && (conn->pcb.tcp->unsent || conn->pcb.tcp->unacked)) {
 873:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if ((conn->linger == 0)) {
 874:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* data left but linger prevents waiting */
 875:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         tcp_abort(tpcb);
 876:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         tpcb = NULL;
 877:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if (conn->linger > 0) {
 878:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* data left and linger says we should wait */
 879:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (netconn_is_nonblocking(conn)) {
 880:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           /* data left on a nonblocking netconn -> cannot linger */
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 26


 881:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           err = ERR_WOULDBLOCK;
 882:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else if ((s32_t)(sys_now() - conn->current_msg->msg.sd.time_started) >=
 883:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           (conn->linger * 1000)) {
 884:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           /* data left but linger timeout has expired (this happens on further
 885:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****              calls to this function through poll_tcp */
 886:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           tcp_abort(tpcb);
 887:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           tpcb = NULL;
 888:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else {
 889:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           /* data left -> need to wait for ACK after successful close */
 890:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           linger_wait_required = 1;
 891:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 892:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 893:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 894:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if ((err == ERR_OK) && (tpcb != NULL))
 895:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_LINGER */
 896:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     {
 897:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       err = tcp_close(tpcb);
 898:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 899:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 900:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     err = tcp_shutdown(tpcb, shut_rx, shut_tx);
 901:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 902:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (err == ERR_OK) {
 903:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close_finished = 1;
 904:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_LINGER
 905:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (linger_wait_required) {
 906:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* wait for ACK of all unsent/unacked data by just getting called again */
 907:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       close_finished = 0;
 908:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       err = ERR_INPROGRESS;
 909:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 910:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_LINGER */
 911:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 912:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (err == ERR_MEM) {
 913:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Closing failed because of memory shortage, try again later. Even for
 914:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          nonblocking netconns, we have to wait since no standard socket application
 915:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          is prepared for close failing because of resource shortage.
 916:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          Check the timeout: this is kind of an lwip addition to the standard sockets:
 917:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          we wait for some time when failing to allocate a segment for the FIN */
 918:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_SNDTIMEO || LWIP_SO_LINGER
 919:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       s32_t close_timeout = LWIP_TCP_CLOSE_TIMEOUT_MS_DEFAULT;
 920:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_SNDTIMEO
 921:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (conn->send_timeout > 0) {
 922:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         close_timeout = conn->send_timeout;
 923:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 924:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_SNDTIMEO */
 925:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_LINGER
 926:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (conn->linger >= 0) {
 927:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* use linger timeout (seconds) */
 928:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         close_timeout = conn->linger * 1000U;
 929:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 930:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 931:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if ((s32_t)(sys_now() - conn->current_msg->msg.sd.time_started) >= close_timeout) {
 932:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_SO_SNDTIMEO || LWIP_SO_LINGER */
 933:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (conn->current_msg->msg.sd.polls_left == 0) {
 934:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_SNDTIMEO || LWIP_SO_LINGER */
 935:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         close_finished = 1;
 936:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (close) {
 937:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           /* in this case, we want to RST the connection */
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 27


 938:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           tcp_abort(tpcb);
 939:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           err = ERR_OK;
 940:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 941:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 942:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
 943:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Closing failed for a non-memory error: give up */
 944:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       close_finished = 1;
 945:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 946:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 947:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (close_finished) {
 948:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Closing done (succeeded, non-memory error, nonblocking error or timeout) */
 949:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_sem_t* op_completed_sem = LWIP_API_MSG_SEM(conn->current_msg);
 950:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->current_msg->err = err;
 951:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->current_msg = NULL;
 952:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->state = NETCONN_NONE;
 953:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (err == ERR_OK) {
 954:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (close) {
 955:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* Set back some callback pointers as conn is going away */
 956:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->pcb.tcp = NULL;
 957:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* Trigger select() in socket layer. Make sure everybody notices activity
 958:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          on the connection, error first! */
 959:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EVENT(conn, NETCONN_EVT_ERROR, 0);
 960:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 961:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (shut_rx) {
 962:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EVENT(conn, NETCONN_EVT_RCVPLUS, 0);
 963:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 964:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (shut_tx) {
 965:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EVENT(conn, NETCONN_EVT_SENDPLUS, 0);
 966:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 967:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 968:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     NETCONN_SET_SAFE_ERR(conn, err);
 969:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 970:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (delayed)
 971:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 972:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     {
 973:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* wake up the application task */
 974:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_signal(op_completed_sem);
 975:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 976:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_OK;
 977:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 978:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (!close_finished) {
 979:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Closing failed and we want to wait: restore some of the callbacks */
 980:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Closing of listen pcb will never fail! */
 981:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     LWIP_ASSERT("Closing a listen pcb may not fail!", (tpcb->state != LISTEN));
 982:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (shut_tx) {
 983:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_sent(tpcb, sent_tcp);
 984:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 985:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* when waiting for close, set up poll interval to 500ms */
 986:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_poll(tpcb, poll_tcp, 1);
 987:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_err(tpcb, err_tcp);
 988:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_arg(tpcb, conn);
 989:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* don't restore recv callback: we don't want to receive any more data */
 990:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 991:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* If closing didn't succeed, we get called again either
 992:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****      from poll_tcp or from sent_tcp */
 993:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("err != ERR_OK", err != ERR_OK);
 994:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return err;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 28


 995:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 996:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 997:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 998:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 999:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Delete the pcb inside a netconn.
1000:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_delete.
1001:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1002:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1003:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1004:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1005:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_delconn(void *m)
1006:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1007:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1008:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1009:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   enum netconn_state state = msg->conn->state;
1010:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("netconn state error", /* this only happens for TCP netconns */
1011:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (state == NETCONN_NONE) || (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP));
1012:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_NETCONN_FULLDUPLEX
1013:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* In full duplex mode, blocking write/connect is aborted with ERR_CLSD */
1014:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (state != NETCONN_NONE) {
1015:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if ((state == NETCONN_WRITE) ||
1016:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         ((state == NETCONN_CONNECT) && !IN_NONBLOCKING_CONNECT(msg->conn))) {
1017:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* close requested, abort running write/connect */
1018:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_t* op_completed_sem;
1019:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       LWIP_ASSERT("msg->conn->current_msg != NULL", msg->conn->current_msg != NULL);
1020:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       op_completed_sem = LWIP_API_MSG_SEM(msg->conn->current_msg);
1021:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->conn->current_msg->err = ERR_CLSD;
1022:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->conn->current_msg = NULL;
1023:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->conn->write_offset = 0;
1024:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->conn->state = NETCONN_NONE;
1025:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       NETCONN_SET_SAFE_ERR(msg->conn, ERR_CLSD);
1026:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_signal(op_completed_sem);
1027:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1028:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1029:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_NETCONN_FULLDUPLEX */
1030:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (((state != NETCONN_NONE) &&
1031:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        (state != NETCONN_LISTEN) &&
1032:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        (state != NETCONN_CONNECT)) ||
1033:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ((state == NETCONN_CONNECT) && !IN_NONBLOCKING_CONNECT(msg->conn))) {
1034:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* This means either a blocking write or blocking connect is running
1035:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        (nonblocking write returns and sets state to NONE) */
1036:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_INPROGRESS;
1037:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else
1038:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_NETCONN_FULLDUPLEX */
1039:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   {
1040:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     LWIP_ASSERT("blocking connect in progress",
1041:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (state != NETCONN_CONNECT) || IN_NONBLOCKING_CONNECT(msg->conn));
1042:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_OK;
1043:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Drain and delete mboxes */
1044:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     netconn_drain(msg->conn);
1045:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1046:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
1047:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1048:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       switch (NETCONNTYPE_GROUP(msg->conn->type)) {
1049:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
1050:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       case NETCONN_RAW:
1051:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         raw_remove(msg->conn->pcb.raw);
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 29


1052:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1053:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_RAW */
1054:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
1055:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       case NETCONN_UDP:
1056:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->pcb.udp->recv_arg = NULL;
1057:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         udp_remove(msg->conn->pcb.udp);
1058:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1059:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
1060:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1061:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       case NETCONN_TCP:
1062:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("already writing or closing", msg->conn->current_msg == NULL &&
1063:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->write_offset == 0);
1064:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->state = NETCONN_CLOSE;
1065:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->msg.sd.shut = NETCONN_SHUT_RDWR;
1066:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->current_msg = msg;
1067:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
1068:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (lwip_netconn_do_close_internal(msg->conn, 0) != ERR_OK) {
1069:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LWIP_ASSERT("state!", msg->conn->state == NETCONN_CLOSE);
1070:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           UNLOCK_TCPIP_CORE();
1071:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           sys_arch_sem_wait(LWIP_API_MSG_SEM(msg), 0);
1072:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LOCK_TCPIP_CORE();
1073:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LWIP_ASSERT("state!", msg->conn->state == NETCONN_NONE);
1074:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1075:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
1076:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         lwip_netconn_do_close_internal(msg->conn);
1077:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
1078:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* API_EVENT is called inside lwip_netconn_do_close_internal, before releasing
1079:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            the application thread, so we can return at this point! */
1080:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         return;
1081:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1082:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       default:
1083:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1084:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1085:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->conn->pcb.tcp = NULL;
1086:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1087:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* tcp netconns don't come here! */
1088:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1089:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* @todo: this lets select make the socket readable and writable,
1090:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        which is wrong! errfd instead? */
1091:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EVENT(msg->conn, NETCONN_EVT_RCVPLUS, 0);
1092:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EVENT(msg->conn, NETCONN_EVT_SENDPLUS, 0);
1093:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1094:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_sem_valid(LWIP_API_MSG_SEM(msg))) {
1095:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     TCPIP_APIMSG_ACK(msg);
1096:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1097:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1098:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1099:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1100:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Bind a pcb contained in a netconn
1101:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_bind.
1102:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1103:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection and containing
1104:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *          the IP address and port to bind to
1105:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1106:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1107:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_bind(void *m)
1108:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 30


1109:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1110:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1111:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (ERR_IS_FATAL(msg->conn->last_err)) {
1112:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = msg->conn->last_err;
1113:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
1114:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_VAL;
1115:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
1116:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       const ip_addr_t *ipaddr = API_EXPR_REF(msg->msg.bc.ipaddr);
1117:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1118:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_IPV4 && LWIP_IPV6
1119:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* "Socket API like" dual-stack support: If IP to bind to is IP6_ADDR_ANY,
1120:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        * and NETCONN_FLAG_IPV6_V6ONLY is NOT set, use IP_ANY_TYPE to bind
1121:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        */
1122:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (ip_addr_cmp(ipaddr, IP6_ADDR_ANY) &&
1123:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           (netconn_get_ipv6only(msg->conn) == 0)) {
1124:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* change PCB type to IPADDR_TYPE_ANY */
1125:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         IP_SET_TYPE_VAL(msg->conn->pcb.ip->local_ip,  IPADDR_TYPE_ANY);
1126:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         IP_SET_TYPE_VAL(msg->conn->pcb.ip->remote_ip, IPADDR_TYPE_ANY);
1127:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         
1128:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* bind to IPADDR_TYPE_ANY */
1129:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         ipaddr = IP_ANY_TYPE;
1130:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1131:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_IPV4 && LWIP_IPV6 */
1132:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1133:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       switch (NETCONNTYPE_GROUP(msg->conn->type)) {
1134:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
1135:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       case NETCONN_RAW:
1136:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = raw_bind(msg->conn->pcb.raw, ipaddr);
1137:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1138:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_RAW */
1139:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
1140:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       case NETCONN_UDP:
1141:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = udp_bind(msg->conn->pcb.udp, ipaddr, msg->msg.bc.port);
1142:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1143:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
1144:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1145:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       case NETCONN_TCP:
1146:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = tcp_bind(msg->conn->pcb.tcp, ipaddr, msg->msg.bc.port);
1147:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1148:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1149:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       default:
1150:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1151:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1152:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1153:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1154:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1155:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1156:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1157:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1158:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1159:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * TCP callback function if a connection (opened by tcp_connect/lwip_netconn_do_connect) has
1160:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * been established (or reset by the remote host).
1161:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1162:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @see tcp.h (struct tcp_pcb.connected) for parameters and return values
1163:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1164:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t
1165:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_connected(void *arg, struct tcp_pcb *pcb, err_t err)
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 31


1166:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 506              		.loc 1 1166 0
 507              		.cfi_startproc
 508              		@ args = 0, pretend = 0, frame = 0
 509              		@ frame_needed = 0, uses_anonymous_args = 0
 510              	.LVL63:
1167:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
1168:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   int was_blocking;
1169:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   sys_sem_t* op_completed_sem = NULL;
1170:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1171:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_UNUSED_ARG(pcb);
1172:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1173:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)arg;
1174:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1175:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn == NULL) {
 511              		.loc 1 1175 0
 512 0000 0028     		cmp	r0, #0
 513 0002 36D0     		beq	.L54
1166:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 514              		.loc 1 1166 0
 515 0004 70B5     		push	{r4, r5, r6, lr}
 516              	.LCFI4:
 517              		.cfi_def_cfa_offset 16
 518              		.cfi_offset 4, -16
 519              		.cfi_offset 5, -12
 520              		.cfi_offset 6, -8
 521              		.cfi_offset 14, -4
 522 0006 0446     		mov	r4, r0
1176:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_VAL;
1177:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1178:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1179:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->state == NETCONN_CONNECT", conn->state == NETCONN_CONNECT);
1180:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("(conn->current_msg != NULL) || conn->in_non_blocking_connect",
 523              		.loc 1 1180 0
 524 0008 436A     		ldr	r3, [r0, #36]
1181:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (conn->current_msg != NULL) || IN_NONBLOCKING_CONNECT(conn));
1182:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1183:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn->current_msg != NULL) {
 525              		.loc 1 1183 0
 526 000a 2BB3     		cbz	r3, .L55
1184:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->current_msg->err = err;
 527              		.loc 1 1184 0
 528 000c 1A71     		strb	r2, [r3, #4]
1185:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     op_completed_sem = LWIP_API_MSG_SEM(conn->current_msg);
 529              		.loc 1 1185 0
 530 000e 436A     		ldr	r3, [r0, #36]
 531 0010 1D68     		ldr	r5, [r3]
 532 0012 0C35     		adds	r5, r5, #12
 533              	.LVL64:
 534              	.L50:
1186:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1187:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if ((NETCONNTYPE_GROUP(conn->type) == NETCONN_TCP) && (err == ERR_OK)) {
 535              		.loc 1 1187 0
 536 0014 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 537 0016 03F0F003 		and	r3, r3, #240
 538 001a 102B     		cmp	r3, #16
 539 001c 1ED0     		beq	.L61
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 32


 540              	.LVL65:
 541              	.L51:
1188:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     setup_tcp(conn);
1189:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1190:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   was_blocking = !IN_NONBLOCKING_CONNECT(conn);
 542              		.loc 1 1190 0
 543 001e 237F     		ldrb	r3, [r4, #28]	@ zero_extendqisi2
 544 0020 03F00406 		and	r6, r3, #4
 545              	.LVL66:
1191:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   SET_NONBLOCKING_CONNECT(conn, 0);
 546              		.loc 1 1191 0
 547 0024 23F00403 		bic	r3, r3, #4
 548 0028 2377     		strb	r3, [r4, #28]
1192:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("blocking connect state error",
1193:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (was_blocking && op_completed_sem != NULL) ||
1194:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (!was_blocking && op_completed_sem == NULL));
1195:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->current_msg = NULL;
 549              		.loc 1 1195 0
 550 002a 0023     		movs	r3, #0
 551 002c 6362     		str	r3, [r4, #36]
1196:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->state = NETCONN_NONE;
 552              		.loc 1 1196 0
 553 002e 6370     		strb	r3, [r4, #1]
 554              	.LBB8:
1197:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   NETCONN_SET_SAFE_ERR(conn, ERR_OK);
 555              		.loc 1 1197 0
 556 0030 FFF7FEFF 		bl	sys_arch_protect
 557              	.LVL67:
 558 0034 94F90830 		ldrsb	r3, [r4, #8]
 559 0038 13F10C0F 		cmn	r3, #12
 560 003c 01DB     		blt	.L52
 561              		.loc 1 1197 0 is_stmt 0 discriminator 2
 562 003e 0023     		movs	r3, #0
 563 0040 2372     		strb	r3, [r4, #8]
 564              	.L52:
 565              		.loc 1 1197 0 discriminator 4
 566 0042 FFF7FEFF 		bl	sys_arch_unprotect
 567              	.LVL68:
 568              	.LBE8:
1198:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   API_EVENT(conn, NETCONN_EVT_SENDPLUS, 0);
 569              		.loc 1 1198 0 is_stmt 1 discriminator 4
 570 0046 A36A     		ldr	r3, [r4, #40]
 571 0048 1BB1     		cbz	r3, .L53
 572              		.loc 1 1198 0 is_stmt 0 discriminator 1
 573 004a 0022     		movs	r2, #0
 574 004c 0221     		movs	r1, #2
 575 004e 2046     		mov	r0, r4
 576 0050 9847     		blx	r3
 577              	.LVL69:
 578              	.L53:
1199:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1200:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (was_blocking) {
 579              		.loc 1 1200 0 is_stmt 1
 580 0052 4EB1     		cbz	r6, .L62
1201:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_sem_signal(op_completed_sem);
1202:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1203:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return ERR_OK;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 33


 581              		.loc 1 1203 0
 582 0054 0020     		movs	r0, #0
1204:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 583              		.loc 1 1204 0
 584 0056 70BD     		pop	{r4, r5, r6, pc}
 585              	.LVL70:
 586              	.L55:
1169:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 587              		.loc 1 1169 0
 588 0058 0025     		movs	r5, #0
 589 005a DBE7     		b	.L50
 590              	.LVL71:
 591              	.L61:
1187:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     setup_tcp(conn);
 592              		.loc 1 1187 0 discriminator 1
 593 005c 002A     		cmp	r2, #0
 594 005e DED1     		bne	.L51
1188:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 595              		.loc 1 1188 0
 596 0060 2046     		mov	r0, r4
 597              	.LVL72:
 598 0062 FFF7FEFF 		bl	setup_tcp
 599              	.LVL73:
 600 0066 DAE7     		b	.L51
 601              	.LVL74:
 602              	.L62:
1201:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 603              		.loc 1 1201 0
 604 0068 2846     		mov	r0, r5
 605 006a FFF7FEFF 		bl	sys_sem_signal
 606              	.LVL75:
1203:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 607              		.loc 1 1203 0
 608 006e 0020     		movs	r0, #0
 609 0070 70BD     		pop	{r4, r5, r6, pc}
 610              	.LVL76:
 611              	.L54:
 612              	.LCFI5:
 613              		.cfi_def_cfa_offset 0
 614              		.cfi_restore 4
 615              		.cfi_restore 5
 616              		.cfi_restore 6
 617              		.cfi_restore 14
1176:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 618              		.loc 1 1176 0
 619 0072 6FF00500 		mvn	r0, #5
 620              	.LVL77:
 621 0076 7047     		bx	lr
 622              		.cfi_endproc
 623              	.LFE156:
 625              		.section	.text.lwip_netconn_do_writemore,"ax",%progbits
 626              		.align	1
 627              		.syntax unified
 628              		.thumb
 629              		.thumb_func
 630              		.fpu fpv5-sp-d16
 632              	lwip_netconn_do_writemore:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 34


 633              	.LFB162:
1205:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1206:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1207:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1208:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Connect a pcb contained inside a netconn
1209:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_connect.
1210:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1211:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection and containing
1212:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *          the IP address and port to connect to
1213:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1214:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1215:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_connect(void *m)
1216:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1217:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1218:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1219:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (msg->conn->pcb.tcp == NULL) {
1220:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* This may happen when calling netconn_connect() a second time */
1221:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_CLSD;
1222:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
1223:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     switch (NETCONNTYPE_GROUP(msg->conn->type)) {
1224:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
1225:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     case NETCONN_RAW:
1226:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->err = raw_connect(msg->conn->pcb.raw, API_EXPR_REF(msg->msg.bc.ipaddr));
1227:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
1228:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_RAW */
1229:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
1230:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     case NETCONN_UDP:
1231:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->err = udp_connect(msg->conn->pcb.udp, API_EXPR_REF(msg->msg.bc.ipaddr), msg->msg.bc.port
1232:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
1233:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
1234:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1235:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     case NETCONN_TCP:
1236:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Prevent connect while doing any other action. */
1237:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (msg->conn->state == NETCONN_CONNECT) {
1238:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_ALREADY;
1239:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if (msg->conn->state != NETCONN_NONE) {
1240:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_ISCONN;
1241:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1242:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         setup_tcp(msg->conn);
1243:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = tcp_connect(msg->conn->pcb.tcp, API_EXPR_REF(msg->msg.bc.ipaddr),
1244:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->msg.bc.port, lwip_netconn_do_connected);
1245:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (msg->err == ERR_OK) {
1246:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           u8_t non_blocking = netconn_is_nonblocking(msg->conn);
1247:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->state = NETCONN_CONNECT;
1248:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           SET_NONBLOCKING_CONNECT(msg->conn, non_blocking);
1249:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           if (non_blocking) {
1250:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             msg->err = ERR_INPROGRESS;
1251:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           } else {
1252:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             msg->conn->current_msg = msg;
1253:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             /* sys_sem_signal() is called from lwip_netconn_do_connected (or err_tcp()),
1254:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                when the connection is established! */
1255:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
1256:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             LWIP_ASSERT("state!", msg->conn->state == NETCONN_CONNECT);
1257:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             UNLOCK_TCPIP_CORE();
1258:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             sys_arch_sem_wait(LWIP_API_MSG_SEM(msg), 0);
1259:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             LOCK_TCPIP_CORE();
1260:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             LWIP_ASSERT("state!", msg->conn->state != NETCONN_CONNECT);
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 35


1261:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
1262:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             return;
1263:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           }
1264:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1265:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1266:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
1267:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1268:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     default:
1269:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       LWIP_ERROR("Invalid netconn type", 0, do{ msg->err = ERR_VAL; }while(0));
1270:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
1271:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1272:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1273:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* For all other protocols, netconn_connect() calls TCPIP_APIMSG(),
1274:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****      so use TCPIP_APIMSG_ACK() here. */
1275:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1276:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1277:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1278:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1279:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Disconnect a pcb contained inside a netconn
1280:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Only used for UDP netconns.
1281:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_disconnect.
1282:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1283:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection to disconnect
1284:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1285:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1286:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_disconnect(void *m)
1287:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1288:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1289:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1290:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
1291:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_UDP) {
1292:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     udp_disconnect(msg->conn->pcb.udp);
1293:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_OK;
1294:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else
1295:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
1296:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   {
1297:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_VAL;
1298:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1299:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1300:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1301:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1302:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1303:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1304:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Set a TCP pcb contained in a netconn into listen mode
1305:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_listen.
1306:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1307:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1308:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1309:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1310:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_listen(void *m)
1311:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1312:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1313:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1314:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (ERR_IS_FATAL(msg->conn->last_err)) {
1315:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = msg->conn->last_err;
1316:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
1317:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_CONN;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 36


1318:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
1319:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) {
1320:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (msg->conn->state == NETCONN_NONE) {
1321:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           struct tcp_pcb* lpcb;
1322:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           if (msg->conn->pcb.tcp->state != CLOSED) {
1323:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             /* connection is not closed, cannot listen */
1324:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             msg->err = ERR_VAL;
1325:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           } else {
1326:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_IPV4 && LWIP_IPV6
1327:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             /* "Socket API like" dual-stack support: If IP to listen to is IP6_ADDR_ANY,
1328:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****              * and NETCONN_FLAG_IPV6_V6ONLY is NOT set, use IP_ANY_TYPE to listen
1329:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****              */
1330:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             if (ip_addr_cmp(&msg->conn->pcb.ip->local_ip, IP6_ADDR_ANY) &&
1331:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 (netconn_get_ipv6only(msg->conn) == 0)) {
1332:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               /* change PCB type to IPADDR_TYPE_ANY */
1333:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               IP_SET_TYPE_VAL(msg->conn->pcb.tcp->local_ip,  IPADDR_TYPE_ANY);
1334:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               IP_SET_TYPE_VAL(msg->conn->pcb.tcp->remote_ip, IPADDR_TYPE_ANY);
1335:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             }
1336:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_IPV4 && LWIP_IPV6 */
1337:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1338:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if TCP_LISTEN_BACKLOG
1339:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             lpcb = tcp_listen_with_backlog(msg->conn->pcb.tcp, msg->msg.lb.backlog);
1340:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else  /* TCP_LISTEN_BACKLOG */
1341:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             lpcb = tcp_listen(msg->conn->pcb.tcp);
1342:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* TCP_LISTEN_BACKLOG */
1343:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1344:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             if (lpcb == NULL) {
1345:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               /* in this case, the old pcb is still allocated */
1346:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               msg->err = ERR_MEM;
1347:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             } else {
1348:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               /* delete the recvmbox and allocate the acceptmbox */
1349:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               if (sys_mbox_valid(&msg->conn->recvmbox)) {
1350:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 /** @todo: should we drain the recvmbox here? */
1351:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 sys_mbox_free(&msg->conn->recvmbox);
1352:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 sys_mbox_set_invalid(&msg->conn->recvmbox);
1353:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               }
1354:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               msg->err = ERR_OK;
1355:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               if (!sys_mbox_valid(&msg->conn->acceptmbox)) {
1356:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 msg->err = sys_mbox_new(&msg->conn->acceptmbox, DEFAULT_ACCEPTMBOX_SIZE);
1357:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               }
1358:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               if (msg->err == ERR_OK) {
1359:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 msg->conn->state = NETCONN_LISTEN;
1360:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 msg->conn->pcb.tcp = lpcb;
1361:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 tcp_arg(msg->conn->pcb.tcp, msg->conn);
1362:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 tcp_accept(msg->conn->pcb.tcp, accept_function);
1363:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               } else {
1364:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 /* since the old pcb is already deallocated, free lpcb now */
1365:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 tcp_close(lpcb);
1366:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 msg->conn->pcb.tcp = NULL;
1367:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               }
1368:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             }
1369:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           }
1370:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else if (msg->conn->state == NETCONN_LISTEN) {
1371:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           /* already listening, allow updating of the backlog */
1372:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = ERR_OK;
1373:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           tcp_backlog_set(msg->conn->pcb.tcp, msg->msg.lb.backlog);
1374:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 37


1375:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1376:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_ARG;
1377:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1378:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1379:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1380:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1381:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1382:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1383:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1384:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1385:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Send some data on a RAW or UDP pcb contained in a netconn
1386:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_send
1387:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1388:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1389:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1390:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1391:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_send(void *m)
1392:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1393:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1394:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1395:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (ERR_IS_FATAL(msg->conn->last_err)) {
1396:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = msg->conn->last_err;
1397:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
1398:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_CONN;
1399:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
1400:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       switch (NETCONNTYPE_GROUP(msg->conn->type)) {
1401:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
1402:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       case NETCONN_RAW:
1403:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (ip_addr_isany(&msg->msg.b->addr)) {
1404:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = raw_send(msg->conn->pcb.raw, msg->msg.b->p);
1405:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else {
1406:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = raw_sendto(msg->conn->pcb.raw, msg->msg.b->p, &msg->msg.b->addr);
1407:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1408:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1409:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
1410:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
1411:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       case NETCONN_UDP:
1412:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_CHECKSUM_ON_COPY
1413:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (ip_addr_isany(&msg->msg.b->addr) || IP_IS_ANY_TYPE_VAL(msg->msg.b->addr)) {
1414:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = udp_send_chksum(msg->conn->pcb.udp, msg->msg.b->p,
1415:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             msg->msg.b->flags & NETBUF_FLAG_CHKSUM, msg->msg.b->toport_chksum);
1416:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else {
1417:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = udp_sendto_chksum(msg->conn->pcb.udp, msg->msg.b->p,
1418:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             &msg->msg.b->addr, msg->msg.b->port,
1419:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             msg->msg.b->flags & NETBUF_FLAG_CHKSUM, msg->msg.b->toport_chksum);
1420:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1421:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_CHECKSUM_ON_COPY */
1422:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (ip_addr_isany_val(msg->msg.b->addr) || IP_IS_ANY_TYPE_VAL(msg->msg.b->addr)) {
1423:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = udp_send(msg->conn->pcb.udp, msg->msg.b->p);
1424:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else {
1425:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = udp_sendto(msg->conn->pcb.udp, msg->msg.b->p, &msg->msg.b->addr, msg->msg.b->p
1426:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1427:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_CHECKSUM_ON_COPY */
1428:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1429:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
1430:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       default:
1431:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 38


1432:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1433:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1434:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1435:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1436:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1437:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1438:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1439:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1440:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Indicate data has been received from a TCP pcb contained in a netconn
1441:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_recv
1442:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1443:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1444:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1445:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1446:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_recv(void *m)
1447:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1448:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1449:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1450:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   msg->err = ERR_OK;
1451:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (msg->conn->pcb.tcp != NULL) {
1452:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) {
1453:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       u32_t remaining = msg->msg.r.len;
1454:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       do {
1455:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         u16_t recved = (remaining > 0xffff) ? 0xffff : (u16_t)remaining;
1456:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         tcp_recved(msg->conn->pcb.tcp, recved);
1457:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         remaining -= recved;
1458:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } while (remaining != 0);
1459:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1460:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1461:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1462:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1463:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1464:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if TCP_LISTEN_BACKLOG
1465:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /** Indicate that a TCP pcb has been accepted
1466:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_accept
1467:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1468:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1469:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1470:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1471:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_accepted(void *m)
1472:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1473:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1474:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1475:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   msg->err = ERR_OK;
1476:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (msg->conn->pcb.tcp != NULL) {
1477:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) {
1478:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_backlog_accepted(msg->conn->pcb.tcp);
1479:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1480:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1481:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1482:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1483:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* TCP_LISTEN_BACKLOG */
1484:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1485:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1486:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * See if more data needs to be written from a previous call to netconn_write.
1487:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called initially from lwip_netconn_do_write. If the first call can't send all data
1488:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * (because of low memory or empty send-buffer), this function is called again
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 39


1489:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * from sent_tcp() or poll_tcp() to send more data. If all data is sent, the
1490:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * blocking application thread (waiting in netconn_write) is released.
1491:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1492:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param conn netconn (that is currently in state NETCONN_WRITE) to process
1493:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @return ERR_OK
1494:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *         ERR_MEM if LWIP_TCPIP_CORE_LOCKING=1 and sending hasn't yet finished
1495:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1496:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t
1497:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_writemore(struct netconn *conn  WRITE_DELAYED_PARAM)
1498:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 634              		.loc 1 1498 0
 635              		.cfi_startproc
 636              		@ args = 0, pretend = 0, frame = 0
 637              		@ frame_needed = 0, uses_anonymous_args = 0
 638              	.LVL78:
 639 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 640              	.LCFI6:
 641              		.cfi_def_cfa_offset 24
 642              		.cfi_offset 4, -24
 643              		.cfi_offset 5, -20
 644              		.cfi_offset 6, -16
 645              		.cfi_offset 7, -12
 646              		.cfi_offset 8, -8
 647              		.cfi_offset 14, -4
 648 0004 0446     		mov	r4, r0
 649 0006 0F46     		mov	r7, r1
 650              	.LVL79:
1499:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   err_t err;
1500:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   const void *dataptr;
1501:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u16_t len, available;
1502:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u8_t write_finished = 0;
1503:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   size_t diff;
1504:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u8_t dontblock;
1505:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u8_t apiflags;
1506:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1507:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn != NULL", conn != NULL);
1508:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->state == NETCONN_WRITE", (conn->state == NETCONN_WRITE));
1509:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->current_msg != NULL", conn->current_msg != NULL);
 651              		.loc 1 1509 0
 652 0008 416A     		ldr	r1, [r0, #36]
 653              	.LVL80:
1510:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->pcb.tcp != NULL", conn->pcb.tcp != NULL);
 654              		.loc 1 1510 0
 655 000a 4068     		ldr	r0, [r0, #4]
 656              	.LVL81:
1511:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->write_offset < conn->current_msg->msg.w.len",
 657              		.loc 1 1511 0
 658 000c 266A     		ldr	r6, [r4, #32]
 659 000e CA68     		ldr	r2, [r1, #12]
1512:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->write_offset < conn->current_msg->msg.w.len);
1513:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1514:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   apiflags = conn->current_msg->msg.w.apiflags;
 660              		.loc 1 1514 0
 661 0010 0B7C     		ldrb	r3, [r1, #16]	@ zero_extendqisi2
 662              	.LVL82:
1515:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   dontblock = netconn_is_nonblocking(conn) || (apiflags & NETCONN_DONTBLOCK);
 663              		.loc 1 1515 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 40


 664 0012 257F     		ldrb	r5, [r4, #28]	@ zero_extendqisi2
 665 0014 15F0020F 		tst	r5, #2
 666 0018 04D1     		bne	.L82
 667              		.loc 1 1515 0 is_stmt 0 discriminator 2
 668 001a 13F0040F 		tst	r3, #4
 669 001e 26D0     		beq	.L83
 670              		.loc 1 1515 0
 671 0020 0125     		movs	r5, #1
 672 0022 00E0     		b	.L64
 673              	.L82:
 674 0024 0125     		movs	r5, #1
 675              	.L64:
 676              		.loc 1 1515 0 discriminator 6
 677 0026 EDB2     		uxtb	r5, r5
 678              	.LVL83:
1516:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1517:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_SNDTIMEO
1518:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if ((conn->send_timeout != 0) &&
1519:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ((s32_t)(sys_now() - conn->current_msg->msg.w.time_started) >= conn->send_timeout)) {
1520:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     write_finished = 1;
1521:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (conn->write_offset == 0) {
1522:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* nothing has been written */
1523:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       err = ERR_WOULDBLOCK;
1524:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->msg.w.len = 0;
1525:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
1526:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* partial write */
1527:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       err = ERR_OK;
1528:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->msg.w.len = conn->write_offset;
1529:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->write_offset = 0;
1530:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1531:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else
1532:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_SNDTIMEO */
1533:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   {
1534:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     dataptr = (const u8_t*)conn->current_msg->msg.w.dataptr + conn->write_offset;
 679              		.loc 1 1534 0 is_stmt 1 discriminator 6
 680 0028 8968     		ldr	r1, [r1, #8]
 681 002a 3144     		add	r1, r1, r6
 682              	.LVL84:
1535:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     diff = conn->current_msg->msg.w.len - conn->write_offset;
 683              		.loc 1 1535 0 discriminator 6
 684 002c 921B     		subs	r2, r2, r6
 685              	.LVL85:
1536:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (diff > 0xffffUL) { /* max_u16_t */
 686              		.loc 1 1536 0 discriminator 6
 687 002e B2F5803F 		cmp	r2, #65536
 688 0032 1ED3     		bcc	.L65
 689              	.LVL86:
1537:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       len = 0xffff;
1538:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       apiflags |= TCP_WRITE_FLAG_MORE;
 690              		.loc 1 1538 0
 691 0034 43F00203 		orr	r3, r3, #2
 692              	.LVL87:
1537:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       len = 0xffff;
 693              		.loc 1 1537 0
 694 0038 4FF6FF72 		movw	r2, #65535
 695              	.LVL88:
 696              	.L66:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 41


1539:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
1540:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       len = (u16_t)diff;
1541:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1542:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     available = tcp_sndbuf(conn->pcb.tcp);
 697              		.loc 1 1542 0
 698 003c B0F86060 		ldrh	r6, [r0, #96]
 699              	.LVL89:
1543:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (available < len) {
 700              		.loc 1 1543 0
 701 0040 B242     		cmp	r2, r6
 702 0042 44D9     		bls	.L84
 703              	.LVL90:
1544:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* don't try to write more than sendbuf */
1545:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       len = available;
1546:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (dontblock) {
 704              		.loc 1 1546 0
 705 0044 BDB1     		cbz	r5, .L68
1547:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (!len) {
 706              		.loc 1 1547 0
 707 0046 C6B9     		cbnz	r6, .L67
1548:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           err = ERR_WOULDBLOCK;
 708              		.loc 1 1548 0
 709 0048 6FF00608 		mvn	r8, #6
 710              	.LVL91:
 711              	.L69:
1549:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           goto err_mem;
1550:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1551:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1552:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         apiflags |= TCP_WRITE_FLAG_MORE;
1553:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1554:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1555:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     LWIP_ASSERT("lwip_netconn_do_writemore: invalid length!", ((conn->write_offset + len) <= conn->
1556:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     err = tcp_write(conn->pcb.tcp, dataptr, len, apiflags);
1557:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* if OK or memory error, check available space */
1558:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if ((err == ERR_OK) || (err == ERR_MEM)) {
1559:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** err_mem:
1560:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (dontblock && (len < conn->current_msg->msg.w.len)) {
 712              		.loc 1 1560 0
 713 004c 002D     		cmp	r5, #0
 714 004e 40D0     		beq	.L71
 715              		.loc 1 1560 0 is_stmt 0 discriminator 1
 716 0050 636A     		ldr	r3, [r4, #36]
 717 0052 DB68     		ldr	r3, [r3, #12]
 718 0054 9E42     		cmp	r6, r3
 719 0056 3CD2     		bcs	.L71
1561:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* non-blocking write did not write everything: mark the pcb non-writable
1562:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            and let poll_tcp check writable space to mark the pcb writable again */
1563:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EVENT(conn, NETCONN_EVT_SENDMINUS, len);
 720              		.loc 1 1563 0 is_stmt 1
 721 0058 A36A     		ldr	r3, [r4, #40]
 722 005a 1BB1     		cbz	r3, .L72
 723              		.loc 1 1563 0 is_stmt 0 discriminator 1
 724 005c 3246     		mov	r2, r6
 725 005e 0321     		movs	r1, #3
 726 0060 2046     		mov	r0, r4
 727 0062 9847     		blx	r3
 728              	.LVL92:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 42


 729              	.L72:
1564:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->flags |= NETCONN_FLAG_CHECK_WRITESPACE;
 730              		.loc 1 1564 0 is_stmt 1
 731 0064 237F     		ldrb	r3, [r4, #28]	@ zero_extendqisi2
 732 0066 43F01003 		orr	r3, r3, #16
 733 006a 2377     		strb	r3, [r4, #28]
 734 006c 0DE0     		b	.L70
 735              	.LVL93:
 736              	.L83:
1515:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 737              		.loc 1 1515 0
 738 006e 0025     		movs	r5, #0
 739 0070 D9E7     		b	.L64
 740              	.LVL94:
 741              	.L65:
1540:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 742              		.loc 1 1540 0
 743 0072 92B2     		uxth	r2, r2
 744              	.LVL95:
 745 0074 E2E7     		b	.L66
 746              	.LVL96:
 747              	.L68:
1552:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 748              		.loc 1 1552 0
 749 0076 43F00203 		orr	r3, r3, #2
 750              	.LVL97:
 751              	.L67:
1556:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* if OK or memory error, check available space */
 752              		.loc 1 1556 0
 753 007a 3246     		mov	r2, r6
 754 007c FFF7FEFF 		bl	tcp_write
 755              	.LVL98:
 756 0080 8046     		mov	r8, r0
 757              	.LVL99:
1558:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** err_mem:
 758              		.loc 1 1558 0
 759 0082 431C     		adds	r3, r0, #1
 760 0084 DBB2     		uxtb	r3, r3
 761 0086 012B     		cmp	r3, #1
 762 0088 E0D9     		bls	.L69
 763              	.LVL100:
 764              	.L70:
1565:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if ((tcp_sndbuf(conn->pcb.tcp) <= TCP_SNDLOWAT) ||
1566:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                  (tcp_sndqueuelen(conn->pcb.tcp) >= TCP_SNDQUEUELOWAT)) {
1567:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* The queued byte- or pbuf-count exceeds the configured low-water limit,
1568:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            let select mark this pcb as non-writable. */
1569:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EVENT(conn, NETCONN_EVT_SENDMINUS, len);
1570:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1571:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1572:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1573:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (err == ERR_OK) {
 765              		.loc 1 1573 0
 766 008a B8F1000F 		cmp	r8, #0
 767 008e 32D1     		bne	.L74
 768              	.LBB9:
1574:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       err_t out_err;
1575:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->write_offset += len;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 43


 769              		.loc 1 1575 0
 770 0090 236A     		ldr	r3, [r4, #32]
 771 0092 1E44     		add	r6, r6, r3
 772              	.LVL101:
 773 0094 2662     		str	r6, [r4, #32]
1576:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if ((conn->write_offset == conn->current_msg->msg.w.len) || dontblock) {
 774              		.loc 1 1576 0
 775 0096 636A     		ldr	r3, [r4, #36]
 776 0098 DA68     		ldr	r2, [r3, #12]
 777 009a 9642     		cmp	r6, r2
 778 009c 00D0     		beq	.L75
 779              		.loc 1 1576 0 is_stmt 0 discriminator 1
 780 009e 0DB1     		cbz	r5, .L76
 781              	.L75:
1577:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* return sent length */
1578:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->current_msg->msg.w.len = conn->write_offset;
 782              		.loc 1 1578 0 is_stmt 1
 783 00a0 DE60     		str	r6, [r3, #12]
 784              	.LVL102:
1579:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* everything was written */
1580:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         write_finished = 1;
 785              		.loc 1 1580 0
 786 00a2 0125     		movs	r5, #1
 787              	.LVL103:
 788              	.L76:
1581:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1582:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       out_err = tcp_output(conn->pcb.tcp);
 789              		.loc 1 1582 0
 790 00a4 6068     		ldr	r0, [r4, #4]
 791 00a6 FFF7FEFF 		bl	tcp_output
 792              	.LVL104:
1583:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (ERR_IS_FATAL(out_err) || (out_err == ERR_RTE)) {
 793              		.loc 1 1583 0
 794 00aa 10F10C0F 		cmn	r0, #12
 795 00ae ACBF     		ite	ge
 796 00b0 0022     		movge	r2, #0
 797 00b2 0122     		movlt	r2, #1
 798 00b4 10F1040F 		cmn	r0, #4
 799 00b8 14BF     		ite	ne
 800 00ba 0023     		movne	r3, #0
 801 00bc 0123     		moveq	r3, #1
 802 00be 1343     		orrs	r3, r2, r3
 803 00c0 22D0     		beq	.L77
 804              	.LVL105:
1584:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* If tcp_output fails with fatal error or no route is found,
1585:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            don't try writing any more but return the error
1586:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            to the application thread. */
1587:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         err = out_err;
1588:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         write_finished = 1;
1589:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->current_msg->msg.w.len = 0;
 805              		.loc 1 1589 0
 806 00c2 636A     		ldr	r3, [r4, #36]
 807 00c4 0022     		movs	r2, #0
 808 00c6 DA60     		str	r2, [r3, #12]
1587:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         write_finished = 1;
 809              		.loc 1 1587 0
 810 00c8 8046     		mov	r8, r0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 44


1588:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->current_msg->msg.w.len = 0;
 811              		.loc 1 1588 0
 812 00ca 0125     		movs	r5, #1
 813 00cc 1CE0     		b	.L77
 814              	.LVL106:
 815              	.L84:
 816              	.LBE9:
 817 00ce 1646     		mov	r6, r2
 818              	.LVL107:
 819 00d0 D3E7     		b	.L67
 820              	.LVL108:
 821              	.L71:
1565:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                  (tcp_sndqueuelen(conn->pcb.tcp) >= TCP_SNDQUEUELOWAT)) {
 822              		.loc 1 1565 0
 823 00d2 6368     		ldr	r3, [r4, #4]
 824 00d4 B3F86020 		ldrh	r2, [r3, #96]
 825 00d8 B2F5866F 		cmp	r2, #1072
 826 00dc 03D3     		bcc	.L73
1566:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* The queued byte- or pbuf-count exceeds the configured low-water limit,
 827              		.loc 1 1566 0 discriminator 1
 828 00de B3F86230 		ldrh	r3, [r3, #98]
1565:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                  (tcp_sndqueuelen(conn->pcb.tcp) >= TCP_SNDQUEUELOWAT)) {
 829              		.loc 1 1565 0 discriminator 1
 830 00e2 042B     		cmp	r3, #4
 831 00e4 D1D9     		bls	.L70
 832              	.L73:
1569:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 833              		.loc 1 1569 0
 834 00e6 A36A     		ldr	r3, [r4, #40]
 835 00e8 002B     		cmp	r3, #0
 836 00ea CED0     		beq	.L70
1569:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 837              		.loc 1 1569 0 is_stmt 0 discriminator 1
 838 00ec 3246     		mov	r2, r6
 839 00ee 0321     		movs	r1, #3
 840 00f0 2046     		mov	r0, r4
 841 00f2 9847     		blx	r3
 842              	.LVL109:
 843 00f4 C9E7     		b	.L70
 844              	.L74:
1590:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1591:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else if ((err == ERR_MEM) && !dontblock) {
 845              		.loc 1 1591 0 is_stmt 1
 846 00f6 B8F1FF3F 		cmp	r8, #-1
 847 00fa 08BF     		it	eq
 848 00fc 002D     		cmpeq	r5, #0
 849 00fe 1FD0     		beq	.L90
 850              	.LVL110:
1592:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* If ERR_MEM, we wait for sent_tcp or poll_tcp to be called
1593:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          we do NOT return to the application thread, since ERR_MEM is
1594:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          only a temporary error! */
1595:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1596:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* tcp_write returned ERR_MEM, try tcp_output anyway */
1597:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       err_t out_err = tcp_output(conn->pcb.tcp);
1598:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (ERR_IS_FATAL(out_err) || (out_err == ERR_RTE)) {
1599:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* If tcp_output fails with fatal error or no route is found,
1600:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            don't try writing any more but return the error
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 45


1601:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            to the application thread. */
1602:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         err = out_err;
1603:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         write_finished = 1;
1604:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->current_msg->msg.w.len = 0;
1605:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1606:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
1607:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* On errors != ERR_MEM, we don't try writing any more but return
1608:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          the error to the application thread. */
1609:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       write_finished = 1;
1610:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->msg.w.len = 0;
 851              		.loc 1 1610 0
 852 0100 636A     		ldr	r3, [r4, #36]
 853 0102 0022     		movs	r2, #0
 854 0104 DA60     		str	r2, [r3, #12]
1609:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->msg.w.len = 0;
 855              		.loc 1 1609 0
 856 0106 0125     		movs	r5, #1
 857              	.LVL111:
 858              	.L77:
1611:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1612:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1613:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (write_finished) {
 859              		.loc 1 1613 0
 860 0108 002D     		cmp	r5, #0
 861 010a 36D0     		beq	.L87
 862              	.LBB10:
1614:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* everything was written: set back connection state
1615:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        and back to application task */
1616:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_sem_t* op_completed_sem = LWIP_API_MSG_SEM(conn->current_msg);
 863              		.loc 1 1616 0
 864 010c 636A     		ldr	r3, [r4, #36]
 865 010e 1868     		ldr	r0, [r3]
 866 0110 00F10C05 		add	r5, r0, #12
 867              	.LVL112:
1617:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->current_msg->err = err;
 868              		.loc 1 1617 0
 869 0114 83F80480 		strb	r8, [r3, #4]
1618:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->current_msg = NULL;
 870              		.loc 1 1618 0
 871 0118 0023     		movs	r3, #0
 872 011a 6362     		str	r3, [r4, #36]
1619:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->write_offset = 0;
 873              		.loc 1 1619 0
 874 011c 2362     		str	r3, [r4, #32]
1620:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->state = NETCONN_NONE;
 875              		.loc 1 1620 0
 876 011e 6370     		strb	r3, [r4, #1]
1621:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     NETCONN_SET_SAFE_ERR(conn, err);
 877              		.loc 1 1621 0
 878 0120 54B1     		cbz	r4, .L80
 879              	.LBB11:
 880              		.loc 1 1621 0 is_stmt 0 discriminator 1
 881 0122 FFF7FEFF 		bl	sys_arch_protect
 882              	.LVL113:
 883 0126 94F90830 		ldrsb	r3, [r4, #8]
 884 012a 13F10C0F 		cmn	r3, #12
 885 012e 01DB     		blt	.L81
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 46


 886              		.loc 1 1621 0 discriminator 2
 887 0130 84F80880 		strb	r8, [r4, #8]
 888              	.L81:
 889              		.loc 1 1621 0 discriminator 4
 890 0134 FFF7FEFF 		bl	sys_arch_unprotect
 891              	.LVL114:
 892              	.L80:
 893              	.LBE11:
1622:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
1623:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (delayed)
 894              		.loc 1 1623 0 is_stmt 1
 895 0138 CFB9     		cbnz	r7, .L91
 896              	.LBE10:
1624:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
1625:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     {
1626:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_signal(op_completed_sem);
1627:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1628:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1629:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
1630:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   else {
1631:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_MEM;
1632:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1633:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
1634:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return ERR_OK;
 897              		.loc 1 1634 0
 898 013a 0020     		movs	r0, #0
1635:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 899              		.loc 1 1635 0
 900 013c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 901              	.LVL115:
 902              	.L90:
 903              	.LBB12:
1597:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (ERR_IS_FATAL(out_err) || (out_err == ERR_RTE)) {
 904              		.loc 1 1597 0
 905 0140 6068     		ldr	r0, [r4, #4]
 906 0142 FFF7FEFF 		bl	tcp_output
 907              	.LVL116:
1598:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* If tcp_output fails with fatal error or no route is found,
 908              		.loc 1 1598 0
 909 0146 10F10C0F 		cmn	r0, #12
 910 014a ACBF     		ite	ge
 911 014c 0022     		movge	r2, #0
 912 014e 0122     		movlt	r2, #1
 913 0150 10F1040F 		cmn	r0, #4
 914 0154 14BF     		ite	ne
 915 0156 0023     		movne	r3, #0
 916 0158 0123     		moveq	r3, #1
 917 015a 1343     		orrs	r3, r2, r3
 918 015c 05D0     		beq	.L86
 919              	.LVL117:
1604:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 920              		.loc 1 1604 0
 921 015e 636A     		ldr	r3, [r4, #36]
 922 0160 0022     		movs	r2, #0
 923 0162 DA60     		str	r2, [r3, #12]
1602:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         write_finished = 1;
 924              		.loc 1 1602 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 47


 925 0164 8046     		mov	r8, r0
1603:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->current_msg->msg.w.len = 0;
 926              		.loc 1 1603 0
 927 0166 0125     		movs	r5, #1
 928              	.LVL118:
 929 0168 CEE7     		b	.L77
 930              	.LVL119:
 931              	.L86:
 932              	.LBE12:
1502:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   size_t diff;
 933              		.loc 1 1502 0
 934 016a 0025     		movs	r5, #0
 935              	.LVL120:
 936 016c CCE7     		b	.L77
 937              	.LVL121:
 938              	.L91:
 939              	.LBB13:
1626:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 940              		.loc 1 1626 0
 941 016e 2846     		mov	r0, r5
 942 0170 FFF7FEFF 		bl	sys_sem_signal
 943              	.LVL122:
 944              	.LBE13:
1634:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 945              		.loc 1 1634 0
 946 0174 0020     		movs	r0, #0
 947 0176 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 948              	.LVL123:
 949              	.L87:
1631:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 950              		.loc 1 1631 0
 951 017a 4FF0FF30 		mov	r0, #-1
 952 017e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 953              		.cfi_endproc
 954              	.LFE162:
 956              		.section	.text.lwip_netconn_do_close_internal,"ax",%progbits
 957              		.align	1
 958              		.syntax unified
 959              		.thumb
 960              		.thumb_func
 961              		.fpu fpv5-sp-d16
 963              	lwip_netconn_do_close_internal:
 964              	.LFB153:
 812:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   err_t err;
 965              		.loc 1 812 0
 966              		.cfi_startproc
 967              		@ args = 0, pretend = 0, frame = 0
 968              		@ frame_needed = 0, uses_anonymous_args = 0
 969              	.LVL124:
 970 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 971              	.LCFI7:
 972              		.cfi_def_cfa_offset 32
 973              		.cfi_offset 4, -32
 974              		.cfi_offset 5, -28
 975              		.cfi_offset 6, -24
 976              		.cfi_offset 7, -20
 977              		.cfi_offset 8, -16
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 48


 978              		.cfi_offset 9, -12
 979              		.cfi_offset 10, -8
 980              		.cfi_offset 14, -4
 981 0004 0546     		mov	r5, r0
 982 0006 8A46     		mov	r10, r1
 983              	.LVL125:
 824:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->current_msg != NULL", conn->current_msg != NULL);
 984              		.loc 1 824 0
 985 0008 4468     		ldr	r4, [r0, #4]
 825:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 986              		.loc 1 825 0
 987 000a 436A     		ldr	r3, [r0, #36]
 988              	.LVL126:
 828:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   shut_rx = shut & NETCONN_SHUT_RD;
 989              		.loc 1 828 0
 990 000c 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
 991              	.LVL127:
 829:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   shut_tx = shut & NETCONN_SHUT_WR;
 992              		.loc 1 829 0
 993 000e 03F00109 		and	r9, r3, #1
 994              	.LVL128:
 830:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* shutting down both ends is the same as closing
 995              		.loc 1 830 0
 996 0012 03F00208 		and	r8, r3, #2
 997              	.LVL129:
 833:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close = 1;
 998              		.loc 1 833 0
 999 0016 032B     		cmp	r3, #3
 1000 0018 12D0     		beq	.L111
 835:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****              ((tpcb->state == FIN_WAIT_1) ||
 1001              		.loc 1 835 0
 1002 001a B9F1000F 		cmp	r9, #0
 1003 001e 06D0     		beq	.L94
 836:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               (tpcb->state == FIN_WAIT_2) ||
 1004              		.loc 1 836 0 discriminator 1
 1005 0020 227D     		ldrb	r2, [r4, #20]	@ zero_extendqisi2
 837:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               (tpcb->state == CLOSING))) {
 1006              		.loc 1 837 0 discriminator 1
 1007 0022 531F     		subs	r3, r2, #5
 1008              	.LVL130:
 1009 0024 DBB2     		uxtb	r3, r3
 835:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****              ((tpcb->state == FIN_WAIT_1) ||
 1010              		.loc 1 835 0 discriminator 1
 1011 0026 082A     		cmp	r2, #8
 1012 0028 18BF     		it	ne
 1013 002a 012B     		cmpne	r3, #1
 1014 002c 20D9     		bls	.L112
 1015              	.L94:
 840:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close = 1;
 1016              		.loc 1 840 0
 1017 002e B8F1000F 		cmp	r8, #0
 1018 0032 1FD0     		beq	.L113
 840:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close = 1;
 1019              		.loc 1 840 0 is_stmt 0 discriminator 1
 1020 0034 A37E     		ldrb	r3, [r4, #26]	@ zero_extendqisi2
 1021 0036 13F0100F 		tst	r3, #16
 1022 003a 1DD1     		bne	.L114
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 49


 843:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1023              		.loc 1 843 0 is_stmt 1
 1024 003c 0027     		movs	r7, #0
 1025 003e 00E0     		b	.L93
 1026              	.LVL131:
 1027              	.L111:
 834:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else if (shut_rx &&
 1028              		.loc 1 834 0
 1029 0040 0127     		movs	r7, #1
 1030              	.LVL132:
 1031              	.L93:
 847:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_arg(tpcb, NULL);
 1032              		.loc 1 847 0
 1033 0042 DFB9     		cbnz	r7, .L121
 1034              	.LVL133:
 1035              	.L95:
 850:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_accept(tpcb, NULL);
 1036              		.loc 1 850 0
 1037 0044 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
 1038 0046 012B     		cmp	r3, #1
 1039 0048 1DD0     		beq	.L122
 854:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_recv(tpcb, NULL);
 1040              		.loc 1 854 0
 1041 004a B9F1000F 		cmp	r9, #0
 1042 004e 1FD1     		bne	.L123
 1043              	.L98:
 858:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_sent(tpcb, NULL);
 1044              		.loc 1 858 0
 1045 0050 B8F1000F 		cmp	r8, #0
 1046 0054 25D1     		bne	.L124
 1047              	.L99:
 861:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_poll(tpcb, NULL, 0);
 1048              		.loc 1 861 0
 1049 0056 4FBB     		cbnz	r7, .L125
 1050              	.L97:
 867:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_LINGER
 1051              		.loc 1 867 0
 1052 0058 97B3     		cbz	r7, .L100
 897:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1053              		.loc 1 897 0
 1054 005a 2046     		mov	r0, r4
 1055 005c FFF7FEFF 		bl	tcp_close
 1056              	.LVL134:
 1057 0060 0646     		mov	r6, r0
 1058              	.LVL135:
 1059              	.L101:
 902:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close_finished = 1;
 1060              		.loc 1 902 0
 1061 0062 002E     		cmp	r6, #0
 1062 0064 40D0     		beq	.L115
 912:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Closing failed because of memory shortage, try again later. Even for
 1063              		.loc 1 912 0
 1064 0066 B6F1FF3F 		cmp	r6, #-1
 1065 006a 30D0     		beq	.L126
 944:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1066              		.loc 1 944 0
 1067 006c 0123     		movs	r3, #1
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 50


 1068 006e 3CE0     		b	.L102
 1069              	.LVL136:
 1070              	.L112:
 839:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else if (shut_tx && ((tpcb->flags & TF_RXCLOSED) != 0)) {
 1071              		.loc 1 839 0
 1072 0070 0127     		movs	r7, #1
 1073 0072 E6E7     		b	.L93
 1074              	.L113:
 843:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1075              		.loc 1 843 0
 1076 0074 0027     		movs	r7, #0
 1077 0076 E4E7     		b	.L93
 1078              	.L114:
 841:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 1079              		.loc 1 841 0
 1080 0078 0127     		movs	r7, #1
 1081 007a E2E7     		b	.L93
 1082              	.LVL137:
 1083              	.L121:
 848:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1084              		.loc 1 848 0
 1085 007c 0021     		movs	r1, #0
 1086              	.LVL138:
 1087 007e 2046     		mov	r0, r4
 1088              	.LVL139:
 1089 0080 FFF7FEFF 		bl	tcp_arg
 1090              	.LVL140:
 1091 0084 DEE7     		b	.L95
 1092              	.L122:
 851:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 1093              		.loc 1 851 0
 1094 0086 0021     		movs	r1, #0
 1095 0088 2046     		mov	r0, r4
 1096 008a FFF7FEFF 		bl	tcp_accept
 1097              	.LVL141:
 1098 008e E3E7     		b	.L97
 1099              	.L123:
 855:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_accept(tpcb, NULL);
 1100              		.loc 1 855 0
 1101 0090 0021     		movs	r1, #0
 1102 0092 2046     		mov	r0, r4
 1103 0094 FFF7FEFF 		bl	tcp_recv
 1104              	.LVL142:
 856:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1105              		.loc 1 856 0
 1106 0098 0021     		movs	r1, #0
 1107 009a 2046     		mov	r0, r4
 1108 009c FFF7FEFF 		bl	tcp_accept
 1109              	.LVL143:
 1110 00a0 D6E7     		b	.L98
 1111              	.L124:
 859:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1112              		.loc 1 859 0
 1113 00a2 0021     		movs	r1, #0
 1114 00a4 2046     		mov	r0, r4
 1115 00a6 FFF7FEFF 		bl	tcp_sent
 1116              	.LVL144:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 51


 1117 00aa D4E7     		b	.L99
 1118              	.L125:
 862:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_err(tpcb, NULL);
 1119              		.loc 1 862 0
 1120 00ac 0022     		movs	r2, #0
 1121 00ae 1146     		mov	r1, r2
 1122 00b0 2046     		mov	r0, r4
 1123 00b2 FFF7FEFF 		bl	tcp_poll
 1124              	.LVL145:
 863:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1125              		.loc 1 863 0
 1126 00b6 0021     		movs	r1, #0
 1127 00b8 2046     		mov	r0, r4
 1128 00ba FFF7FEFF 		bl	tcp_err
 1129              	.LVL146:
 1130 00be CBE7     		b	.L97
 1131              	.L100:
 900:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1132              		.loc 1 900 0
 1133 00c0 4246     		mov	r2, r8
 1134 00c2 4946     		mov	r1, r9
 1135 00c4 2046     		mov	r0, r4
 1136 00c6 FFF7FEFF 		bl	tcp_shutdown
 1137              	.LVL147:
 1138 00ca 0646     		mov	r6, r0
 1139              	.LVL148:
 1140 00cc C9E7     		b	.L101
 1141              	.L126:
 933:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_SNDTIMEO || LWIP_SO_LINGER */
 1142              		.loc 1 933 0
 1143 00ce 6B6A     		ldr	r3, [r5, #36]
 1144 00d0 5B7A     		ldrb	r3, [r3, #9]	@ zero_extendqisi2
 1145 00d2 002B     		cmp	r3, #0
 1146 00d4 3DD1     		bne	.L117
 1147              	.LVL149:
 936:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           /* in this case, we want to RST the connection */
 1148              		.loc 1 936 0
 1149 00d6 0FB9     		cbnz	r7, .L127
 935:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (close) {
 1150              		.loc 1 935 0
 1151 00d8 0123     		movs	r3, #1
 1152 00da 06E0     		b	.L102
 1153              	.L127:
 938:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           err = ERR_OK;
 1154              		.loc 1 938 0
 1155 00dc 2046     		mov	r0, r4
 1156 00de FFF7FEFF 		bl	tcp_abort
 1157              	.LVL150:
 935:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (close) {
 1158              		.loc 1 935 0
 1159 00e2 3B46     		mov	r3, r7
 939:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 1160              		.loc 1 939 0
 1161 00e4 0026     		movs	r6, #0
 1162 00e6 00E0     		b	.L102
 1163              	.LVL151:
 1164              	.L115:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 52


 903:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_LINGER
 1165              		.loc 1 903 0
 1166 00e8 0123     		movs	r3, #1
 1167              	.LVL152:
 1168              	.L102:
 947:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Closing done (succeeded, non-memory error, nonblocking error or timeout) */
 1169              		.loc 1 947 0
 1170 00ea 002B     		cmp	r3, #0
 1171 00ec 38D0     		beq	.L103
 1172              	.LBB14:
 949:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->current_msg->err = err;
 1173              		.loc 1 949 0
 1174 00ee 6B6A     		ldr	r3, [r5, #36]
 1175              	.LVL153:
 1176 00f0 1C68     		ldr	r4, [r3]
 1177              	.LVL154:
 1178 00f2 0C34     		adds	r4, r4, #12
 1179              	.LVL155:
 950:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->current_msg = NULL;
 1180              		.loc 1 950 0
 1181 00f4 1E71     		strb	r6, [r3, #4]
 951:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->state = NETCONN_NONE;
 1182              		.loc 1 951 0
 1183 00f6 0023     		movs	r3, #0
 1184 00f8 6B62     		str	r3, [r5, #36]
 952:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (err == ERR_OK) {
 1185              		.loc 1 952 0
 1186 00fa 6B70     		strb	r3, [r5, #1]
 953:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (close) {
 1187              		.loc 1 953 0
 1188 00fc CEB9     		cbnz	r6, .L104
 954:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* Set back some callback pointers as conn is going away */
 1189              		.loc 1 954 0
 1190 00fe 37B1     		cbz	r7, .L105
 956:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* Trigger select() in socket layer. Make sure everybody notices activity
 1191              		.loc 1 956 0
 1192 0100 6B60     		str	r3, [r5, #4]
 959:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1193              		.loc 1 959 0
 1194 0102 AB6A     		ldr	r3, [r5, #40]
 1195 0104 1BB1     		cbz	r3, .L105
 959:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1196              		.loc 1 959 0 is_stmt 0 discriminator 1
 1197 0106 0022     		movs	r2, #0
 1198 0108 0421     		movs	r1, #4
 1199 010a 2846     		mov	r0, r5
 1200 010c 9847     		blx	r3
 1201              	.LVL156:
 1202              	.L105:
 961:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EVENT(conn, NETCONN_EVT_RCVPLUS, 0);
 1203              		.loc 1 961 0 is_stmt 1
 1204 010e B9F1000F 		cmp	r9, #0
 1205 0112 05D0     		beq	.L106
 962:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1206              		.loc 1 962 0
 1207 0114 AB6A     		ldr	r3, [r5, #40]
 1208 0116 1BB1     		cbz	r3, .L106
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 53


 962:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1209              		.loc 1 962 0 is_stmt 0 discriminator 1
 1210 0118 0022     		movs	r2, #0
 1211 011a 1146     		mov	r1, r2
 1212 011c 2846     		mov	r0, r5
 1213 011e 9847     		blx	r3
 1214              	.LVL157:
 1215              	.L106:
 964:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EVENT(conn, NETCONN_EVT_SENDPLUS, 0);
 1216              		.loc 1 964 0 is_stmt 1
 1217 0120 B8F1000F 		cmp	r8, #0
 1218 0124 05D0     		beq	.L104
 965:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1219              		.loc 1 965 0
 1220 0126 AB6A     		ldr	r3, [r5, #40]
 1221 0128 1BB1     		cbz	r3, .L104
 965:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1222              		.loc 1 965 0 is_stmt 0 discriminator 1
 1223 012a 0022     		movs	r2, #0
 1224 012c 0221     		movs	r1, #2
 1225 012e 2846     		mov	r0, r5
 1226 0130 9847     		blx	r3
 1227              	.LVL158:
 1228              	.L104:
 968:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 1229              		.loc 1 968 0 is_stmt 1
 1230 0132 4DB1     		cbz	r5, .L107
 1231              	.LBB15:
 968:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 1232              		.loc 1 968 0 is_stmt 0 discriminator 1
 1233 0134 FFF7FEFF 		bl	sys_arch_protect
 1234              	.LVL159:
 1235 0138 95F90830 		ldrsb	r3, [r5, #8]
 1236 013c 13F10C0F 		cmn	r3, #12
 1237 0140 00DB     		blt	.L108
 968:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 1238              		.loc 1 968 0 discriminator 2
 1239 0142 2E72     		strb	r6, [r5, #8]
 1240              	.L108:
 968:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 1241              		.loc 1 968 0 discriminator 4
 1242 0144 FFF7FEFF 		bl	sys_arch_unprotect
 1243              	.LVL160:
 1244              	.L107:
 1245              	.LBE15:
 970:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 1246              		.loc 1 970 0 is_stmt 1
 1247 0148 BAF1000F 		cmp	r10, #0
 1248 014c 03D1     		bne	.L128
 976:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1249              		.loc 1 976 0
 1250 014e 0026     		movs	r6, #0
 1251              	.LVL161:
 1252 0150 16E0     		b	.L109
 1253              	.LVL162:
 1254              	.L117:
 1255              	.LBE14:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 54


 815:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct tcp_pcb* tpcb;
 1256              		.loc 1 815 0
 1257 0152 0023     		movs	r3, #0
 1258 0154 C9E7     		b	.L102
 1259              	.LVL163:
 1260              	.L128:
 1261              	.LBB16:
 974:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1262              		.loc 1 974 0
 1263 0156 2046     		mov	r0, r4
 1264 0158 FFF7FEFF 		bl	sys_sem_signal
 1265              	.LVL164:
 976:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1266              		.loc 1 976 0
 1267 015c 0026     		movs	r6, #0
 1268              	.LVL165:
 1269 015e 0FE0     		b	.L109
 1270              	.LVL166:
 1271              	.L103:
 1272              	.LBE16:
 982:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_sent(tpcb, sent_tcp);
 1273              		.loc 1 982 0
 1274 0160 B8F1000F 		cmp	r8, #0
 1275 0164 0FD1     		bne	.L129
 1276              	.LVL167:
 1277              	.L110:
 986:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_err(tpcb, err_tcp);
 1278              		.loc 1 986 0
 1279 0166 0122     		movs	r2, #1
 1280 0168 0949     		ldr	r1, .L130
 1281 016a 2046     		mov	r0, r4
 1282 016c FFF7FEFF 		bl	tcp_poll
 1283              	.LVL168:
 987:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_arg(tpcb, conn);
 1284              		.loc 1 987 0
 1285 0170 0849     		ldr	r1, .L130+4
 1286 0172 2046     		mov	r0, r4
 1287 0174 FFF7FEFF 		bl	tcp_err
 1288              	.LVL169:
 988:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* don't restore recv callback: we don't want to receive any more data */
 1289              		.loc 1 988 0
 1290 0178 2946     		mov	r1, r5
 1291 017a 2046     		mov	r0, r4
 1292 017c FFF7FEFF 		bl	tcp_arg
 1293              	.LVL170:
 1294              	.L109:
 995:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 1295              		.loc 1 995 0
 1296 0180 3046     		mov	r0, r6
 1297 0182 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 1298              	.LVL171:
 1299              	.L129:
 983:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1300              		.loc 1 983 0
 1301 0186 0449     		ldr	r1, .L130+8
 1302 0188 2046     		mov	r0, r4
 1303 018a FFF7FEFF 		bl	tcp_sent
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 55


 1304              	.LVL172:
 1305 018e EAE7     		b	.L110
 1306              	.L131:
 1307              		.align	2
 1308              	.L130:
 1309 0190 00000000 		.word	poll_tcp
 1310 0194 00000000 		.word	err_tcp
 1311 0198 00000000 		.word	sent_tcp
 1312              		.cfi_endproc
 1313              	.LFE153:
 1315              		.section	.text.poll_tcp,"ax",%progbits
 1316              		.align	1
 1317              		.syntax unified
 1318              		.thumb
 1319              		.thumb_func
 1320              		.fpu fpv5-sp-d16
 1322              	poll_tcp:
 1323              	.LFB143:
 301:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn = (struct netconn *)arg;
 1324              		.loc 1 301 0
 1325              		.cfi_startproc
 1326              		@ args = 0, pretend = 0, frame = 0
 1327              		@ frame_needed = 0, uses_anonymous_args = 0
 1328              	.LVL173:
 1329 0000 10B5     		push	{r4, lr}
 1330              	.LCFI8:
 1331              		.cfi_def_cfa_offset 8
 1332              		.cfi_offset 4, -8
 1333              		.cfi_offset 14, -4
 1334 0002 0446     		mov	r4, r0
 1335              	.LVL174:
 307:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     lwip_netconn_do_writemore(conn  WRITE_DELAYED);
 1336              		.loc 1 307 0
 1337 0004 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 1338 0006 012B     		cmp	r3, #1
 1339 0008 1BD0     		beq	.L138
 309:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if !LWIP_SO_SNDTIMEO && !LWIP_SO_LINGER
 1340              		.loc 1 309 0
 1341 000a 042B     		cmp	r3, #4
 1342 000c 1DD0     		beq	.L139
 1343              	.LVL175:
 1344              	.L134:
 320:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* If the queued byte- or pbuf-count drops below the configured low-water limit,
 1345              		.loc 1 320 0
 1346 000e 237F     		ldrb	r3, [r4, #28]	@ zero_extendqisi2
 1347 0010 13F0100F 		tst	r3, #16
 1348 0014 13D0     		beq	.L136
 323:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (tcp_sndqueuelen(conn->pcb.tcp) < TCP_SNDQUEUELOWAT)) {
 1349              		.loc 1 323 0
 1350 0016 6268     		ldr	r2, [r4, #4]
 1351 0018 8AB1     		cbz	r2, .L136
 323:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (tcp_sndqueuelen(conn->pcb.tcp) < TCP_SNDQUEUELOWAT)) {
 1352              		.loc 1 323 0 is_stmt 0 discriminator 1
 1353 001a B2F86010 		ldrh	r1, [r2, #96]
 1354 001e B1F5866F 		cmp	r1, #1072
 1355 0022 0CD3     		bcc	.L136
 324:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->flags &= ~NETCONN_FLAG_CHECK_WRITESPACE;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 56


 1356              		.loc 1 324 0 is_stmt 1 discriminator 2
 1357 0024 B2F86220 		ldrh	r2, [r2, #98]
 323:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (tcp_sndqueuelen(conn->pcb.tcp) < TCP_SNDQUEUELOWAT)) {
 1358              		.loc 1 323 0 discriminator 2
 1359 0028 042A     		cmp	r2, #4
 1360 002a 08D8     		bhi	.L136
 325:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       API_EVENT(conn, NETCONN_EVT_SENDPLUS, 0);
 1361              		.loc 1 325 0
 1362 002c 23F01003 		bic	r3, r3, #16
 1363 0030 2377     		strb	r3, [r4, #28]
 326:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1364              		.loc 1 326 0
 1365 0032 A36A     		ldr	r3, [r4, #40]
 1366 0034 1BB1     		cbz	r3, .L136
 326:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1367              		.loc 1 326 0 is_stmt 0 discriminator 1
 1368 0036 0022     		movs	r2, #0
 1369 0038 0221     		movs	r1, #2
 1370 003a 2046     		mov	r0, r4
 1371 003c 9847     		blx	r3
 1372              	.LVL176:
 1373              	.L136:
 331:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1374              		.loc 1 331 0 is_stmt 1
 1375 003e 0020     		movs	r0, #0
 1376 0040 10BD     		pop	{r4, pc}
 1377              	.LVL177:
 1378              	.L138:
 308:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else if (conn->state == NETCONN_CLOSE) {
 1379              		.loc 1 308 0
 1380 0042 0121     		movs	r1, #1
 1381              	.LVL178:
 1382 0044 FFF7FEFF 		bl	lwip_netconn_do_writemore
 1383              	.LVL179:
 1384 0048 E1E7     		b	.L134
 1385              	.LVL180:
 1386              	.L139:
 311:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->msg.sd.polls_left--;
 1387              		.loc 1 311 0
 1388 004a 436A     		ldr	r3, [r0, #36]
 1389 004c 1BB1     		cbz	r3, .L135
 311:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->msg.sd.polls_left--;
 1390              		.loc 1 311 0 is_stmt 0 discriminator 1
 1391 004e 5A7A     		ldrb	r2, [r3, #9]	@ zero_extendqisi2
 1392 0050 0AB1     		cbz	r2, .L135
 312:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1393              		.loc 1 312 0 is_stmt 1
 1394 0052 013A     		subs	r2, r2, #1
 1395 0054 5A72     		strb	r2, [r3, #9]
 1396              	.L135:
 315:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1397              		.loc 1 315 0
 1398 0056 0121     		movs	r1, #1
 1399              	.LVL181:
 1400 0058 2046     		mov	r0, r4
 1401              	.LVL182:
 1402 005a FFF7FEFF 		bl	lwip_netconn_do_close_internal
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 57


 1403              	.LVL183:
 1404 005e D6E7     		b	.L134
 1405              		.cfi_endproc
 1406              	.LFE143:
 1408              		.section	.text.sent_tcp,"ax",%progbits
 1409              		.align	1
 1410              		.syntax unified
 1411              		.thumb
 1412              		.thumb_func
 1413              		.fpu fpv5-sp-d16
 1415              	sent_tcp:
 1416              	.LFB144:
 342:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn = (struct netconn *)arg;
 1417              		.loc 1 342 0
 1418              		.cfi_startproc
 1419              		@ args = 0, pretend = 0, frame = 0
 1420              		@ frame_needed = 0, uses_anonymous_args = 0
 1421              	.LVL184:
 348:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (conn->state == NETCONN_WRITE) {
 1422              		.loc 1 348 0
 1423 0000 30B3     		cbz	r0, .L145
 342:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn = (struct netconn *)arg;
 1424              		.loc 1 342 0
 1425 0002 38B5     		push	{r3, r4, r5, lr}
 1426              	.LCFI9:
 1427              		.cfi_def_cfa_offset 16
 1428              		.cfi_offset 3, -16
 1429              		.cfi_offset 4, -12
 1430              		.cfi_offset 5, -8
 1431              		.cfi_offset 14, -4
 1432 0004 0446     		mov	r4, r0
 1433 0006 1546     		mov	r5, r2
 349:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       lwip_netconn_do_writemore(conn  WRITE_DELAYED);
 1434              		.loc 1 349 0
 1435 0008 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 1436 000a 012B     		cmp	r3, #1
 1437 000c 18D0     		beq	.L148
 351:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       lwip_netconn_do_close_internal(conn  WRITE_DELAYED);
 1438              		.loc 1 351 0
 1439 000e 042B     		cmp	r3, #4
 1440 0010 1AD0     		beq	.L149
 1441              	.LVL185:
 1442              	.L143:
 357:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (tcp_sndqueuelen(conn->pcb.tcp) < TCP_SNDQUEUELOWAT)) {
 1443              		.loc 1 357 0
 1444 0012 6368     		ldr	r3, [r4, #4]
 1445 0014 93B1     		cbz	r3, .L141
 357:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (tcp_sndqueuelen(conn->pcb.tcp) < TCP_SNDQUEUELOWAT)) {
 1446              		.loc 1 357 0 is_stmt 0 discriminator 1
 1447 0016 B3F86020 		ldrh	r2, [r3, #96]
 1448 001a B2F5866F 		cmp	r2, #1072
 1449 001e 0DD3     		bcc	.L141
 358:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->flags &= ~NETCONN_FLAG_CHECK_WRITESPACE;
 1450              		.loc 1 358 0 is_stmt 1 discriminator 2
 1451 0020 B3F86230 		ldrh	r3, [r3, #98]
 357:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (tcp_sndqueuelen(conn->pcb.tcp) < TCP_SNDQUEUELOWAT)) {
 1452              		.loc 1 357 0 discriminator 2
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 58


 1453 0024 042B     		cmp	r3, #4
 1454 0026 09D8     		bhi	.L141
 359:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       API_EVENT(conn, NETCONN_EVT_SENDPLUS, len);
 1455              		.loc 1 359 0
 1456 0028 237F     		ldrb	r3, [r4, #28]	@ zero_extendqisi2
 1457 002a 23F01003 		bic	r3, r3, #16
 1458 002e 2377     		strb	r3, [r4, #28]
 360:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1459              		.loc 1 360 0
 1460 0030 A36A     		ldr	r3, [r4, #40]
 1461 0032 1BB1     		cbz	r3, .L141
 360:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1462              		.loc 1 360 0 is_stmt 0 discriminator 1
 1463 0034 2A46     		mov	r2, r5
 1464 0036 0221     		movs	r1, #2
 1465 0038 2046     		mov	r0, r4
 1466 003a 9847     		blx	r3
 1467              	.LVL186:
 1468              	.L141:
 365:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1469              		.loc 1 365 0 is_stmt 1
 1470 003c 0020     		movs	r0, #0
 1471 003e 38BD     		pop	{r3, r4, r5, pc}
 1472              	.LVL187:
 1473              	.L148:
 350:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else if (conn->state == NETCONN_CLOSE) {
 1474              		.loc 1 350 0
 1475 0040 0121     		movs	r1, #1
 1476              	.LVL188:
 1477 0042 FFF7FEFF 		bl	lwip_netconn_do_writemore
 1478              	.LVL189:
 1479 0046 E4E7     		b	.L143
 1480              	.LVL190:
 1481              	.L149:
 352:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1482              		.loc 1 352 0
 1483 0048 0121     		movs	r1, #1
 1484              	.LVL191:
 1485 004a FFF7FEFF 		bl	lwip_netconn_do_close_internal
 1486              	.LVL192:
 1487 004e E0E7     		b	.L143
 1488              	.LVL193:
 1489              	.L145:
 1490              	.LCFI10:
 1491              		.cfi_def_cfa_offset 0
 1492              		.cfi_restore 3
 1493              		.cfi_restore 4
 1494              		.cfi_restore 5
 1495              		.cfi_restore 14
 365:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1496              		.loc 1 365 0
 1497 0050 0020     		movs	r0, #0
 1498              	.LVL194:
 1499 0052 7047     		bx	lr
 1500              		.cfi_endproc
 1501              	.LFE144:
 1503              		.section	.text.recv_tcp,"ax",%progbits
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 59


 1504              		.align	1
 1505              		.syntax unified
 1506              		.thumb
 1507              		.thumb_func
 1508              		.fpu fpv5-sp-d16
 1510              	recv_tcp:
 1511              	.LFB142:
 237:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 1512              		.loc 1 237 0
 1513              		.cfi_startproc
 1514              		@ args = 0, pretend = 0, frame = 0
 1515              		@ frame_needed = 0, uses_anonymous_args = 0
 1516              	.LVL195:
 1517 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1518              	.LCFI11:
 1519              		.cfi_def_cfa_offset 24
 1520              		.cfi_offset 4, -24
 1521              		.cfi_offset 5, -20
 1522              		.cfi_offset 6, -16
 1523              		.cfi_offset 7, -12
 1524              		.cfi_offset 8, -8
 1525              		.cfi_offset 14, -4
 1526              	.LVL196:
 246:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_VAL;
 1527              		.loc 1 246 0
 1528 0004 A8B3     		cbz	r0, .L156
 1529 0006 0746     		mov	r7, r0
 1530 0008 9846     		mov	r8, r3
 1531 000a 1446     		mov	r4, r2
 1532 000c 0D46     		mov	r5, r1
 251:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* recvmbox already deleted */
 1533              		.loc 1 251 0
 1534 000e 00F11006 		add	r6, r0, #16
 1535 0012 3046     		mov	r0, r6
 1536              	.LVL197:
 1537 0014 FFF7FEFF 		bl	sys_mbox_valid
 1538              	.LVL198:
 1539 0018 48B9     		cbnz	r0, .L152
 253:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_recved(pcb, p->tot_len);
 1540              		.loc 1 253 0
 1541 001a 6CB3     		cbz	r4, .L157
 254:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       pbuf_free(p);
 1542              		.loc 1 254 0
 1543 001c 2189     		ldrh	r1, [r4, #8]
 1544 001e 2846     		mov	r0, r5
 1545 0020 FFF7FEFF 		bl	tcp_recved
 1546              	.LVL199:
 255:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1547              		.loc 1 255 0
 1548 0024 2046     		mov	r0, r4
 1549 0026 FFF7FEFF 		bl	pbuf_free
 1550              	.LVL200:
 257:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1551              		.loc 1 257 0
 1552 002a 0024     		movs	r4, #0
 1553              	.LVL201:
 1554 002c 10E0     		b	.L151
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 60


 1555              	.LVL202:
 1556              	.L152:
 264:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     NETCONN_SET_SAFE_ERR(conn, err);
 1557              		.loc 1 264 0
 1558 002e B8F1000F 		cmp	r8, #0
 1559 0032 10D1     		bne	.L161
 1560              	.L153:
 268:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     len = p->tot_len;
 1561              		.loc 1 268 0
 1562 0034 DCB1     		cbz	r4, .L158
 269:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 1563              		.loc 1 269 0
 1564 0036 2589     		ldrh	r5, [r4, #8]
 1565              	.LVL203:
 1566              	.L155:
 274:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* don't deallocate p: it is presented to us later again from tcp_fasttmr! */
 1567              		.loc 1 274 0
 1568 0038 2146     		mov	r1, r4
 1569 003a 3046     		mov	r0, r6
 1570 003c FFF7FEFF 		bl	sys_mbox_trypost
 1571              	.LVL204:
 1572 0040 0446     		mov	r4, r0
 1573              	.LVL205:
 1574 0042 D8B9     		cbnz	r0, .L159
 282:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1575              		.loc 1 282 0
 1576 0044 BB6A     		ldr	r3, [r7, #40]
 1577 0046 1BB1     		cbz	r3, .L151
 282:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1578              		.loc 1 282 0 is_stmt 0 discriminator 1
 1579 0048 2A46     		mov	r2, r5
 1580 004a 0021     		movs	r1, #0
 1581 004c 3846     		mov	r0, r7
 1582 004e 9847     		blx	r3
 1583              	.LVL206:
 1584              	.L151:
 286:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1585              		.loc 1 286 0 is_stmt 1
 1586 0050 2046     		mov	r0, r4
 1587 0052 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1588              	.LVL207:
 1589              	.L161:
 1590              	.LBB17:
 265:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1591              		.loc 1 265 0 discriminator 1
 1592 0056 FFF7FEFF 		bl	sys_arch_protect
 1593              	.LVL208:
 1594 005a 97F90830 		ldrsb	r3, [r7, #8]
 1595 005e 13F10C0F 		cmn	r3, #12
 1596 0062 01DB     		blt	.L154
 265:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1597              		.loc 1 265 0 is_stmt 0 discriminator 2
 1598 0064 87F80880 		strb	r8, [r7, #8]
 1599              	.L154:
 265:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1600              		.loc 1 265 0 discriminator 4
 1601 0068 FFF7FEFF 		bl	sys_arch_unprotect
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 61


 1602              	.LVL209:
 1603 006c E2E7     		b	.L153
 1604              	.L158:
 1605              	.LBE17:
 271:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1606              		.loc 1 271 0 is_stmt 1
 1607 006e 0025     		movs	r5, #0
 1608              	.LVL210:
 1609 0070 E2E7     		b	.L155
 1610              	.LVL211:
 1611              	.L156:
 247:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1612              		.loc 1 247 0
 1613 0072 6FF00504 		mvn	r4, #5
 1614 0076 EBE7     		b	.L151
 1615              	.LVL212:
 1616              	.L157:
 257:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1617              		.loc 1 257 0
 1618 0078 0024     		movs	r4, #0
 1619              	.LVL213:
 1620 007a E9E7     		b	.L151
 1621              	.LVL214:
 1622              	.L159:
 276:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 1623              		.loc 1 276 0
 1624 007c 4FF0FF34 		mov	r4, #-1
 1625 0080 E6E7     		b	.L151
 1626              		.cfi_endproc
 1627              	.LFE142:
 1629              		.section	.text.lwip_netconn_do_newconn,"ax",%progbits
 1630              		.align	1
 1631              		.global	lwip_netconn_do_newconn
 1632              		.syntax unified
 1633              		.thumb
 1634              		.thumb_func
 1635              		.fpu fpv5-sp-d16
 1637              	lwip_netconn_do_newconn:
 1638              	.LFB149:
 610:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 1639              		.loc 1 610 0
 1640              		.cfi_startproc
 1641              		@ args = 0, pretend = 0, frame = 0
 1642              		@ frame_needed = 0, uses_anonymous_args = 0
 1643              	.LVL215:
 1644 0000 10B5     		push	{r4, lr}
 1645              	.LCFI12:
 1646              		.cfi_def_cfa_offset 8
 1647              		.cfi_offset 4, -8
 1648              		.cfi_offset 14, -4
 1649 0002 0446     		mov	r4, r0
 1650              	.LVL216:
 613:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (msg->conn->pcb.tcp == NULL) {
 1651              		.loc 1 613 0
 1652 0004 0023     		movs	r3, #0
 1653 0006 0371     		strb	r3, [r0, #4]
 614:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     pcb_new(msg);
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 62


 1654              		.loc 1 614 0
 1655 0008 0368     		ldr	r3, [r0]
 1656 000a 5B68     		ldr	r3, [r3, #4]
 1657 000c 7BB1     		cbz	r3, .L167
 1658              	.LVL217:
 1659              	.L163:
 621:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 1660              		.loc 1 621 0
 1661 000e 2368     		ldr	r3, [r4]
 1662 0010 63B1     		cbz	r3, .L162
 1663              	.LBB18:
 621:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 1664              		.loc 1 621 0 is_stmt 0 discriminator 1
 1665 0012 FFF7FEFF 		bl	sys_arch_protect
 1666              	.LVL218:
 1667 0016 2368     		ldr	r3, [r4]
 1668 0018 93F90820 		ldrsb	r2, [r3, #8]
 1669 001c 12F10C0F 		cmn	r2, #12
 1670 0020 02DB     		blt	.L165
 621:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 1671              		.loc 1 621 0 discriminator 2
 1672 0022 94F90420 		ldrsb	r2, [r4, #4]
 1673 0026 1A72     		strb	r2, [r3, #8]
 1674              	.L165:
 621:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 1675              		.loc 1 621 0 discriminator 4
 1676 0028 FFF7FEFF 		bl	sys_arch_unprotect
 1677              	.LVL219:
 1678              	.L162:
 1679 002c 10BD     		pop	{r4, pc}
 1680              	.LVL220:
 1681              	.L167:
 1682              	.LBE18:
 615:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1683              		.loc 1 615 0 is_stmt 1
 1684 002e FFF7FEFF 		bl	pcb_new
 1685              	.LVL221:
 1686 0032 ECE7     		b	.L163
 1687              		.cfi_endproc
 1688              	.LFE149:
 1690              		.section	.text.netconn_alloc,"ax",%progbits
 1691              		.align	1
 1692              		.global	netconn_alloc
 1693              		.syntax unified
 1694              		.thumb
 1695              		.thumb_func
 1696              		.fpu fpv5-sp-d16
 1698              	netconn_alloc:
 1699              	.LFB150:
 635:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 1700              		.loc 1 635 0
 1701              		.cfi_startproc
 1702              		@ args = 0, pretend = 0, frame = 0
 1703              		@ frame_needed = 0, uses_anonymous_args = 0
 1704              	.LVL222:
 1705 0000 70B5     		push	{r4, r5, r6, lr}
 1706              	.LCFI13:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 63


 1707              		.cfi_def_cfa_offset 16
 1708              		.cfi_offset 4, -16
 1709              		.cfi_offset 5, -12
 1710              		.cfi_offset 6, -8
 1711              		.cfi_offset 14, -4
 1712 0002 0546     		mov	r5, r0
 1713 0004 0E46     		mov	r6, r1
 639:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn == NULL) {
 1714              		.loc 1 639 0
 1715 0006 0720     		movs	r0, #7
 1716              	.LVL223:
 1717 0008 FFF7FEFF 		bl	memp_malloc
 1718              	.LVL224:
 640:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return NULL;
 1719              		.loc 1 640 0
 1720 000c 0446     		mov	r4, r0
 1721 000e 18B3     		cbz	r0, .L168
 644:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->type = t;
 1722              		.loc 1 644 0
 1723 0010 0023     		movs	r3, #0
 1724 0012 0372     		strb	r3, [r0, #8]
 645:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->pcb.tcp = NULL;
 1725              		.loc 1 645 0
 1726 0014 0570     		strb	r5, [r0]
 646:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1727              		.loc 1 646 0
 1728 0016 4360     		str	r3, [r0, #4]
 649:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
 1729              		.loc 1 649 0
 1730 0018 05F0F005 		and	r5, r5, #240
 1731 001c 102D     		cmp	r5, #16
 1732 001e 01D0     		beq	.L171
 1733 0020 202D     		cmp	r5, #32
 1734 0022 1ED1     		bne	.L170
 1735              	.L171:
 1736              	.LVL225:
 670:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     goto free_and_return;
 1737              		.loc 1 670 0
 1738 0024 04F11005 		add	r5, r4, #16
 1739 0028 0621     		movs	r1, #6
 1740 002a 2846     		mov	r0, r5
 1741              	.LVL226:
 1742 002c FFF7FEFF 		bl	sys_mbox_new
 1743              	.LVL227:
 1744 0030 B8B9     		cbnz	r0, .L170
 674:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_free(&conn->recvmbox);
 1745              		.loc 1 674 0
 1746 0032 0021     		movs	r1, #0
 1747 0034 04F10C00 		add	r0, r4, #12
 1748 0038 FFF7FEFF 		bl	sys_sem_new
 1749              	.LVL228:
 1750 003c 70B9     		cbnz	r0, .L174
 681:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 1751              		.loc 1 681 0
 1752 003e 04F11400 		add	r0, r4, #20
 1753 0042 FFF7FEFF 		bl	sys_mbox_set_invalid
 1754              	.LVL229:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 64


 683:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SOCKET
 1755              		.loc 1 683 0
 1756 0046 0023     		movs	r3, #0
 1757 0048 6370     		strb	r3, [r4, #1]
 686:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SOCKET */
 1758              		.loc 1 686 0
 1759 004a 4FF0FF32 		mov	r2, #-1
 1760 004e A261     		str	r2, [r4, #24]
 688:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 1761              		.loc 1 688 0
 1762 0050 A662     		str	r6, [r4, #40]
 690:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->write_offset = 0;
 1763              		.loc 1 690 0
 1764 0052 6362     		str	r3, [r4, #36]
 691:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 1765              		.loc 1 691 0
 1766 0054 2362     		str	r3, [r4, #32]
 706:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return conn;
 1767              		.loc 1 706 0
 1768 0056 2377     		strb	r3, [r4, #28]
 1769              	.LVL230:
 1770              	.L168:
 711:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1771              		.loc 1 711 0
 1772 0058 2046     		mov	r0, r4
 1773 005a 70BD     		pop	{r4, r5, r6, pc}
 1774              	.LVL231:
 1775              	.L174:
 675:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     goto free_and_return;
 1776              		.loc 1 675 0
 1777 005c 2846     		mov	r0, r5
 1778 005e FFF7FEFF 		bl	sys_mbox_free
 1779              	.LVL232:
 1780              	.L170:
 709:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return NULL;
 1781              		.loc 1 709 0
 1782 0062 2146     		mov	r1, r4
 1783 0064 0720     		movs	r0, #7
 1784 0066 FFF7FEFF 		bl	memp_free
 1785              	.LVL233:
 710:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 1786              		.loc 1 710 0
 1787 006a 0024     		movs	r4, #0
 1788              	.LVL234:
 1789 006c F4E7     		b	.L168
 1790              		.cfi_endproc
 1791              	.LFE150:
 1793              		.section	.text.netconn_free,"ax",%progbits
 1794              		.align	1
 1795              		.global	netconn_free
 1796              		.syntax unified
 1797              		.thumb
 1798              		.thumb_func
 1799              		.fpu fpv5-sp-d16
 1801              	netconn_free:
 1802              	.LFB151:
 721:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("PCB must be deallocated outside this function", conn->pcb.tcp == NULL);
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 65


 1803              		.loc 1 721 0
 1804              		.cfi_startproc
 1805              		@ args = 0, pretend = 0, frame = 0
 1806              		@ frame_needed = 0, uses_anonymous_args = 0
 1807              	.LVL235:
 1808 0000 38B5     		push	{r3, r4, r5, lr}
 1809              	.LCFI14:
 1810              		.cfi_def_cfa_offset 16
 1811              		.cfi_offset 3, -16
 1812              		.cfi_offset 4, -12
 1813              		.cfi_offset 5, -8
 1814              		.cfi_offset 14, -4
 1815 0002 0446     		mov	r4, r0
 723:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     !sys_mbox_valid(&conn->recvmbox));
 1816              		.loc 1 723 0
 1817 0004 1030     		adds	r0, r0, #16
 1818              	.LVL236:
 1819 0006 FFF7FEFF 		bl	sys_mbox_valid
 1820              	.LVL237:
 726:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     !sys_mbox_valid(&conn->acceptmbox));
 1821              		.loc 1 726 0
 1822 000a 04F11400 		add	r0, r4, #20
 1823 000e FFF7FEFF 		bl	sys_mbox_valid
 1824              	.LVL238:
 731:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   sys_sem_set_invalid(&conn->op_completed);
 1825              		.loc 1 731 0
 1826 0012 04F10C05 		add	r5, r4, #12
 1827 0016 2846     		mov	r0, r5
 1828 0018 FFF7FEFF 		bl	sys_sem_free
 1829              	.LVL239:
 732:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 1830              		.loc 1 732 0
 1831 001c 2846     		mov	r0, r5
 1832 001e FFF7FEFF 		bl	sys_sem_set_invalid
 1833              	.LVL240:
 735:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 1834              		.loc 1 735 0
 1835 0022 2146     		mov	r1, r4
 1836 0024 0720     		movs	r0, #7
 1837 0026 FFF7FEFF 		bl	memp_free
 1838              	.LVL241:
 1839 002a 38BD     		pop	{r3, r4, r5, pc}
 1840              		.cfi_endproc
 1841              	.LFE151:
 1843              		.section	.text.netconn_drain,"ax",%progbits
 1844              		.align	1
 1845              		.syntax unified
 1846              		.thumb
 1847              		.thumb_func
 1848              		.fpu fpv5-sp-d16
 1850              	netconn_drain:
 1851              	.LFB152:
 748:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   void *mem;
 1852              		.loc 1 748 0
 1853              		.cfi_startproc
 1854              		@ args = 0, pretend = 0, frame = 8
 1855              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 66


 1856              	.LVL242:
 1857 0000 70B5     		push	{r4, r5, r6, lr}
 1858              	.LCFI15:
 1859              		.cfi_def_cfa_offset 16
 1860              		.cfi_offset 4, -16
 1861              		.cfi_offset 5, -12
 1862              		.cfi_offset 6, -8
 1863              		.cfi_offset 14, -4
 1864 0002 82B0     		sub	sp, sp, #8
 1865              	.LCFI16:
 1866              		.cfi_def_cfa_offset 24
 1867 0004 0546     		mov	r5, r0
 757:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     while (sys_mbox_tryfetch(&conn->recvmbox, &mem) != SYS_MBOX_EMPTY) {
 1868              		.loc 1 757 0
 1869 0006 00F11004 		add	r4, r0, #16
 1870 000a 2046     		mov	r0, r4
 1871              	.LVL243:
 1872 000c FFF7FEFF 		bl	sys_mbox_valid
 1873              	.LVL244:
 1874 0010 38BB     		cbnz	r0, .L178
 1875              	.L179:
 781:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     while (sys_mbox_tryfetch(&conn->acceptmbox, &mem) != SYS_MBOX_EMPTY) {
 1876              		.loc 1 781 0
 1877 0012 1435     		adds	r5, r5, #20
 1878              	.LVL245:
 1879 0014 2846     		mov	r0, r5
 1880 0016 FFF7FEFF 		bl	sys_mbox_valid
 1881              	.LVL246:
 1882 001a 0028     		cmp	r0, #0
 1883 001c 3ED0     		beq	.L177
 1884              	.L186:
 782:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (mem != &netconn_aborted) {
 1885              		.loc 1 782 0
 1886 001e 01A9     		add	r1, sp, #4
 1887 0020 2846     		mov	r0, r5
 1888 0022 FFF7FEFF 		bl	sys_arch_mbox_tryfetch
 1889              	.LVL247:
 1890 0026 B0F1FF3F 		cmp	r0, #-1
 1891 002a 31D0     		beq	.L190
 783:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         struct netconn *newconn = (struct netconn *)mem;
 1892              		.loc 1 783 0
 1893 002c 019C     		ldr	r4, [sp, #4]
 1894 002e 1C4B     		ldr	r3, .L193
 1895 0030 9C42     		cmp	r4, r3
 1896 0032 F4D0     		beq	.L186
 1897              	.LVL248:
 1898              	.LBB19:
 788:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (newconn->pcb.tcp != NULL) {
 1899              		.loc 1 788 0
 1900 0034 2046     		mov	r0, r4
 1901 0036 FFF7E3FF 		bl	netconn_drain
 1902              	.LVL249:
 789:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           tcp_abort(newconn->pcb.tcp);
 1903              		.loc 1 789 0
 1904 003a 6068     		ldr	r0, [r4, #4]
 1905 003c 18B1     		cbz	r0, .L187
 790:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           newconn->pcb.tcp = NULL;
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 67


 1906              		.loc 1 790 0
 1907 003e FFF7FEFF 		bl	tcp_abort
 1908              	.LVL250:
 791:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 1909              		.loc 1 791 0
 1910 0042 0023     		movs	r3, #0
 1911 0044 6360     		str	r3, [r4, #4]
 1912              	.L187:
 793:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1913              		.loc 1 793 0
 1914 0046 2046     		mov	r0, r4
 1915 0048 FFF7FEFF 		bl	netconn_free
 1916              	.LVL251:
 1917 004c E7E7     		b	.L186
 1918              	.LVL252:
 1919              	.L192:
 1920              	.LBE19:
 761:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           p = (struct pbuf*)mem;
 1921              		.loc 1 761 0
 1922 004e 019E     		ldr	r6, [sp, #4]
 1923 0050 3EB1     		cbz	r6, .L178
 1924              	.LVL253:
 764:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             tcp_recved(conn->pcb.tcp, p->tot_len);
 1925              		.loc 1 764 0
 1926 0052 6868     		ldr	r0, [r5, #4]
 1927 0054 10B1     		cbz	r0, .L182
 765:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           }
 1928              		.loc 1 765 0
 1929 0056 3189     		ldrh	r1, [r6, #8]
 1930 0058 FFF7FEFF 		bl	tcp_recved
 1931              	.LVL254:
 1932              	.L182:
 767:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 1933              		.loc 1 767 0
 1934 005c 3046     		mov	r0, r6
 1935 005e FFF7FEFF 		bl	pbuf_free
 1936              	.LVL255:
 1937              	.L178:
 758:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 1938              		.loc 1 758 0
 1939 0062 01A9     		add	r1, sp, #4
 1940 0064 2046     		mov	r0, r4
 1941 0066 FFF7FEFF 		bl	sys_arch_mbox_tryfetch
 1942              	.LVL256:
 1943 006a B0F1FF3F 		cmp	r0, #-1
 1944 006e 08D0     		beq	.L191
 760:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (mem != NULL) {
 1945              		.loc 1 760 0
 1946 0070 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 1947 0072 03F0F003 		and	r3, r3, #240
 1948 0076 102B     		cmp	r3, #16
 1949 0078 E9D0     		beq	.L192
 772:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1950              		.loc 1 772 0
 1951 007a 0198     		ldr	r0, [sp, #4]
 1952 007c FFF7FEFF 		bl	netbuf_delete
 1953              	.LVL257:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 68


 1954 0080 EFE7     		b	.L178
 1955              	.L191:
 775:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_set_invalid(&conn->recvmbox);
 1956              		.loc 1 775 0
 1957 0082 2046     		mov	r0, r4
 1958 0084 FFF7FEFF 		bl	sys_mbox_free
 1959              	.LVL258:
 776:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1960              		.loc 1 776 0
 1961 0088 2046     		mov	r0, r4
 1962 008a FFF7FEFF 		bl	sys_mbox_set_invalid
 1963              	.LVL259:
 1964 008e C0E7     		b	.L179
 1965              	.LVL260:
 1966              	.L190:
 796:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_set_invalid(&conn->acceptmbox);
 1967              		.loc 1 796 0
 1968 0090 2846     		mov	r0, r5
 1969 0092 FFF7FEFF 		bl	sys_mbox_free
 1970              	.LVL261:
 797:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1971              		.loc 1 797 0
 1972 0096 2846     		mov	r0, r5
 1973 0098 FFF7FEFF 		bl	sys_mbox_set_invalid
 1974              	.LVL262:
 1975              	.L177:
 800:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1976              		.loc 1 800 0
 1977 009c 02B0     		add	sp, sp, #8
 1978              	.LCFI17:
 1979              		.cfi_def_cfa_offset 16
 1980              		@ sp needed
 1981 009e 70BD     		pop	{r4, r5, r6, pc}
 1982              	.LVL263:
 1983              	.L194:
 1984              		.align	2
 1985              	.L193:
 1986 00a0 00000000 		.word	netconn_aborted
 1987              		.cfi_endproc
 1988              	.LFE152:
 1990              		.section	.text.accept_function,"ax",%progbits
 1991              		.align	1
 1992              		.syntax unified
 1993              		.thumb
 1994              		.thumb_func
 1995              		.fpu fpv5-sp-d16
 1997              	accept_function:
 1998              	.LFB147:
 469:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *newconn;
 1999              		.loc 1 469 0
 2000              		.cfi_startproc
 2001              		@ args = 0, pretend = 0, frame = 0
 2002              		@ frame_needed = 0, uses_anonymous_args = 0
 2003              	.LVL264:
 2004 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2005              	.LCFI18:
 2006              		.cfi_def_cfa_offset 24
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 69


 2007              		.cfi_offset 4, -24
 2008              		.cfi_offset 5, -20
 2009              		.cfi_offset 6, -16
 2010              		.cfi_offset 7, -12
 2011              		.cfi_offset 8, -8
 2012              		.cfi_offset 14, -4
 2013              	.LVL265:
 475:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_VAL;
 2014              		.loc 1 475 0
 2015 0004 0028     		cmp	r0, #0
 2016 0006 67D0     		beq	.L200
 2017 0008 0446     		mov	r4, r0
 2018 000a 1646     		mov	r6, r2
 2019 000c 0D46     		mov	r5, r1
 478:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     LWIP_DEBUGF(API_MSG_DEBUG, ("accept_function: acceptmbox already deleted\n"));
 2020              		.loc 1 478 0
 2021 000e 00F11408 		add	r8, r0, #20
 2022 0012 4046     		mov	r0, r8
 2023              	.LVL266:
 2024 0014 FFF7FEFF 		bl	sys_mbox_valid
 2025              	.LVL267:
 2026 0018 0028     		cmp	r0, #0
 2027 001a 60D0     		beq	.L201
 483:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* out-of-pcbs during connect: pass on this error to the application */
 2028              		.loc 1 483 0
 2029 001c C5B1     		cbz	r5, .L207
 494:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (newconn == NULL) {
 2030              		.loc 1 494 0
 2031 001e A16A     		ldr	r1, [r4, #40]
 2032 0020 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 2033 0022 FFF7FEFF 		bl	netconn_alloc
 2034              	.LVL268:
 495:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* outof netconns: pass on this error to the application */
 2035              		.loc 1 495 0
 2036 0026 0746     		mov	r7, r0
 2037 0028 10B3     		cbz	r0, .L208
 503:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   setup_tcp(newconn);
 2038              		.loc 1 503 0
 2039 002a 4560     		str	r5, [r0, #4]
 504:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* no protection: when creating the pcb, the netconn is not yet known
 2040              		.loc 1 504 0
 2041 002c FFF7FEFF 		bl	setup_tcp
 2042              	.LVL269:
 507:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 2043              		.loc 1 507 0
 2044 0030 3E72     		strb	r6, [r7, #8]
 512:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* When returning != ERR_OK, the pcb is aborted in tcp_process(),
 2045              		.loc 1 512 0
 2046 0032 3946     		mov	r1, r7
 2047 0034 4046     		mov	r0, r8
 2048 0036 FFF7FEFF 		bl	sys_mbox_trypost
 2049              	.LVL270:
 2050 003a 0546     		mov	r5, r0
 2051              	.LVL271:
 2052 003c 30BB     		cbnz	r0, .L209
 531:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2053              		.loc 1 531 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 70


 2054 003e A36A     		ldr	r3, [r4, #40]
 2055 0040 1BB1     		cbz	r3, .L196
 531:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2056              		.loc 1 531 0 is_stmt 0 discriminator 1
 2057 0042 0022     		movs	r2, #0
 2058 0044 1146     		mov	r1, r2
 2059 0046 2046     		mov	r0, r4
 2060 0048 9847     		blx	r3
 2061              	.LVL272:
 2062              	.L196:
 535:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 2063              		.loc 1 535 0 is_stmt 1
 2064 004a 2846     		mov	r0, r5
 2065 004c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2066              	.LVL273:
 2067              	.L207:
 485:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Register event with callback */
 2068              		.loc 1 485 0
 2069 0050 2A49     		ldr	r1, .L210
 2070 0052 4046     		mov	r0, r8
 2071 0054 FFF7FEFF 		bl	sys_mbox_trypost
 2072              	.LVL274:
 2073 0058 0028     		cmp	r0, #0
 2074 005a 43D1     		bne	.L202
 487:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 2075              		.loc 1 487 0
 2076 005c A36A     		ldr	r3, [r4, #40]
 2077 005e 002B     		cmp	r3, #0
 2078 0060 43D0     		beq	.L203
 487:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 2079              		.loc 1 487 0 is_stmt 0 discriminator 1
 2080 0062 0022     		movs	r2, #0
 2081 0064 1146     		mov	r1, r2
 2082 0066 2046     		mov	r0, r4
 2083 0068 9847     		blx	r3
 2084              	.LVL275:
 489:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2085              		.loc 1 489 0 is_stmt 1 discriminator 1
 2086 006a 6FF00505 		mvn	r5, #5
 2087              	.LVL276:
 2088 006e ECE7     		b	.L196
 2089              	.LVL277:
 2090              	.L208:
 497:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Register event with callback */
 2091              		.loc 1 497 0
 2092 0070 2249     		ldr	r1, .L210
 2093 0072 4046     		mov	r0, r8
 2094              	.LVL278:
 2095 0074 FFF7FEFF 		bl	sys_mbox_trypost
 2096              	.LVL279:
 2097 0078 D0BB     		cbnz	r0, .L204
 499:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 2098              		.loc 1 499 0
 2099 007a A36A     		ldr	r3, [r4, #40]
 2100 007c DBB3     		cbz	r3, .L205
 499:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 2101              		.loc 1 499 0 is_stmt 0 discriminator 1
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 71


 2102 007e 0022     		movs	r2, #0
 2103 0080 1146     		mov	r1, r2
 2104 0082 2046     		mov	r0, r4
 2105 0084 9847     		blx	r3
 2106              	.LVL280:
 501:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2107              		.loc 1 501 0 is_stmt 1 discriminator 1
 2108 0086 4FF0FF35 		mov	r5, #-1
 2109              	.LVL281:
 2110 008a DEE7     		b	.L196
 2111              	.L209:
 2112              	.LBB20:
 516:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_arg(pcb, NULL);
 2113              		.loc 1 516 0
 2114 008c 7C68     		ldr	r4, [r7, #4]
 2115              	.LVL282:
 517:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_recv(pcb, NULL);
 2116              		.loc 1 517 0
 2117 008e 0021     		movs	r1, #0
 2118 0090 2046     		mov	r0, r4
 2119 0092 FFF7FEFF 		bl	tcp_arg
 2120              	.LVL283:
 518:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_sent(pcb, NULL);
 2121              		.loc 1 518 0
 2122 0096 0021     		movs	r1, #0
 2123 0098 2046     		mov	r0, r4
 2124 009a FFF7FEFF 		bl	tcp_recv
 2125              	.LVL284:
 519:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_poll(pcb, NULL, 0);
 2126              		.loc 1 519 0
 2127 009e 0021     		movs	r1, #0
 2128 00a0 2046     		mov	r0, r4
 2129 00a2 FFF7FEFF 		bl	tcp_sent
 2130              	.LVL285:
 520:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_err(pcb, NULL);
 2131              		.loc 1 520 0
 2132 00a6 0022     		movs	r2, #0
 2133 00a8 1146     		mov	r1, r2
 2134 00aa 2046     		mov	r0, r4
 2135 00ac FFF7FEFF 		bl	tcp_poll
 2136              	.LVL286:
 521:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* remove reference from to the pcb from this netconn */
 2137              		.loc 1 521 0
 2138 00b0 0021     		movs	r1, #0
 2139 00b2 2046     		mov	r0, r4
 2140 00b4 FFF7FEFF 		bl	tcp_err
 2141              	.LVL287:
 523:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* no need to drain since we know the recvmbox is empty. */
 2142              		.loc 1 523 0
 2143 00b8 0023     		movs	r3, #0
 2144 00ba 7B60     		str	r3, [r7, #4]
 525:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_set_invalid(&newconn->recvmbox);
 2145              		.loc 1 525 0
 2146 00bc 07F11004 		add	r4, r7, #16
 2147              	.LVL288:
 2148 00c0 2046     		mov	r0, r4
 2149 00c2 FFF7FEFF 		bl	sys_mbox_free
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 72


 2150              	.LVL289:
 526:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     netconn_free(newconn);
 2151              		.loc 1 526 0
 2152 00c6 2046     		mov	r0, r4
 2153 00c8 FFF7FEFF 		bl	sys_mbox_set_invalid
 2154              	.LVL290:
 527:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_MEM;
 2155              		.loc 1 527 0
 2156 00cc 3846     		mov	r0, r7
 2157 00ce FFF7FEFF 		bl	netconn_free
 2158              	.LVL291:
 528:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 2159              		.loc 1 528 0
 2160 00d2 4FF0FF35 		mov	r5, #-1
 2161 00d6 B8E7     		b	.L196
 2162              	.LVL292:
 2163              	.L200:
 2164              	.LBE20:
 476:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2165              		.loc 1 476 0
 2166 00d8 6FF00505 		mvn	r5, #5
 2167 00dc B5E7     		b	.L196
 2168              	.LVL293:
 2169              	.L201:
 480:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2170              		.loc 1 480 0
 2171 00de 6FF00505 		mvn	r5, #5
 2172              	.LVL294:
 2173 00e2 B2E7     		b	.L196
 2174              	.LVL295:
 2175              	.L202:
 489:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2176              		.loc 1 489 0
 2177 00e4 6FF00505 		mvn	r5, #5
 2178              	.LVL296:
 2179 00e8 AFE7     		b	.L196
 2180              	.LVL297:
 2181              	.L203:
 2182 00ea 6FF00505 		mvn	r5, #5
 2183              	.LVL298:
 2184 00ee ACE7     		b	.L196
 2185              	.LVL299:
 2186              	.L204:
 501:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2187              		.loc 1 501 0
 2188 00f0 4FF0FF35 		mov	r5, #-1
 2189              	.LVL300:
 2190 00f4 A9E7     		b	.L196
 2191              	.LVL301:
 2192              	.L205:
 2193 00f6 4FF0FF35 		mov	r5, #-1
 2194              	.LVL302:
 2195 00fa A6E7     		b	.L196
 2196              	.L211:
 2197              		.align	2
 2198              	.L210:
 2199 00fc 00000000 		.word	netconn_aborted
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 73


 2200              		.cfi_endproc
 2201              	.LFE147:
 2203              		.section	.text.lwip_netconn_do_delconn,"ax",%progbits
 2204              		.align	1
 2205              		.global	lwip_netconn_do_delconn
 2206              		.syntax unified
 2207              		.thumb
 2208              		.thumb_func
 2209              		.fpu fpv5-sp-d16
 2211              	lwip_netconn_do_delconn:
 2212              	.LFB154:
1006:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 2213              		.loc 1 1006 0
 2214              		.cfi_startproc
 2215              		@ args = 0, pretend = 0, frame = 0
 2216              		@ frame_needed = 0, uses_anonymous_args = 0
 2217              	.LVL303:
 2218 0000 38B5     		push	{r3, r4, r5, lr}
 2219              	.LCFI19:
 2220              		.cfi_def_cfa_offset 16
 2221              		.cfi_offset 3, -16
 2222              		.cfi_offset 4, -12
 2223              		.cfi_offset 5, -8
 2224              		.cfi_offset 14, -4
 2225 0002 0446     		mov	r4, r0
 2226              	.LVL304:
1009:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("netconn state error", /* this only happens for TCP netconns */
 2227              		.loc 1 1009 0
 2228 0004 0068     		ldr	r0, [r0]
 2229              	.LVL305:
 2230 0006 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 2231              	.LVL306:
1030:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        (state != NETCONN_LISTEN) &&
 2232              		.loc 1 1030 0
 2233 0008 002B     		cmp	r3, #0
 2234 000a 18BF     		it	ne
 2235 000c 022B     		cmpne	r3, #2
 2236 000e 18D0     		beq	.L213
1031:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        (state != NETCONN_CONNECT)) ||
 2237              		.loc 1 1031 0
 2238 0010 032B     		cmp	r3, #3
 2239 0012 16D0     		beq	.L213
 2240              	.LVL307:
 2241              	.L214:
1036:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else
 2242              		.loc 1 1036 0
 2243 0014 FB23     		movs	r3, #251
 2244 0016 2371     		strb	r3, [r4, #4]
 2245              	.LVL308:
 2246              	.L216:
1094:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     TCPIP_APIMSG_ACK(msg);
 2247              		.loc 1 1094 0
 2248 0018 2068     		ldr	r0, [r4]
 2249 001a 0C30     		adds	r0, r0, #12
 2250 001c FFF7FEFF 		bl	sys_sem_valid
 2251              	.LVL309:
 2252 0020 70B1     		cbz	r0, .L212
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 74


1095:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2253              		.loc 1 1095 0
 2254 0022 2368     		ldr	r3, [r4]
 2255 0024 63B1     		cbz	r3, .L212
 2256              	.LBB21:
1095:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2257              		.loc 1 1095 0 is_stmt 0 discriminator 1
 2258 0026 FFF7FEFF 		bl	sys_arch_protect
 2259              	.LVL310:
 2260 002a 2368     		ldr	r3, [r4]
 2261 002c 93F90820 		ldrsb	r2, [r3, #8]
 2262 0030 12F10C0F 		cmn	r2, #12
 2263 0034 02DB     		blt	.L223
1095:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2264              		.loc 1 1095 0 discriminator 2
 2265 0036 94F90420 		ldrsb	r2, [r4, #4]
 2266 003a 1A72     		strb	r2, [r3, #8]
 2267              	.L223:
1095:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2268              		.loc 1 1095 0 discriminator 4
 2269 003c FFF7FEFF 		bl	sys_arch_unprotect
 2270              	.LVL311:
 2271              	.L212:
 2272 0040 38BD     		pop	{r3, r4, r5, pc}
 2273              	.LVL312:
 2274              	.L213:
 2275              	.LBE21:
1032:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ((state == NETCONN_CONNECT) && !IN_NONBLOCKING_CONNECT(msg->conn))) {
 2276              		.loc 1 1032 0 is_stmt 1
 2277 0042 032B     		cmp	r3, #3
 2278 0044 24D0     		beq	.L225
 2279              	.LVL313:
 2280              	.L215:
1042:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Drain and delete mboxes */
 2281              		.loc 1 1042 0
 2282 0046 0023     		movs	r3, #0
 2283 0048 2371     		strb	r3, [r4, #4]
 2284              	.LVL314:
1044:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 2285              		.loc 1 1044 0
 2286 004a FFF7FEFF 		bl	netconn_drain
 2287              	.LVL315:
1046:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 2288              		.loc 1 1046 0
 2289 004e 2268     		ldr	r2, [r4]
 2290 0050 5168     		ldr	r1, [r2, #4]
 2291 0052 79B1     		cbz	r1, .L217
1048:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
 2292              		.loc 1 1048 0
 2293 0054 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 2294 0056 03F0F003 		and	r3, r3, #240
 2295 005a 102B     		cmp	r3, #16
 2296 005c 1DD0     		beq	.L219
 2297 005e 202B     		cmp	r3, #32
 2298 0060 05D1     		bne	.L218
1056:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         udp_remove(msg->conn->pcb.udp);
 2299              		.loc 1 1056 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 75


 2300 0062 0023     		movs	r3, #0
 2301 0064 CB61     		str	r3, [r1, #28]
1057:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
 2302              		.loc 1 1057 0
 2303 0066 2368     		ldr	r3, [r4]
 2304 0068 5868     		ldr	r0, [r3, #4]
 2305 006a FFF7FEFF 		bl	udp_remove
 2306              	.LVL316:
 2307              	.L218:
1085:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 2308              		.loc 1 1085 0
 2309 006e 2368     		ldr	r3, [r4]
 2310 0070 0022     		movs	r2, #0
 2311 0072 5A60     		str	r2, [r3, #4]
 2312              	.L217:
1091:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EVENT(msg->conn, NETCONN_EVT_SENDPLUS, 0);
 2313              		.loc 1 1091 0
 2314 0074 2068     		ldr	r0, [r4]
 2315 0076 836A     		ldr	r3, [r0, #40]
 2316 0078 13B1     		cbz	r3, .L222
1091:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EVENT(msg->conn, NETCONN_EVT_SENDPLUS, 0);
 2317              		.loc 1 1091 0 is_stmt 0 discriminator 1
 2318 007a 0022     		movs	r2, #0
 2319 007c 1146     		mov	r1, r2
 2320 007e 9847     		blx	r3
 2321              	.LVL317:
 2322              	.L222:
1092:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2323              		.loc 1 1092 0 is_stmt 1
 2324 0080 2068     		ldr	r0, [r4]
 2325 0082 836A     		ldr	r3, [r0, #40]
 2326 0084 002B     		cmp	r3, #0
 2327 0086 C7D0     		beq	.L216
1092:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2328              		.loc 1 1092 0 is_stmt 0 discriminator 1
 2329 0088 0022     		movs	r2, #0
 2330 008a 0221     		movs	r1, #2
 2331 008c 9847     		blx	r3
 2332              	.LVL318:
 2333 008e C3E7     		b	.L216
 2334              	.LVL319:
 2335              	.L225:
1033:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* This means either a blocking write or blocking connect is running
 2336              		.loc 1 1033 0 is_stmt 1
 2337 0090 037F     		ldrb	r3, [r0, #28]	@ zero_extendqisi2
 2338              	.LVL320:
 2339 0092 13F0040F 		tst	r3, #4
 2340 0096 D6D1     		bne	.L215
 2341 0098 BCE7     		b	.L214
 2342              	.LVL321:
 2343              	.L219:
1064:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->msg.sd.shut = NETCONN_SHUT_RDWR;
 2344              		.loc 1 1064 0
 2345 009a 0423     		movs	r3, #4
 2346 009c 5370     		strb	r3, [r2, #1]
1065:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->current_msg = msg;
 2347              		.loc 1 1065 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 76


 2348 009e 0323     		movs	r3, #3
 2349 00a0 2372     		strb	r3, [r4, #8]
1066:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 2350              		.loc 1 1066 0
 2351 00a2 2368     		ldr	r3, [r4]
 2352 00a4 5C62     		str	r4, [r3, #36]
1068:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LWIP_ASSERT("state!", msg->conn->state == NETCONN_CLOSE);
 2353              		.loc 1 1068 0
 2354 00a6 0021     		movs	r1, #0
 2355 00a8 2068     		ldr	r0, [r4]
 2356 00aa FFF7FEFF 		bl	lwip_netconn_do_close_internal
 2357              	.LVL322:
 2358 00ae 0028     		cmp	r0, #0
 2359 00b0 C6D0     		beq	.L212
1070:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           sys_arch_sem_wait(LWIP_API_MSG_SEM(msg), 0);
 2360              		.loc 1 1070 0
 2361 00b2 064D     		ldr	r5, .L226
 2362 00b4 2846     		mov	r0, r5
 2363 00b6 FFF7FEFF 		bl	sys_mutex_unlock
 2364              	.LVL323:
1071:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LOCK_TCPIP_CORE();
 2365              		.loc 1 1071 0
 2366 00ba 2068     		ldr	r0, [r4]
 2367 00bc 0021     		movs	r1, #0
 2368 00be 0C30     		adds	r0, r0, #12
 2369 00c0 FFF7FEFF 		bl	sys_arch_sem_wait
 2370              	.LVL324:
1072:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LWIP_ASSERT("state!", msg->conn->state == NETCONN_NONE);
 2371              		.loc 1 1072 0
 2372 00c4 2846     		mov	r0, r5
 2373 00c6 FFF7FEFF 		bl	sys_mutex_lock
 2374              	.LVL325:
 2375 00ca 38BD     		pop	{r3, r4, r5, pc}
 2376              	.LVL326:
 2377              	.L227:
 2378              		.align	2
 2379              	.L226:
 2380 00cc 00000000 		.word	lock_tcpip_core
 2381              		.cfi_endproc
 2382              	.LFE154:
 2384              		.section	.text.lwip_netconn_do_bind,"ax",%progbits
 2385              		.align	1
 2386              		.global	lwip_netconn_do_bind
 2387              		.syntax unified
 2388              		.thumb
 2389              		.thumb_func
 2390              		.fpu fpv5-sp-d16
 2392              	lwip_netconn_do_bind:
 2393              	.LFB155:
1108:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 2394              		.loc 1 1108 0
 2395              		.cfi_startproc
 2396              		@ args = 0, pretend = 0, frame = 0
 2397              		@ frame_needed = 0, uses_anonymous_args = 0
 2398              	.LVL327:
 2399 0000 10B5     		push	{r4, lr}
 2400              	.LCFI20:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 77


 2401              		.cfi_def_cfa_offset 8
 2402              		.cfi_offset 4, -8
 2403              		.cfi_offset 14, -4
 2404 0002 0446     		mov	r4, r0
 2405              	.LVL328:
1111:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = msg->conn->last_err;
 2406              		.loc 1 1111 0
 2407 0004 0368     		ldr	r3, [r0]
 2408 0006 93F90820 		ldrsb	r2, [r3, #8]
 2409 000a 12F10C0F 		cmn	r2, #12
 2410 000e 10DA     		bge	.L229
1112:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 2411              		.loc 1 1112 0
 2412 0010 0271     		strb	r2, [r0, #4]
 2413              	.LVL329:
 2414              	.L230:
1154:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2415              		.loc 1 1154 0
 2416 0012 2368     		ldr	r3, [r4]
 2417 0014 63B1     		cbz	r3, .L228
 2418              	.LBB22:
1154:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2419              		.loc 1 1154 0 is_stmt 0 discriminator 1
 2420 0016 FFF7FEFF 		bl	sys_arch_protect
 2421              	.LVL330:
 2422 001a 2368     		ldr	r3, [r4]
 2423 001c 93F90820 		ldrsb	r2, [r3, #8]
 2424 0020 12F10C0F 		cmn	r2, #12
 2425 0024 02DB     		blt	.L234
1154:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2426              		.loc 1 1154 0 discriminator 2
 2427 0026 94F90420 		ldrsb	r2, [r4, #4]
 2428 002a 1A72     		strb	r2, [r3, #8]
 2429              	.L234:
1154:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2430              		.loc 1 1154 0 discriminator 4
 2431 002c FFF7FEFF 		bl	sys_arch_unprotect
 2432              	.LVL331:
 2433              	.L228:
 2434 0030 10BD     		pop	{r4, pc}
 2435              	.LVL332:
 2436              	.L229:
 2437              	.LBE22:
1114:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
 2438              		.loc 1 1114 0 is_stmt 1
 2439 0032 FA22     		movs	r2, #250
 2440 0034 0271     		strb	r2, [r0, #4]
1115:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       const ip_addr_t *ipaddr = API_EXPR_REF(msg->msg.bc.ipaddr);
 2441              		.loc 1 1115 0
 2442 0036 5868     		ldr	r0, [r3, #4]
 2443              	.LVL333:
 2444 0038 0028     		cmp	r0, #0
 2445 003a EAD0     		beq	.L230
 2446              	.LBB23:
1116:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 2447              		.loc 1 1116 0
 2448 003c A168     		ldr	r1, [r4, #8]
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 78


 2449              	.LVL334:
1133:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
 2450              		.loc 1 1133 0
 2451 003e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2452 0040 03F0F003 		and	r3, r3, #240
 2453 0044 102B     		cmp	r3, #16
 2454 0046 06D0     		beq	.L231
 2455 0048 202B     		cmp	r3, #32
 2456 004a E2D1     		bne	.L230
1141:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
 2457              		.loc 1 1141 0
 2458 004c A289     		ldrh	r2, [r4, #12]
 2459 004e FFF7FEFF 		bl	udp_bind
 2460              	.LVL335:
 2461 0052 2071     		strb	r0, [r4, #4]
1142:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
 2462              		.loc 1 1142 0
 2463 0054 DDE7     		b	.L230
 2464              	.LVL336:
 2465              	.L231:
1146:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
 2466              		.loc 1 1146 0
 2467 0056 A289     		ldrh	r2, [r4, #12]
 2468 0058 FFF7FEFF 		bl	tcp_bind
 2469              	.LVL337:
 2470 005c 2071     		strb	r0, [r4, #4]
1147:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 2471              		.loc 1 1147 0
 2472 005e D8E7     		b	.L230
 2473              	.LBE23:
 2474              		.cfi_endproc
 2475              	.LFE155:
 2477              		.section	.text.lwip_netconn_do_connect,"ax",%progbits
 2478              		.align	1
 2479              		.global	lwip_netconn_do_connect
 2480              		.syntax unified
 2481              		.thumb
 2482              		.thumb_func
 2483              		.fpu fpv5-sp-d16
 2485              	lwip_netconn_do_connect:
 2486              	.LFB157:
1216:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 2487              		.loc 1 1216 0
 2488              		.cfi_startproc
 2489              		@ args = 0, pretend = 0, frame = 0
 2490              		@ frame_needed = 0, uses_anonymous_args = 0
 2491              	.LVL338:
 2492 0000 38B5     		push	{r3, r4, r5, lr}
 2493              	.LCFI21:
 2494              		.cfi_def_cfa_offset 16
 2495              		.cfi_offset 3, -16
 2496              		.cfi_offset 4, -12
 2497              		.cfi_offset 5, -8
 2498              		.cfi_offset 14, -4
 2499 0002 0446     		mov	r4, r0
 2500              	.LVL339:
1219:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* This may happen when calling netconn_connect() a second time */
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 79


 2501              		.loc 1 1219 0
 2502 0004 0268     		ldr	r2, [r0]
 2503 0006 5068     		ldr	r0, [r2, #4]
 2504              	.LVL340:
 2505 0008 D8B1     		cbz	r0, .L251
1223:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
 2506              		.loc 1 1223 0
 2507 000a 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 2508 000c 03F0F003 		and	r3, r3, #240
 2509 0010 102B     		cmp	r3, #16
 2510 0012 19D0     		beq	.L240
 2511 0014 202B     		cmp	r3, #32
 2512 0016 53D1     		bne	.L249
1231:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
 2513              		.loc 1 1231 0
 2514 0018 A289     		ldrh	r2, [r4, #12]
 2515 001a A168     		ldr	r1, [r4, #8]
 2516 001c FFF7FEFF 		bl	udp_connect
 2517              	.LVL341:
 2518 0020 2071     		strb	r0, [r4, #4]
 2519              	.L238:
1275:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2520              		.loc 1 1275 0
 2521 0022 2368     		ldr	r3, [r4]
 2522 0024 63B1     		cbz	r3, .L236
 2523              	.LBB24:
1275:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2524              		.loc 1 1275 0 is_stmt 0 discriminator 1
 2525 0026 FFF7FEFF 		bl	sys_arch_protect
 2526              	.LVL342:
 2527 002a 2368     		ldr	r3, [r4]
 2528 002c 93F90820 		ldrsb	r2, [r3, #8]
 2529 0030 12F10C0F 		cmn	r2, #12
 2530 0034 02DB     		blt	.L248
1275:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2531              		.loc 1 1275 0 discriminator 2
 2532 0036 94F90420 		ldrsb	r2, [r4, #4]
 2533 003a 1A72     		strb	r2, [r3, #8]
 2534              	.L248:
1275:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2535              		.loc 1 1275 0 discriminator 4
 2536 003c FFF7FEFF 		bl	sys_arch_unprotect
 2537              	.LVL343:
 2538              	.L236:
 2539 0040 38BD     		pop	{r3, r4, r5, pc}
 2540              	.LVL344:
 2541              	.L251:
 2542              	.LBE24:
1221:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 2543              		.loc 1 1221 0 is_stmt 1
 2544 0042 F123     		movs	r3, #241
 2545 0044 2371     		strb	r3, [r4, #4]
 2546 0046 ECE7     		b	.L238
 2547              	.L240:
1237:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_ALREADY;
 2548              		.loc 1 1237 0
 2549 0048 5378     		ldrb	r3, [r2, #1]	@ zero_extendqisi2
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 80


 2550 004a 032B     		cmp	r3, #3
 2551 004c 03D0     		beq	.L252
1239:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_ISCONN;
 2552              		.loc 1 1239 0
 2553 004e 2BB1     		cbz	r3, .L243
1240:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
 2554              		.loc 1 1240 0
 2555 0050 F623     		movs	r3, #246
 2556 0052 2371     		strb	r3, [r4, #4]
 2557 0054 E5E7     		b	.L238
 2558              	.L252:
1238:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if (msg->conn->state != NETCONN_NONE) {
 2559              		.loc 1 1238 0
 2560 0056 F723     		movs	r3, #247
 2561 0058 2371     		strb	r3, [r4, #4]
 2562 005a E2E7     		b	.L238
 2563              	.L243:
1242:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = tcp_connect(msg->conn->pcb.tcp, API_EXPR_REF(msg->msg.bc.ipaddr),
 2564              		.loc 1 1242 0
 2565 005c 1046     		mov	r0, r2
 2566 005e FFF7FEFF 		bl	setup_tcp
 2567              	.LVL345:
1243:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->msg.bc.port, lwip_netconn_do_connected);
 2568              		.loc 1 1243 0
 2569 0062 2068     		ldr	r0, [r4]
 2570 0064 184B     		ldr	r3, .L253
 2571 0066 A289     		ldrh	r2, [r4, #12]
 2572 0068 A168     		ldr	r1, [r4, #8]
 2573 006a 4068     		ldr	r0, [r0, #4]
 2574 006c FFF7FEFF 		bl	tcp_connect
 2575              	.LVL346:
 2576 0070 2071     		strb	r0, [r4, #4]
1245:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           u8_t non_blocking = netconn_is_nonblocking(msg->conn);
 2577              		.loc 1 1245 0
 2578 0072 0028     		cmp	r0, #0
 2579 0074 D5D1     		bne	.L238
 2580              	.LBB25:
1246:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->state = NETCONN_CONNECT;
 2581              		.loc 1 1246 0
 2582 0076 2268     		ldr	r2, [r4]
 2583 0078 137F     		ldrb	r3, [r2, #28]	@ zero_extendqisi2
 2584              	.LVL347:
1247:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           SET_NONBLOCKING_CONNECT(msg->conn, non_blocking);
 2585              		.loc 1 1247 0
 2586 007a 0321     		movs	r1, #3
 2587 007c 5170     		strb	r1, [r2, #1]
1248:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           if (non_blocking) {
 2588              		.loc 1 1248 0
 2589 007e 13F00203 		ands	r3, r3, #2
 2590              	.LVL348:
 2591 0082 08D0     		beq	.L244
1248:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           if (non_blocking) {
 2592              		.loc 1 1248 0 is_stmt 0 discriminator 1
 2593 0084 2168     		ldr	r1, [r4]
 2594 0086 0A7F     		ldrb	r2, [r1, #28]	@ zero_extendqisi2
 2595              	.LVL349:
 2596 0088 42F00402 		orr	r2, r2, #4
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 81


 2597 008c 0A77     		strb	r2, [r1, #28]
 2598              	.L245:
1249:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             msg->err = ERR_INPROGRESS;
 2599              		.loc 1 1249 0 is_stmt 1
 2600 008e 43B1     		cbz	r3, .L246
1250:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           } else {
 2601              		.loc 1 1250 0
 2602 0090 FB23     		movs	r3, #251
 2603 0092 2371     		strb	r3, [r4, #4]
 2604 0094 C5E7     		b	.L238
 2605              	.LVL350:
 2606              	.L244:
1248:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           if (non_blocking) {
 2607              		.loc 1 1248 0 discriminator 2
 2608 0096 2168     		ldr	r1, [r4]
 2609 0098 0A7F     		ldrb	r2, [r1, #28]	@ zero_extendqisi2
 2610              	.LVL351:
 2611 009a 22F00402 		bic	r2, r2, #4
 2612 009e 0A77     		strb	r2, [r1, #28]
 2613 00a0 F5E7     		b	.L245
 2614              	.L246:
1252:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             /* sys_sem_signal() is called from lwip_netconn_do_connected (or err_tcp()),
 2615              		.loc 1 1252 0
 2616 00a2 2368     		ldr	r3, [r4]
 2617 00a4 5C62     		str	r4, [r3, #36]
1257:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             sys_arch_sem_wait(LWIP_API_MSG_SEM(msg), 0);
 2618              		.loc 1 1257 0
 2619 00a6 094D     		ldr	r5, .L253+4
 2620 00a8 2846     		mov	r0, r5
 2621 00aa FFF7FEFF 		bl	sys_mutex_unlock
 2622              	.LVL352:
1258:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             LOCK_TCPIP_CORE();
 2623              		.loc 1 1258 0
 2624 00ae 2068     		ldr	r0, [r4]
 2625 00b0 0021     		movs	r1, #0
 2626 00b2 0C30     		adds	r0, r0, #12
 2627 00b4 FFF7FEFF 		bl	sys_arch_sem_wait
 2628              	.LVL353:
1259:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             LWIP_ASSERT("state!", msg->conn->state != NETCONN_CONNECT);
 2629              		.loc 1 1259 0
 2630 00b8 2846     		mov	r0, r5
 2631 00ba FFF7FEFF 		bl	sys_mutex_lock
 2632              	.LVL354:
 2633 00be 38BD     		pop	{r3, r4, r5, pc}
 2634              	.LVL355:
 2635              	.L249:
 2636              	.LBE25:
1269:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
 2637              		.loc 1 1269 0 discriminator 1
 2638 00c0 FA23     		movs	r3, #250
 2639 00c2 2371     		strb	r3, [r4, #4]
1270:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 2640              		.loc 1 1270 0 discriminator 1
 2641 00c4 ADE7     		b	.L238
 2642              	.L254:
 2643 00c6 00BF     		.align	2
 2644              	.L253:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 82


 2645 00c8 00000000 		.word	lwip_netconn_do_connected
 2646 00cc 00000000 		.word	lock_tcpip_core
 2647              		.cfi_endproc
 2648              	.LFE157:
 2650              		.section	.text.lwip_netconn_do_disconnect,"ax",%progbits
 2651              		.align	1
 2652              		.global	lwip_netconn_do_disconnect
 2653              		.syntax unified
 2654              		.thumb
 2655              		.thumb_func
 2656              		.fpu fpv5-sp-d16
 2658              	lwip_netconn_do_disconnect:
 2659              	.LFB158:
1287:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 2660              		.loc 1 1287 0
 2661              		.cfi_startproc
 2662              		@ args = 0, pretend = 0, frame = 0
 2663              		@ frame_needed = 0, uses_anonymous_args = 0
 2664              	.LVL356:
 2665 0000 10B5     		push	{r4, lr}
 2666              	.LCFI22:
 2667              		.cfi_def_cfa_offset 8
 2668              		.cfi_offset 4, -8
 2669              		.cfi_offset 14, -4
 2670 0002 0446     		mov	r4, r0
 2671              	.LVL357:
1291:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     udp_disconnect(msg->conn->pcb.udp);
 2672              		.loc 1 1291 0
 2673 0004 0268     		ldr	r2, [r0]
 2674 0006 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 2675 0008 03F0F003 		and	r3, r3, #240
 2676 000c 202B     		cmp	r3, #32
 2677 000e 11D0     		beq	.L261
1297:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2678              		.loc 1 1297 0
 2679 0010 FA23     		movs	r3, #250
 2680 0012 0371     		strb	r3, [r0, #4]
 2681              	.LVL358:
 2682              	.L257:
1299:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2683              		.loc 1 1299 0
 2684 0014 2368     		ldr	r3, [r4]
 2685 0016 63B1     		cbz	r3, .L255
 2686              	.LBB26:
1299:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2687              		.loc 1 1299 0 is_stmt 0 discriminator 1
 2688 0018 FFF7FEFF 		bl	sys_arch_protect
 2689              	.LVL359:
 2690 001c 2368     		ldr	r3, [r4]
 2691 001e 93F90820 		ldrsb	r2, [r3, #8]
 2692 0022 12F10C0F 		cmn	r2, #12
 2693 0026 02DB     		blt	.L259
1299:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2694              		.loc 1 1299 0 discriminator 2
 2695 0028 94F90420 		ldrsb	r2, [r4, #4]
 2696 002c 1A72     		strb	r2, [r3, #8]
 2697              	.L259:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 83


1299:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2698              		.loc 1 1299 0 discriminator 4
 2699 002e FFF7FEFF 		bl	sys_arch_unprotect
 2700              	.LVL360:
 2701              	.L255:
 2702 0032 10BD     		pop	{r4, pc}
 2703              	.LVL361:
 2704              	.L261:
 2705              	.LBE26:
1292:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_OK;
 2706              		.loc 1 1292 0 is_stmt 1
 2707 0034 5068     		ldr	r0, [r2, #4]
 2708              	.LVL362:
 2709 0036 FFF7FEFF 		bl	udp_disconnect
 2710              	.LVL363:
1293:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else
 2711              		.loc 1 1293 0
 2712 003a 0023     		movs	r3, #0
 2713 003c 2371     		strb	r3, [r4, #4]
 2714 003e E9E7     		b	.L257
 2715              		.cfi_endproc
 2716              	.LFE158:
 2718              		.section	.text.lwip_netconn_do_listen,"ax",%progbits
 2719              		.align	1
 2720              		.global	lwip_netconn_do_listen
 2721              		.syntax unified
 2722              		.thumb
 2723              		.thumb_func
 2724              		.fpu fpv5-sp-d16
 2726              	lwip_netconn_do_listen:
 2727              	.LFB159:
1311:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 2728              		.loc 1 1311 0
 2729              		.cfi_startproc
 2730              		@ args = 0, pretend = 0, frame = 0
 2731              		@ frame_needed = 0, uses_anonymous_args = 0
 2732              	.LVL364:
 2733 0000 38B5     		push	{r3, r4, r5, lr}
 2734              	.LCFI23:
 2735              		.cfi_def_cfa_offset 16
 2736              		.cfi_offset 3, -16
 2737              		.cfi_offset 4, -12
 2738              		.cfi_offset 5, -8
 2739              		.cfi_offset 14, -4
 2740 0002 0446     		mov	r4, r0
 2741              	.LVL365:
1314:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = msg->conn->last_err;
 2742              		.loc 1 1314 0
 2743 0004 0368     		ldr	r3, [r0]
 2744 0006 93F90820 		ldrsb	r2, [r3, #8]
 2745 000a 12F10C0F 		cmn	r2, #12
 2746 000e 10DA     		bge	.L263
1315:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 2747              		.loc 1 1315 0
 2748 0010 0271     		strb	r2, [r0, #4]
 2749              	.LVL366:
 2750              	.L264:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 84


1380:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2751              		.loc 1 1380 0
 2752 0012 2368     		ldr	r3, [r4]
 2753 0014 63B1     		cbz	r3, .L262
 2754              	.LBB27:
1380:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2755              		.loc 1 1380 0 is_stmt 0 discriminator 1
 2756 0016 FFF7FEFF 		bl	sys_arch_protect
 2757              	.LVL367:
 2758 001a 2368     		ldr	r3, [r4]
 2759 001c 93F90820 		ldrsb	r2, [r3, #8]
 2760 0020 12F10C0F 		cmn	r2, #12
 2761 0024 02DB     		blt	.L273
1380:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2762              		.loc 1 1380 0 discriminator 2
 2763 0026 94F90420 		ldrsb	r2, [r4, #4]
 2764 002a 1A72     		strb	r2, [r3, #8]
 2765              	.L273:
1380:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2766              		.loc 1 1380 0 discriminator 4
 2767 002c FFF7FEFF 		bl	sys_arch_unprotect
 2768              	.LVL368:
 2769              	.L262:
 2770 0030 38BD     		pop	{r3, r4, r5, pc}
 2771              	.LVL369:
 2772              	.L263:
 2773              	.LBE27:
1317:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
 2774              		.loc 1 1317 0 is_stmt 1
 2775 0032 F522     		movs	r2, #245
 2776 0034 0271     		strb	r2, [r0, #4]
1318:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) {
 2777              		.loc 1 1318 0
 2778 0036 5868     		ldr	r0, [r3, #4]
 2779              	.LVL370:
 2780 0038 0028     		cmp	r0, #0
 2781 003a EAD0     		beq	.L264
1319:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (msg->conn->state == NETCONN_NONE) {
 2782              		.loc 1 1319 0
 2783 003c 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 2784 003e 02F0F002 		and	r2, r2, #240
 2785 0042 102A     		cmp	r2, #16
 2786 0044 02D0     		beq	.L275
1376:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 2787              		.loc 1 1376 0
 2788 0046 F023     		movs	r3, #240
 2789 0048 2371     		strb	r3, [r4, #4]
 2790 004a E2E7     		b	.L264
 2791              	.L275:
1320:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           struct tcp_pcb* lpcb;
 2792              		.loc 1 1320 0
 2793 004c 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 2794 004e 002B     		cmp	r3, #0
 2795 0050 42D1     		bne	.L266
 2796              	.LBB28:
1322:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             /* connection is not closed, cannot listen */
 2797              		.loc 1 1322 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 85


 2798 0052 037D     		ldrb	r3, [r0, #20]	@ zero_extendqisi2
 2799 0054 13B1     		cbz	r3, .L267
1324:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           } else {
 2800              		.loc 1 1324 0
 2801 0056 FA23     		movs	r3, #250
 2802 0058 2371     		strb	r3, [r4, #4]
 2803 005a DAE7     		b	.L264
 2804              	.L267:
1341:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* TCP_LISTEN_BACKLOG */
 2805              		.loc 1 1341 0
 2806 005c FF21     		movs	r1, #255
 2807 005e FFF7FEFF 		bl	tcp_listen_with_backlog
 2808              	.LVL371:
1344:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               /* in this case, the old pcb is still allocated */
 2809              		.loc 1 1344 0
 2810 0062 0546     		mov	r5, r0
 2811 0064 F0B1     		cbz	r0, .L276
1349:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 /** @todo: should we drain the recvmbox here? */
 2812              		.loc 1 1349 0
 2813 0066 2068     		ldr	r0, [r4]
 2814              	.LVL372:
 2815 0068 1030     		adds	r0, r0, #16
 2816 006a FFF7FEFF 		bl	sys_mbox_valid
 2817              	.LVL373:
 2818 006e E0B9     		cbnz	r0, .L277
 2819              	.L269:
1354:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               if (!sys_mbox_valid(&msg->conn->acceptmbox)) {
 2820              		.loc 1 1354 0
 2821 0070 0023     		movs	r3, #0
 2822 0072 2371     		strb	r3, [r4, #4]
1355:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 msg->err = sys_mbox_new(&msg->conn->acceptmbox, DEFAULT_ACCEPTMBOX_SIZE);
 2823              		.loc 1 1355 0
 2824 0074 2068     		ldr	r0, [r4]
 2825 0076 1430     		adds	r0, r0, #20
 2826 0078 FFF7FEFF 		bl	sys_mbox_valid
 2827              	.LVL374:
 2828 007c F0B1     		cbz	r0, .L278
 2829              	.L270:
1358:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 msg->conn->state = NETCONN_LISTEN;
 2830              		.loc 1 1358 0
 2831 007e 94F90430 		ldrsb	r3, [r4, #4]
 2832 0082 13BB     		cbnz	r3, .L271
1359:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 msg->conn->pcb.tcp = lpcb;
 2833              		.loc 1 1359 0
 2834 0084 2368     		ldr	r3, [r4]
 2835 0086 0222     		movs	r2, #2
 2836 0088 5A70     		strb	r2, [r3, #1]
1360:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 tcp_arg(msg->conn->pcb.tcp, msg->conn);
 2837              		.loc 1 1360 0
 2838 008a 2368     		ldr	r3, [r4]
 2839 008c 5D60     		str	r5, [r3, #4]
1361:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 tcp_accept(msg->conn->pcb.tcp, accept_function);
 2840              		.loc 1 1361 0
 2841 008e 2368     		ldr	r3, [r4]
 2842 0090 1946     		mov	r1, r3
 2843 0092 5868     		ldr	r0, [r3, #4]
 2844 0094 FFF7FEFF 		bl	tcp_arg
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 86


 2845              	.LVL375:
1362:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               } else {
 2846              		.loc 1 1362 0
 2847 0098 2368     		ldr	r3, [r4]
 2848 009a 1249     		ldr	r1, .L279
 2849 009c 5868     		ldr	r0, [r3, #4]
 2850 009e FFF7FEFF 		bl	tcp_accept
 2851              	.LVL376:
 2852 00a2 B6E7     		b	.L264
 2853              	.LVL377:
 2854              	.L276:
1346:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             } else {
 2855              		.loc 1 1346 0
 2856 00a4 FF23     		movs	r3, #255
 2857 00a6 2371     		strb	r3, [r4, #4]
 2858 00a8 B3E7     		b	.L264
 2859              	.LVL378:
 2860              	.L277:
1351:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 sys_mbox_set_invalid(&msg->conn->recvmbox);
 2861              		.loc 1 1351 0
 2862 00aa 2068     		ldr	r0, [r4]
 2863 00ac 1030     		adds	r0, r0, #16
 2864 00ae FFF7FEFF 		bl	sys_mbox_free
 2865              	.LVL379:
1352:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               }
 2866              		.loc 1 1352 0
 2867 00b2 2068     		ldr	r0, [r4]
 2868 00b4 1030     		adds	r0, r0, #16
 2869 00b6 FFF7FEFF 		bl	sys_mbox_set_invalid
 2870              	.LVL380:
 2871 00ba D9E7     		b	.L269
 2872              	.L278:
1356:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               }
 2873              		.loc 1 1356 0
 2874 00bc 2068     		ldr	r0, [r4]
 2875 00be 0621     		movs	r1, #6
 2876 00c0 1430     		adds	r0, r0, #20
 2877 00c2 FFF7FEFF 		bl	sys_mbox_new
 2878              	.LVL381:
 2879 00c6 2071     		strb	r0, [r4, #4]
 2880 00c8 D9E7     		b	.L270
 2881              	.L271:
1365:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 msg->conn->pcb.tcp = NULL;
 2882              		.loc 1 1365 0
 2883 00ca 2846     		mov	r0, r5
 2884 00cc FFF7FEFF 		bl	tcp_close
 2885              	.LVL382:
1366:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               }
 2886              		.loc 1 1366 0
 2887 00d0 2368     		ldr	r3, [r4]
 2888 00d2 0022     		movs	r2, #0
 2889 00d4 5A60     		str	r2, [r3, #4]
 2890 00d6 9CE7     		b	.L264
 2891              	.LVL383:
 2892              	.L266:
 2893              	.LBE28:
1370:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           /* already listening, allow updating of the backlog */
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 87


 2894              		.loc 1 1370 0
 2895 00d8 022B     		cmp	r3, #2
 2896 00da 9AD1     		bne	.L264
1372:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           tcp_backlog_set(msg->conn->pcb.tcp, msg->msg.lb.backlog);
 2897              		.loc 1 1372 0
 2898 00dc 0023     		movs	r3, #0
 2899 00de 2371     		strb	r3, [r4, #4]
 2900 00e0 97E7     		b	.L264
 2901              	.L280:
 2902 00e2 00BF     		.align	2
 2903              	.L279:
 2904 00e4 00000000 		.word	accept_function
 2905              		.cfi_endproc
 2906              	.LFE159:
 2908              		.section	.text.lwip_netconn_do_send,"ax",%progbits
 2909              		.align	1
 2910              		.global	lwip_netconn_do_send
 2911              		.syntax unified
 2912              		.thumb
 2913              		.thumb_func
 2914              		.fpu fpv5-sp-d16
 2916              	lwip_netconn_do_send:
 2917              	.LFB160:
1392:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 2918              		.loc 1 1392 0
 2919              		.cfi_startproc
 2920              		@ args = 0, pretend = 0, frame = 0
 2921              		@ frame_needed = 0, uses_anonymous_args = 0
 2922              	.LVL384:
 2923 0000 10B5     		push	{r4, lr}
 2924              	.LCFI24:
 2925              		.cfi_def_cfa_offset 8
 2926              		.cfi_offset 4, -8
 2927              		.cfi_offset 14, -4
 2928 0002 0446     		mov	r4, r0
 2929              	.LVL385:
1395:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = msg->conn->last_err;
 2930              		.loc 1 1395 0
 2931 0004 0368     		ldr	r3, [r0]
 2932 0006 93F90820 		ldrsb	r2, [r3, #8]
 2933 000a 12F10C0F 		cmn	r2, #12
 2934 000e 10DA     		bge	.L282
1396:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 2935              		.loc 1 1396 0
 2936 0010 0271     		strb	r2, [r0, #4]
 2937              	.LVL386:
 2938              	.L283:
1435:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2939              		.loc 1 1435 0
 2940 0012 2368     		ldr	r3, [r4]
 2941 0014 63B1     		cbz	r3, .L281
 2942              	.LBB29:
1435:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2943              		.loc 1 1435 0 is_stmt 0 discriminator 1
 2944 0016 FFF7FEFF 		bl	sys_arch_protect
 2945              	.LVL387:
 2946 001a 2368     		ldr	r3, [r4]
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 88


 2947 001c 93F90820 		ldrsb	r2, [r3, #8]
 2948 0020 12F10C0F 		cmn	r2, #12
 2949 0024 02DB     		blt	.L287
1435:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2950              		.loc 1 1435 0 discriminator 2
 2951 0026 94F90420 		ldrsb	r2, [r4, #4]
 2952 002a 1A72     		strb	r2, [r3, #8]
 2953              	.L287:
1435:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2954              		.loc 1 1435 0 discriminator 4
 2955 002c FFF7FEFF 		bl	sys_arch_unprotect
 2956              	.LVL388:
 2957              	.L281:
 2958 0030 10BD     		pop	{r4, pc}
 2959              	.LVL389:
 2960              	.L282:
 2961              	.LBE29:
1398:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
 2962              		.loc 1 1398 0 is_stmt 1
 2963 0032 F522     		movs	r2, #245
 2964 0034 0271     		strb	r2, [r0, #4]
1399:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       switch (NETCONNTYPE_GROUP(msg->conn->type)) {
 2965              		.loc 1 1399 0
 2966 0036 5868     		ldr	r0, [r3, #4]
 2967              	.LVL390:
 2968 0038 0028     		cmp	r0, #0
 2969 003a EAD0     		beq	.L283
1400:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
 2970              		.loc 1 1400 0
 2971 003c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2972 003e 03F0F003 		and	r3, r3, #240
 2973 0042 202B     		cmp	r3, #32
 2974 0044 E5D1     		bne	.L283
1422:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = udp_send(msg->conn->pcb.udp, msg->msg.b->p);
 2975              		.loc 1 1422 0
 2976 0046 A168     		ldr	r1, [r4, #8]
 2977 0048 8B68     		ldr	r3, [r1, #8]
 2978 004a 23B9     		cbnz	r3, .L285
1423:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else {
 2979              		.loc 1 1423 0
 2980 004c 0968     		ldr	r1, [r1]
 2981 004e FFF7FEFF 		bl	udp_send
 2982              	.LVL391:
 2983 0052 2071     		strb	r0, [r4, #4]
 2984 0054 DDE7     		b	.L283
 2985              	.L285:
1425:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 2986              		.loc 1 1425 0
 2987 0056 8B89     		ldrh	r3, [r1, #12]
 2988 0058 01F10802 		add	r2, r1, #8
 2989 005c 0968     		ldr	r1, [r1]
 2990 005e FFF7FEFF 		bl	udp_sendto
 2991              	.LVL392:
 2992 0062 2071     		strb	r0, [r4, #4]
 2993 0064 D5E7     		b	.L283
 2994              		.cfi_endproc
 2995              	.LFE160:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 89


 2997              		.section	.text.lwip_netconn_do_recv,"ax",%progbits
 2998              		.align	1
 2999              		.global	lwip_netconn_do_recv
 3000              		.syntax unified
 3001              		.thumb
 3002              		.thumb_func
 3003              		.fpu fpv5-sp-d16
 3005              	lwip_netconn_do_recv:
 3006              	.LFB161:
1447:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 3007              		.loc 1 1447 0
 3008              		.cfi_startproc
 3009              		@ args = 0, pretend = 0, frame = 0
 3010              		@ frame_needed = 0, uses_anonymous_args = 0
 3011              	.LVL393:
 3012 0000 70B5     		push	{r4, r5, r6, lr}
 3013              	.LCFI25:
 3014              		.cfi_def_cfa_offset 16
 3015              		.cfi_offset 4, -16
 3016              		.cfi_offset 5, -12
 3017              		.cfi_offset 6, -8
 3018              		.cfi_offset 14, -4
 3019 0002 0646     		mov	r6, r0
 3020              	.LVL394:
1450:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (msg->conn->pcb.tcp != NULL) {
 3021              		.loc 1 1450 0
 3022 0004 0023     		movs	r3, #0
 3023 0006 0371     		strb	r3, [r0, #4]
1451:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) {
 3024              		.loc 1 1451 0
 3025 0008 0368     		ldr	r3, [r0]
 3026 000a 5A68     		ldr	r2, [r3, #4]
 3027 000c 22B1     		cbz	r2, .L290
1452:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       u32_t remaining = msg->msg.r.len;
 3028              		.loc 1 1452 0
 3029 000e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3030 0010 03F0F003 		and	r3, r3, #240
 3031 0014 102B     		cmp	r3, #16
 3032 0016 0FD0     		beq	.L297
 3033              	.LVL395:
 3034              	.L290:
1461:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3035              		.loc 1 1461 0
 3036 0018 3368     		ldr	r3, [r6]
 3037 001a 63B1     		cbz	r3, .L289
 3038              	.LBB30:
1461:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3039              		.loc 1 1461 0 is_stmt 0 discriminator 1
 3040 001c FFF7FEFF 		bl	sys_arch_protect
 3041              	.LVL396:
 3042 0020 3368     		ldr	r3, [r6]
 3043 0022 93F90820 		ldrsb	r2, [r3, #8]
 3044 0026 12F10C0F 		cmn	r2, #12
 3045 002a 02DB     		blt	.L294
1461:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3046              		.loc 1 1461 0 discriminator 2
 3047 002c 96F90420 		ldrsb	r2, [r6, #4]
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 90


 3048 0030 1A72     		strb	r2, [r3, #8]
 3049              	.L294:
1461:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3050              		.loc 1 1461 0 discriminator 4
 3051 0032 FFF7FEFF 		bl	sys_arch_unprotect
 3052              	.LVL397:
 3053              	.L289:
 3054 0036 70BD     		pop	{r4, r5, r6, pc}
 3055              	.LVL398:
 3056              	.L297:
 3057              	.LBE30:
 3058              	.LBB31:
1453:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       do {
 3059              		.loc 1 1453 0 is_stmt 1
 3060 0038 8468     		ldr	r4, [r0, #8]
 3061              	.LVL399:
 3062 003a 08E0     		b	.L292
 3063              	.LVL400:
 3064              	.L295:
 3065              	.LBB32:
1455:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         tcp_recved(msg->conn->pcb.tcp, recved);
 3066              		.loc 1 1455 0
 3067 003c 4FF6FF75 		movw	r5, #65535
 3068              	.L291:
 3069              	.LVL401:
1456:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         remaining -= recved;
 3070              		.loc 1 1456 0 discriminator 4
 3071 0040 3368     		ldr	r3, [r6]
 3072 0042 2946     		mov	r1, r5
 3073 0044 5868     		ldr	r0, [r3, #4]
 3074 0046 FFF7FEFF 		bl	tcp_recved
 3075              	.LVL402:
 3076              	.LBE32:
1458:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 3077              		.loc 1 1458 0 discriminator 4
 3078 004a 641B     		subs	r4, r4, r5
 3079              	.LVL403:
 3080 004c E4D0     		beq	.L290
 3081              	.LVL404:
 3082              	.L292:
 3083              	.LBB33:
1455:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         tcp_recved(msg->conn->pcb.tcp, recved);
 3084              		.loc 1 1455 0
 3085 004e B4F5803F 		cmp	r4, #65536
 3086 0052 F3D2     		bcs	.L295
1455:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         tcp_recved(msg->conn->pcb.tcp, recved);
 3087              		.loc 1 1455 0 is_stmt 0 discriminator 1
 3088 0054 A5B2     		uxth	r5, r4
 3089 0056 F3E7     		b	.L291
 3090              	.LBE33:
 3091              	.LBE31:
 3092              		.cfi_endproc
 3093              	.LFE161:
 3095              		.section	.text.lwip_netconn_do_write,"ax",%progbits
 3096              		.align	1
 3097              		.global	lwip_netconn_do_write
 3098              		.syntax unified
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 91


 3099              		.thumb
 3100              		.thumb_func
 3101              		.fpu fpv5-sp-d16
 3103              	lwip_netconn_do_write:
 3104              	.LFB163:
1636:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1637:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1638:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1639:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Send some data on a TCP pcb contained in a netconn
1640:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_write
1641:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1642:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1643:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1644:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1645:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_write(void *m)
1646:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 3105              		.loc 1 1646 0 is_stmt 1
 3106              		.cfi_startproc
 3107              		@ args = 0, pretend = 0, frame = 0
 3108              		@ frame_needed = 0, uses_anonymous_args = 0
 3109              	.LVL405:
 3110 0000 38B5     		push	{r3, r4, r5, lr}
 3111              	.LCFI26:
 3112              		.cfi_def_cfa_offset 16
 3113              		.cfi_offset 3, -16
 3114              		.cfi_offset 4, -12
 3115              		.cfi_offset 5, -8
 3116              		.cfi_offset 14, -4
 3117 0002 0446     		mov	r4, r0
 3118              	.LVL406:
1647:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1648:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1649:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (ERR_IS_FATAL(msg->conn->last_err)) {
 3119              		.loc 1 1649 0
 3120 0004 0368     		ldr	r3, [r0]
 3121 0006 93F90820 		ldrsb	r2, [r3, #8]
 3122 000a 12F10C0F 		cmn	r2, #12
 3123 000e 0FDA     		bge	.L299
1650:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = msg->conn->last_err;
 3124              		.loc 1 1650 0
 3125 0010 0271     		strb	r2, [r0, #4]
 3126              	.L300:
1651:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
1652:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) {
1653:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1654:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (msg->conn->state != NETCONN_NONE) {
1655:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* netconn is connecting, closing or in blocking write */
1656:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_INPROGRESS;
1657:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if (msg->conn->pcb.tcp != NULL) {
1658:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->state = NETCONN_WRITE;
1659:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* set all the variables used by lwip_netconn_do_writemore */
1660:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("already writing or closing", msg->conn->current_msg == NULL &&
1661:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->write_offset == 0);
1662:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("msg->msg.w.len != 0", msg->msg.w.len != 0);
1663:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->current_msg = msg;
1664:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->write_offset = 0;
1665:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 92


1666:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (lwip_netconn_do_writemore(msg->conn, 0) != ERR_OK) {
1667:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LWIP_ASSERT("state!", msg->conn->state == NETCONN_WRITE);
1668:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           UNLOCK_TCPIP_CORE();
1669:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           sys_arch_sem_wait(LWIP_API_MSG_SEM(msg), 0);
1670:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LOCK_TCPIP_CORE();
1671:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LWIP_ASSERT("state!", msg->conn->state != NETCONN_WRITE);
1672:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1673:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
1674:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         lwip_netconn_do_writemore(msg->conn);
1675:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
1676:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* for both cases: if lwip_netconn_do_writemore was called, don't ACK the APIMSG
1677:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            since lwip_netconn_do_writemore ACKs it! */
1678:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         return;
1679:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1680:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_CONN;
1681:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1682:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_TCP */
1683:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->err = ERR_VAL;
1684:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1685:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if (LWIP_UDP || LWIP_RAW)
1686:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
1687:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->err = ERR_VAL;
1688:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* (LWIP_UDP || LWIP_RAW) */
1689:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1690:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1691:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
 3127              		.loc 1 1691 0
 3128 0012 63B1     		cbz	r3, .L298
 3129              	.LBB34:
 3130              		.loc 1 1691 0 is_stmt 0 discriminator 1
 3131 0014 FFF7FEFF 		bl	sys_arch_protect
 3132              	.LVL407:
 3133 0018 2368     		ldr	r3, [r4]
 3134 001a 93F90820 		ldrsb	r2, [r3, #8]
 3135 001e 12F10C0F 		cmn	r2, #12
 3136 0022 02DB     		blt	.L305
 3137              		.loc 1 1691 0 discriminator 2
 3138 0024 94F90420 		ldrsb	r2, [r4, #4]
 3139 0028 1A72     		strb	r2, [r3, #8]
 3140              	.L305:
 3141              		.loc 1 1691 0 discriminator 4
 3142 002a FFF7FEFF 		bl	sys_arch_unprotect
 3143              	.LVL408:
 3144              	.L298:
 3145 002e 38BD     		pop	{r3, r4, r5, pc}
 3146              	.LVL409:
 3147              	.L299:
 3148              	.LBE34:
1652:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 3149              		.loc 1 1652 0 is_stmt 1
 3150 0030 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 3151 0032 02F0F002 		and	r2, r2, #240
 3152 0036 102A     		cmp	r2, #16
 3153 0038 02D0     		beq	.L307
1687:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* (LWIP_UDP || LWIP_RAW) */
 3154              		.loc 1 1687 0
 3155 003a FA22     		movs	r2, #250
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 93


 3156 003c 0271     		strb	r2, [r0, #4]
 3157 003e E8E7     		b	.L300
 3158              	.L307:
1654:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* netconn is connecting, closing or in blocking write */
 3159              		.loc 1 1654 0
 3160 0040 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 3161 0042 12B1     		cbz	r2, .L302
1656:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if (msg->conn->pcb.tcp != NULL) {
 3162              		.loc 1 1656 0
 3163 0044 FB22     		movs	r2, #251
 3164 0046 0271     		strb	r2, [r0, #4]
 3165 0048 E3E7     		b	.L300
 3166              	.L302:
1657:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->state = NETCONN_WRITE;
 3167              		.loc 1 1657 0
 3168 004a 5A68     		ldr	r2, [r3, #4]
 3169 004c C2B1     		cbz	r2, .L303
1658:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* set all the variables used by lwip_netconn_do_writemore */
 3170              		.loc 1 1658 0
 3171 004e 0122     		movs	r2, #1
 3172 0050 5A70     		strb	r2, [r3, #1]
1660:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->write_offset == 0);
 3173              		.loc 1 1660 0
 3174 0052 0368     		ldr	r3, [r0]
1663:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->write_offset = 0;
 3175              		.loc 1 1663 0
 3176 0054 5862     		str	r0, [r3, #36]
1664:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 3177              		.loc 1 1664 0
 3178 0056 0368     		ldr	r3, [r0]
 3179 0058 0021     		movs	r1, #0
 3180 005a 1962     		str	r1, [r3, #32]
1666:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LWIP_ASSERT("state!", msg->conn->state == NETCONN_WRITE);
 3181              		.loc 1 1666 0
 3182 005c 0068     		ldr	r0, [r0]
 3183              	.LVL410:
 3184 005e FFF7FEFF 		bl	lwip_netconn_do_writemore
 3185              	.LVL411:
 3186 0062 0028     		cmp	r0, #0
 3187 0064 E3D0     		beq	.L298
1668:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           sys_arch_sem_wait(LWIP_API_MSG_SEM(msg), 0);
 3188              		.loc 1 1668 0
 3189 0066 084D     		ldr	r5, .L308
 3190 0068 2846     		mov	r0, r5
 3191 006a FFF7FEFF 		bl	sys_mutex_unlock
 3192              	.LVL412:
1669:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LOCK_TCPIP_CORE();
 3193              		.loc 1 1669 0
 3194 006e 2068     		ldr	r0, [r4]
 3195 0070 0021     		movs	r1, #0
 3196 0072 0C30     		adds	r0, r0, #12
 3197 0074 FFF7FEFF 		bl	sys_arch_sem_wait
 3198              	.LVL413:
1670:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LWIP_ASSERT("state!", msg->conn->state != NETCONN_WRITE);
 3199              		.loc 1 1670 0
 3200 0078 2846     		mov	r0, r5
 3201 007a FFF7FEFF 		bl	sys_mutex_lock
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 94


 3202              	.LVL414:
 3203 007e 38BD     		pop	{r3, r4, r5, pc}
 3204              	.LVL415:
 3205              	.L303:
1680:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 3206              		.loc 1 1680 0
 3207 0080 F522     		movs	r2, #245
 3208 0082 0271     		strb	r2, [r0, #4]
 3209 0084 C5E7     		b	.L300
 3210              	.L309:
 3211 0086 00BF     		.align	2
 3212              	.L308:
 3213 0088 00000000 		.word	lock_tcpip_core
 3214              		.cfi_endproc
 3215              	.LFE163:
 3217              		.section	.text.lwip_netconn_do_getaddr,"ax",%progbits
 3218              		.align	1
 3219              		.global	lwip_netconn_do_getaddr
 3220              		.syntax unified
 3221              		.thumb
 3222              		.thumb_func
 3223              		.fpu fpv5-sp-d16
 3225              	lwip_netconn_do_getaddr:
 3226              	.LFB164:
1692:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1693:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1694:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1695:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Return a connection's local or remote address
1696:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_getaddr
1697:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1698:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1699:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1700:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1701:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_getaddr(void *m)
1702:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 3227              		.loc 1 1702 0
 3228              		.cfi_startproc
 3229              		@ args = 0, pretend = 0, frame = 0
 3230              		@ frame_needed = 0, uses_anonymous_args = 0
 3231              	.LVL416:
1703:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1704:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1705:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (msg->conn->pcb.ip != NULL) {
 3232              		.loc 1 1705 0
 3233 0000 0368     		ldr	r3, [r0]
 3234 0002 5B68     		ldr	r3, [r3, #4]
 3235 0004 002B     		cmp	r3, #0
 3236 0006 48D0     		beq	.L311
1706:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->msg.ad.local) {
 3237              		.loc 1 1706 0
 3238 0008 027C     		ldrb	r2, [r0, #16]	@ zero_extendqisi2
 3239 000a 9AB1     		cbz	r2, .L312
1707:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ip_addr_copy(API_EXPR_DEREF(msg->msg.ad.ipaddr),
 3240              		.loc 1 1707 0
 3241 000c 8268     		ldr	r2, [r0, #8]
 3242 000e 1B68     		ldr	r3, [r3]
 3243 0010 1360     		str	r3, [r2]
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 95


 3244              	.L313:
1708:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->pcb.ip->local_ip);
1709:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
1710:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ip_addr_copy(API_EXPR_DEREF(msg->msg.ad.ipaddr),
1711:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->pcb.ip->remote_ip);
1712:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1713:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_OK;
 3245              		.loc 1 1713 0
 3246 0012 0023     		movs	r3, #0
 3247 0014 0371     		strb	r3, [r0, #4]
1714:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     switch (NETCONNTYPE_GROUP(msg->conn->type)) {
 3248              		.loc 1 1714 0
 3249 0016 0268     		ldr	r2, [r0]
 3250 0018 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 3251 001a 03F0F003 		and	r3, r3, #240
 3252 001e 102B     		cmp	r3, #16
 3253 0020 18D0     		beq	.L315
 3254 0022 202B     		cmp	r3, #32
 3255 0024 21D1     		bne	.L314
1715:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
1716:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     case NETCONN_RAW:
1717:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (msg->msg.ad.local) {
1718:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EXPR_DEREF(msg->msg.ad.port) = msg->conn->pcb.raw->protocol;
1719:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1720:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* return an error as connecting is only a helper for upper layers */
1721:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_CONN;
1722:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1723:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
1724:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_RAW */
1725:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
1726:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     case NETCONN_UDP:
1727:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (msg->msg.ad.local) {
 3256              		.loc 1 1727 0
 3257 0026 037C     		ldrb	r3, [r0, #16]	@ zero_extendqisi2
 3258 0028 43B1     		cbz	r3, .L317
1728:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EXPR_DEREF(msg->msg.ad.port) = msg->conn->pcb.udp->local_port;
 3259              		.loc 1 1728 0
 3260 002a C368     		ldr	r3, [r0, #12]
 3261 002c 5268     		ldr	r2, [r2, #4]
 3262 002e 528A     		ldrh	r2, [r2, #18]
 3263 0030 1A80     		strh	r2, [r3]	@ movhi
 3264 0032 1AE0     		b	.L314
 3265              	.L312:
1710:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->pcb.ip->remote_ip);
 3266              		.loc 1 1710 0
 3267 0034 8268     		ldr	r2, [r0, #8]
 3268 0036 5B68     		ldr	r3, [r3, #4]
 3269 0038 1360     		str	r3, [r2]
 3270 003a EAE7     		b	.L313
 3271              	.L317:
1729:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1730:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if ((msg->conn->pcb.udp->flags & UDP_FLAGS_CONNECTED) == 0) {
 3272              		.loc 1 1730 0
 3273 003c 5368     		ldr	r3, [r2, #4]
 3274 003e 1A7C     		ldrb	r2, [r3, #16]	@ zero_extendqisi2
 3275 0040 12F0040F 		tst	r2, #4
 3276 0044 02D1     		bne	.L318
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 96


1731:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = ERR_CONN;
 3277              		.loc 1 1731 0
 3278 0046 F523     		movs	r3, #245
 3279 0048 0371     		strb	r3, [r0, #4]
 3280 004a 0EE0     		b	.L314
 3281              	.L318:
1732:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else {
1733:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           API_EXPR_DEREF(msg->msg.ad.port) = msg->conn->pcb.udp->remote_port;
 3282              		.loc 1 1733 0
 3283 004c C268     		ldr	r2, [r0, #12]
 3284 004e 9B8A     		ldrh	r3, [r3, #20]
 3285 0050 1380     		strh	r3, [r2]	@ movhi
 3286 0052 0AE0     		b	.L314
 3287              	.L315:
1734:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1735:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1736:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
1737:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
1738:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1739:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     case NETCONN_TCP:
1740:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if ((msg->msg.ad.local == 0) &&
 3288              		.loc 1 1740 0
 3289 0054 037C     		ldrb	r3, [r0, #16]	@ zero_extendqisi2
 3290 0056 1BB9     		cbnz	r3, .L319
1741:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           ((msg->conn->pcb.tcp->state == CLOSED) || (msg->conn->pcb.tcp->state == LISTEN))) {
 3291              		.loc 1 1741 0 discriminator 1
 3292 0058 5168     		ldr	r1, [r2, #4]
 3293 005a 097D     		ldrb	r1, [r1, #20]	@ zero_extendqisi2
1740:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           ((msg->conn->pcb.tcp->state == CLOSED) || (msg->conn->pcb.tcp->state == LISTEN))) {
 3294              		.loc 1 1740 0 discriminator 1
 3295 005c 0129     		cmp	r1, #1
 3296 005e 16D9     		bls	.L328
 3297              	.L319:
1742:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* pcb is not connected and remote name is requested */
1743:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_CONN;
1744:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1745:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EXPR_DEREF(msg->msg.ad.port) = (msg->msg.ad.local ? msg->conn->pcb.tcp->local_port : ms
 3298              		.loc 1 1745 0
 3299 0060 C168     		ldr	r1, [r0, #12]
 3300 0062 BBB1     		cbz	r3, .L320
 3301              		.loc 1 1745 0 is_stmt 0 discriminator 1
 3302 0064 5368     		ldr	r3, [r2, #4]
 3303 0066 DB8A     		ldrh	r3, [r3, #22]
 3304              	.L321:
 3305              		.loc 1 1745 0 discriminator 4
 3306 0068 0B80     		strh	r3, [r1]	@ movhi
 3307              	.L314:
1746:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1747:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
1748:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1749:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     default:
1750:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       LWIP_ASSERT("invalid netconn_type", 0);
1751:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
1752:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1753:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
1754:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_CONN;
1755:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 97


1756:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
 3308              		.loc 1 1756 0 is_stmt 1
 3309 006a 0368     		ldr	r3, [r0]
 3310 006c C3B1     		cbz	r3, .L325
1702:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 3311              		.loc 1 1702 0 discriminator 1
 3312 006e 10B5     		push	{r4, lr}
 3313              	.LCFI27:
 3314              		.cfi_def_cfa_offset 8
 3315              		.cfi_offset 4, -8
 3316              		.cfi_offset 14, -4
 3317 0070 0446     		mov	r4, r0
 3318              	.LBB35:
 3319              		.loc 1 1756 0 discriminator 1
 3320 0072 FFF7FEFF 		bl	sys_arch_protect
 3321              	.LVL417:
 3322 0076 2368     		ldr	r3, [r4]
 3323 0078 93F90820 		ldrsb	r2, [r3, #8]
 3324 007c 12F10C0F 		cmn	r2, #12
 3325 0080 02DB     		blt	.L323
 3326              		.loc 1 1756 0 is_stmt 0 discriminator 2
 3327 0082 94F90420 		ldrsb	r2, [r4, #4]
 3328 0086 1A72     		strb	r2, [r3, #8]
 3329              	.L323:
 3330              		.loc 1 1756 0 discriminator 4
 3331 0088 FFF7FEFF 		bl	sys_arch_unprotect
 3332              	.LVL418:
 3333 008c 10BD     		pop	{r4, pc}
 3334              	.LVL419:
 3335              	.L328:
 3336              	.LCFI28:
 3337              		.cfi_def_cfa_offset 0
 3338              		.cfi_restore 4
 3339              		.cfi_restore 14
 3340              	.LBE35:
1743:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
 3341              		.loc 1 1743 0 is_stmt 1
 3342 008e F523     		movs	r3, #245
 3343 0090 0371     		strb	r3, [r0, #4]
 3344 0092 EAE7     		b	.L314
 3345              	.L320:
1745:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 3346              		.loc 1 1745 0 discriminator 2
 3347 0094 5368     		ldr	r3, [r2, #4]
 3348 0096 1B8B     		ldrh	r3, [r3, #24]
 3349 0098 E6E7     		b	.L321
 3350              	.L311:
1754:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 3351              		.loc 1 1754 0
 3352 009a F523     		movs	r3, #245
 3353 009c 0371     		strb	r3, [r0, #4]
 3354 009e E4E7     		b	.L314
 3355              	.L325:
 3356 00a0 7047     		bx	lr
 3357              		.cfi_endproc
 3358              	.LFE164:
 3360              		.section	.text.lwip_netconn_do_close,"ax",%progbits
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 98


 3361              		.align	1
 3362              		.global	lwip_netconn_do_close
 3363              		.syntax unified
 3364              		.thumb
 3365              		.thumb_func
 3366              		.fpu fpv5-sp-d16
 3368              	lwip_netconn_do_close:
 3369              	.LFB165:
1757:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1758:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1759:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1760:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Close or half-shutdown a TCP pcb contained in a netconn
1761:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_close
1762:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * In contrast to closing sockets, the netconn is not deallocated.
1763:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1764:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1765:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1766:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1767:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_close(void *m)
1768:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 3370              		.loc 1 1768 0
 3371              		.cfi_startproc
 3372              		@ args = 0, pretend = 0, frame = 0
 3373              		@ frame_needed = 0, uses_anonymous_args = 0
 3374              	.LVL420:
 3375 0000 38B5     		push	{r3, r4, r5, lr}
 3376              	.LCFI29:
 3377              		.cfi_def_cfa_offset 16
 3378              		.cfi_offset 3, -16
 3379              		.cfi_offset 4, -12
 3380              		.cfi_offset 5, -8
 3381              		.cfi_offset 14, -4
 3382 0002 0446     		mov	r4, r0
 3383              	.LVL421:
1769:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1770:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1771:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1772:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   enum netconn_state state = msg->conn->state;
 3384              		.loc 1 1772 0
 3385 0004 0068     		ldr	r0, [r0]
 3386              	.LVL422:
 3387 0006 4278     		ldrb	r2, [r0, #1]	@ zero_extendqisi2
 3388              	.LVL423:
1773:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* First check if this is a TCP netconn and if it is in a correct state
1774:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (LISTEN doesn't support half shutdown) */
1775:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if ((msg->conn->pcb.tcp != NULL) &&
 3389              		.loc 1 1775 0
 3390 0008 4368     		ldr	r3, [r0, #4]
 3391 000a 23B1     		cbz	r3, .L330
1776:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) &&
 3392              		.loc 1 1776 0 discriminator 1
 3393 000c 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
1775:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) &&
 3394              		.loc 1 1775 0 discriminator 1
 3395 000e 03F0F003 		and	r3, r3, #240
 3396 0012 102B     		cmp	r3, #16
 3397 0014 10D0     		beq	.L339
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 99


 3398              	.L330:
1777:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ((msg->msg.sd.shut == NETCONN_SHUT_RDWR) || (state != NETCONN_LISTEN))) {
1778:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Check if we are in a connected state */
1779:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (state == NETCONN_CONNECT) {
1780:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* TCP connect in progress: cannot shutdown */
1781:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->err = ERR_CONN;
1782:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else if (state == NETCONN_WRITE) {
1783:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_NETCONN_FULLDUPLEX
1784:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (msg->msg.sd.shut & NETCONN_SHUT_WR) {
1785:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* close requested, abort running write */
1786:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         sys_sem_t* op_completed_sem;
1787:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("msg->conn->current_msg != NULL", msg->conn->current_msg != NULL);
1788:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         op_completed_sem = LWIP_API_MSG_SEM(msg->conn->current_msg);
1789:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->current_msg->err = ERR_CLSD;
1790:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->current_msg = NULL;
1791:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->write_offset = 0;
1792:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->state = NETCONN_NONE;
1793:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         NETCONN_SET_SAFE_ERR(msg->conn, ERR_CLSD);
1794:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         sys_sem_signal(op_completed_sem);
1795:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1796:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("msg->msg.sd.shut == NETCONN_SHUT_RD", msg->msg.sd.shut == NETCONN_SHUT_RD);
1797:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* In this case, let the write continue and do not interfere with
1798:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            conn->current_msg or conn->state! */
1799:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = tcp_shutdown(msg->conn->pcb.tcp, 1, 0);
1800:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1801:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_NETCONN_FULLDUPLEX */
1802:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->err = ERR_INPROGRESS;
1803:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_NETCONN_FULLDUPLEX */
1804:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
1805:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (msg->msg.sd.shut & NETCONN_SHUT_RD) {
1806:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* Drain and delete mboxes */
1807:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         netconn_drain(msg->conn);
1808:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1809:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       LWIP_ASSERT("already writing or closing", msg->conn->current_msg == NULL &&
1810:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->write_offset == 0);
1811:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->conn->state = NETCONN_CLOSE;
1812:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->conn->current_msg = msg;
1813:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
1814:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (lwip_netconn_do_close_internal(msg->conn, 0) != ERR_OK) {
1815:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("state!", msg->conn->state == NETCONN_CLOSE);
1816:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         UNLOCK_TCPIP_CORE();
1817:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         sys_arch_sem_wait(LWIP_API_MSG_SEM(msg), 0);
1818:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LOCK_TCPIP_CORE();
1819:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("state!", msg->conn->state == NETCONN_NONE);
1820:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1821:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
1822:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       lwip_netconn_do_close_internal(msg->conn);
1823:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
1824:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* for tcp netconns, lwip_netconn_do_close_internal ACKs the message */
1825:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       return;
1826:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1827:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else
1828:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1829:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   {
1830:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_CONN;
 3399              		.loc 1 1830 0
 3400 0016 F523     		movs	r3, #245
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 100


 3401 0018 2371     		strb	r3, [r4, #4]
 3402              	.L333:
1831:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1832:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
 3403              		.loc 1 1832 0
 3404 001a 60B1     		cbz	r0, .L329
 3405              	.LBB36:
 3406              		.loc 1 1832 0 is_stmt 0 discriminator 1
 3407 001c FFF7FEFF 		bl	sys_arch_protect
 3408              	.LVL424:
 3409 0020 2368     		ldr	r3, [r4]
 3410 0022 93F90820 		ldrsb	r2, [r3, #8]
 3411 0026 12F10C0F 		cmn	r2, #12
 3412 002a 02DB     		blt	.L337
 3413              		.loc 1 1832 0 discriminator 2
 3414 002c 94F90420 		ldrsb	r2, [r4, #4]
 3415 0030 1A72     		strb	r2, [r3, #8]
 3416              	.L337:
 3417              		.loc 1 1832 0 discriminator 4
 3418 0032 FFF7FEFF 		bl	sys_arch_unprotect
 3419              	.LVL425:
 3420              	.L329:
 3421 0036 38BD     		pop	{r3, r4, r5, pc}
 3422              	.LVL426:
 3423              	.L339:
 3424              	.LBE36:
1777:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ((msg->msg.sd.shut == NETCONN_SHUT_RDWR) || (state != NETCONN_LISTEN))) {
 3425              		.loc 1 1777 0 is_stmt 1
 3426 0038 237A     		ldrb	r3, [r4, #8]	@ zero_extendqisi2
1776:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ((msg->msg.sd.shut == NETCONN_SHUT_RDWR) || (state != NETCONN_LISTEN))) {
 3427              		.loc 1 1776 0
 3428 003a 032B     		cmp	r3, #3
 3429 003c 01D0     		beq	.L331
1777:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ((msg->msg.sd.shut == NETCONN_SHUT_RDWR) || (state != NETCONN_LISTEN))) {
 3430              		.loc 1 1777 0
 3431 003e 022A     		cmp	r2, #2
 3432 0040 E9D0     		beq	.L330
 3433              	.L331:
1779:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* TCP connect in progress: cannot shutdown */
 3434              		.loc 1 1779 0
 3435 0042 032A     		cmp	r2, #3
 3436 0044 1CD0     		beq	.L340
1782:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_NETCONN_FULLDUPLEX
 3437              		.loc 1 1782 0
 3438 0046 012A     		cmp	r2, #1
 3439 0048 1DD0     		beq	.L341
1805:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* Drain and delete mboxes */
 3440              		.loc 1 1805 0
 3441 004a 13F0010F 		tst	r3, #1
 3442 004e 1DD1     		bne	.L342
 3443              	.LVL427:
 3444              	.L335:
1809:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->write_offset == 0);
 3445              		.loc 1 1809 0
 3446 0050 2368     		ldr	r3, [r4]
1811:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->conn->current_msg = msg;
 3447              		.loc 1 1811 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 101


 3448 0052 0422     		movs	r2, #4
 3449 0054 5A70     		strb	r2, [r3, #1]
1812:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 3450              		.loc 1 1812 0
 3451 0056 2368     		ldr	r3, [r4]
 3452 0058 5C62     		str	r4, [r3, #36]
1814:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("state!", msg->conn->state == NETCONN_CLOSE);
 3453              		.loc 1 1814 0
 3454 005a 0021     		movs	r1, #0
 3455 005c 2068     		ldr	r0, [r4]
 3456 005e FFF7FEFF 		bl	lwip_netconn_do_close_internal
 3457              	.LVL428:
 3458 0062 0028     		cmp	r0, #0
 3459 0064 E7D0     		beq	.L329
1816:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         sys_arch_sem_wait(LWIP_API_MSG_SEM(msg), 0);
 3460              		.loc 1 1816 0
 3461 0066 0B4D     		ldr	r5, .L343
 3462 0068 2846     		mov	r0, r5
 3463 006a FFF7FEFF 		bl	sys_mutex_unlock
 3464              	.LVL429:
1817:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LOCK_TCPIP_CORE();
 3465              		.loc 1 1817 0
 3466 006e 2068     		ldr	r0, [r4]
 3467 0070 0021     		movs	r1, #0
 3468 0072 0C30     		adds	r0, r0, #12
 3469 0074 FFF7FEFF 		bl	sys_arch_sem_wait
 3470              	.LVL430:
1818:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("state!", msg->conn->state == NETCONN_NONE);
 3471              		.loc 1 1818 0
 3472 0078 2846     		mov	r0, r5
 3473 007a FFF7FEFF 		bl	sys_mutex_lock
 3474              	.LVL431:
 3475 007e 38BD     		pop	{r3, r4, r5, pc}
 3476              	.LVL432:
 3477              	.L340:
1781:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else if (state == NETCONN_WRITE) {
 3478              		.loc 1 1781 0
 3479 0080 F523     		movs	r3, #245
 3480 0082 2371     		strb	r3, [r4, #4]
 3481 0084 C9E7     		b	.L333
 3482              	.L341:
1802:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_NETCONN_FULLDUPLEX */
 3483              		.loc 1 1802 0
 3484 0086 FB23     		movs	r3, #251
 3485 0088 2371     		strb	r3, [r4, #4]
 3486 008a C6E7     		b	.L333
 3487              	.L342:
1807:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 3488              		.loc 1 1807 0
 3489 008c FFF7FEFF 		bl	netconn_drain
 3490              	.LVL433:
 3491 0090 DEE7     		b	.L335
 3492              	.L344:
 3493 0092 00BF     		.align	2
 3494              	.L343:
 3495 0094 00000000 		.word	lock_tcpip_core
 3496              		.cfi_endproc
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 102


 3497              	.LFE165:
 3499              		.comm	netconn_aborted,1,1
 3500              		.text
 3501              	.Letext0:
 3502              		.file 2 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\machine\\_default_types.h"
 3503              		.file 3 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\_stdint.h"
 3504              		.file 4 "Drivers/CMSIS/Include/core_cm7.h"
 3505              		.file 5 "Drivers/CMSIS/Device/ST/STM32F7xx/Include/system_stm32f7xx.h"
 3506              		.file 6 "c:\\gcc_toolchain\\6_2017-q1-update\\lib\\gcc\\arm-none-eabi\\6.3.1\\include\\stddef.h"
 3507              		.file 7 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\lock.h"
 3508              		.file 8 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\_types.h"
 3509              		.file 9 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\reent.h"
 3510              		.file 10 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\stdlib.h"
 3511              		.file 11 "Middlewares/Third_Party/LwIP/system/arch/cc.h"
 3512              		.file 12 "Middlewares/Third_Party/LwIP/src/include/lwip/arch.h"
 3513              		.file 13 "Middlewares/Third_Party/LwIP/src/include/lwip/ip4_addr.h"
 3514              		.file 14 "Middlewares/Third_Party/LwIP/src/include/lwip/ip_addr.h"
 3515              		.file 15 "Middlewares/Third_Party/LwIP/src/include/lwip/err.h"
 3516              		.file 16 "Middlewares/Third_Party/FreeRTOS/Source/include/queue.h"
 3517              		.file 17 "Middlewares/Third_Party/FreeRTOS/Source/include/semphr.h"
 3518              		.file 18 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.h"
 3519              		.file 19 "Middlewares/Third_Party/LwIP/system/arch/sys_arch.h"
 3520              		.file 20 "Middlewares/Third_Party/LwIP/src/include/lwip/pbuf.h"
 3521              		.file 21 "Middlewares/Third_Party/LwIP/src/include/lwip/memp.h"
 3522              		.file 22 "Middlewares/Third_Party/LwIP/src/include/lwip/priv/memp_priv.h"
 3523              		.file 23 "Middlewares/Third_Party/LwIP/src/include/lwip/netif.h"
 3524              		.file 24 "Middlewares/Third_Party/LwIP/src/include/lwip/netbuf.h"
 3525              		.file 25 "Middlewares/Third_Party/LwIP/src/include/lwip/api.h"
 3526              		.file 26 "Middlewares/Third_Party/LwIP/src/include/lwip/ip.h"
 3527              		.file 27 "Middlewares/Third_Party/LwIP/src/include/lwip/tcp.h"
 3528              		.file 28 "Middlewares/Third_Party/LwIP/src/include/lwip/udp.h"
 3529              		.file 29 "Middlewares/Third_Party/LwIP/src/include/lwip/priv/api_msg.h"
 3530              		.file 30 "Middlewares/Third_Party/LwIP/src/include/lwip/timeouts.h"
 3531              		.file 31 "Middlewares/Third_Party/LwIP/src/include/lwip/tcpip.h"
 3532              		.file 32 "Middlewares/Third_Party/LwIP/src/include/lwip/prot/ip4.h"
 3533              		.file 33 "Middlewares/Third_Party/LwIP/src/include/lwip/sys.h"
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 103


DEFINED SYMBOLS
                            *ABS*:00000000 api_msg.c
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:18     .text.recv_udp:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:24     .text.recv_udp:00000000 recv_udp
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:133    .text.setup_tcp:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:139    .text.setup_tcp:00000000 setup_tcp
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:186    .text.setup_tcp:00000030 $d
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:1510   .text.recv_tcp:00000000 recv_tcp
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:1415   .text.sent_tcp:00000000 sent_tcp
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:1322   .text.poll_tcp:00000000 poll_tcp
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:299    .text.err_tcp:00000000 err_tcp
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:194    .text.pcb_new:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:200    .text.pcb_new:00000000 pcb_new
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:288    .text.pcb_new:00000060 $d
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:293    .text.err_tcp:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:498    .text.lwip_netconn_do_connected:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:504    .text.lwip_netconn_do_connected:00000000 lwip_netconn_do_connected
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:626    .text.lwip_netconn_do_writemore:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:632    .text.lwip_netconn_do_writemore:00000000 lwip_netconn_do_writemore
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:957    .text.lwip_netconn_do_close_internal:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:963    .text.lwip_netconn_do_close_internal:00000000 lwip_netconn_do_close_internal
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:1309   .text.lwip_netconn_do_close_internal:00000190 $d
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:1316   .text.poll_tcp:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:1409   .text.sent_tcp:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:1504   .text.recv_tcp:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:1630   .text.lwip_netconn_do_newconn:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:1637   .text.lwip_netconn_do_newconn:00000000 lwip_netconn_do_newconn
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:1691   .text.netconn_alloc:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:1698   .text.netconn_alloc:00000000 netconn_alloc
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:1794   .text.netconn_free:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:1801   .text.netconn_free:00000000 netconn_free
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:1844   .text.netconn_drain:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:1850   .text.netconn_drain:00000000 netconn_drain
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:1986   .text.netconn_drain:000000a0 $d
                            *COM*:00000001 netconn_aborted
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:1991   .text.accept_function:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:1997   .text.accept_function:00000000 accept_function
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:2199   .text.accept_function:000000fc $d
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:2204   .text.lwip_netconn_do_delconn:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:2211   .text.lwip_netconn_do_delconn:00000000 lwip_netconn_do_delconn
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:2380   .text.lwip_netconn_do_delconn:000000cc $d
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:2385   .text.lwip_netconn_do_bind:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:2392   .text.lwip_netconn_do_bind:00000000 lwip_netconn_do_bind
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:2478   .text.lwip_netconn_do_connect:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:2485   .text.lwip_netconn_do_connect:00000000 lwip_netconn_do_connect
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:2645   .text.lwip_netconn_do_connect:000000c8 $d
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:2651   .text.lwip_netconn_do_disconnect:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:2658   .text.lwip_netconn_do_disconnect:00000000 lwip_netconn_do_disconnect
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:2719   .text.lwip_netconn_do_listen:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:2726   .text.lwip_netconn_do_listen:00000000 lwip_netconn_do_listen
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:2904   .text.lwip_netconn_do_listen:000000e4 $d
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:2909   .text.lwip_netconn_do_send:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:2916   .text.lwip_netconn_do_send:00000000 lwip_netconn_do_send
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:2998   .text.lwip_netconn_do_recv:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:3005   .text.lwip_netconn_do_recv:00000000 lwip_netconn_do_recv
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:3096   .text.lwip_netconn_do_write:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:3103   .text.lwip_netconn_do_write:00000000 lwip_netconn_do_write
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s 			page 104


C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:3213   .text.lwip_netconn_do_write:00000088 $d
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:3218   .text.lwip_netconn_do_getaddr:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:3225   .text.lwip_netconn_do_getaddr:00000000 lwip_netconn_do_getaddr
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:3361   .text.lwip_netconn_do_close:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:3368   .text.lwip_netconn_do_close:00000000 lwip_netconn_do_close
C:\Users\Student\AppData\Local\Temp\ccv7cdTr.s:3495   .text.lwip_netconn_do_close:00000094 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
sys_mbox_valid
pbuf_free
memp_malloc
sys_mbox_trypost
netbuf_delete
tcp_arg
tcp_recv
tcp_sent
tcp_poll
tcp_err
udp_new
udp_recv
tcp_new
sys_arch_protect
sys_arch_unprotect
sys_sem_valid
sys_sem_signal
tcp_write
tcp_output
tcp_close
tcp_accept
tcp_shutdown
tcp_abort
tcp_recved
sys_mbox_new
sys_sem_new
sys_mbox_set_invalid
sys_mbox_free
memp_free
sys_sem_free
sys_sem_set_invalid
sys_arch_mbox_tryfetch
udp_remove
sys_mutex_unlock
sys_arch_sem_wait
sys_mutex_lock
lock_tcpip_core
udp_bind
tcp_bind
udp_connect
tcp_connect
udp_disconnect
tcp_listen_with_backlog
udp_send
udp_sendto
